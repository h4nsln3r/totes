var x5=Object.defineProperty;var k5=Object.getPrototypeOf;var I5=Reflect.get;var L5=(t,e,i)=>e in t?x5(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var $e=(t,e,i)=>(L5(t,typeof e!="symbol"?e+"":e,i),i),ky=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)};var F=(t,e,i)=>(ky(t,e,"read from private field"),i?i.call(t):e.get(t)),he=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Se=(t,e,i,n)=>(ky(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i);var it=(t,e,i)=>(ky(t,e,"access private method"),i),Kf=(t,e,i)=>I5(k5(t),i,e);function R5(t,e){for(var i=0;i<e.length;i++){const n=e[i];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();function Oc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var BD={exports:{}},mv={},VD={exports:{}},Ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xf=Symbol.for("react.element"),w5=Symbol.for("react.portal"),C5=Symbol.for("react.fragment"),D5=Symbol.for("react.strict_mode"),P5=Symbol.for("react.profiler"),O5=Symbol.for("react.provider"),M5=Symbol.for("react.context"),N5=Symbol.for("react.forward_ref"),$5=Symbol.for("react.suspense"),F5=Symbol.for("react.memo"),U5=Symbol.for("react.lazy"),yk=Symbol.iterator;function B5(t){return t===null||typeof t!="object"?null:(t=yk&&t[yk]||t["@@iterator"],typeof t=="function"?t:null)}var HD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},KD=Object.assign,GD={};function Mc(t,e,i){this.props=t,this.context=e,this.refs=GD,this.updater=i||HD}Mc.prototype.isReactComponent={};Mc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WD(){}WD.prototype=Mc.prototype;function $S(t,e,i){this.props=t,this.context=e,this.refs=GD,this.updater=i||HD}var FS=$S.prototype=new WD;FS.constructor=$S;KD(FS,Mc.prototype);FS.isPureReactComponent=!0;var Ek=Array.isArray,jD=Object.prototype.hasOwnProperty,US={current:null},YD={key:!0,ref:!0,__self:!0,__source:!0};function qD(t,e,i){var n,r={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)jD.call(e,n)&&!YD.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=i;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(n in o=t.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:xf,type:t,key:s,ref:a,props:r,_owner:US.current}}function V5(t,e){return{$$typeof:xf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function BS(t){return typeof t=="object"&&t!==null&&t.$$typeof===xf}function H5(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(i){return e[i]})}var Tk=/\/+/g;function Iy(t,e){return typeof t=="object"&&t!==null&&t.key!=null?H5(""+t.key):e.toString(36)}function Qm(t,e,i,n,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case xf:case w5:a=!0}}if(a)return a=t,r=r(a),t=n===""?"."+Iy(a,0):n,Ek(r)?(i="",t!=null&&(i=t.replace(Tk,"$&/")+"/"),Qm(r,e,i,"",function(u){return u})):r!=null&&(BS(r)&&(r=V5(r,i+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(Tk,"$&/")+"/")+t)),e.push(r)),1;if(a=0,n=n===""?".":n+":",Ek(t))for(var o=0;o<t.length;o++){s=t[o];var l=n+Iy(s,o);a+=Qm(s,e,i,l,r)}else if(l=B5(t),typeof l=="function")for(t=l.call(t),o=0;!(s=t.next()).done;)s=s.value,l=n+Iy(s,o++),a+=Qm(s,e,i,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Gf(t,e,i){if(t==null)return t;var n=[],r=0;return Qm(t,n,"","",function(s){return e.call(i,s,r++)}),n}function K5(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(i){(t._status===0||t._status===-1)&&(t._status=1,t._result=i)},function(i){(t._status===0||t._status===-1)&&(t._status=2,t._result=i)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ni={current:null},Xm={transition:null},G5={ReactCurrentDispatcher:Ni,ReactCurrentBatchConfig:Xm,ReactCurrentOwner:US};function zD(){throw Error("act(...) is not supported in production builds of React.")}Ie.Children={map:Gf,forEach:function(t,e,i){Gf(t,function(){e.apply(this,arguments)},i)},count:function(t){var e=0;return Gf(t,function(){e++}),e},toArray:function(t){return Gf(t,function(e){return e})||[]},only:function(t){if(!BS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ie.Component=Mc;Ie.Fragment=C5;Ie.Profiler=P5;Ie.PureComponent=$S;Ie.StrictMode=D5;Ie.Suspense=$5;Ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G5;Ie.act=zD;Ie.cloneElement=function(t,e,i){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=KD({},t.props),r=t.key,s=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=US.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var o=t.type.defaultProps;for(l in e)jD.call(e,l)&&!YD.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:xf,type:t.type,key:r,ref:s,props:n,_owner:a}};Ie.createContext=function(t){return t={$$typeof:M5,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:O5,_context:t},t.Consumer=t};Ie.createElement=qD;Ie.createFactory=function(t){var e=qD.bind(null,t);return e.type=t,e};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(t){return{$$typeof:N5,render:t}};Ie.isValidElement=BS;Ie.lazy=function(t){return{$$typeof:U5,_payload:{_status:-1,_result:t},_init:K5}};Ie.memo=function(t,e){return{$$typeof:F5,type:t,compare:e===void 0?null:e}};Ie.startTransition=function(t){var e=Xm.transition;Xm.transition={};try{t()}finally{Xm.transition=e}};Ie.unstable_act=zD;Ie.useCallback=function(t,e){return Ni.current.useCallback(t,e)};Ie.useContext=function(t){return Ni.current.useContext(t)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(t){return Ni.current.useDeferredValue(t)};Ie.useEffect=function(t,e){return Ni.current.useEffect(t,e)};Ie.useId=function(){return Ni.current.useId()};Ie.useImperativeHandle=function(t,e,i){return Ni.current.useImperativeHandle(t,e,i)};Ie.useInsertionEffect=function(t,e){return Ni.current.useInsertionEffect(t,e)};Ie.useLayoutEffect=function(t,e){return Ni.current.useLayoutEffect(t,e)};Ie.useMemo=function(t,e){return Ni.current.useMemo(t,e)};Ie.useReducer=function(t,e,i){return Ni.current.useReducer(t,e,i)};Ie.useRef=function(t){return Ni.current.useRef(t)};Ie.useState=function(t){return Ni.current.useState(t)};Ie.useSyncExternalStore=function(t,e,i){return Ni.current.useSyncExternalStore(t,e,i)};Ie.useTransition=function(){return Ni.current.useTransition()};Ie.version="18.3.1";VD.exports=Ie;var G=VD.exports;const ai=Oc(G),mT=R5({__proto__:null,default:ai},[G]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W5=G,j5=Symbol.for("react.element"),Y5=Symbol.for("react.fragment"),q5=Object.prototype.hasOwnProperty,z5=W5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Q5={key:!0,ref:!0,__self:!0,__source:!0};function QD(t,e,i){var n,r={},s=null,a=null;i!==void 0&&(s=""+i),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)q5.call(e,n)&&!Q5.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:j5,type:t,key:s,ref:a,props:r,_owner:z5.current}}mv.Fragment=Y5;mv.jsx=QD;mv.jsxs=QD;BD.exports=mv;var q=BD.exports,pT={},XD={exports:{}},Tn={},ZD={exports:{}},JD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,K){var z=C.length;C.push(K);e:for(;0<z;){var H=z-1>>>1,Y=C[H];if(0<r(Y,K))C[H]=K,C[z]=Y,z=H;else break e}}function i(C){return C.length===0?null:C[0]}function n(C){if(C.length===0)return null;var K=C[0],z=C.pop();if(z!==K){C[0]=z;e:for(var H=0,Y=C.length,oe=Y>>>1;H<oe;){var pe=2*(H+1)-1,fe=C[pe],Ee=pe+1,dt=C[Ee];if(0>r(fe,z))Ee<Y&&0>r(dt,fe)?(C[H]=dt,C[Ee]=z,H=Ee):(C[H]=fe,C[pe]=z,H=pe);else if(Ee<Y&&0>r(dt,z))C[H]=dt,C[Ee]=z,H=Ee;else break e}}return K}function r(C,K){var z=C.sortIndex-K.sortIndex;return z!==0?z:C.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();t.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,d=null,h=3,f=!1,m=!1,p=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(C){for(var K=i(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=C)n(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=i(u)}}function T(C){if(p=!1,E(C),!m)if(i(l)!==null)m=!0,U(_);else{var K=i(u);K!==null&&V(T,K.startTime-C)}}function _(C,K){m=!1,p&&(p=!1,g(I),I=-1),f=!0;var z=h;try{for(E(K),d=i(l);d!==null&&(!(d.expirationTime>K)||C&&!R());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var Y=H(d.expirationTime<=K);K=t.unstable_now(),typeof Y=="function"?d.callback=Y:d===i(l)&&n(l),E(K)}else n(l);d=i(l)}if(d!==null)var oe=!0;else{var pe=i(u);pe!==null&&V(T,pe.startTime-K),oe=!1}return oe}finally{d=null,h=z,f=!1}}var x=!1,A=null,I=-1,L=5,b=-1;function R(){return!(t.unstable_now()-b<L)}function P(){if(A!==null){var C=t.unstable_now();b=C;var K=!0;try{K=A(!0,C)}finally{K?w():(x=!1,A=null)}}else x=!1}var w;if(typeof v=="function")w=function(){v(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,B=$.port2;$.port1.onmessage=P,w=function(){B.postMessage(null)}}else w=function(){y(P,0)};function U(C){A=C,x||(x=!0,w())}function V(C,K){I=y(function(){C(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,U(_))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return i(l)},t.unstable_next=function(C){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var z=h;h=K;try{return C()}finally{h=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,K){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var z=h;h=C;try{return K()}finally{h=z}},t.unstable_scheduleCallback=function(C,K,z){var H=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?H+z:H):z=H,C){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=z+Y,C={id:c++,callback:K,priorityLevel:C,startTime:z,expirationTime:Y,sortIndex:-1},z>H?(C.sortIndex=z,e(u,C),i(l)===null&&C===i(u)&&(p?(g(I),I=-1):p=!0,V(T,z-H))):(C.sortIndex=Y,e(l,C),m||f||(m=!0,U(_))),C},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(C){var K=h;return function(){var z=h;h=K;try{return C.apply(this,arguments)}finally{h=z}}}})(JD);ZD.exports=JD;var X5=ZD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Z5=G,yn=X5;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)e+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eP=new Set,_h={};function ml(t,e){dc(t,e),dc(t+"Capture",e)}function dc(t,e){for(_h[t]=e,t=0;t<e.length;t++)eP.add(e[t])}var Ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),gT=Object.prototype.hasOwnProperty,J5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bk={},Sk={};function eU(t){return gT.call(Sk,t)?!0:gT.call(bk,t)?!1:J5.test(t)?Sk[t]=!0:(bk[t]=!0,!1)}function tU(t,e,i,n){if(i!==null&&i.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iU(t,e,i,n){if(e===null||typeof e>"u"||tU(t,e,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $i(t,e,i,n,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var Ei={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ei[t]=new $i(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ei[e]=new $i(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ei[t]=new $i(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ei[t]=new $i(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ei[t]=new $i(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ei[t]=new $i(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ei[t]=new $i(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ei[t]=new $i(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ei[t]=new $i(t,5,!1,t.toLowerCase(),null,!1,!1)});var VS=/[\-:]([a-z])/g;function HS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(VS,HS);Ei[e]=new $i(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(VS,HS);Ei[e]=new $i(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(VS,HS);Ei[e]=new $i(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ei[t]=new $i(t,1,!1,t.toLowerCase(),null,!1,!1)});Ei.xlinkHref=new $i("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ei[t]=new $i(t,1,!1,t.toLowerCase(),null,!0,!0)});function KS(t,e,i,n){var r=Ei.hasOwnProperty(e)?Ei[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iU(e,i,r,n)&&(i=null),n||r===null?eU(e)&&(i===null?t.removeAttribute(e):t.setAttribute(e,""+i)):r.mustUseProperty?t[r.propertyName]=i===null?r.type===3?!1:"":i:(e=r.attributeName,n=r.attributeNamespace,i===null?t.removeAttribute(e):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?t.setAttributeNS(n,e,i):t.setAttribute(e,i))))}var Hs=Z5.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wf=Symbol.for("react.element"),pu=Symbol.for("react.portal"),gu=Symbol.for("react.fragment"),GS=Symbol.for("react.strict_mode"),vT=Symbol.for("react.profiler"),tP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),WS=Symbol.for("react.forward_ref"),yT=Symbol.for("react.suspense"),ET=Symbol.for("react.suspense_list"),jS=Symbol.for("react.memo"),la=Symbol.for("react.lazy"),nP=Symbol.for("react.offscreen"),_k=Symbol.iterator;function Wc(t){return t===null||typeof t!="object"?null:(t=_k&&t[_k]||t["@@iterator"],typeof t=="function"?t:null)}var At=Object.assign,Ly;function yd(t){if(Ly===void 0)try{throw Error()}catch(i){var e=i.stack.trim().match(/\n( *(at )?)/);Ly=e&&e[1]||""}return`
`+Ly+t}var Ry=!1;function wy(t,e){if(!t||Ry)return"";Ry=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=a&&0<=o);break}}}finally{Ry=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?yd(t):""}function nU(t){switch(t.tag){case 5:return yd(t.type);case 16:return yd("Lazy");case 13:return yd("Suspense");case 19:return yd("SuspenseList");case 0:case 2:case 15:return t=wy(t.type,!1),t;case 11:return t=wy(t.type.render,!1),t;case 1:return t=wy(t.type,!0),t;default:return""}}function TT(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case gu:return"Fragment";case pu:return"Portal";case vT:return"Profiler";case GS:return"StrictMode";case yT:return"Suspense";case ET:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case iP:return(t.displayName||"Context")+".Consumer";case tP:return(t._context.displayName||"Context")+".Provider";case WS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jS:return e=t.displayName||null,e!==null?e:TT(t.type)||"Memo";case la:e=t._payload,t=t._init;try{return TT(t(e))}catch{}}return null}function rU(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return TT(e);case 8:return e===GS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Wa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function rP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function sU(t){var e=rP(t)?"checked":"value",i=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(t,e,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jf(t){t._valueTracker||(t._valueTracker=sU(t))}function sP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var i=e.getValue(),n="";return t&&(n=rP(t)?t.checked?"true":"false":t.value),t=n,t!==i?(e.setValue(t),!0):!1}function Mg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bT(t,e){var i=e.checked;return At({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??t._wrapperState.initialChecked})}function Ak(t,e){var i=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;i=Wa(e.value!=null?e.value:i),t._wrapperState={initialChecked:n,initialValue:i,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function aP(t,e){e=e.checked,e!=null&&KS(t,"checked",e,!1)}function ST(t,e){aP(t,e);var i=Wa(e.value),n=e.type;if(i!=null)n==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+i):t.value!==""+i&&(t.value=""+i);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?_T(t,e.type,i):e.hasOwnProperty("defaultValue")&&_T(t,e.type,Wa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xk(t,e,i){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,i||e===t.value||(t.value=e),t.defaultValue=e}i=t.name,i!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,i!==""&&(t.name=i)}function _T(t,e,i){(e!=="number"||Mg(t.ownerDocument)!==t)&&(i==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+i&&(t.defaultValue=""+i))}var Ed=Array.isArray;function Fu(t,e,i,n){if(t=t.options,e){e={};for(var r=0;r<i.length;r++)e["$"+i[r]]=!0;for(i=0;i<t.length;i++)r=e.hasOwnProperty("$"+t[i].value),t[i].selected!==r&&(t[i].selected=r),r&&n&&(t[i].defaultSelected=!0)}else{for(i=""+Wa(i),e=null,r=0;r<t.length;r++){if(t[r].value===i){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function AT(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return At({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kk(t,e){var i=e.value;if(i==null){if(i=e.children,e=e.defaultValue,i!=null){if(e!=null)throw Error(X(92));if(Ed(i)){if(1<i.length)throw Error(X(93));i=i[0]}e=i}e==null&&(e=""),i=e}t._wrapperState={initialValue:Wa(i)}}function oP(t,e){var i=Wa(e.value),n=Wa(e.defaultValue);i!=null&&(i=""+i,i!==t.value&&(t.value=i),e.defaultValue==null&&t.defaultValue!==i&&(t.defaultValue=i)),n!=null&&(t.defaultValue=""+n)}function Ik(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function lP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xT(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?lP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Yf,uP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,i,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,i,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Yf=Yf||document.createElement("div"),Yf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Yf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ah(t,e){if(e){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=e;return}}t.textContent=e}var zd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aU=["Webkit","ms","Moz","O"];Object.keys(zd).forEach(function(t){aU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),zd[e]=zd[t]})});function cP(t,e,i){return e==null||typeof e=="boolean"||e===""?"":i||typeof e!="number"||e===0||zd.hasOwnProperty(t)&&zd[t]?(""+e).trim():e+"px"}function dP(t,e){t=t.style;for(var i in e)if(e.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=cP(i,e[i],n);i==="float"&&(i="cssFloat"),n?t.setProperty(i,r):t[i]=r}}var oU=At({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kT(t,e){if(e){if(oU[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function IT(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var LT=null;function YS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var RT=null,Uu=null,Bu=null;function Lk(t){if(t=Lf(t)){if(typeof RT!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Ev(e),RT(t.stateNode,t.type,e))}}function hP(t){Uu?Bu?Bu.push(t):Bu=[t]:Uu=t}function fP(){if(Uu){var t=Uu,e=Bu;if(Bu=Uu=null,Lk(t),e)for(t=0;t<e.length;t++)Lk(e[t])}}function mP(t,e){return t(e)}function pP(){}var Cy=!1;function gP(t,e,i){if(Cy)return t(e,i);Cy=!0;try{return mP(t,e,i)}finally{Cy=!1,(Uu!==null||Bu!==null)&&(pP(),fP())}}function xh(t,e){var i=t.stateNode;if(i===null)return null;var n=Ev(i);if(n===null)return null;i=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(X(231,e,typeof i));return i}var wT=!1;if(Ms)try{var jc={};Object.defineProperty(jc,"passive",{get:function(){wT=!0}}),window.addEventListener("test",jc,jc),window.removeEventListener("test",jc,jc)}catch{wT=!1}function lU(t,e,i,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(i,u)}catch(c){this.onError(c)}}var Qd=!1,Ng=null,$g=!1,CT=null,uU={onError:function(t){Qd=!0,Ng=t}};function cU(t,e,i,n,r,s,a,o,l){Qd=!1,Ng=null,lU.apply(uU,arguments)}function dU(t,e,i,n,r,s,a,o,l){if(cU.apply(this,arguments),Qd){if(Qd){var u=Ng;Qd=!1,Ng=null}else throw Error(X(198));$g||($g=!0,CT=u)}}function pl(t){var e=t,i=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(i=e.return),t=e.return;while(t)}return e.tag===3?i:null}function vP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Rk(t){if(pl(t)!==t)throw Error(X(188))}function hU(t){var e=t.alternate;if(!e){if(e=pl(t),e===null)throw Error(X(188));return e!==t?null:t}for(var i=t,n=e;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return Rk(r),t;if(s===n)return Rk(r),e;s=s.sibling}throw Error(X(188))}if(i.return!==n.return)i=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===i){a=!0,i=r,n=s;break}if(o===n){a=!0,n=r,i=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===i){a=!0,i=s,n=r;break}if(o===n){a=!0,n=s,i=r;break}o=o.sibling}if(!a)throw Error(X(189))}}if(i.alternate!==n)throw Error(X(190))}if(i.tag!==3)throw Error(X(188));return i.stateNode.current===i?t:e}function yP(t){return t=hU(t),t!==null?EP(t):null}function EP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=EP(t);if(e!==null)return e;t=t.sibling}return null}var TP=yn.unstable_scheduleCallback,wk=yn.unstable_cancelCallback,fU=yn.unstable_shouldYield,mU=yn.unstable_requestPaint,Ot=yn.unstable_now,pU=yn.unstable_getCurrentPriorityLevel,qS=yn.unstable_ImmediatePriority,bP=yn.unstable_UserBlockingPriority,Fg=yn.unstable_NormalPriority,gU=yn.unstable_LowPriority,SP=yn.unstable_IdlePriority,pv=null,Qr=null;function vU(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(pv,t,void 0,(t.current.flags&128)===128)}catch{}}var cr=Math.clz32?Math.clz32:TU,yU=Math.log,EU=Math.LN2;function TU(t){return t>>>=0,t===0?32:31-(yU(t)/EU|0)|0}var qf=64,zf=4194304;function Td(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ug(t,e){var i=t.pendingLanes;if(i===0)return 0;var n=0,r=t.suspendedLanes,s=t.pingedLanes,a=i&268435455;if(a!==0){var o=a&~r;o!==0?n=Td(o):(s&=a,s!==0&&(n=Td(s)))}else a=i&~r,a!==0?n=Td(a):s!==0&&(n=Td(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=i&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)i=31-cr(e),r=1<<i,n|=t[i],e&=~r;return n}function bU(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SU(t,e){for(var i=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var a=31-cr(s),o=1<<a,l=r[a];l===-1?(!(o&i)||o&n)&&(r[a]=bU(o,e)):l<=e&&(t.expiredLanes|=o),s&=~o}}function DT(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function _P(){var t=qf;return qf<<=1,!(qf&4194240)&&(qf=64),t}function Dy(t){for(var e=[],i=0;31>i;i++)e.push(t);return e}function kf(t,e,i){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cr(e),t[e]=i}function _U(t,e){var i=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<i;){var r=31-cr(i),s=1<<r;e[r]=0,n[r]=-1,t[r]=-1,i&=~s}}function zS(t,e){var i=t.entangledLanes|=e;for(t=t.entanglements;i;){var n=31-cr(i),r=1<<n;r&e|t[n]&e&&(t[n]|=e),i&=~r}}var je=0;function AP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var xP,QS,kP,IP,LP,PT=!1,Qf=[],Oa=null,Ma=null,Na=null,kh=new Map,Ih=new Map,fa=[],AU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ck(t,e){switch(t){case"focusin":case"focusout":Oa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Na=null;break;case"pointerover":case"pointerout":kh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(e.pointerId)}}function Yc(t,e,i,n,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Lf(e),e!==null&&QS(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function xU(t,e,i,n,r){switch(e){case"focusin":return Oa=Yc(Oa,t,e,i,n,r),!0;case"dragenter":return Ma=Yc(Ma,t,e,i,n,r),!0;case"mouseover":return Na=Yc(Na,t,e,i,n,r),!0;case"pointerover":var s=r.pointerId;return kh.set(s,Yc(kh.get(s)||null,t,e,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Ih.set(s,Yc(Ih.get(s)||null,t,e,i,n,r)),!0}return!1}function RP(t){var e=Po(t.target);if(e!==null){var i=pl(e);if(i!==null){if(e=i.tag,e===13){if(e=vP(i),e!==null){t.blockedOn=e,LP(t.priority,function(){kP(i)});return}}else if(e===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Zm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var i=OT(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(i===null){i=t.nativeEvent;var n=new i.constructor(i.type,i);LT=n,i.target.dispatchEvent(n),LT=null}else return e=Lf(i),e!==null&&QS(e),t.blockedOn=i,!1;e.shift()}return!0}function Dk(t,e,i){Zm(t)&&i.delete(e)}function kU(){PT=!1,Oa!==null&&Zm(Oa)&&(Oa=null),Ma!==null&&Zm(Ma)&&(Ma=null),Na!==null&&Zm(Na)&&(Na=null),kh.forEach(Dk),Ih.forEach(Dk)}function qc(t,e){t.blockedOn===e&&(t.blockedOn=null,PT||(PT=!0,yn.unstable_scheduleCallback(yn.unstable_NormalPriority,kU)))}function Lh(t){function e(r){return qc(r,t)}if(0<Qf.length){qc(Qf[0],t);for(var i=1;i<Qf.length;i++){var n=Qf[i];n.blockedOn===t&&(n.blockedOn=null)}}for(Oa!==null&&qc(Oa,t),Ma!==null&&qc(Ma,t),Na!==null&&qc(Na,t),kh.forEach(e),Ih.forEach(e),i=0;i<fa.length;i++)n=fa[i],n.blockedOn===t&&(n.blockedOn=null);for(;0<fa.length&&(i=fa[0],i.blockedOn===null);)RP(i),i.blockedOn===null&&fa.shift()}var Vu=Hs.ReactCurrentBatchConfig,Bg=!0;function IU(t,e,i,n){var r=je,s=Vu.transition;Vu.transition=null;try{je=1,XS(t,e,i,n)}finally{je=r,Vu.transition=s}}function LU(t,e,i,n){var r=je,s=Vu.transition;Vu.transition=null;try{je=4,XS(t,e,i,n)}finally{je=r,Vu.transition=s}}function XS(t,e,i,n){if(Bg){var r=OT(t,e,i,n);if(r===null)Hy(t,e,n,Vg,i),Ck(t,n);else if(xU(r,t,e,i,n))n.stopPropagation();else if(Ck(t,n),e&4&&-1<AU.indexOf(t)){for(;r!==null;){var s=Lf(r);if(s!==null&&xP(s),s=OT(t,e,i,n),s===null&&Hy(t,e,n,Vg,i),s===r)break;r=s}r!==null&&n.stopPropagation()}else Hy(t,e,n,null,i)}}var Vg=null;function OT(t,e,i,n){if(Vg=null,t=YS(n),t=Po(t),t!==null)if(e=pl(t),e===null)t=null;else if(i=e.tag,i===13){if(t=vP(e),t!==null)return t;t=null}else if(i===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Vg=t,null}function wP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pU()){case qS:return 1;case bP:return 4;case Fg:case gU:return 16;case SP:return 536870912;default:return 16}default:return 16}}var Ca=null,ZS=null,Jm=null;function CP(){if(Jm)return Jm;var t,e=ZS,i=e.length,n,r="value"in Ca?Ca.value:Ca.textContent,s=r.length;for(t=0;t<i&&e[t]===r[t];t++);var a=i-t;for(n=1;n<=a&&e[i-n]===r[s-n];n++);return Jm=r.slice(t,1<n?1-n:void 0)}function ep(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xf(){return!0}function Pk(){return!1}function bn(t){function e(i,n,r,s,a){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in t)t.hasOwnProperty(o)&&(i=t[o],this[o]=i?i(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Xf:Pk,this.isPropagationStopped=Pk,this}return At(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Xf)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Xf)},persist:function(){},isPersistent:Xf}),e}var Nc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},JS=bn(Nc),If=At({},Nc,{view:0,detail:0}),RU=bn(If),Py,Oy,zc,gv=At({},If,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:e_,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zc&&(zc&&t.type==="mousemove"?(Py=t.screenX-zc.screenX,Oy=t.screenY-zc.screenY):Oy=Py=0,zc=t),Py)},movementY:function(t){return"movementY"in t?t.movementY:Oy}}),Ok=bn(gv),wU=At({},gv,{dataTransfer:0}),CU=bn(wU),DU=At({},If,{relatedTarget:0}),My=bn(DU),PU=At({},Nc,{animationName:0,elapsedTime:0,pseudoElement:0}),OU=bn(PU),MU=At({},Nc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NU=bn(MU),$U=At({},Nc,{data:0}),Mk=bn($U),FU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},UU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},BU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VU(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=BU[t])?!!e[t]:!1}function e_(){return VU}var HU=At({},If,{key:function(t){if(t.key){var e=FU[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ep(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?UU[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:e_,charCode:function(t){return t.type==="keypress"?ep(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ep(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),KU=bn(HU),GU=At({},gv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nk=bn(GU),WU=At({},If,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:e_}),jU=bn(WU),YU=At({},Nc,{propertyName:0,elapsedTime:0,pseudoElement:0}),qU=bn(YU),zU=At({},gv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),QU=bn(zU),XU=[9,13,27,32],t_=Ms&&"CompositionEvent"in window,Xd=null;Ms&&"documentMode"in document&&(Xd=document.documentMode);var ZU=Ms&&"TextEvent"in window&&!Xd,DP=Ms&&(!t_||Xd&&8<Xd&&11>=Xd),$k=" ",Fk=!1;function PP(t,e){switch(t){case"keyup":return XU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function OP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vu=!1;function JU(t,e){switch(t){case"compositionend":return OP(e);case"keypress":return e.which!==32?null:(Fk=!0,$k);case"textInput":return t=e.data,t===$k&&Fk?null:t;default:return null}}function e8(t,e){if(vu)return t==="compositionend"||!t_&&PP(t,e)?(t=CP(),Jm=ZS=Ca=null,vu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return DP&&e.locale!=="ko"?null:e.data;default:return null}}var t8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Uk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!t8[t.type]:e==="textarea"}function MP(t,e,i,n){hP(n),e=Hg(e,"onChange"),0<e.length&&(i=new JS("onChange","change",null,i,n),t.push({event:i,listeners:e}))}var Zd=null,Rh=null;function i8(t){jP(t,0)}function vv(t){var e=Tu(t);if(sP(e))return t}function n8(t,e){if(t==="change")return e}var NP=!1;if(Ms){var Ny;if(Ms){var $y="oninput"in document;if(!$y){var Bk=document.createElement("div");Bk.setAttribute("oninput","return;"),$y=typeof Bk.oninput=="function"}Ny=$y}else Ny=!1;NP=Ny&&(!document.documentMode||9<document.documentMode)}function Vk(){Zd&&(Zd.detachEvent("onpropertychange",$P),Rh=Zd=null)}function $P(t){if(t.propertyName==="value"&&vv(Rh)){var e=[];MP(e,Rh,t,YS(t)),gP(i8,e)}}function r8(t,e,i){t==="focusin"?(Vk(),Zd=e,Rh=i,Zd.attachEvent("onpropertychange",$P)):t==="focusout"&&Vk()}function s8(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return vv(Rh)}function a8(t,e){if(t==="click")return vv(e)}function o8(t,e){if(t==="input"||t==="change")return vv(e)}function l8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var fr=typeof Object.is=="function"?Object.is:l8;function wh(t,e){if(fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!gT.call(e,r)||!fr(t[r],e[r]))return!1}return!0}function Hk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kk(t,e){var i=Hk(t);t=0;for(var n;i;){if(i.nodeType===3){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=Hk(i)}}function FP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?FP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function UP(){for(var t=window,e=Mg();e instanceof t.HTMLIFrameElement;){try{var i=typeof e.contentWindow.location.href=="string"}catch{i=!1}if(i)t=e.contentWindow;else break;e=Mg(t.document)}return e}function i_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function u8(t){var e=UP(),i=t.focusedElem,n=t.selectionRange;if(e!==i&&i&&i.ownerDocument&&FP(i.ownerDocument.documentElement,i)){if(n!==null&&i_(i)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in i)i.selectionStart=e,i.selectionEnd=Math.min(t,i.value.length);else if(t=(e=i.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=i.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!t.extend&&s>n&&(r=n,n=s,s=r),r=Kk(i,s);var a=Kk(i,n);r&&a&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=i;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<e.length;i++)t=e[i],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var c8=Ms&&"documentMode"in document&&11>=document.documentMode,yu=null,MT=null,Jd=null,NT=!1;function Gk(t,e,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;NT||yu==null||yu!==Mg(n)||(n=yu,"selectionStart"in n&&i_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Jd&&wh(Jd,n)||(Jd=n,n=Hg(MT,"onSelect"),0<n.length&&(e=new JS("onSelect","select",null,e,i),t.push({event:e,listeners:n}),e.target=yu)))}function Zf(t,e){var i={};return i[t.toLowerCase()]=e.toLowerCase(),i["Webkit"+t]="webkit"+e,i["Moz"+t]="moz"+e,i}var Eu={animationend:Zf("Animation","AnimationEnd"),animationiteration:Zf("Animation","AnimationIteration"),animationstart:Zf("Animation","AnimationStart"),transitionend:Zf("Transition","TransitionEnd")},Fy={},BP={};Ms&&(BP=document.createElement("div").style,"AnimationEvent"in window||(delete Eu.animationend.animation,delete Eu.animationiteration.animation,delete Eu.animationstart.animation),"TransitionEvent"in window||delete Eu.transitionend.transition);function yv(t){if(Fy[t])return Fy[t];if(!Eu[t])return t;var e=Eu[t],i;for(i in e)if(e.hasOwnProperty(i)&&i in BP)return Fy[t]=e[i];return t}var VP=yv("animationend"),HP=yv("animationiteration"),KP=yv("animationstart"),GP=yv("transitionend"),WP=new Map,Wk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function eo(t,e){WP.set(t,e),ml(e,[t])}for(var Uy=0;Uy<Wk.length;Uy++){var By=Wk[Uy],d8=By.toLowerCase(),h8=By[0].toUpperCase()+By.slice(1);eo(d8,"on"+h8)}eo(VP,"onAnimationEnd");eo(HP,"onAnimationIteration");eo(KP,"onAnimationStart");eo("dblclick","onDoubleClick");eo("focusin","onFocus");eo("focusout","onBlur");eo(GP,"onTransitionEnd");dc("onMouseEnter",["mouseout","mouseover"]);dc("onMouseLeave",["mouseout","mouseover"]);dc("onPointerEnter",["pointerout","pointerover"]);dc("onPointerLeave",["pointerout","pointerover"]);ml("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ml("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ml("onBeforeInput",["compositionend","keypress","textInput","paste"]);ml("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ml("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),f8=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function jk(t,e,i){var n=t.type||"unknown-event";t.currentTarget=i,dU(n,e,void 0,t),t.currentTarget=null}function jP(t,e){e=(e&4)!==0;for(var i=0;i<t.length;i++){var n=t[i],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;jk(r,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;jk(r,o,u),s=l}}}if($g)throw t=CT,$g=!1,CT=null,t}function ut(t,e){var i=e[VT];i===void 0&&(i=e[VT]=new Set);var n=t+"__bubble";i.has(n)||(YP(e,t,2,!1),i.add(n))}function Vy(t,e,i){var n=0;e&&(n|=4),YP(i,t,n,e)}var Jf="_reactListening"+Math.random().toString(36).slice(2);function Ch(t){if(!t[Jf]){t[Jf]=!0,eP.forEach(function(i){i!=="selectionchange"&&(f8.has(i)||Vy(i,!1,t),Vy(i,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jf]||(e[Jf]=!0,Vy("selectionchange",!1,e))}}function YP(t,e,i,n){switch(wP(e)){case 1:var r=IU;break;case 4:r=LU;break;default:r=XS}i=r.bind(null,e,i,t),r=void 0,!wT||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,i,{capture:!0,passive:r}):t.addEventListener(e,i,!0):r!==void 0?t.addEventListener(e,i,{passive:r}):t.addEventListener(e,i,!1)}function Hy(t,e,i,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=Po(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}gP(function(){var u=s,c=YS(i),d=[];e:{var h=WP.get(t);if(h!==void 0){var f=JS,m=t;switch(t){case"keypress":if(ep(i)===0)break e;case"keydown":case"keyup":f=KU;break;case"focusin":m="focus",f=My;break;case"focusout":m="blur",f=My;break;case"beforeblur":case"afterblur":f=My;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ok;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=CU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=jU;break;case VP:case HP:case KP:f=OU;break;case GP:f=qU;break;case"scroll":f=RU;break;case"wheel":f=QU;break;case"copy":case"cut":case"paste":f=NU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Nk}var p=(e&4)!==0,y=!p&&t==="scroll",g=p?h!==null?h+"Capture":null:h;p=[];for(var v=u,E;v!==null;){E=v;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,g!==null&&(T=xh(v,g),T!=null&&p.push(Dh(v,T,E)))),y)break;v=v.return}0<p.length&&(h=new f(h,m,null,i,c),d.push({event:h,listeners:p}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&i!==LT&&(m=i.relatedTarget||i.fromElement)&&(Po(m)||m[Ns]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=i.relatedTarget||i.toElement,f=u,m=m?Po(m):null,m!==null&&(y=pl(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=u),f!==m)){if(p=Ok,T="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(p=Nk,T="onPointerLeave",g="onPointerEnter",v="pointer"),y=f==null?h:Tu(f),E=m==null?h:Tu(m),h=new p(T,v+"leave",f,i,c),h.target=y,h.relatedTarget=E,T=null,Po(c)===u&&(p=new p(g,v+"enter",m,i,c),p.target=E,p.relatedTarget=y,T=p),y=T,f&&m)t:{for(p=f,g=m,v=0,E=p;E;E=_l(E))v++;for(E=0,T=g;T;T=_l(T))E++;for(;0<v-E;)p=_l(p),v--;for(;0<E-v;)g=_l(g),E--;for(;v--;){if(p===g||g!==null&&p===g.alternate)break t;p=_l(p),g=_l(g)}p=null}else p=null;f!==null&&Yk(d,h,f,p,!1),m!==null&&y!==null&&Yk(d,y,m,p,!0)}}e:{if(h=u?Tu(u):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=n8;else if(Uk(h))if(NP)_=o8;else{_=s8;var x=r8}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=a8);if(_&&(_=_(t,u))){MP(d,_,i,c);break e}x&&x(t,h,u),t==="focusout"&&(x=h._wrapperState)&&x.controlled&&h.type==="number"&&_T(h,"number",h.value)}switch(x=u?Tu(u):window,t){case"focusin":(Uk(x)||x.contentEditable==="true")&&(yu=x,MT=u,Jd=null);break;case"focusout":Jd=MT=yu=null;break;case"mousedown":NT=!0;break;case"contextmenu":case"mouseup":case"dragend":NT=!1,Gk(d,i,c);break;case"selectionchange":if(c8)break;case"keydown":case"keyup":Gk(d,i,c)}var A;if(t_)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else vu?PP(t,i)&&(I="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(I="onCompositionStart");I&&(DP&&i.locale!=="ko"&&(vu||I!=="onCompositionStart"?I==="onCompositionEnd"&&vu&&(A=CP()):(Ca=c,ZS="value"in Ca?Ca.value:Ca.textContent,vu=!0)),x=Hg(u,I),0<x.length&&(I=new Mk(I,t,null,i,c),d.push({event:I,listeners:x}),A?I.data=A:(A=OP(i),A!==null&&(I.data=A)))),(A=ZU?JU(t,i):e8(t,i))&&(u=Hg(u,"onBeforeInput"),0<u.length&&(c=new Mk("onBeforeInput","beforeinput",null,i,c),d.push({event:c,listeners:u}),c.data=A))}jP(d,e)})}function Dh(t,e,i){return{instance:t,listener:e,currentTarget:i}}function Hg(t,e){for(var i=e+"Capture",n=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=xh(t,i),s!=null&&n.unshift(Dh(t,s,r)),s=xh(t,e),s!=null&&n.push(Dh(t,s,r))),t=t.return}return n}function _l(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Yk(t,e,i,n,r){for(var s=e._reactName,a=[];i!==null&&i!==n;){var o=i,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,r?(l=xh(i,s),l!=null&&a.unshift(Dh(i,l,o))):r||(l=xh(i,s),l!=null&&a.push(Dh(i,l,o)))),i=i.return}a.length!==0&&t.push({event:e,listeners:a})}var m8=/\r\n?/g,p8=/\u0000|\uFFFD/g;function qk(t){return(typeof t=="string"?t:""+t).replace(m8,`
`).replace(p8,"")}function em(t,e,i){if(e=qk(e),qk(t)!==e&&i)throw Error(X(425))}function Kg(){}var $T=null,FT=null;function UT(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var BT=typeof setTimeout=="function"?setTimeout:void 0,g8=typeof clearTimeout=="function"?clearTimeout:void 0,zk=typeof Promise=="function"?Promise:void 0,v8=typeof queueMicrotask=="function"?queueMicrotask:typeof zk<"u"?function(t){return zk.resolve(null).then(t).catch(y8)}:BT;function y8(t){setTimeout(function(){throw t})}function Ky(t,e){var i=e,n=0;do{var r=i.nextSibling;if(t.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(n===0){t.removeChild(r),Lh(e);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=r}while(i);Lh(e)}function $a(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Qk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"){if(e===0)return t;e--}else i==="/$"&&e++}t=t.previousSibling}return null}var $c=Math.random().toString(36).slice(2),Vr="__reactFiber$"+$c,Ph="__reactProps$"+$c,Ns="__reactContainer$"+$c,VT="__reactEvents$"+$c,E8="__reactListeners$"+$c,T8="__reactHandles$"+$c;function Po(t){var e=t[Vr];if(e)return e;for(var i=t.parentNode;i;){if(e=i[Ns]||i[Vr]){if(i=e.alternate,e.child!==null||i!==null&&i.child!==null)for(t=Qk(t);t!==null;){if(i=t[Vr])return i;t=Qk(t)}return e}t=i,i=t.parentNode}return null}function Lf(t){return t=t[Vr]||t[Ns],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Ev(t){return t[Ph]||null}var HT=[],bu=-1;function to(t){return{current:t}}function ct(t){0>bu||(t.current=HT[bu],HT[bu]=null,bu--)}function rt(t,e){bu++,HT[bu]=t.current,t.current=e}var ja={},wi=to(ja),ji=to(!1),sl=ja;function hc(t,e){var i=t.type.contextTypes;if(!i)return ja;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Yi(t){return t=t.childContextTypes,t!=null}function Gg(){ct(ji),ct(wi)}function Xk(t,e,i){if(wi.current!==ja)throw Error(X(168));rt(wi,e),rt(ji,i)}function qP(t,e,i){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(X(108,rU(t)||"Unknown",r));return At({},i,n)}function Wg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ja,sl=wi.current,rt(wi,t),rt(ji,ji.current),!0}function Zk(t,e,i){var n=t.stateNode;if(!n)throw Error(X(169));i?(t=qP(t,e,sl),n.__reactInternalMemoizedMergedChildContext=t,ct(ji),ct(wi),rt(wi,t)):ct(ji),rt(ji,i)}var Es=null,Tv=!1,Gy=!1;function zP(t){Es===null?Es=[t]:Es.push(t)}function b8(t){Tv=!0,zP(t)}function io(){if(!Gy&&Es!==null){Gy=!0;var t=0,e=je;try{var i=Es;for(je=1;t<i.length;t++){var n=i[t];do n=n(!0);while(n!==null)}Es=null,Tv=!1}catch(r){throw Es!==null&&(Es=Es.slice(t+1)),TP(qS,io),r}finally{je=e,Gy=!1}}return null}var Su=[],_u=0,jg=null,Yg=0,Cn=[],Dn=0,al=null,As=1,xs="";function po(t,e){Su[_u++]=Yg,Su[_u++]=jg,jg=t,Yg=e}function QP(t,e,i){Cn[Dn++]=As,Cn[Dn++]=xs,Cn[Dn++]=al,al=t;var n=As;t=xs;var r=32-cr(n)-1;n&=~(1<<r),i+=1;var s=32-cr(e)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,As=1<<32-cr(e)+r|i<<r|n,xs=s+t}else As=1<<s|i<<r|n,xs=t}function n_(t){t.return!==null&&(po(t,1),QP(t,1,0))}function r_(t){for(;t===jg;)jg=Su[--_u],Su[_u]=null,Yg=Su[--_u],Su[_u]=null;for(;t===al;)al=Cn[--Dn],Cn[Dn]=null,xs=Cn[--Dn],Cn[Dn]=null,As=Cn[--Dn],Cn[Dn]=null}var mn=null,fn=null,vt=!1,ar=null;function XP(t,e){var i=$n(5,null,null,0);i.elementType="DELETED",i.stateNode=e,i.return=t,e=t.deletions,e===null?(t.deletions=[i],t.flags|=16):e.push(i)}function Jk(t,e){switch(t.tag){case 5:var i=t.type;return e=e.nodeType!==1||i.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,mn=t,fn=$a(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,mn=t,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(i=al!==null?{id:As,overflow:xs}:null,t.memoizedState={dehydrated:e,treeContext:i,retryLane:1073741824},i=$n(18,null,null,0),i.stateNode=e,i.return=t,t.child=i,mn=t,fn=null,!0):!1;default:return!1}}function KT(t){return(t.mode&1)!==0&&(t.flags&128)===0}function GT(t){if(vt){var e=fn;if(e){var i=e;if(!Jk(t,e)){if(KT(t))throw Error(X(418));e=$a(i.nextSibling);var n=mn;e&&Jk(t,e)?XP(n,i):(t.flags=t.flags&-4097|2,vt=!1,mn=t)}}else{if(KT(t))throw Error(X(418));t.flags=t.flags&-4097|2,vt=!1,mn=t}}}function eI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;mn=t}function tm(t){if(t!==mn)return!1;if(!vt)return eI(t),vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!UT(t.type,t.memoizedProps)),e&&(e=fn)){if(KT(t))throw ZP(),Error(X(418));for(;e;)XP(t,e),e=$a(e.nextSibling)}if(eI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"){if(e===0){fn=$a(t.nextSibling);break e}e--}else i!=="$"&&i!=="$!"&&i!=="$?"||e++}t=t.nextSibling}fn=null}}else fn=mn?$a(t.stateNode.nextSibling):null;return!0}function ZP(){for(var t=fn;t;)t=$a(t.nextSibling)}function fc(){fn=mn=null,vt=!1}function s_(t){ar===null?ar=[t]:ar.push(t)}var S8=Hs.ReactCurrentBatchConfig;function Qc(t,e,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(X(309));var n=i.stateNode}if(!n)throw Error(X(147,t));var r=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof t!="string")throw Error(X(284));if(!i._owner)throw Error(X(290,t))}return t}function im(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function tI(t){var e=t._init;return e(t._payload)}function JP(t){function e(g,v){if(t){var E=g.deletions;E===null?(g.deletions=[v],g.flags|=16):E.push(v)}}function i(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(g,v){return g=Va(g,v),g.index=0,g.sibling=null,g}function s(g,v,E){return g.index=E,t?(E=g.alternate,E!==null?(E=E.index,E<v?(g.flags|=2,v):E):(g.flags|=2,v)):(g.flags|=1048576,v)}function a(g){return t&&g.alternate===null&&(g.flags|=2),g}function o(g,v,E,T){return v===null||v.tag!==6?(v=Xy(E,g.mode,T),v.return=g,v):(v=r(v,E),v.return=g,v)}function l(g,v,E,T){var _=E.type;return _===gu?c(g,v,E.props.children,T,E.key):v!==null&&(v.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===la&&tI(_)===v.type)?(T=r(v,E.props),T.ref=Qc(g,v,E),T.return=g,T):(T=op(E.type,E.key,E.props,null,g.mode,T),T.ref=Qc(g,v,E),T.return=g,T)}function u(g,v,E,T){return v===null||v.tag!==4||v.stateNode.containerInfo!==E.containerInfo||v.stateNode.implementation!==E.implementation?(v=Zy(E,g.mode,T),v.return=g,v):(v=r(v,E.children||[]),v.return=g,v)}function c(g,v,E,T,_){return v===null||v.tag!==7?(v=qo(E,g.mode,T,_),v.return=g,v):(v=r(v,E),v.return=g,v)}function d(g,v,E){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Xy(""+v,g.mode,E),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Wf:return E=op(v.type,v.key,v.props,null,g.mode,E),E.ref=Qc(g,null,v),E.return=g,E;case pu:return v=Zy(v,g.mode,E),v.return=g,v;case la:var T=v._init;return d(g,T(v._payload),E)}if(Ed(v)||Wc(v))return v=qo(v,g.mode,E,null),v.return=g,v;im(g,v)}return null}function h(g,v,E,T){var _=v!==null?v.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return _!==null?null:o(g,v,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Wf:return E.key===_?l(g,v,E,T):null;case pu:return E.key===_?u(g,v,E,T):null;case la:return _=E._init,h(g,v,_(E._payload),T)}if(Ed(E)||Wc(E))return _!==null?null:c(g,v,E,T,null);im(g,E)}return null}function f(g,v,E,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(E)||null,o(v,g,""+T,_);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wf:return g=g.get(T.key===null?E:T.key)||null,l(v,g,T,_);case pu:return g=g.get(T.key===null?E:T.key)||null,u(v,g,T,_);case la:var x=T._init;return f(g,v,E,x(T._payload),_)}if(Ed(T)||Wc(T))return g=g.get(E)||null,c(v,g,T,_,null);im(v,T)}return null}function m(g,v,E,T){for(var _=null,x=null,A=v,I=v=0,L=null;A!==null&&I<E.length;I++){A.index>I?(L=A,A=null):L=A.sibling;var b=h(g,A,E[I],T);if(b===null){A===null&&(A=L);break}t&&A&&b.alternate===null&&e(g,A),v=s(b,v,I),x===null?_=b:x.sibling=b,x=b,A=L}if(I===E.length)return i(g,A),vt&&po(g,I),_;if(A===null){for(;I<E.length;I++)A=d(g,E[I],T),A!==null&&(v=s(A,v,I),x===null?_=A:x.sibling=A,x=A);return vt&&po(g,I),_}for(A=n(g,A);I<E.length;I++)L=f(A,g,I,E[I],T),L!==null&&(t&&L.alternate!==null&&A.delete(L.key===null?I:L.key),v=s(L,v,I),x===null?_=L:x.sibling=L,x=L);return t&&A.forEach(function(R){return e(g,R)}),vt&&po(g,I),_}function p(g,v,E,T){var _=Wc(E);if(typeof _!="function")throw Error(X(150));if(E=_.call(E),E==null)throw Error(X(151));for(var x=_=null,A=v,I=v=0,L=null,b=E.next();A!==null&&!b.done;I++,b=E.next()){A.index>I?(L=A,A=null):L=A.sibling;var R=h(g,A,b.value,T);if(R===null){A===null&&(A=L);break}t&&A&&R.alternate===null&&e(g,A),v=s(R,v,I),x===null?_=R:x.sibling=R,x=R,A=L}if(b.done)return i(g,A),vt&&po(g,I),_;if(A===null){for(;!b.done;I++,b=E.next())b=d(g,b.value,T),b!==null&&(v=s(b,v,I),x===null?_=b:x.sibling=b,x=b);return vt&&po(g,I),_}for(A=n(g,A);!b.done;I++,b=E.next())b=f(A,g,I,b.value,T),b!==null&&(t&&b.alternate!==null&&A.delete(b.key===null?I:b.key),v=s(b,v,I),x===null?_=b:x.sibling=b,x=b);return t&&A.forEach(function(P){return e(g,P)}),vt&&po(g,I),_}function y(g,v,E,T){if(typeof E=="object"&&E!==null&&E.type===gu&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Wf:e:{for(var _=E.key,x=v;x!==null;){if(x.key===_){if(_=E.type,_===gu){if(x.tag===7){i(g,x.sibling),v=r(x,E.props.children),v.return=g,g=v;break e}}else if(x.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===la&&tI(_)===x.type){i(g,x.sibling),v=r(x,E.props),v.ref=Qc(g,x,E),v.return=g,g=v;break e}i(g,x);break}else e(g,x);x=x.sibling}E.type===gu?(v=qo(E.props.children,g.mode,T,E.key),v.return=g,g=v):(T=op(E.type,E.key,E.props,null,g.mode,T),T.ref=Qc(g,v,E),T.return=g,g=T)}return a(g);case pu:e:{for(x=E.key;v!==null;){if(v.key===x)if(v.tag===4&&v.stateNode.containerInfo===E.containerInfo&&v.stateNode.implementation===E.implementation){i(g,v.sibling),v=r(v,E.children||[]),v.return=g,g=v;break e}else{i(g,v);break}else e(g,v);v=v.sibling}v=Zy(E,g.mode,T),v.return=g,g=v}return a(g);case la:return x=E._init,y(g,v,x(E._payload),T)}if(Ed(E))return m(g,v,E,T);if(Wc(E))return p(g,v,E,T);im(g,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,v!==null&&v.tag===6?(i(g,v.sibling),v=r(v,E),v.return=g,g=v):(i(g,v),v=Xy(E,g.mode,T),v.return=g,g=v),a(g)):i(g,v)}return y}var mc=JP(!0),e2=JP(!1),qg=to(null),zg=null,Au=null,a_=null;function o_(){a_=Au=zg=null}function l_(t){var e=qg.current;ct(qg),t._currentValue=e}function WT(t,e,i){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===i)break;t=t.return}}function Hu(t,e){zg=t,a_=Au=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gi=!0),t.firstContext=null)}function Un(t){var e=t._currentValue;if(a_!==t)if(t={context:t,memoizedValue:e,next:null},Au===null){if(zg===null)throw Error(X(308));Au=t,zg.dependencies={lanes:0,firstContext:t}}else Au=Au.next=t;return e}var Oo=null;function u_(t){Oo===null?Oo=[t]:Oo.push(t)}function t2(t,e,i,n){var r=e.interleaved;return r===null?(i.next=i,u_(e)):(i.next=r.next,r.next=i),e.interleaved=i,$s(t,n)}function $s(t,e){t.lanes|=e;var i=t.alternate;for(i!==null&&(i.lanes|=e),i=t,t=t.return;t!==null;)t.childLanes|=e,i=t.alternate,i!==null&&(i.childLanes|=e),i=t,t=t.return;return i.tag===3?i.stateNode:null}var ua=!1;function c_(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function i2(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ls(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Fa(t,e,i){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Oe&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,$s(t,i)}return r=n.interleaved,r===null?(e.next=e,u_(n)):(e.next=r.next,r.next=e),n.interleaved=e,$s(t,i)}function tp(t,e,i){if(e=e.updateQueue,e!==null&&(e=e.shared,(i&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,zS(t,i)}}function iI(t,e){var i=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var a={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=a:s=s.next=a,i=i.next}while(i!==null);s===null?r=s=e:s=s.next=e}else r=s=e;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=e:t.next=e,i.lastBaseUpdate=e}function Qg(t,e,i,n){var r=t.updateQueue;ua=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=t.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;a=0,c=u=l=null,o=s;do{var h=o.lane,f=o.eventTime;if((n&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=t,p=o;switch(h=e,f=i,p.tag){case 1:if(m=p.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=p.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=At({},d,h);break e;case 2:ua=!0}}o.callback!==null&&o.lane!==0&&(t.flags|=64,h=r.effects,h===null?r.effects=[o]:h.push(o))}else f={eventTime:f,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=f,l=d):c=c.next=f,a|=h;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;h=o,o=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ll|=a,t.lanes=a,t.memoizedState=d}}function nI(t,e,i){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=i,typeof r!="function")throw Error(X(191,r));r.call(n)}}}var Rf={},Xr=to(Rf),Oh=to(Rf),Mh=to(Rf);function Mo(t){if(t===Rf)throw Error(X(174));return t}function d_(t,e){switch(rt(Mh,e),rt(Oh,t),rt(Xr,Rf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:xT(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=xT(e,t)}ct(Xr),rt(Xr,e)}function pc(){ct(Xr),ct(Oh),ct(Mh)}function n2(t){Mo(Mh.current);var e=Mo(Xr.current),i=xT(e,t.type);e!==i&&(rt(Oh,t),rt(Xr,i))}function h_(t){Oh.current===t&&(ct(Xr),ct(Oh))}var Tt=to(0);function Xg(t){for(var e=t;e!==null;){if(e.tag===13){var i=e.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wy=[];function f_(){for(var t=0;t<Wy.length;t++)Wy[t]._workInProgressVersionPrimary=null;Wy.length=0}var ip=Hs.ReactCurrentDispatcher,jy=Hs.ReactCurrentBatchConfig,ol=0,_t=null,Zt=null,si=null,Zg=!1,eh=!1,Nh=0,_8=0;function bi(){throw Error(X(321))}function m_(t,e){if(e===null)return!1;for(var i=0;i<e.length&&i<t.length;i++)if(!fr(t[i],e[i]))return!1;return!0}function p_(t,e,i,n,r,s){if(ol=s,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ip.current=t===null||t.memoizedState===null?I8:L8,t=i(n,r),eh){s=0;do{if(eh=!1,Nh=0,25<=s)throw Error(X(301));s+=1,si=Zt=null,e.updateQueue=null,ip.current=R8,t=i(n,r)}while(eh)}if(ip.current=Jg,e=Zt!==null&&Zt.next!==null,ol=0,si=Zt=_t=null,Zg=!1,e)throw Error(X(300));return t}function g_(){var t=Nh!==0;return Nh=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?_t.memoizedState=si=t:si=si.next=t,si}function Bn(){if(Zt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var e=si===null?_t.memoizedState:si.next;if(e!==null)si=e,Zt=t;else{if(t===null)throw Error(X(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},si===null?_t.memoizedState=si=t:si=si.next=t}return si}function $h(t,e){return typeof e=="function"?e(t):e}function Yy(t){var e=Bn(),i=e.queue;if(i===null)throw Error(X(311));i.lastRenderedReducer=t;var n=Zt,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((ol&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=d,a=n):l=l.next=d,_t.lanes|=c,ll|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,fr(n,e.memoizedState)||(Gi=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,i.lastRenderedState=n}if(t=i.interleaved,t!==null){r=t;do s=r.lane,_t.lanes|=s,ll|=s,r=r.next;while(r!==t)}else r===null&&(i.lanes=0);return[e.memoizedState,i.dispatch]}function qy(t){var e=Bn(),i=e.queue;if(i===null)throw Error(X(311));i.lastRenderedReducer=t;var n=i.dispatch,r=i.pending,s=e.memoizedState;if(r!==null){i.pending=null;var a=r=r.next;do s=t(s,a.action),a=a.next;while(a!==r);fr(s,e.memoizedState)||(Gi=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),i.lastRenderedState=s}return[s,n]}function r2(){}function s2(t,e){var i=_t,n=Bn(),r=e(),s=!fr(n.memoizedState,r);if(s&&(n.memoizedState=r,Gi=!0),n=n.queue,v_(l2.bind(null,i,n,t),[t]),n.getSnapshot!==e||s||si!==null&&si.memoizedState.tag&1){if(i.flags|=2048,Fh(9,o2.bind(null,i,n,r,e),void 0,null),oi===null)throw Error(X(349));ol&30||a2(i,e,r)}return r}function a2(t,e,i){t.flags|=16384,t={getSnapshot:e,value:i},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(i=e.stores,i===null?e.stores=[t]:i.push(t))}function o2(t,e,i,n){e.value=i,e.getSnapshot=n,u2(e)&&c2(t)}function l2(t,e,i){return i(function(){u2(e)&&c2(t)})}function u2(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!fr(t,i)}catch{return!0}}function c2(t){var e=$s(t,1);e!==null&&dr(e,t,1,-1)}function rI(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$h,lastRenderedState:t},e.queue=t,t=t.dispatch=k8.bind(null,_t,t),[e.memoizedState,t]}function Fh(t,e,i,n){return t={tag:t,create:e,destroy:i,deps:n,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(i=e.lastEffect,i===null?e.lastEffect=t.next=t:(n=i.next,i.next=t,t.next=n,e.lastEffect=t)),t}function d2(){return Bn().memoizedState}function np(t,e,i,n){var r=Or();_t.flags|=t,r.memoizedState=Fh(1|e,i,void 0,n===void 0?null:n)}function bv(t,e,i,n){var r=Bn();n=n===void 0?null:n;var s=void 0;if(Zt!==null){var a=Zt.memoizedState;if(s=a.destroy,n!==null&&m_(n,a.deps)){r.memoizedState=Fh(e,i,s,n);return}}_t.flags|=t,r.memoizedState=Fh(1|e,i,s,n)}function sI(t,e){return np(8390656,8,t,e)}function v_(t,e){return bv(2048,8,t,e)}function h2(t,e){return bv(4,2,t,e)}function f2(t,e){return bv(4,4,t,e)}function m2(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p2(t,e,i){return i=i!=null?i.concat([t]):null,bv(4,4,m2.bind(null,e,t),i)}function y_(){}function g2(t,e){var i=Bn();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&m_(e,n[1])?n[0]:(i.memoizedState=[t,e],t)}function v2(t,e){var i=Bn();e=e===void 0?null:e;var n=i.memoizedState;return n!==null&&e!==null&&m_(e,n[1])?n[0]:(t=t(),i.memoizedState=[t,e],t)}function y2(t,e,i){return ol&21?(fr(i,e)||(i=_P(),_t.lanes|=i,ll|=i,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gi=!0),t.memoizedState=i)}function A8(t,e){var i=je;je=i!==0&&4>i?i:4,t(!0);var n=jy.transition;jy.transition={};try{t(!1),e()}finally{je=i,jy.transition=n}}function E2(){return Bn().memoizedState}function x8(t,e,i){var n=Ba(t);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},T2(t))b2(e,i);else if(i=t2(t,e,i,n),i!==null){var r=Mi();dr(i,t,n,r),S2(i,e,n)}}function k8(t,e,i){var n=Ba(t),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(T2(t))b2(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,i);if(r.hasEagerState=!0,r.eagerState=o,fr(o,a)){var l=e.interleaved;l===null?(r.next=r,u_(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}i=t2(t,e,r,n),i!==null&&(r=Mi(),dr(i,t,n,r),S2(i,e,n))}}function T2(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function b2(t,e){eh=Zg=!0;var i=t.pending;i===null?e.next=e:(e.next=i.next,i.next=e),t.pending=e}function S2(t,e,i){if(i&4194240){var n=e.lanes;n&=t.pendingLanes,i|=n,e.lanes=i,zS(t,i)}}var Jg={readContext:Un,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useInsertionEffect:bi,useLayoutEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useMutableSource:bi,useSyncExternalStore:bi,useId:bi,unstable_isNewReconciler:!1},I8={readContext:Un,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:Un,useEffect:sI,useImperativeHandle:function(t,e,i){return i=i!=null?i.concat([t]):null,np(4194308,4,m2.bind(null,e,t),i)},useLayoutEffect:function(t,e){return np(4194308,4,t,e)},useInsertionEffect:function(t,e){return np(4,2,t,e)},useMemo:function(t,e){var i=Or();return e=e===void 0?null:e,t=t(),i.memoizedState=[t,e],t},useReducer:function(t,e,i){var n=Or();return e=i!==void 0?i(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=x8.bind(null,_t,t),[n.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:rI,useDebugValue:y_,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=rI(!1),e=t[0];return t=A8.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,i){var n=_t,r=Or();if(vt){if(i===void 0)throw Error(X(407));i=i()}else{if(i=e(),oi===null)throw Error(X(349));ol&30||a2(n,e,i)}r.memoizedState=i;var s={value:i,getSnapshot:e};return r.queue=s,sI(l2.bind(null,n,s,t),[t]),n.flags|=2048,Fh(9,o2.bind(null,n,s,i,e),void 0,null),i},useId:function(){var t=Or(),e=oi.identifierPrefix;if(vt){var i=xs,n=As;i=(n&~(1<<32-cr(n)-1)).toString(32)+i,e=":"+e+"R"+i,i=Nh++,0<i&&(e+="H"+i.toString(32)),e+=":"}else i=_8++,e=":"+e+"r"+i.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},L8={readContext:Un,useCallback:g2,useContext:Un,useEffect:v_,useImperativeHandle:p2,useInsertionEffect:h2,useLayoutEffect:f2,useMemo:v2,useReducer:Yy,useRef:d2,useState:function(){return Yy($h)},useDebugValue:y_,useDeferredValue:function(t){var e=Bn();return y2(e,Zt.memoizedState,t)},useTransition:function(){var t=Yy($h)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:r2,useSyncExternalStore:s2,useId:E2,unstable_isNewReconciler:!1},R8={readContext:Un,useCallback:g2,useContext:Un,useEffect:v_,useImperativeHandle:p2,useInsertionEffect:h2,useLayoutEffect:f2,useMemo:v2,useReducer:qy,useRef:d2,useState:function(){return qy($h)},useDebugValue:y_,useDeferredValue:function(t){var e=Bn();return Zt===null?e.memoizedState=t:y2(e,Zt.memoizedState,t)},useTransition:function(){var t=qy($h)[0],e=Bn().memoizedState;return[t,e]},useMutableSource:r2,useSyncExternalStore:s2,useId:E2,unstable_isNewReconciler:!1};function ir(t,e){if(t&&t.defaultProps){e=At({},e),t=t.defaultProps;for(var i in t)e[i]===void 0&&(e[i]=t[i]);return e}return e}function jT(t,e,i,n){e=t.memoizedState,i=i(n,e),i=i==null?e:At({},e,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Sv={isMounted:function(t){return(t=t._reactInternals)?pl(t)===t:!1},enqueueSetState:function(t,e,i){t=t._reactInternals;var n=Mi(),r=Ba(t),s=Ls(n,r);s.payload=e,i!=null&&(s.callback=i),e=Fa(t,s,r),e!==null&&(dr(e,t,r,n),tp(e,t,r))},enqueueReplaceState:function(t,e,i){t=t._reactInternals;var n=Mi(),r=Ba(t),s=Ls(n,r);s.tag=1,s.payload=e,i!=null&&(s.callback=i),e=Fa(t,s,r),e!==null&&(dr(e,t,r,n),tp(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var i=Mi(),n=Ba(t),r=Ls(i,n);r.tag=2,e!=null&&(r.callback=e),e=Fa(t,r,n),e!==null&&(dr(e,t,n,i),tp(e,t,n))}};function aI(t,e,i,n,r,s,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!wh(i,n)||!wh(r,s):!0}function _2(t,e,i){var n=!1,r=ja,s=e.contextType;return typeof s=="object"&&s!==null?s=Un(s):(r=Yi(e)?sl:wi.current,n=e.contextTypes,s=(n=n!=null)?hc(t,r):ja),e=new e(i,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sv,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function oI(t,e,i,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(i,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(i,n),e.state!==t&&Sv.enqueueReplaceState(e,e.state,null)}function YT(t,e,i,n){var r=t.stateNode;r.props=i,r.state=t.memoizedState,r.refs={},c_(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Un(s):(s=Yi(e)?sl:wi.current,r.context=hc(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(jT(t,e,s,i),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Sv.enqueueReplaceState(r,r.state,null),Qg(t,i,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function gc(t,e){try{var i="",n=e;do i+=nU(n),n=n.return;while(n);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function zy(t,e,i){return{value:t,source:null,stack:i??null,digest:e??null}}function qT(t,e){try{console.error(e.value)}catch(i){setTimeout(function(){throw i})}}var w8=typeof WeakMap=="function"?WeakMap:Map;function A2(t,e,i){i=Ls(-1,i),i.tag=3,i.payload={element:null};var n=e.value;return i.callback=function(){t0||(t0=!0,r1=n),qT(t,e)},i}function x2(t,e,i){i=Ls(-1,i),i.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;i.payload=function(){return n(r)},i.callback=function(){qT(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){qT(t,e),typeof n!="function"&&(Ua===null?Ua=new Set([this]):Ua.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),i}function lI(t,e,i){var n=t.pingCache;if(n===null){n=t.pingCache=new w8;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(i)||(r.add(i),t=G8.bind(null,t,e,i),e.then(t,t))}function uI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function cI(t,e,i,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(e=Ls(-1,1),e.tag=2,Fa(i,e,1))),i.lanes|=1),t)}var C8=Hs.ReactCurrentOwner,Gi=!1;function Pi(t,e,i,n){e.child=t===null?e2(e,null,i,n):mc(e,t.child,i,n)}function dI(t,e,i,n,r){i=i.render;var s=e.ref;return Hu(e,r),n=p_(t,e,i,n,s,r),i=g_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Fs(t,e,r)):(vt&&i&&n_(e),e.flags|=1,Pi(t,e,n,r),e.child)}function hI(t,e,i,n,r){if(t===null){var s=i.type;return typeof s=="function"&&!k_(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(e.tag=15,e.type=s,k2(t,e,s,n,r)):(t=op(i.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var a=s.memoizedProps;if(i=i.compare,i=i!==null?i:wh,i(a,n)&&t.ref===e.ref)return Fs(t,e,r)}return e.flags|=1,t=Va(s,n),t.ref=e.ref,t.return=e,e.child=t}function k2(t,e,i,n,r){if(t!==null){var s=t.memoizedProps;if(wh(s,n)&&t.ref===e.ref)if(Gi=!1,e.pendingProps=n=s,(t.lanes&r)!==0)t.flags&131072&&(Gi=!0);else return e.lanes=t.lanes,Fs(t,e,r)}return zT(t,e,i,n,r)}function I2(t,e,i){var n=e.pendingProps,r=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(ku,cn),cn|=i;else{if(!(i&1073741824))return t=s!==null?s.baseLanes|i:i,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(ku,cn),cn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:i,rt(ku,cn),cn|=n}else s!==null?(n=s.baseLanes|i,e.memoizedState=null):n=i,rt(ku,cn),cn|=n;return Pi(t,e,r,i),e.child}function L2(t,e){var i=e.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(e.flags|=512,e.flags|=2097152)}function zT(t,e,i,n,r){var s=Yi(i)?sl:wi.current;return s=hc(e,s),Hu(e,r),i=p_(t,e,i,n,s,r),n=g_(),t!==null&&!Gi?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Fs(t,e,r)):(vt&&n&&n_(e),e.flags|=1,Pi(t,e,i,r),e.child)}function fI(t,e,i,n,r){if(Yi(i)){var s=!0;Wg(e)}else s=!1;if(Hu(e,r),e.stateNode===null)rp(t,e),_2(e,i,n),YT(e,i,n,r),n=!0;else if(t===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=i.contextType;typeof u=="object"&&u!==null?u=Un(u):(u=Yi(i)?sl:wi.current,u=hc(e,u));var c=i.getDerivedStateFromProps,d=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";d||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&oI(e,a,n,u),ua=!1;var h=e.memoizedState;a.state=h,Qg(e,n,a,r),l=e.memoizedState,o!==n||h!==l||ji.current||ua?(typeof c=="function"&&(jT(e,i,c,n),l=e.memoizedState),(o=ua||aI(e,i,o,n,h,l,u))?(d||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,i2(t,e),o=e.memoizedProps,u=e.type===e.elementType?o:ir(e.type,o),a.props=u,d=e.pendingProps,h=a.context,l=i.contextType,typeof l=="object"&&l!==null?l=Un(l):(l=Yi(i)?sl:wi.current,l=hc(e,l));var f=i.getDerivedStateFromProps;(c=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==d||h!==l)&&oI(e,a,n,l),ua=!1,h=e.memoizedState,a.state=h,Qg(e,n,a,r);var m=e.memoizedState;o!==d||h!==m||ji.current||ua?(typeof f=="function"&&(jT(e,i,f,n),m=e.memoizedState),(u=ua||aI(e,i,u,n,h,m,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,m,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,m,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=m),a.props=n,a.state=m,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),n=!1)}return QT(t,e,i,n,s,r)}function QT(t,e,i,n,r,s){L2(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&Zk(e,i,!1),Fs(t,e,s);n=e.stateNode,C8.current=e;var o=a&&typeof i.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=mc(e,t.child,null,s),e.child=mc(e,null,o,s)):Pi(t,e,o,s),e.memoizedState=n.state,r&&Zk(e,i,!0),e.child}function R2(t){var e=t.stateNode;e.pendingContext?Xk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Xk(t,e.context,!1),d_(t,e.containerInfo)}function mI(t,e,i,n,r){return fc(),s_(r),e.flags|=256,Pi(t,e,i,n),e.child}var XT={dehydrated:null,treeContext:null,retryLane:0};function ZT(t){return{baseLanes:t,cachePool:null,transitions:null}}function w2(t,e,i){var n=e.pendingProps,r=Tt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=t!==null&&t.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),rt(Tt,r&1),t===null)return GT(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=xv(a,n,0,null),t=qo(t,n,i,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ZT(i),e.memoizedState=XT,t):E_(e,a));if(r=t.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return D8(t,e,a,n,o,r,i);if(s){s=n.fallback,a=e.mode,r=t.child,o=r.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Va(r,l),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Va(o,s):(s=qo(s,a,i,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=t.child.memoizedState,a=a===null?ZT(i):{baseLanes:a.baseLanes|i,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=t.childLanes&~i,e.memoizedState=XT,n}return s=t.child,t=s.sibling,n=Va(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=i),n.return=e,n.sibling=null,t!==null&&(i=e.deletions,i===null?(e.deletions=[t],e.flags|=16):i.push(t)),e.child=n,e.memoizedState=null,n}function E_(t,e){return e=xv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nm(t,e,i,n){return n!==null&&s_(n),mc(e,t.child,null,i),t=E_(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function D8(t,e,i,n,r,s,a){if(i)return e.flags&256?(e.flags&=-257,n=zy(Error(X(422))),nm(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=xv({mode:"visible",children:n.children},r,0,null),s=qo(s,r,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&mc(e,t.child,null,a),e.child.memoizedState=ZT(a),e.memoizedState=XT,s);if(!(e.mode&1))return nm(t,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(X(419)),n=zy(s,n,void 0),nm(t,e,a,n)}if(o=(a&t.childLanes)!==0,Gi||o){if(n=oi,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,$s(t,r),dr(n,t,r,-1))}return x_(),n=zy(Error(X(421))),nm(t,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=W8.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,fn=$a(r.nextSibling),mn=e,vt=!0,ar=null,t!==null&&(Cn[Dn++]=As,Cn[Dn++]=xs,Cn[Dn++]=al,As=t.id,xs=t.overflow,al=e),e=E_(e,n.children),e.flags|=4096,e)}function pI(t,e,i){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),WT(t.return,e,i)}function Qy(t,e,i,n,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r)}function C2(t,e,i){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(Pi(t,e,n.children,i),n=Tt.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pI(t,i,e);else if(t.tag===19)pI(t,i,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(rt(Tt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(i=e.child,r=null;i!==null;)t=i.alternate,t!==null&&Xg(t)===null&&(r=i),i=i.sibling;i=r,i===null?(r=e.child,e.child=null):(r=i.sibling,i.sibling=null),Qy(e,!1,r,i,s);break;case"backwards":for(i=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Xg(t)===null){e.child=r;break}t=r.sibling,r.sibling=i,i=r,r=t}Qy(e,!0,i,null,s);break;case"together":Qy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fs(t,e,i){if(t!==null&&(e.dependencies=t.dependencies),ll|=e.lanes,!(i&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,i=Va(t,t.pendingProps),e.child=i,i.return=e;t.sibling!==null;)t=t.sibling,i=i.sibling=Va(t,t.pendingProps),i.return=e;i.sibling=null}return e.child}function P8(t,e,i){switch(e.tag){case 3:R2(e),fc();break;case 5:n2(e);break;case 1:Yi(e.type)&&Wg(e);break;case 4:d_(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;rt(qg,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(rt(Tt,Tt.current&1),e.flags|=128,null):i&e.child.childLanes?w2(t,e,i):(rt(Tt,Tt.current&1),t=Fs(t,e,i),t!==null?t.sibling:null);rt(Tt,Tt.current&1);break;case 19:if(n=(i&e.childLanes)!==0,t.flags&128){if(n)return C2(t,e,i);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),rt(Tt,Tt.current),n)break;return null;case 22:case 23:return e.lanes=0,I2(t,e,i)}return Fs(t,e,i)}var D2,JT,P2,O2;D2=function(t,e){for(var i=e.child;i!==null;){if(i.tag===5||i.tag===6)t.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};JT=function(){};P2=function(t,e,i,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Mo(Xr.current);var s=null;switch(i){case"input":r=bT(t,r),n=bT(t,n),s=[];break;case"select":r=At({},r,{value:void 0}),n=At({},n,{value:void 0}),s=[];break;case"textarea":r=AT(t,r),n=AT(t,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Kg)}kT(i,n);var a;i=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(i||(i={}),i[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(_h.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(i||(i={}),i[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(i||(i={}),i[a]=l[a])}else i||(s||(s=[]),s.push(u,i)),i=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(_h.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ut("scroll",t),s||o===l||(s=[])):(s=s||[]).push(u,l))}i&&(s=s||[]).push("style",i);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};O2=function(t,e,i,n){i!==n&&(e.flags|=4)};function Xc(t,e){if(!vt)switch(t.tailMode){case"hidden":e=t.tail;for(var i=null;e!==null;)e.alternate!==null&&(i=e),e=e.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Si(t){var e=t.alternate!==null&&t.alternate.child===t.child,i=0,n=0;if(e)for(var r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=i,e}function O8(t,e,i){var n=e.pendingProps;switch(r_(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Si(e),null;case 1:return Yi(e.type)&&Gg(),Si(e),null;case 3:return n=e.stateNode,pc(),ct(ji),ct(wi),f_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(tm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ar!==null&&(o1(ar),ar=null))),JT(t,e),Si(e),null;case 5:h_(e);var r=Mo(Mh.current);if(i=e.type,t!==null&&e.stateNode!=null)P2(t,e,i,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(X(166));return Si(e),null}if(t=Mo(Xr.current),tm(e)){n=e.stateNode,i=e.type;var s=e.memoizedProps;switch(n[Vr]=e,n[Ph]=s,t=(e.mode&1)!==0,i){case"dialog":ut("cancel",n),ut("close",n);break;case"iframe":case"object":case"embed":ut("load",n);break;case"video":case"audio":for(r=0;r<bd.length;r++)ut(bd[r],n);break;case"source":ut("error",n);break;case"img":case"image":case"link":ut("error",n),ut("load",n);break;case"details":ut("toggle",n);break;case"input":Ak(n,s),ut("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ut("invalid",n);break;case"textarea":kk(n,s),ut("invalid",n)}kT(i,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&em(n.textContent,o,t),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&em(n.textContent,o,t),r=["children",""+o]):_h.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&ut("scroll",n)}switch(i){case"input":jf(n),xk(n,s,!0);break;case"textarea":jf(n),Ik(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Kg)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=lP(i)),t==="http://www.w3.org/1999/xhtml"?i==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(i,{is:n.is}):(t=a.createElement(i),i==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,i),t[Vr]=e,t[Ph]=n,D2(t,e,!1,!1),e.stateNode=t;e:{switch(a=IT(i,n),i){case"dialog":ut("cancel",t),ut("close",t),r=n;break;case"iframe":case"object":case"embed":ut("load",t),r=n;break;case"video":case"audio":for(r=0;r<bd.length;r++)ut(bd[r],t);r=n;break;case"source":ut("error",t),r=n;break;case"img":case"image":case"link":ut("error",t),ut("load",t),r=n;break;case"details":ut("toggle",t),r=n;break;case"input":Ak(t,n),r=bT(t,n),ut("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=At({},n,{value:void 0}),ut("invalid",t);break;case"textarea":kk(t,n),r=AT(t,n),ut("invalid",t);break;default:r=n}kT(i,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?dP(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&uP(t,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Ah(t,l):typeof l=="number"&&Ah(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(_h.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ut("scroll",t):l!=null&&KS(t,s,l,a))}switch(i){case"input":jf(t),xk(t,n,!1);break;case"textarea":jf(t),Ik(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Wa(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?Fu(t,!!n.multiple,s,!1):n.defaultValue!=null&&Fu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Kg)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Si(e),null;case 6:if(t&&e.stateNode!=null)O2(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(X(166));if(i=Mo(Mh.current),Mo(Xr.current),tm(e)){if(n=e.stateNode,i=e.memoizedProps,n[Vr]=e,(s=n.nodeValue!==i)&&(t=mn,t!==null))switch(t.tag){case 3:em(n.nodeValue,i,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&em(n.nodeValue,i,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[Vr]=e,e.stateNode=n}return Si(e),null;case 13:if(ct(Tt),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(vt&&fn!==null&&e.mode&1&&!(e.flags&128))ZP(),fc(),e.flags|=98560,s=!1;else if(s=tm(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(X(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(X(317));s[Vr]=e}else fc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Si(e),s=!1}else ar!==null&&(o1(ar),ar=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=i,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?ti===0&&(ti=3):x_())),e.updateQueue!==null&&(e.flags|=4),Si(e),null);case 4:return pc(),JT(t,e),t===null&&Ch(e.stateNode.containerInfo),Si(e),null;case 10:return l_(e.type._context),Si(e),null;case 17:return Yi(e.type)&&Gg(),Si(e),null;case 19:if(ct(Tt),s=e.memoizedState,s===null)return Si(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Xc(s,!1);else{if(ti!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=Xg(t),a!==null){for(e.flags|=128,Xc(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=i,i=e.child;i!==null;)s=i,t=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,t=a.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),i=i.sibling;return rt(Tt,Tt.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ot()>vc&&(e.flags|=128,n=!0,Xc(s,!1),e.lanes=4194304)}else{if(!n)if(t=Xg(a),t!==null){if(e.flags|=128,n=!0,i=t.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),Xc(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!vt)return Si(e),null}else 2*Ot()-s.renderingStartTime>vc&&i!==1073741824&&(e.flags|=128,n=!0,Xc(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(i=s.last,i!==null?i.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ot(),e.sibling=null,i=Tt.current,rt(Tt,n?i&1|2:i&1),e):(Si(e),null);case 22:case 23:return A_(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?cn&1073741824&&(Si(e),e.subtreeFlags&6&&(e.flags|=8192)):Si(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function M8(t,e){switch(r_(e),e.tag){case 1:return Yi(e.type)&&Gg(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return pc(),ct(ji),ct(wi),f_(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return h_(e),null;case 13:if(ct(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));fc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(Tt),null;case 4:return pc(),null;case 10:return l_(e.type._context),null;case 22:case 23:return A_(),null;case 24:return null;default:return null}}var rm=!1,Ii=!1,N8=typeof WeakSet=="function"?WeakSet:Set,ae=null;function xu(t,e){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){Rt(t,e,n)}else i.current=null}function e1(t,e,i){try{i()}catch(n){Rt(t,e,n)}}var gI=!1;function $8(t,e){if($T=Bg,t=UP(),i_(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break e}var a=0,o=-1,l=-1,u=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==i||r!==0&&d.nodeType!==3||(o=a+r),d!==s||n!==0&&d.nodeType!==3||(l=a+n),d.nodeType===3&&(a+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===i&&++u===r&&(o=a),h===s&&++c===n&&(l=a),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}i=o===-1||l===-1?null:{start:o,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(FT={focusedElem:t,selectionRange:i},Bg=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var p=m.memoizedProps,y=m.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?p:ir(e.type,p),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(T){Rt(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return m=gI,gI=!1,m}function th(t,e,i){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&e1(e,i,s)}r=r.next}while(r!==n)}}function _v(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var i=e=e.next;do{if((i.tag&t)===t){var n=i.create;i.destroy=n()}i=i.next}while(i!==e)}}function t1(t){var e=t.ref;if(e!==null){var i=t.stateNode;switch(t.tag){case 5:t=i;break;default:t=i}typeof e=="function"?e(t):e.current=t}}function M2(t){var e=t.alternate;e!==null&&(t.alternate=null,M2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[Ph],delete e[VT],delete e[E8],delete e[T8])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N2(t){return t.tag===5||t.tag===3||t.tag===4}function vI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function i1(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.nodeType===8?i.parentNode.insertBefore(t,e):i.insertBefore(t,e):(i.nodeType===8?(e=i.parentNode,e.insertBefore(t,i)):(e=i,e.appendChild(t)),i=i._reactRootContainer,i!=null||e.onclick!==null||(e.onclick=Kg));else if(n!==4&&(t=t.child,t!==null))for(i1(t,e,i),t=t.sibling;t!==null;)i1(t,e,i),t=t.sibling}function n1(t,e,i){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?i.insertBefore(t,e):i.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(n1(t,e,i),t=t.sibling;t!==null;)n1(t,e,i),t=t.sibling}var hi=null,rr=!1;function js(t,e,i){for(i=i.child;i!==null;)$2(t,e,i),i=i.sibling}function $2(t,e,i){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(pv,i)}catch{}switch(i.tag){case 5:Ii||xu(i,e);case 6:var n=hi,r=rr;hi=null,js(t,e,i),hi=n,rr=r,hi!==null&&(rr?(t=hi,i=i.stateNode,t.nodeType===8?t.parentNode.removeChild(i):t.removeChild(i)):hi.removeChild(i.stateNode));break;case 18:hi!==null&&(rr?(t=hi,i=i.stateNode,t.nodeType===8?Ky(t.parentNode,i):t.nodeType===1&&Ky(t,i),Lh(t)):Ky(hi,i.stateNode));break;case 4:n=hi,r=rr,hi=i.stateNode.containerInfo,rr=!0,js(t,e,i),hi=n,rr=r;break;case 0:case 11:case 14:case 15:if(!Ii&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&e1(i,e,a),r=r.next}while(r!==n)}js(t,e,i);break;case 1:if(!Ii&&(xu(i,e),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(o){Rt(i,e,o)}js(t,e,i);break;case 21:js(t,e,i);break;case 22:i.mode&1?(Ii=(n=Ii)||i.memoizedState!==null,js(t,e,i),Ii=n):js(t,e,i);break;default:js(t,e,i)}}function yI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new N8),e.forEach(function(n){var r=j8.bind(null,t,n);i.has(n)||(i.add(n),n.then(r,r))})}}function Yn(t,e){var i=e.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n];try{var s=t,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:hi=o.stateNode,rr=!1;break e;case 3:hi=o.stateNode.containerInfo,rr=!0;break e;case 4:hi=o.stateNode.containerInfo,rr=!0;break e}o=o.return}if(hi===null)throw Error(X(160));$2(s,a,r),hi=null,rr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Rt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)F2(e,t),e=e.sibling}function F2(t,e){var i=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Yn(e,t),gr(t),n&4){try{th(3,t,t.return),_v(3,t)}catch(p){Rt(t,t.return,p)}try{th(5,t,t.return)}catch(p){Rt(t,t.return,p)}}break;case 1:Yn(e,t),gr(t),n&512&&i!==null&&xu(i,i.return);break;case 5:if(Yn(e,t),gr(t),n&512&&i!==null&&xu(i,i.return),t.flags&32){var r=t.stateNode;try{Ah(r,"")}catch(p){Rt(t,t.return,p)}}if(n&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,a=i!==null?i.memoizedProps:s,o=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&aP(r,s),IT(o,a);var u=IT(o,s);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];c==="style"?dP(r,d):c==="dangerouslySetInnerHTML"?uP(r,d):c==="children"?Ah(r,d):KS(r,c,d,u)}switch(o){case"input":ST(r,s);break;case"textarea":oP(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Fu(r,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?Fu(r,!!s.multiple,s.defaultValue,!0):Fu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ph]=s}catch(p){Rt(t,t.return,p)}}break;case 6:if(Yn(e,t),gr(t),n&4){if(t.stateNode===null)throw Error(X(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(p){Rt(t,t.return,p)}}break;case 3:if(Yn(e,t),gr(t),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Lh(e.containerInfo)}catch(p){Rt(t,t.return,p)}break;case 4:Yn(e,t),gr(t);break;case 13:Yn(e,t),gr(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(S_=Ot())),n&4&&yI(t);break;case 22:if(c=i!==null&&i.memoizedState!==null,t.mode&1?(Ii=(u=Ii)||c,Yn(e,t),Ii=u):Yn(e,t),gr(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(ae=t,c=t.child;c!==null;){for(d=ae=c;ae!==null;){switch(h=ae,f=h.child,h.tag){case 0:case 11:case 14:case 15:th(4,h,h.return);break;case 1:xu(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){n=h,i=h.return;try{e=n,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(p){Rt(n,i,p)}}break;case 5:xu(h,h.return);break;case 22:if(h.memoizedState!==null){TI(d);continue}}f!==null?(f.return=h,ae=f):TI(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=d.stateNode,l=d.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=cP("display",a))}catch(p){Rt(t,t.return,p)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(p){Rt(t,t.return,p)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Yn(e,t),gr(t),n&4&&yI(t);break;case 21:break;default:Yn(e,t),gr(t)}}function gr(t){var e=t.flags;if(e&2){try{e:{for(var i=t.return;i!==null;){if(N2(i)){var n=i;break e}i=i.return}throw Error(X(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Ah(r,""),n.flags&=-33);var s=vI(t);n1(t,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=vI(t);i1(t,o,a);break;default:throw Error(X(161))}}catch(l){Rt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function F8(t,e,i){ae=t,U2(t)}function U2(t,e,i){for(var n=(t.mode&1)!==0;ae!==null;){var r=ae,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||rm;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||Ii;o=rm;var u=Ii;if(rm=a,(Ii=l)&&!u)for(ae=r;ae!==null;)a=ae,l=a.child,a.tag===22&&a.memoizedState!==null?bI(r):l!==null?(l.return=a,ae=l):bI(r);for(;s!==null;)ae=s,U2(s),s=s.sibling;ae=r,rm=o,Ii=u}EI(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ae=s):EI(t)}}function EI(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var i=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ii||_v(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ii)if(i===null)n.componentDidMount();else{var r=e.elementType===e.type?i.memoizedProps:ir(e.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&nI(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(i=null,e.child!==null)switch(e.child.tag){case 5:i=e.child.stateNode;break;case 1:i=e.child.stateNode}nI(e,a,i)}break;case 5:var o=e.stateNode;if(i===null&&e.flags&4){i=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Lh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}Ii||e.flags&512&&t1(e)}catch(h){Rt(e,e.return,h)}}if(e===t){ae=null;break}if(i=e.sibling,i!==null){i.return=e.return,ae=i;break}ae=e.return}}function TI(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var i=e.sibling;if(i!==null){i.return=e.return,ae=i;break}ae=e.return}}function bI(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var i=e.return;try{_v(4,e)}catch(l){Rt(e,i,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(l){Rt(e,r,l)}}var s=e.return;try{t1(e)}catch(l){Rt(e,s,l)}break;case 5:var a=e.return;try{t1(e)}catch(l){Rt(e,a,l)}}}catch(l){Rt(e,e.return,l)}if(e===t){ae=null;break}var o=e.sibling;if(o!==null){o.return=e.return,ae=o;break}ae=e.return}}var U8=Math.ceil,e0=Hs.ReactCurrentDispatcher,T_=Hs.ReactCurrentOwner,Fn=Hs.ReactCurrentBatchConfig,Oe=0,oi=null,Wt=null,yi=0,cn=0,ku=to(0),ti=0,Uh=null,ll=0,Av=0,b_=0,ih=null,Ki=null,S_=0,vc=1/0,ps=null,t0=!1,r1=null,Ua=null,sm=!1,Da=null,i0=0,nh=0,s1=null,sp=-1,ap=0;function Mi(){return Oe&6?Ot():sp!==-1?sp:sp=Ot()}function Ba(t){return t.mode&1?Oe&2&&yi!==0?yi&-yi:S8.transition!==null?(ap===0&&(ap=_P()),ap):(t=je,t!==0||(t=window.event,t=t===void 0?16:wP(t.type)),t):1}function dr(t,e,i,n){if(50<nh)throw nh=0,s1=null,Error(X(185));kf(t,i,n),(!(Oe&2)||t!==oi)&&(t===oi&&(!(Oe&2)&&(Av|=i),ti===4&&ma(t,yi)),qi(t,n),i===1&&Oe===0&&!(e.mode&1)&&(vc=Ot()+500,Tv&&io()))}function qi(t,e){var i=t.callbackNode;SU(t,e);var n=Ug(t,t===oi?yi:0);if(n===0)i!==null&&wk(i),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(i!=null&&wk(i),e===1)t.tag===0?b8(SI.bind(null,t)):zP(SI.bind(null,t)),v8(function(){!(Oe&6)&&io()}),i=null;else{switch(AP(n)){case 1:i=qS;break;case 4:i=bP;break;case 16:i=Fg;break;case 536870912:i=SP;break;default:i=Fg}i=Y2(i,B2.bind(null,t))}t.callbackPriority=e,t.callbackNode=i}}function B2(t,e){if(sp=-1,ap=0,Oe&6)throw Error(X(327));var i=t.callbackNode;if(Ku()&&t.callbackNode!==i)return null;var n=Ug(t,t===oi?yi:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=n0(t,n);else{e=n;var r=Oe;Oe|=2;var s=H2();(oi!==t||yi!==e)&&(ps=null,vc=Ot()+500,Yo(t,e));do try{H8();break}catch(o){V2(t,o)}while(!0);o_(),e0.current=s,Oe=r,Wt!==null?e=0:(oi=null,yi=0,e=ti)}if(e!==0){if(e===2&&(r=DT(t),r!==0&&(n=r,e=a1(t,r))),e===1)throw i=Uh,Yo(t,0),ma(t,n),qi(t,Ot()),i;if(e===6)ma(t,n);else{if(r=t.current.alternate,!(n&30)&&!B8(r)&&(e=n0(t,n),e===2&&(s=DT(t),s!==0&&(n=s,e=a1(t,s))),e===1))throw i=Uh,Yo(t,0),ma(t,n),qi(t,Ot()),i;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(X(345));case 2:go(t,Ki,ps);break;case 3:if(ma(t,n),(n&130023424)===n&&(e=S_+500-Ot(),10<e)){if(Ug(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){Mi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=BT(go.bind(null,t,Ki,ps),e);break}go(t,Ki,ps);break;case 4:if(ma(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var a=31-cr(n);s=1<<a,a=e[a],a>r&&(r=a),n&=~s}if(n=r,n=Ot()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*U8(n/1960))-n,10<n){t.timeoutHandle=BT(go.bind(null,t,Ki,ps),n);break}go(t,Ki,ps);break;case 5:go(t,Ki,ps);break;default:throw Error(X(329))}}}return qi(t,Ot()),t.callbackNode===i?B2.bind(null,t):null}function a1(t,e){var i=ih;return t.current.memoizedState.isDehydrated&&(Yo(t,e).flags|=256),t=n0(t,e),t!==2&&(e=Ki,Ki=i,e!==null&&o1(e)),t}function o1(t){Ki===null?Ki=t:Ki.push.apply(Ki,t)}function B8(t){for(var e=t;;){if(e.flags&16384){var i=e.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var r=i[n],s=r.getSnapshot;r=r.value;try{if(!fr(s(),r))return!1}catch{return!1}}}if(i=e.child,e.subtreeFlags&16384&&i!==null)i.return=e,e=i;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ma(t,e){for(e&=~b_,e&=~Av,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var i=31-cr(e),n=1<<i;t[i]=-1,e&=~n}}function SI(t){if(Oe&6)throw Error(X(327));Ku();var e=Ug(t,0);if(!(e&1))return qi(t,Ot()),null;var i=n0(t,e);if(t.tag!==0&&i===2){var n=DT(t);n!==0&&(e=n,i=a1(t,n))}if(i===1)throw i=Uh,Yo(t,0),ma(t,e),qi(t,Ot()),i;if(i===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,go(t,Ki,ps),qi(t,Ot()),null}function __(t,e){var i=Oe;Oe|=1;try{return t(e)}finally{Oe=i,Oe===0&&(vc=Ot()+500,Tv&&io())}}function ul(t){Da!==null&&Da.tag===0&&!(Oe&6)&&Ku();var e=Oe;Oe|=1;var i=Fn.transition,n=je;try{if(Fn.transition=null,je=1,t)return t()}finally{je=n,Fn.transition=i,Oe=e,!(Oe&6)&&io()}}function A_(){cn=ku.current,ct(ku)}function Yo(t,e){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==-1&&(t.timeoutHandle=-1,g8(i)),Wt!==null)for(i=Wt.return;i!==null;){var n=i;switch(r_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gg();break;case 3:pc(),ct(ji),ct(wi),f_();break;case 5:h_(n);break;case 4:pc();break;case 13:ct(Tt);break;case 19:ct(Tt);break;case 10:l_(n.type._context);break;case 22:case 23:A_()}i=i.return}if(oi=t,Wt=t=Va(t.current,null),yi=cn=e,ti=0,Uh=null,b_=Av=ll=0,Ki=ih=null,Oo!==null){for(e=0;e<Oo.length;e++)if(i=Oo[e],n=i.interleaved,n!==null){i.interleaved=null;var r=n.next,s=i.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}i.pending=n}Oo=null}return t}function V2(t,e){do{var i=Wt;try{if(o_(),ip.current=Jg,Zg){for(var n=_t.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Zg=!1}if(ol=0,si=Zt=_t=null,eh=!1,Nh=0,T_.current=null,i===null||i.return===null){ti=1,Uh=e,Wt=null;break}e:{var s=t,a=i.return,o=i,l=e;if(e=yi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=uI(a);if(f!==null){f.flags&=-257,cI(f,a,o,s,e),f.mode&1&&lI(s,u,e),e=f,l=u;var m=e.updateQueue;if(m===null){var p=new Set;p.add(l),e.updateQueue=p}else m.add(l);break e}else{if(!(e&1)){lI(s,u,e),x_();break e}l=Error(X(426))}}else if(vt&&o.mode&1){var y=uI(a);if(y!==null){!(y.flags&65536)&&(y.flags|=256),cI(y,a,o,s,e),s_(gc(l,o));break e}}s=l=gc(l,o),ti!==4&&(ti=2),ih===null?ih=[s]:ih.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=A2(s,l,e);iI(s,g);break e;case 1:o=l;var v=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ua===null||!Ua.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=x2(s,o,e);iI(s,T);break e}}s=s.return}while(s!==null)}G2(i)}catch(_){e=_,Wt===i&&i!==null&&(Wt=i=i.return);continue}break}while(!0)}function H2(){var t=e0.current;return e0.current=Jg,t===null?Jg:t}function x_(){(ti===0||ti===3||ti===2)&&(ti=4),oi===null||!(ll&268435455)&&!(Av&268435455)||ma(oi,yi)}function n0(t,e){var i=Oe;Oe|=2;var n=H2();(oi!==t||yi!==e)&&(ps=null,Yo(t,e));do try{V8();break}catch(r){V2(t,r)}while(!0);if(o_(),Oe=i,e0.current=n,Wt!==null)throw Error(X(261));return oi=null,yi=0,ti}function V8(){for(;Wt!==null;)K2(Wt)}function H8(){for(;Wt!==null&&!fU();)K2(Wt)}function K2(t){var e=j2(t.alternate,t,cn);t.memoizedProps=t.pendingProps,e===null?G2(t):Wt=e,T_.current=null}function G2(t){var e=t;do{var i=e.alternate;if(t=e.return,e.flags&32768){if(i=M8(i,e),i!==null){i.flags&=32767,Wt=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ti=6,Wt=null;return}}else if(i=O8(i,e,cn),i!==null){Wt=i;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);ti===0&&(ti=5)}function go(t,e,i){var n=je,r=Fn.transition;try{Fn.transition=null,je=1,K8(t,e,i,n)}finally{Fn.transition=r,je=n}return null}function K8(t,e,i,n){do Ku();while(Da!==null);if(Oe&6)throw Error(X(327));i=t.finishedWork;var r=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var s=i.lanes|i.childLanes;if(_U(t,s),t===oi&&(Wt=oi=null,yi=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||sm||(sm=!0,Y2(Fg,function(){return Ku(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=Fn.transition,Fn.transition=null;var a=je;je=1;var o=Oe;Oe|=4,T_.current=null,$8(t,i),F2(i,t),u8(FT),Bg=!!$T,FT=$T=null,t.current=i,F8(i),mU(),Oe=o,je=a,Fn.transition=s}else t.current=i;if(sm&&(sm=!1,Da=t,i0=r),s=t.pendingLanes,s===0&&(Ua=null),vU(i.stateNode),qi(t,Ot()),e!==null)for(n=t.onRecoverableError,i=0;i<e.length;i++)r=e[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(t0)throw t0=!1,t=r1,r1=null,t;return i0&1&&t.tag!==0&&Ku(),s=t.pendingLanes,s&1?t===s1?nh++:(nh=0,s1=t):nh=0,io(),null}function Ku(){if(Da!==null){var t=AP(i0),e=Fn.transition,i=je;try{if(Fn.transition=null,je=16>t?16:t,Da===null)var n=!1;else{if(t=Da,Da=null,i0=0,Oe&6)throw Error(X(331));var r=Oe;for(Oe|=4,ae=t.current;ae!==null;){var s=ae,a=s.child;if(ae.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(ae=u;ae!==null;){var c=ae;switch(c.tag){case 0:case 11:case 15:th(8,c,s)}var d=c.child;if(d!==null)d.return=c,ae=d;else for(;ae!==null;){c=ae;var h=c.sibling,f=c.return;if(M2(c),c===u){ae=null;break}if(h!==null){h.return=f,ae=h;break}ae=f}}}var m=s.alternate;if(m!==null){var p=m.child;if(p!==null){m.child=null;do{var y=p.sibling;p.sibling=null,p=y}while(p!==null)}}ae=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,ae=a;else e:for(;ae!==null;){if(s=ae,s.flags&2048)switch(s.tag){case 0:case 11:case 15:th(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,ae=g;break e}ae=s.return}}var v=t.current;for(ae=v;ae!==null;){a=ae;var E=a.child;if(a.subtreeFlags&2064&&E!==null)E.return=a,ae=E;else e:for(a=v;ae!==null;){if(o=ae,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:_v(9,o)}}catch(_){Rt(o,o.return,_)}if(o===a){ae=null;break e}var T=o.sibling;if(T!==null){T.return=o.return,ae=T;break e}ae=o.return}}if(Oe=r,io(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(pv,t)}catch{}n=!0}return n}finally{je=i,Fn.transition=e}}return!1}function _I(t,e,i){e=gc(i,e),e=A2(t,e,1),t=Fa(t,e,1),e=Mi(),t!==null&&(kf(t,1,e),qi(t,e))}function Rt(t,e,i){if(t.tag===3)_I(t,t,i);else for(;e!==null;){if(e.tag===3){_I(e,t,i);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Ua===null||!Ua.has(n))){t=gc(i,t),t=x2(e,t,1),e=Fa(e,t,1),t=Mi(),e!==null&&(kf(e,1,t),qi(e,t));break}}e=e.return}}function G8(t,e,i){var n=t.pingCache;n!==null&&n.delete(e),e=Mi(),t.pingedLanes|=t.suspendedLanes&i,oi===t&&(yi&i)===i&&(ti===4||ti===3&&(yi&130023424)===yi&&500>Ot()-S_?Yo(t,0):b_|=i),qi(t,e)}function W2(t,e){e===0&&(t.mode&1?(e=zf,zf<<=1,!(zf&130023424)&&(zf=4194304)):e=1);var i=Mi();t=$s(t,e),t!==null&&(kf(t,e,i),qi(t,i))}function W8(t){var e=t.memoizedState,i=0;e!==null&&(i=e.retryLane),W2(t,i)}function j8(t,e){var i=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(X(314))}n!==null&&n.delete(e),W2(t,i)}var j2;j2=function(t,e,i){if(t!==null)if(t.memoizedProps!==e.pendingProps||ji.current)Gi=!0;else{if(!(t.lanes&i)&&!(e.flags&128))return Gi=!1,P8(t,e,i);Gi=!!(t.flags&131072)}else Gi=!1,vt&&e.flags&1048576&&QP(e,Yg,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;rp(t,e),t=e.pendingProps;var r=hc(e,wi.current);Hu(e,i),r=p_(null,e,n,t,r,i);var s=g_();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yi(n)?(s=!0,Wg(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,c_(e),r.updater=Sv,e.stateNode=r,r._reactInternals=e,YT(e,n,t,i),e=QT(null,e,n,!0,s,i)):(e.tag=0,vt&&s&&n_(e),Pi(null,e,r,i),e=e.child),e;case 16:n=e.elementType;e:{switch(rp(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=q8(n),t=ir(n,t),r){case 0:e=zT(null,e,n,t,i);break e;case 1:e=fI(null,e,n,t,i);break e;case 11:e=dI(null,e,n,t,i);break e;case 14:e=hI(null,e,n,ir(n.type,t),i);break e}throw Error(X(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ir(n,r),zT(t,e,n,r,i);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ir(n,r),fI(t,e,n,r,i);case 3:e:{if(R2(e),t===null)throw Error(X(387));n=e.pendingProps,s=e.memoizedState,r=s.element,i2(t,e),Qg(e,n,null,i);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=gc(Error(X(423)),e),e=mI(t,e,n,i,r);break e}else if(n!==r){r=gc(Error(X(424)),e),e=mI(t,e,n,i,r);break e}else for(fn=$a(e.stateNode.containerInfo.firstChild),mn=e,vt=!0,ar=null,i=e2(e,null,n,i),e.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(fc(),n===r){e=Fs(t,e,i);break e}Pi(t,e,n,i)}e=e.child}return e;case 5:return n2(e),t===null&&GT(e),n=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,a=r.children,UT(n,r)?a=null:s!==null&&UT(n,s)&&(e.flags|=32),L2(t,e),Pi(t,e,a,i),e.child;case 6:return t===null&&GT(e),null;case 13:return w2(t,e,i);case 4:return d_(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=mc(e,null,n,i):Pi(t,e,n,i),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ir(n,r),dI(t,e,n,r,i);case 7:return Pi(t,e,e.pendingProps,i),e.child;case 8:return Pi(t,e,e.pendingProps.children,i),e.child;case 12:return Pi(t,e,e.pendingProps.children,i),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,rt(qg,n._currentValue),n._currentValue=a,s!==null)if(fr(s.value,a)){if(s.children===r.children&&!ji.current){e=Fs(t,e,i);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Ls(-1,i&-i),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),WT(s.return,i,e),o.lanes|=i;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(X(341));a.lanes|=i,o=a.alternate,o!==null&&(o.lanes|=i),WT(a,i,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}Pi(t,e,r.children,i),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Hu(e,i),r=Un(r),n=n(r),e.flags|=1,Pi(t,e,n,i),e.child;case 14:return n=e.type,r=ir(n,e.pendingProps),r=ir(n.type,r),hI(t,e,n,r,i);case 15:return k2(t,e,e.type,e.pendingProps,i);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ir(n,r),rp(t,e),e.tag=1,Yi(n)?(t=!0,Wg(e)):t=!1,Hu(e,i),_2(e,n,r),YT(e,n,r,i),QT(null,e,n,!0,t,i);case 19:return C2(t,e,i);case 22:return I2(t,e,i)}throw Error(X(156,e.tag))};function Y2(t,e){return TP(t,e)}function Y8(t,e,i,n){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(t,e,i,n){return new Y8(t,e,i,n)}function k_(t){return t=t.prototype,!(!t||!t.isReactComponent)}function q8(t){if(typeof t=="function")return k_(t)?1:0;if(t!=null){if(t=t.$$typeof,t===WS)return 11;if(t===jS)return 14}return 2}function Va(t,e){var i=t.alternate;return i===null?(i=$n(t.tag,e,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=e,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,e=t.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function op(t,e,i,n,r,s){var a=2;if(n=t,typeof t=="function")k_(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case gu:return qo(i.children,r,s,e);case GS:a=8,r|=8;break;case vT:return t=$n(12,i,e,r|2),t.elementType=vT,t.lanes=s,t;case yT:return t=$n(13,i,e,r),t.elementType=yT,t.lanes=s,t;case ET:return t=$n(19,i,e,r),t.elementType=ET,t.lanes=s,t;case nP:return xv(i,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case tP:a=10;break e;case iP:a=9;break e;case WS:a=11;break e;case jS:a=14;break e;case la:a=16,n=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=$n(a,i,e,r),e.elementType=t,e.type=n,e.lanes=s,e}function qo(t,e,i,n){return t=$n(7,t,n,e),t.lanes=i,t}function xv(t,e,i,n){return t=$n(22,t,n,e),t.elementType=nP,t.lanes=i,t.stateNode={isHidden:!1},t}function Xy(t,e,i){return t=$n(6,t,null,e),t.lanes=i,t}function Zy(t,e,i){return e=$n(4,t.children!==null?t.children:[],t.key,e),e.lanes=i,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z8(t,e,i,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Dy(0),this.expirationTimes=Dy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Dy(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function I_(t,e,i,n,r,s,a,o,l){return t=new z8(t,e,i,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=$n(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},c_(s),t}function Q8(t,e,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:i}}function q2(t){if(!t)return ja;t=t._reactInternals;e:{if(pl(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var i=t.type;if(Yi(i))return qP(t,i,e)}return e}function z2(t,e,i,n,r,s,a,o,l){return t=I_(i,n,!0,t,r,s,a,o,l),t.context=q2(null),i=t.current,n=Mi(),r=Ba(i),s=Ls(n,r),s.callback=e??null,Fa(i,s,r),t.current.lanes=r,kf(t,r,n),qi(t,n),t}function kv(t,e,i,n){var r=e.current,s=Mi(),a=Ba(r);return i=q2(i),e.context===null?e.context=i:e.pendingContext=i,e=Ls(s,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Fa(r,e,a),t!==null&&(dr(t,r,a,s),tp(t,r,a)),a}function r0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function AI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<e?i:e}}function L_(t,e){AI(t,e),(t=t.alternate)&&AI(t,e)}function X8(){return null}var Q2=typeof reportError=="function"?reportError:function(t){console.error(t)};function R_(t){this._internalRoot=t}Iv.prototype.render=R_.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));kv(t,e,null,null)};Iv.prototype.unmount=R_.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ul(function(){kv(null,t,null,null)}),e[Ns]=null}};function Iv(t){this._internalRoot=t}Iv.prototype.unstable_scheduleHydration=function(t){if(t){var e=IP();t={blockedOn:null,target:t,priority:e};for(var i=0;i<fa.length&&e!==0&&e<fa[i].priority;i++);fa.splice(i,0,t),i===0&&RP(t)}};function w_(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xI(){}function Z8(t,e,i,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=r0(a);s.call(u)}}var a=z2(e,n,t,0,null,!1,!1,"",xI);return t._reactRootContainer=a,t[Ns]=a.current,Ch(t.nodeType===8?t.parentNode:t),ul(),a}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=r0(l);o.call(u)}}var l=I_(t,0,!1,null,null,!1,!1,"",xI);return t._reactRootContainer=l,t[Ns]=l.current,Ch(t.nodeType===8?t.parentNode:t),ul(function(){kv(e,l,i,n)}),l}function Rv(t,e,i,n,r){var s=i._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=r0(a);o.call(l)}}kv(e,a,t,r)}else a=Z8(i,e,t,r,n);return r0(a)}xP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var i=Td(e.pendingLanes);i!==0&&(zS(e,i|1),qi(e,Ot()),!(Oe&6)&&(vc=Ot()+500,io()))}break;case 13:ul(function(){var n=$s(t,1);if(n!==null){var r=Mi();dr(n,t,1,r)}}),L_(t,1)}};QS=function(t){if(t.tag===13){var e=$s(t,134217728);if(e!==null){var i=Mi();dr(e,t,134217728,i)}L_(t,134217728)}};kP=function(t){if(t.tag===13){var e=Ba(t),i=$s(t,e);if(i!==null){var n=Mi();dr(i,t,e,n)}L_(t,e)}};IP=function(){return je};LP=function(t,e){var i=je;try{return je=t,e()}finally{je=i}};RT=function(t,e,i){switch(e){case"input":if(ST(t,i),e=i.name,i.type==="radio"&&e!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<i.length;e++){var n=i[e];if(n!==t&&n.form===t.form){var r=Ev(n);if(!r)throw Error(X(90));sP(n),ST(n,r)}}}break;case"textarea":oP(t,i);break;case"select":e=i.value,e!=null&&Fu(t,!!i.multiple,e,!1)}};mP=__;pP=ul;var J8={usingClientEntryPoint:!1,Events:[Lf,Tu,Ev,hP,fP,__]},Zc={findFiberByHostInstance:Po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eB={bundleType:Zc.bundleType,version:Zc.version,rendererPackageName:Zc.rendererPackageName,rendererConfig:Zc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=yP(t),t===null?null:t.stateNode},findFiberByHostInstance:Zc.findFiberByHostInstance||X8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var am=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!am.isDisabled&&am.supportsFiber)try{pv=am.inject(eB),Qr=am}catch{}}Tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J8;Tn.createPortal=function(t,e){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w_(e))throw Error(X(200));return Q8(t,e,null,i)};Tn.createRoot=function(t,e){if(!w_(t))throw Error(X(299));var i=!1,n="",r=Q2;return e!=null&&(e.unstable_strictMode===!0&&(i=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=I_(t,1,!1,null,null,i,!1,n,r),t[Ns]=e.current,Ch(t.nodeType===8?t.parentNode:t),new R_(e)};Tn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=yP(e),t=t===null?null:t.stateNode,t};Tn.flushSync=function(t){return ul(t)};Tn.hydrate=function(t,e,i){if(!Lv(e))throw Error(X(200));return Rv(null,t,e,!0,i)};Tn.hydrateRoot=function(t,e,i){if(!w_(t))throw Error(X(405));var n=i!=null&&i.hydratedSources||null,r=!1,s="",a=Q2;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(a=i.onRecoverableError)),e=z2(e,null,t,1,i??null,r,!1,s,a),t[Ns]=e.current,Ch(t),n)for(t=0;t<n.length;t++)i=n[t],r=i._getVersion,r=r(i._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[i,r]:e.mutableSourceEagerHydrationData.push(i,r);return new Iv(e)};Tn.render=function(t,e,i){if(!Lv(e))throw Error(X(200));return Rv(null,t,e,!1,i)};Tn.unmountComponentAtNode=function(t){if(!Lv(t))throw Error(X(40));return t._reactRootContainer?(ul(function(){Rv(null,null,t,!1,function(){t._reactRootContainer=null,t[Ns]=null})}),!0):!1};Tn.unstable_batchedUpdates=__;Tn.unstable_renderSubtreeIntoContainer=function(t,e,i,n){if(!Lv(i))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Rv(t,e,i,!1,n)};Tn.version="18.3.1-next-f1338f8080-20240426";function X2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(X2)}catch(t){console.error(t)}}X2(),XD.exports=Tn;var tB=XD.exports,kI=tB;pT.createRoot=kI.createRoot,pT.hydrateRoot=kI.hydrateRoot;var Z2={exports:{}},iB="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nB=iB,rB=nB;function J2(){}function eO(){}eO.resetWarningCache=J2;var sB=function(){function t(n,r,s,a,o,l){if(l!==rB){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var i={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:eO,resetWarningCache:J2};return i.PropTypes=i,i};Z2.exports=sB();var aB=Z2.exports;const mt=Oc(aB);function oB(t){return t&&typeof t=="object"&&"default"in t?t.default:t}var tO=G,lB=oB(tO);function II(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function uB(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var cB=!!(typeof window<"u"&&window.document&&window.document.createElement);function dB(t,e,i){if(typeof t!="function")throw new Error("Expected reducePropsToState to be a function.");if(typeof e!="function")throw new Error("Expected handleStateChangeOnClient to be a function.");if(typeof i<"u"&&typeof i!="function")throw new Error("Expected mapStateOnServer to either be undefined or a function.");function n(r){return r.displayName||r.name||"Component"}return function(s){if(typeof s!="function")throw new Error("Expected WrappedComponent to be a React component.");var a=[],o;function l(){o=t(a.map(function(c){return c.props})),u.canUseDOM?e(o):i&&(o=i(o))}var u=function(c){uB(d,c);function d(){return c.apply(this,arguments)||this}d.peek=function(){return o},d.rewind=function(){if(d.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var m=o;return o=void 0,a=[],m};var h=d.prototype;return h.UNSAFE_componentWillMount=function(){a.push(this),l()},h.componentDidUpdate=function(){l()},h.componentWillUnmount=function(){var m=a.indexOf(this);a.splice(m,1),l()},h.render=function(){return lB.createElement(s,this.props)},d}(tO.PureComponent);return II(u,"displayName","SideEffect("+n(s)+")"),II(u,"canUseDOM",cB),u}}var hB=dB;const fB=Oc(hB);var mB=typeof Element<"u",pB=typeof Map=="function",gB=typeof Set=="function",vB=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function lp(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var i,n,r;if(Array.isArray(t)){if(i=t.length,i!=e.length)return!1;for(n=i;n--!==0;)if(!lp(t[n],e[n]))return!1;return!0}var s;if(pB&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;for(s=t.entries();!(n=s.next()).done;)if(!lp(n.value[1],e.get(n.value[0])))return!1;return!0}if(gB&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(s=t.entries();!(n=s.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(vB&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(i=t.length,i!=e.length)return!1;for(n=i;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(r=Object.keys(t),i=r.length,i!==Object.keys(e).length)return!1;for(n=i;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,r[n]))return!1;if(mB&&t instanceof Element)return!1;for(n=i;n--!==0;)if(!((r[n]==="_owner"||r[n]==="__v"||r[n]==="__o")&&t.$$typeof)&&!lp(t[r[n]],e[r[n]]))return!1;return!0}return t!==t&&e!==e}var yB=function(e,i){try{return lp(e,i)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const EB=Oc(yB);/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var LI=Object.getOwnPropertySymbols,TB=Object.prototype.hasOwnProperty,bB=Object.prototype.propertyIsEnumerable;function SB(t){if(t==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function _B(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de",Object.getOwnPropertyNames(t)[0]==="5")return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var n=Object.getOwnPropertyNames(e).map(function(s){return e[s]});if(n.join("")!=="0123456789")return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(s){r[s]=s}),Object.keys(Object.assign({},r)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var AB=_B()?Object.assign:function(t,e){for(var i,n=SB(t),r,s=1;s<arguments.length;s++){i=Object(arguments[s]);for(var a in i)TB.call(i,a)&&(n[a]=i[a]);if(LI){r=LI(i);for(var o=0;o<r.length;o++)bB.call(i,r[o])&&(n[r[o]]=i[r[o]])}}return n};const xB=Oc(AB);var zo={BODY:"bodyAttributes",HTML:"htmlAttributes",TITLE:"titleAttributes"},_e={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(_e).map(function(t){return _e[t]});var gt={CHARSET:"charset",CSS_TEXT:"cssText",HREF:"href",HTTPEQUIV:"http-equiv",INNER_HTML:"innerHTML",ITEM_PROP:"itemprop",NAME:"name",PROPERTY:"property",REL:"rel",SRC:"src",TARGET:"target"},s0={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Bh={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate"},kB=Object.keys(s0).reduce(function(t,e){return t[s0[e]]=e,t},{}),IB=[_e.NOSCRIPT,_e.SCRIPT,_e.STYLE],ur="data-react-helmet",LB=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RB=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},wB=function(){function t(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),Bi=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},CB=function(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)},RI=function(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i},DB=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t},l1=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return i===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},PB=function(e){var i=Gu(e,_e.TITLE),n=Gu(e,Bh.TITLE_TEMPLATE);if(n&&i)return n.replace(/%s/g,function(){return Array.isArray(i)?i.join(""):i});var r=Gu(e,Bh.DEFAULT_TITLE);return i||r||void 0},OB=function(e){return Gu(e,Bh.ON_CHANGE_CLIENT_STATE)||function(){}},Jy=function(e,i){return i.filter(function(n){return typeof n[e]<"u"}).map(function(n){return n[e]}).reduce(function(n,r){return Bi({},n,r)},{})},MB=function(e,i){return i.filter(function(n){return typeof n[_e.BASE]<"u"}).map(function(n){return n[_e.BASE]}).reverse().reduce(function(n,r){if(!n.length)for(var s=Object.keys(r),a=0;a<s.length;a++){var o=s[a],l=o.toLowerCase();if(e.indexOf(l)!==-1&&r[l])return n.concat(r)}return n},[])},Jc=function(e,i,n){var r={};return n.filter(function(s){return Array.isArray(s[e])?!0:(typeof s[e]<"u"&&UB("Helmet: "+e+' should be of type "Array". Instead found type "'+LB(s[e])+'"'),!1)}).map(function(s){return s[e]}).reverse().reduce(function(s,a){var o={};a.filter(function(h){for(var f=void 0,m=Object.keys(h),p=0;p<m.length;p++){var y=m[p],g=y.toLowerCase();i.indexOf(g)!==-1&&!(f===gt.REL&&h[f].toLowerCase()==="canonical")&&!(g===gt.REL&&h[g].toLowerCase()==="stylesheet")&&(f=g),i.indexOf(y)!==-1&&(y===gt.INNER_HTML||y===gt.CSS_TEXT||y===gt.ITEM_PROP)&&(f=y)}if(!f||!h[f])return!1;var v=h[f].toLowerCase();return r[f]||(r[f]={}),o[f]||(o[f]={}),r[f][v]?!1:(o[f][v]=!0,!0)}).reverse().forEach(function(h){return s.push(h)});for(var l=Object.keys(o),u=0;u<l.length;u++){var c=l[u],d=xB({},r[c],o[c]);r[c]=d}return s},[]).reverse()},Gu=function(e,i){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(i))return r[i]}return null},NB=function(e){return{baseTag:MB([gt.HREF,gt.TARGET],e),bodyAttributes:Jy(zo.BODY,e),defer:Gu(e,Bh.DEFER),encode:Gu(e,Bh.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Jy(zo.HTML,e),linkTags:Jc(_e.LINK,[gt.REL,gt.HREF],e),metaTags:Jc(_e.META,[gt.NAME,gt.CHARSET,gt.HTTPEQUIV,gt.PROPERTY,gt.ITEM_PROP],e),noscriptTags:Jc(_e.NOSCRIPT,[gt.INNER_HTML],e),onChangeClientState:OB(e),scriptTags:Jc(_e.SCRIPT,[gt.SRC,gt.INNER_HTML],e),styleTags:Jc(_e.STYLE,[gt.CSS_TEXT],e),title:PB(e),titleAttributes:Jy(zo.TITLE,e)}},u1=function(){var t=Date.now();return function(e){var i=Date.now();i-t>16?(t=i,e(i)):setTimeout(function(){u1(e)},0)}}(),wI=function(e){return clearTimeout(e)},$B=typeof window<"u"?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||u1:global.requestAnimationFrame||u1,FB=typeof window<"u"?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||wI:global.cancelAnimationFrame||wI,UB=function(e){return console&&typeof console.warn=="function"&&console.warn(e)},ed=null,BB=function(e){ed&&FB(ed),e.defer?ed=$B(function(){CI(e,function(){ed=null})}):(CI(e),ed=null)},CI=function(e,i){var n=e.baseTag,r=e.bodyAttributes,s=e.htmlAttributes,a=e.linkTags,o=e.metaTags,l=e.noscriptTags,u=e.onChangeClientState,c=e.scriptTags,d=e.styleTags,h=e.title,f=e.titleAttributes;c1(_e.BODY,r),c1(_e.HTML,s),VB(h,f);var m={baseTag:Al(_e.BASE,n),linkTags:Al(_e.LINK,a),metaTags:Al(_e.META,o),noscriptTags:Al(_e.NOSCRIPT,l),scriptTags:Al(_e.SCRIPT,c),styleTags:Al(_e.STYLE,d)},p={},y={};Object.keys(m).forEach(function(g){var v=m[g],E=v.newTags,T=v.oldTags;E.length&&(p[g]=E),T.length&&(y[g]=m[g].oldTags)}),i&&i(),u(e,p,y)},iO=function(e){return Array.isArray(e)?e.join(""):e},VB=function(e,i){typeof e<"u"&&document.title!==e&&(document.title=iO(e)),c1(_e.TITLE,i)},c1=function(e,i){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(ur),s=r?r.split(","):[],a=[].concat(s),o=Object.keys(i),l=0;l<o.length;l++){var u=o[l],c=i[u]||"";n.getAttribute(u)!==c&&n.setAttribute(u,c),s.indexOf(u)===-1&&s.push(u);var d=a.indexOf(u);d!==-1&&a.splice(d,1)}for(var h=a.length-1;h>=0;h--)n.removeAttribute(a[h]);s.length===a.length?n.removeAttribute(ur):n.getAttribute(ur)!==o.join(",")&&n.setAttribute(ur,o.join(","))}},Al=function(e,i){var n=document.head||document.querySelector(_e.HEAD),r=n.querySelectorAll(e+"["+ur+"]"),s=Array.prototype.slice.call(r),a=[],o=void 0;return i&&i.length&&i.forEach(function(l){var u=document.createElement(e);for(var c in l)if(l.hasOwnProperty(c))if(c===gt.INNER_HTML)u.innerHTML=l.innerHTML;else if(c===gt.CSS_TEXT)u.styleSheet?u.styleSheet.cssText=l.cssText:u.appendChild(document.createTextNode(l.cssText));else{var d=typeof l[c]>"u"?"":l[c];u.setAttribute(c,d)}u.setAttribute(ur,"true"),s.some(function(h,f){return o=f,u.isEqualNode(h)})?s.splice(o,1):a.push(u)}),s.forEach(function(l){return l.parentNode.removeChild(l)}),a.forEach(function(l){return n.appendChild(l)}),{oldTags:s,newTags:a}},nO=function(e){return Object.keys(e).reduce(function(i,n){var r=typeof e[n]<"u"?n+'="'+e[n]+'"':""+n;return i?i+" "+r:r},"")},HB=function(e,i,n,r){var s=nO(n),a=iO(i);return s?"<"+e+" "+ur+'="true" '+s+">"+l1(a,r)+"</"+e+">":"<"+e+" "+ur+'="true">'+l1(a,r)+"</"+e+">"},KB=function(e,i,n){return i.reduce(function(r,s){var a=Object.keys(s).filter(function(u){return!(u===gt.INNER_HTML||u===gt.CSS_TEXT)}).reduce(function(u,c){var d=typeof s[c]>"u"?c:c+'="'+l1(s[c],n)+'"';return u?u+" "+d:d},""),o=s.innerHTML||s.cssText||"",l=IB.indexOf(e)===-1;return r+"<"+e+" "+ur+'="true" '+a+(l?"/>":">"+o+"</"+e+">")},"")},rO=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(n,r){return n[s0[r]||r]=e[r],n},i)},GB=function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.keys(e).reduce(function(n,r){return n[kB[r]||r]=e[r],n},i)},WB=function(e,i,n){var r,s=(r={key:i},r[ur]=!0,r),a=rO(n,s);return[ai.createElement(_e.TITLE,a,i)]},jB=function(e,i){return i.map(function(n,r){var s,a=(s={key:r},s[ur]=!0,s);return Object.keys(n).forEach(function(o){var l=s0[o]||o;if(l===gt.INNER_HTML||l===gt.CSS_TEXT){var u=n.innerHTML||n.cssText;a.dangerouslySetInnerHTML={__html:u}}else a[l]=n[o]}),ai.createElement(e,a)})},as=function(e,i,n){switch(e){case _e.TITLE:return{toComponent:function(){return WB(e,i.title,i.titleAttributes)},toString:function(){return HB(e,i.title,i.titleAttributes,n)}};case zo.BODY:case zo.HTML:return{toComponent:function(){return rO(i)},toString:function(){return nO(i)}};default:return{toComponent:function(){return jB(e,i)},toString:function(){return KB(e,i,n)}}}},sO=function(e){var i=e.baseTag,n=e.bodyAttributes,r=e.encode,s=e.htmlAttributes,a=e.linkTags,o=e.metaTags,l=e.noscriptTags,u=e.scriptTags,c=e.styleTags,d=e.title,h=d===void 0?"":d,f=e.titleAttributes;return{base:as(_e.BASE,i,r),bodyAttributes:as(zo.BODY,n,r),htmlAttributes:as(zo.HTML,s,r),link:as(_e.LINK,a,r),meta:as(_e.META,o,r),noscript:as(_e.NOSCRIPT,l,r),script:as(_e.SCRIPT,u,r),style:as(_e.STYLE,c,r),title:as(_e.TITLE,{title:h,titleAttributes:f},r)}},YB=function(e){var i,n;return n=i=function(r){CB(s,r);function s(){return RB(this,s),DB(this,r.apply(this,arguments))}return s.prototype.shouldComponentUpdate=function(o){return!EB(this.props,o)},s.prototype.mapNestedChildrenToProps=function(o,l){if(!l)return null;switch(o.type){case _e.SCRIPT:case _e.NOSCRIPT:return{innerHTML:l};case _e.STYLE:return{cssText:l}}throw new Error("<"+o.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},s.prototype.flattenArrayTypeChildren=function(o){var l,u=o.child,c=o.arrayTypeChildren,d=o.newChildProps,h=o.nestedChildren;return Bi({},c,(l={},l[u.type]=[].concat(c[u.type]||[],[Bi({},d,this.mapNestedChildrenToProps(u,h))]),l))},s.prototype.mapObjectTypeChildren=function(o){var l,u,c=o.child,d=o.newProps,h=o.newChildProps,f=o.nestedChildren;switch(c.type){case _e.TITLE:return Bi({},d,(l={},l[c.type]=f,l.titleAttributes=Bi({},h),l));case _e.BODY:return Bi({},d,{bodyAttributes:Bi({},h)});case _e.HTML:return Bi({},d,{htmlAttributes:Bi({},h)})}return Bi({},d,(u={},u[c.type]=Bi({},h),u))},s.prototype.mapArrayTypeChildrenToProps=function(o,l){var u=Bi({},l);return Object.keys(o).forEach(function(c){var d;u=Bi({},u,(d={},d[c]=o[c],d))}),u},s.prototype.warnOnInvalidChildren=function(o,l){return!0},s.prototype.mapChildrenToProps=function(o,l){var u=this,c={};return ai.Children.forEach(o,function(d){if(!(!d||!d.props)){var h=d.props,f=h.children,m=RI(h,["children"]),p=GB(m);switch(u.warnOnInvalidChildren(d,f),d.type){case _e.LINK:case _e.META:case _e.NOSCRIPT:case _e.SCRIPT:case _e.STYLE:c=u.flattenArrayTypeChildren({child:d,arrayTypeChildren:c,newChildProps:p,nestedChildren:f});break;default:l=u.mapObjectTypeChildren({child:d,newProps:l,newChildProps:p,nestedChildren:f});break}}}),l=this.mapArrayTypeChildrenToProps(c,l),l},s.prototype.render=function(){var o=this.props,l=o.children,u=RI(o,["children"]),c=Bi({},u);return l&&(c=this.mapChildrenToProps(l,c)),ai.createElement(e,c)},wB(s,null,[{key:"canUseDOM",set:function(o){e.canUseDOM=o}}]),s}(ai.Component),i.propTypes={base:mt.object,bodyAttributes:mt.object,children:mt.oneOfType([mt.arrayOf(mt.node),mt.node]),defaultTitle:mt.string,defer:mt.bool,encodeSpecialCharacters:mt.bool,htmlAttributes:mt.object,link:mt.arrayOf(mt.object),meta:mt.arrayOf(mt.object),noscript:mt.arrayOf(mt.object),onChangeClientState:mt.func,script:mt.arrayOf(mt.object),style:mt.arrayOf(mt.object),title:mt.string,titleAttributes:mt.object,titleTemplate:mt.string},i.defaultProps={defer:!0,encodeSpecialCharacters:!0},i.peek=e.peek,i.rewind=function(){var r=e.rewind();return r||(r=sO({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),r},n},qB=function(){return null},zB=fB(NB,BB,sO)(qB),d1=YB(zB);d1.renderStatic=d1.rewind;function QB(t){const e=()=>typeof window<"u"?window.matchMedia(t).matches:!1,[i,n]=G.useState(e);return G.useEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(t),s=()=>n(r.matches);return s(),r.addEventListener?(r.addEventListener("change",s),()=>r.removeEventListener("change",s)):(r.addListener(s),()=>r.removeListener(s))},[t]),i}function XB(t){if(typeof Proxy>"u")return t;const e=new Map,i=(...n)=>t(...n);return new Proxy(i,{get:(n,r)=>r==="create"?t:(e.has(r)||e.set(r,t(r)),e.get(r))})}function wv(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const h1=t=>Array.isArray(t);function aO(t,e){if(!Array.isArray(e))return!1;const i=e.length;if(i!==t.length)return!1;for(let n=0;n<i;n++)if(e[n]!==t[n])return!1;return!0}function Vh(t){return typeof t=="string"||Array.isArray(t)}function DI(t){const e=[{},{}];return t==null||t.values.forEach((i,n)=>{e[0][n]=i.get(),e[1][n]=i.getVelocity()}),e}function C_(t,e,i,n){if(typeof e=="function"){const[r,s]=DI(n);e=e(i!==void 0?i:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=DI(n);e=e(i!==void 0?i:t.custom,r,s)}return e}function Cv(t,e,i){const n=t.getProps();return C_(n,e,i!==void 0?i:n.custom,t)}const D_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],P_=["initial",...D_],wf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],gl=new Set(wf),Rs=t=>t*1e3,ws=t=>t/1e3,ZB={type:"spring",stiffness:500,damping:25,restSpeed:10},JB=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),e6={type:"keyframes",duration:.8},t6={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},i6=(t,{keyframes:e})=>e.length>2?e6:gl.has(t)?t.startsWith("scale")?JB(e[1]):ZB:t6;function O_(t,e){return t?t[e]||t.default||t:void 0}const n6={skipAnimations:!1,useManualTiming:!1},r6=t=>t!==null;function Dv(t,{repeat:e,repeatType:i="loop"},n){const r=t.filter(r6),s=e&&i!=="loop"&&e%2===1?0:r.length-1;return!s||n===void 0?r[s]:n}const Ri=t=>t;function s6(t){let e=new Set,i=new Set,n=!1,r=!1;const s=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(u){s.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,c=!1,d=!1)=>{const f=d&&n?e:i;return c&&s.add(u),f.has(u)||f.add(u),u},cancel:u=>{i.delete(u),s.delete(u)},process:u=>{if(a=u,n){r=!0;return}n=!0,[e,i]=[i,e],i.clear(),e.forEach(o),n=!1,r&&(r=!1,l.process(u))}};return l}const om=["read","resolveKeyframes","update","preRender","render","postRender"],a6=40;function oO(t,e){let i=!1,n=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>i=!0,a=om.reduce((g,v)=>(g[v]=s6(s),g),{}),{read:o,resolveKeyframes:l,update:u,preRender:c,render:d,postRender:h}=a,f=()=>{const g=performance.now();i=!1,r.delta=n?1e3/60:Math.max(Math.min(g-r.timestamp,a6),1),r.timestamp=g,r.isProcessing=!0,o.process(r),l.process(r),u.process(r),c.process(r),d.process(r),h.process(r),r.isProcessing=!1,i&&e&&(n=!1,t(f))},m=()=>{i=!0,n=!0,r.isProcessing||t(f)};return{schedule:om.reduce((g,v)=>{const E=a[v];return g[v]=(T,_=!1,x=!1)=>(i||m(),E.schedule(T,_,x)),g},{}),cancel:g=>{for(let v=0;v<om.length;v++)a[om[v]].cancel(g)},state:r,steps:a}}const{schedule:ze,cancel:Ya,state:fi,steps:eE}=oO(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ri,!0),lO=(t,e,i)=>(((1-3*i+3*e)*t+(3*i-6*e))*t+3*e)*t,o6=1e-7,l6=12;function u6(t,e,i,n,r){let s,a,o=0;do a=e+(i-e)/2,s=lO(a,n,r)-t,s>0?i=a:e=a;while(Math.abs(s)>o6&&++o<l6);return a}function Cf(t,e,i,n){if(t===e&&i===n)return Ri;const r=s=>u6(s,0,1,t,i);return s=>s===0||s===1?s:lO(r(s),e,n)}const uO=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cO=t=>e=>1-t(1-e),dO=Cf(.33,1.53,.69,.99),M_=cO(dO),hO=uO(M_),fO=t=>(t*=2)<1?.5*M_(t):.5*(2-Math.pow(2,-10*(t-1))),N_=t=>1-Math.sin(Math.acos(t)),mO=cO(N_),pO=uO(N_),gO=t=>/^0[^.\s]+$/u.test(t);function c6(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||gO(t):!0}let vO=Ri;const yO=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),EO=t=>e=>typeof e=="string"&&e.startsWith(t),TO=EO("--"),d6=EO("var(--"),$_=t=>d6(t)?h6.test(t.split("/*")[0].trim()):!1,h6=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,f6=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function m6(t){const e=f6.exec(t);if(!e)return[,];const[,i,n,r]=e;return[`--${i??n}`,r]}function bO(t,e,i=1){const[n,r]=m6(t);if(!n)return;const s=window.getComputedStyle(e).getPropertyValue(n);if(s){const a=s.trim();return yO(a)?parseFloat(a):a}return $_(r)?bO(r,e,i+1):r}const qa=(t,e,i)=>i>e?e:i<t?t:i,Fc={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Hh={...Fc,transform:t=>qa(0,1,t)},lm={...Fc,default:1},Df=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Js=Df("deg"),Zr=Df("%"),me=Df("px"),p6=Df("vh"),g6=Df("vw"),PI={...Zr,parse:t=>Zr.parse(t)/100,transform:t=>Zr.transform(t*100)},v6=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),OI=t=>t===Fc||t===me,MI=(t,e)=>parseFloat(t.split(", ")[e]),NI=(t,e)=>(i,{transform:n})=>{if(n==="none"||!n)return 0;const r=n.match(/^matrix3d\((.+)\)$/u);if(r)return MI(r[1],e);{const s=n.match(/^matrix\((.+)\)$/u);return s?MI(s[1],t):0}},y6=new Set(["x","y","z"]),E6=wf.filter(t=>!y6.has(t));function T6(t){const e=[];return E6.forEach(i=>{const n=t.getValue(i);n!==void 0&&(e.push([i,n.get()]),n.set(i.startsWith("scale")?1:0))}),e}const yc={width:({x:t},{paddingLeft:e="0",paddingRight:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),height:({y:t},{paddingTop:e="0",paddingBottom:i="0"})=>t.max-t.min-parseFloat(e)-parseFloat(i),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:NI(4,13),y:NI(5,14)};yc.translateX=yc.x;yc.translateY=yc.y;const SO=t=>e=>e.test(t),b6={test:t=>t==="auto",parse:t=>t},_O=[Fc,me,Zr,Js,g6,p6,b6],$I=t=>_O.find(SO(t)),Qo=new Set;let f1=!1,m1=!1;function AO(){if(m1){const t=Array.from(Qo).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),i=new Map;e.forEach(n=>{const r=T6(n);r.length&&(i.set(n,r),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const r=i.get(n);r&&r.forEach(([s,a])=>{var o;(o=n.getValue(s))===null||o===void 0||o.set(a)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}m1=!1,f1=!1,Qo.forEach(t=>t.complete()),Qo.clear()}function xO(){Qo.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(m1=!0)})}function S6(){xO(),AO()}class F_{constructor(e,i,n,r,s,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=i,this.name=n,this.motionValue=r,this.element=s,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Qo.add(this),f1||(f1=!0,ze.read(xO),ze.resolveKeyframes(AO))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:i,element:n,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const a=r==null?void 0:r.get(),o=e[e.length-1];if(a!==void 0)e[0]=a;else if(n&&i){const l=n.readValue(i,o);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=o),r&&a===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Qo.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Qo.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const rh=t=>Math.round(t*1e5)/1e5,U_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _6(t){return t==null}const A6=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,B_=(t,e)=>i=>!!(typeof i=="string"&&A6.test(i)&&i.startsWith(t)||e&&!_6(i)&&Object.prototype.hasOwnProperty.call(i,e)),kO=(t,e,i)=>n=>{if(typeof n!="string")return n;const[r,s,a,o]=n.match(U_);return{[t]:parseFloat(r),[e]:parseFloat(s),[i]:parseFloat(a),alpha:o!==void 0?parseFloat(o):1}},x6=t=>qa(0,255,t),tE={...Fc,transform:t=>Math.round(x6(t))},No={test:B_("rgb","red"),parse:kO("red","green","blue"),transform:({red:t,green:e,blue:i,alpha:n=1})=>"rgba("+tE.transform(t)+", "+tE.transform(e)+", "+tE.transform(i)+", "+rh(Hh.transform(n))+")"};function k6(t){let e="",i="",n="",r="";return t.length>5?(e=t.substring(1,3),i=t.substring(3,5),n=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),i=t.substring(2,3),n=t.substring(3,4),r=t.substring(4,5),e+=e,i+=i,n+=n,r+=r),{red:parseInt(e,16),green:parseInt(i,16),blue:parseInt(n,16),alpha:r?parseInt(r,16)/255:1}}const p1={test:B_("#"),parse:k6,transform:No.transform},Iu={test:B_("hsl","hue"),parse:kO("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:i,alpha:n=1})=>"hsla("+Math.round(t)+", "+Zr.transform(rh(e))+", "+Zr.transform(rh(i))+", "+rh(Hh.transform(n))+")"},xi={test:t=>No.test(t)||p1.test(t)||Iu.test(t),parse:t=>No.test(t)?No.parse(t):Iu.test(t)?Iu.parse(t):p1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?No.transform(t):Iu.transform(t)},I6=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function L6(t){var e,i;return isNaN(t)&&typeof t=="string"&&(((e=t.match(U_))===null||e===void 0?void 0:e.length)||0)+(((i=t.match(I6))===null||i===void 0?void 0:i.length)||0)>0}const IO="number",LO="color",R6="var",w6="var(",FI="${}",C6=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Kh(t){const e=t.toString(),i=[],n={color:[],number:[],var:[]},r=[];let s=0;const o=e.replace(C6,l=>(xi.test(l)?(n.color.push(s),r.push(LO),i.push(xi.parse(l))):l.startsWith(w6)?(n.var.push(s),r.push(R6),i.push(l)):(n.number.push(s),r.push(IO),i.push(parseFloat(l))),++s,FI)).split(FI);return{values:i,split:o,indexes:n,types:r}}function RO(t){return Kh(t).values}function wO(t){const{split:e,types:i}=Kh(t),n=e.length;return r=>{let s="";for(let a=0;a<n;a++)if(s+=e[a],r[a]!==void 0){const o=i[a];o===IO?s+=rh(r[a]):o===LO?s+=xi.transform(r[a]):s+=r[a]}return s}}const D6=t=>typeof t=="number"?0:t;function P6(t){const e=RO(t);return wO(t)(e.map(D6))}const za={test:L6,parse:RO,createTransformer:wO,getAnimatableNone:P6},O6=new Set(["brightness","contrast","saturate","opacity"]);function M6(t){const[e,i]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=i.match(U_)||[];if(!n)return t;const r=i.replace(n,"");let s=O6.has(e)?1:0;return n!==i&&(s*=100),e+"("+s+r+")"}const N6=/\b([a-z-]*)\(.*?\)/gu,g1={...za,getAnimatableNone:t=>{const e=t.match(N6);return e?e.map(M6).join(" "):t}},$6={borderWidth:me,borderTopWidth:me,borderRightWidth:me,borderBottomWidth:me,borderLeftWidth:me,borderRadius:me,radius:me,borderTopLeftRadius:me,borderTopRightRadius:me,borderBottomRightRadius:me,borderBottomLeftRadius:me,width:me,maxWidth:me,height:me,maxHeight:me,top:me,right:me,bottom:me,left:me,padding:me,paddingTop:me,paddingRight:me,paddingBottom:me,paddingLeft:me,margin:me,marginTop:me,marginRight:me,marginBottom:me,marginLeft:me,backgroundPositionX:me,backgroundPositionY:me},F6={rotate:Js,rotateX:Js,rotateY:Js,rotateZ:Js,scale:lm,scaleX:lm,scaleY:lm,scaleZ:lm,skew:Js,skewX:Js,skewY:Js,distance:me,translateX:me,translateY:me,translateZ:me,x:me,y:me,z:me,perspective:me,transformPerspective:me,opacity:Hh,originX:PI,originY:PI,originZ:me},UI={...Fc,transform:Math.round},V_={...$6,...F6,zIndex:UI,size:me,fillOpacity:Hh,strokeOpacity:Hh,numOctaves:UI},U6={...V_,color:xi,backgroundColor:xi,outlineColor:xi,fill:xi,stroke:xi,borderColor:xi,borderTopColor:xi,borderRightColor:xi,borderBottomColor:xi,borderLeftColor:xi,filter:g1,WebkitFilter:g1},H_=t=>U6[t];function CO(t,e){let i=H_(t);return i!==g1&&(i=za),i.getAnimatableNone?i.getAnimatableNone(e):void 0}const B6=new Set(["auto","none","0"]);function V6(t,e,i){let n=0,r;for(;n<t.length&&!r;){const s=t[n];typeof s=="string"&&!B6.has(s)&&Kh(s).values.length&&(r=t[n]),n++}if(r&&i)for(const s of e)t[s]=CO(i,r)}class DO extends F_{constructor(e,i,n,r,s){super(e,i,n,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:i,name:n}=this;if(!i||!i.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let u=e[l];if(typeof u=="string"&&(u=u.trim(),$_(u))){const c=bO(u,i.current);c!==void 0&&(e[l]=c),l===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!v6.has(n)||e.length!==2)return;const[r,s]=e,a=$I(r),o=$I(s);if(a!==o)if(OI(a)&&OI(o))for(let l=0;l<e.length;l++){const u=e[l];typeof u=="string"&&(e[l]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:i}=this,n=[];for(let r=0;r<e.length;r++)c6(e[r])&&n.push(r);n.length&&V6(e,n,i)}measureInitialState(){const{element:e,unresolvedKeyframes:i,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=yc[n](e.measureViewportBox(),window.getComputedStyle(e.current)),i[0]=this.measuredOrigin;const r=i[i.length-1];r!==void 0&&e.getValue(n,r).jump(r,!1)}measureEndState(){var e;const{element:i,name:n,unresolvedKeyframes:r}=this;if(!i||!i.current)return;const s=i.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,o=r[a];r[a]=yc[n](i.measureViewportBox(),window.getComputedStyle(i.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,u])=>{i.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function K_(t){return typeof t=="function"}let up;function H6(){up=void 0}const Jr={now:()=>(up===void 0&&Jr.set(fi.isProcessing||n6.useManualTiming?fi.timestamp:performance.now()),up),set:t=>{up=t,queueMicrotask(H6)}},BI=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(za.test(t)||t==="0")&&!t.startsWith("url("));function K6(t){const e=t[0];if(t.length===1)return!0;for(let i=0;i<t.length;i++)if(t[i]!==e)return!0}function G6(t,e,i,n){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],a=BI(r,e),o=BI(s,e);return!a||!o?!1:K6(t)||(i==="spring"||K_(i))&&n}const W6=40;class PO{constructor({autoplay:e=!0,delay:i=0,type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Jr.now(),this.options={autoplay:e,delay:i,type:n,repeat:r,repeatDelay:s,repeatType:a,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>W6?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&S6(),this._resolved}onKeyframesResolved(e,i){this.resolvedAt=Jr.now(),this.hasAttemptedResolve=!0;const{name:n,type:r,velocity:s,delay:a,onComplete:o,onUpdate:l,isGenerator:u}=this.options;if(!u&&!G6(e,n,r,s))if(a)this.options.duration=0;else{l==null||l(Dv(e,this.options,i)),o==null||o(),this.resolveFinishedPromise();return}const c=this.initPlayback(e,i);c!==!1&&(this._resolved={keyframes:e,finalKeyframe:i,...c},this.onPostResolved())}onPostResolved(){}then(e,i){return this.currentFinishedPromise.then(e,i)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function OO(t,e){return e?t*(1e3/e):0}const j6=5;function MO(t,e,i){const n=Math.max(e-j6,0);return OO(i-t(n),e-n)}const iE=.001,Y6=.01,q6=10,z6=.05,Q6=1;function X6({duration:t=800,bounce:e=.25,velocity:i=0,mass:n=1}){let r,s,a=1-e;a=qa(z6,Q6,a),t=qa(Y6,q6,ws(t)),a<1?(r=u=>{const c=u*a,d=c*t,h=c-i,f=v1(u,a),m=Math.exp(-d);return iE-h/f*m},s=u=>{const d=u*a*t,h=d*i+i,f=Math.pow(a,2)*Math.pow(u,2)*t,m=Math.exp(-d),p=v1(Math.pow(u,2),a);return(-r(u)+iE>0?-1:1)*((h-f)*m)/p}):(r=u=>{const c=Math.exp(-u*t),d=(u-i)*t+1;return-iE+c*d},s=u=>{const c=Math.exp(-u*t),d=(i-u)*(t*t);return c*d});const o=5/t,l=J6(r,s,o);if(t=Rs(t),isNaN(l))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(l,2)*n;return{stiffness:u,damping:a*2*Math.sqrt(n*u),duration:t}}}const Z6=12;function J6(t,e,i){let n=i;for(let r=1;r<Z6;r++)n=n-t(n)/e(n);return n}function v1(t,e){return t*Math.sqrt(1-e*e)}const e9=["duration","bounce"],t9=["stiffness","damping","mass"];function VI(t,e){return e.some(i=>t[i]!==void 0)}function i9(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!VI(t,t9)&&VI(t,e9)){const i=X6(t);e={...e,...i,mass:1},e.isResolvedFromDuration=!0}return e}function NO({keyframes:t,restDelta:e,restSpeed:i,...n}){const r=t[0],s=t[t.length-1],a={done:!1,value:r},{stiffness:o,damping:l,mass:u,duration:c,velocity:d,isResolvedFromDuration:h}=i9({...n,velocity:-ws(n.velocity||0)}),f=d||0,m=l/(2*Math.sqrt(o*u)),p=s-r,y=ws(Math.sqrt(o/u)),g=Math.abs(p)<5;i||(i=g?.01:2),e||(e=g?.005:.5);let v;if(m<1){const E=v1(y,m);v=T=>{const _=Math.exp(-m*y*T);return s-_*((f+m*y*p)/E*Math.sin(E*T)+p*Math.cos(E*T))}}else if(m===1)v=E=>s-Math.exp(-y*E)*(p+(f+y*p)*E);else{const E=y*Math.sqrt(m*m-1);v=T=>{const _=Math.exp(-m*y*T),x=Math.min(E*T,300);return s-_*((f+m*y*p)*Math.sinh(x)+E*p*Math.cosh(x))/E}}return{calculatedDuration:h&&c||null,next:E=>{const T=v(E);if(h)a.done=E>=c;else{let _=0;m<1&&(_=E===0?Rs(f):MO(v,E,T));const x=Math.abs(_)<=i,A=Math.abs(s-T)<=e;a.done=x&&A}return a.value=a.done?s:T,a}}}function HI({keyframes:t,velocity:e=0,power:i=.8,timeConstant:n=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:u=.5,restSpeed:c}){const d=t[0],h={done:!1,value:d},f=I=>o!==void 0&&I<o||l!==void 0&&I>l,m=I=>o===void 0?l:l===void 0||Math.abs(o-I)<Math.abs(l-I)?o:l;let p=i*e;const y=d+p,g=a===void 0?y:a(y);g!==y&&(p=g-d);const v=I=>-p*Math.exp(-I/n),E=I=>g+v(I),T=I=>{const L=v(I),b=E(I);h.done=Math.abs(L)<=u,h.value=h.done?g:b};let _,x;const A=I=>{f(h.value)&&(_=I,x=NO({keyframes:[h.value,m(h.value)],velocity:MO(E,I,h.value),damping:r,stiffness:s,restDelta:u,restSpeed:c}))};return A(0),{calculatedDuration:null,next:I=>{let L=!1;return!x&&_===void 0&&(L=!0,T(I),A(I)),_!==void 0&&I>=_?x.next(I-_):(!L&&T(I),h)}}}const n9=Cf(.42,0,1,1),r9=Cf(0,0,.58,1),$O=Cf(.42,0,.58,1),s9=t=>Array.isArray(t)&&typeof t[0]!="number",G_=t=>Array.isArray(t)&&typeof t[0]=="number",a9={linear:Ri,easeIn:n9,easeInOut:$O,easeOut:r9,circIn:N_,circInOut:pO,circOut:mO,backIn:M_,backInOut:hO,backOut:dO,anticipate:fO},KI=t=>{if(G_(t)){vO(t.length===4);const[e,i,n,r]=t;return Cf(e,i,n,r)}else if(typeof t=="string")return a9[t];return t},o9=(t,e)=>i=>e(t(i)),Cs=(...t)=>t.reduce(o9),Ec=(t,e,i)=>{const n=e-t;return n===0?1:(i-t)/n},St=(t,e,i)=>t+(e-t)*i;function nE(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+(e-t)*6*i:i<1/2?e:i<2/3?t+(e-t)*(2/3-i)*6:t}function l9({hue:t,saturation:e,lightness:i,alpha:n}){t/=360,e/=100,i/=100;let r=0,s=0,a=0;if(!e)r=s=a=i;else{const o=i<.5?i*(1+e):i+e-i*e,l=2*i-o;r=nE(l,o,t+1/3),s=nE(l,o,t),a=nE(l,o,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(a*255),alpha:n}}function a0(t,e){return i=>i>0?e:t}const rE=(t,e,i)=>{const n=t*t,r=i*(e*e-n)+n;return r<0?0:Math.sqrt(r)},u9=[p1,No,Iu],c9=t=>u9.find(e=>e.test(t));function GI(t){const e=c9(t);if(!e)return!1;let i=e.parse(t);return e===Iu&&(i=l9(i)),i}const WI=(t,e)=>{const i=GI(t),n=GI(e);if(!i||!n)return a0(t,e);const r={...i};return s=>(r.red=rE(i.red,n.red,s),r.green=rE(i.green,n.green,s),r.blue=rE(i.blue,n.blue,s),r.alpha=St(i.alpha,n.alpha,s),No.transform(r))},y1=new Set(["none","hidden"]);function d9(t,e){return y1.has(t)?i=>i<=0?t:e:i=>i>=1?e:t}function h9(t,e){return i=>St(t,e,i)}function W_(t){return typeof t=="number"?h9:typeof t=="string"?$_(t)?a0:xi.test(t)?WI:p9:Array.isArray(t)?FO:typeof t=="object"?xi.test(t)?WI:f9:a0}function FO(t,e){const i=[...t],n=i.length,r=t.map((s,a)=>W_(s)(s,e[a]));return s=>{for(let a=0;a<n;a++)i[a]=r[a](s);return i}}function f9(t,e){const i={...t,...e},n={};for(const r in i)t[r]!==void 0&&e[r]!==void 0&&(n[r]=W_(t[r])(t[r],e[r]));return r=>{for(const s in n)i[s]=n[s](r);return i}}function m9(t,e){var i;const n=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const a=e.types[s],o=t.indexes[a][r[a]],l=(i=t.values[o])!==null&&i!==void 0?i:0;n[s]=l,r[a]++}return n}const p9=(t,e)=>{const i=za.createTransformer(e),n=Kh(t),r=Kh(e);return n.indexes.var.length===r.indexes.var.length&&n.indexes.color.length===r.indexes.color.length&&n.indexes.number.length>=r.indexes.number.length?y1.has(t)&&!r.values.length||y1.has(e)&&!n.values.length?d9(t,e):Cs(FO(m9(n,r),r.values),i):a0(t,e)};function UO(t,e,i){return typeof t=="number"&&typeof e=="number"&&typeof i=="number"?St(t,e,i):W_(t)(t,e)}function g9(t,e,i){const n=[],r=i||UO,s=t.length-1;for(let a=0;a<s;a++){let o=r(t[a],t[a+1]);if(e){const l=Array.isArray(e)?e[a]||Ri:e;o=Cs(l,o)}n.push(o)}return n}function v9(t,e,{clamp:i=!0,ease:n,mixer:r}={}){const s=t.length;if(vO(s===e.length),s===1)return()=>e[0];if(s===2&&t[0]===t[1])return()=>e[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=g9(e,n,r),o=a.length,l=u=>{let c=0;if(o>1)for(;c<t.length-2&&!(u<t[c+1]);c++);const d=Ec(t[c],t[c+1],u);return a[c](d)};return i?u=>l(qa(t[0],t[s-1],u)):l}function y9(t,e){const i=t[t.length-1];for(let n=1;n<=e;n++){const r=Ec(0,e,n);t.push(St(i,1,r))}}function E9(t){const e=[0];return y9(e,t.length-1),e}function T9(t,e){return t.map(i=>i*e)}function b9(t,e){return t.map(()=>e||$O).splice(0,t.length-1)}function o0({duration:t=300,keyframes:e,times:i,ease:n="easeInOut"}){const r=s9(n)?n.map(KI):KI(n),s={done:!1,value:e[0]},a=T9(i&&i.length===e.length?i:E9(e),t),o=v9(a,e,{ease:Array.isArray(r)?r:b9(e,r)});return{calculatedDuration:t,next:l=>(s.value=o(l),s.done=l>=t,s)}}const jI=2e4;function S9(t){let e=0;const i=50;let n=t.next(e);for(;!n.done&&e<jI;)e+=i,n=t.next(e);return e>=jI?1/0:e}const _9=t=>{const e=({timestamp:i})=>t(i);return{start:()=>ze.update(e,!0),stop:()=>Ya(e),now:()=>fi.isProcessing?fi.timestamp:Jr.now()}},A9={decay:HI,inertia:HI,tween:o0,keyframes:o0,spring:NO},x9=t=>t/100;class j_ extends PO{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:i,motionValue:n,element:r,keyframes:s}=this.options,a=(r==null?void 0:r.KeyframeResolver)||F_,o=(l,u)=>this.onKeyframesResolved(l,u);this.resolver=new a(s,o,i,n,r),this.resolver.scheduleResolve()}initPlayback(e){const{type:i="keyframes",repeat:n=0,repeatDelay:r=0,repeatType:s,velocity:a=0}=this.options,o=K_(i)?i:A9[i]||o0;let l,u;o!==o0&&typeof e[0]!="number"&&(l=Cs(x9,UO(e[0],e[1])),e=[0,100]);const c=o({...this.options,keyframes:e});s==="mirror"&&(u=o({...this.options,keyframes:[...e].reverse(),velocity:-a})),c.calculatedDuration===null&&(c.calculatedDuration=S9(c));const{calculatedDuration:d}=c,h=d+r,f=h*(n+1)-r;return{generator:c,mirroredGenerator:u,mapPercentToKeyframes:l,calculatedDuration:d,resolvedDuration:h,totalDuration:f}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,i=!1){const{resolved:n}=this;if(!n){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:a,mapPercentToKeyframes:o,keyframes:l,calculatedDuration:u,totalDuration:c,resolvedDuration:d}=n;if(this.startTime===null)return s.next(0);const{delay:h,repeat:f,repeatType:m,repeatDelay:p,onUpdate:y}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),i?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=c);let E=this.currentTime,T=s;if(f){const I=Math.min(this.currentTime,c)/d;let L=Math.floor(I),b=I%1;!b&&I>=1&&(b=1),b===1&&L--,L=Math.min(L,f+1),!!(L%2)&&(m==="reverse"?(b=1-b,p&&(b-=p/d)):m==="mirror"&&(T=a)),E=qa(0,1,b)*d}const _=v?{done:!1,value:l[0]}:T.next(E);o&&(_.value=o(_.value));let{done:x}=_;!v&&u!==null&&(x=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const A=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&x);return A&&r!==void 0&&(_.value=Dv(l,this.options,r)),y&&y(_.value),A&&this.finish(),_}get duration(){const{resolved:e}=this;return e?ws(e.calculatedDuration):0}get time(){return ws(this.currentTime)}set time(e){e=Rs(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const i=this.playbackSpeed!==e;this.playbackSpeed=e,i&&(this.time=ws(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=_9,onPlay:i,startTime:n}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),i&&i();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=n??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const k9=new Set(["opacity","clipPath","filter","transform"]),I9=10,L9=(t,e)=>{let i="";const n=Math.max(Math.round(e/I9),2);for(let r=0;r<n;r++)i+=t(Ec(0,n-1,r))+", ";return`linear(${i.substring(0,i.length-2)})`};function Y_(t){let e;return()=>(e===void 0&&(e=t()),e)}const R9={linearEasing:void 0};function w9(t,e){const i=Y_(t);return()=>{var n;return(n=R9[e])!==null&&n!==void 0?n:i()}}const l0=w9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function BO(t){return!!(typeof t=="function"&&l0()||!t||typeof t=="string"&&(t in E1||l0())||G_(t)||Array.isArray(t)&&t.every(BO))}const Sd=([t,e,i,n])=>`cubic-bezier(${t}, ${e}, ${i}, ${n})`,E1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Sd([0,.65,.55,1]),circOut:Sd([.55,0,1,.45]),backIn:Sd([.31,.01,.66,-.59]),backOut:Sd([.33,1.53,.69,.99])};function VO(t,e){if(t)return typeof t=="function"&&l0()?L9(t,e):G_(t)?Sd(t):Array.isArray(t)?t.map(i=>VO(i,e)||E1.easeOut):E1[t]}function C9(t,e,i,{delay:n=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){const u={[e]:i};l&&(u.offset=l);const c=VO(o,r);return Array.isArray(c)&&(u.easing=c),t.animate(u,{delay:n,duration:r,easing:Array.isArray(c)?"linear":c,fill:"both",iterations:s+1,direction:a==="reverse"?"alternate":"normal"})}function YI(t,e){t.timeline=e,t.onfinish=null}const D9=Y_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),u0=10,P9=2e4;function O9(t){return K_(t.type)||t.type==="spring"||!BO(t.ease)}function M9(t,e){const i=new j_({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let n={done:!1,value:t[0]};const r=[];let s=0;for(;!n.done&&s<P9;)n=i.sample(s),r.push(n.value),s+=u0;return{times:void 0,keyframes:r,duration:s-u0,ease:"linear"}}const HO={anticipate:fO,backInOut:hO,circInOut:pO};function N9(t){return t in HO}class qI extends PO{constructor(e){super(e);const{name:i,motionValue:n,element:r,keyframes:s}=this.options;this.resolver=new DO(s,(a,o)=>this.onKeyframesResolved(a,o),i,n,r),this.resolver.scheduleResolve()}initPlayback(e,i){var n;let{duration:r=300,times:s,ease:a,type:o,motionValue:l,name:u,startTime:c}=this.options;if(!(!((n=l.owner)===null||n===void 0)&&n.current))return!1;if(typeof a=="string"&&l0()&&N9(a)&&(a=HO[a]),O9(this.options)){const{onComplete:h,onUpdate:f,motionValue:m,element:p,...y}=this.options,g=M9(e,y);e=g.keyframes,e.length===1&&(e[1]=e[0]),r=g.duration,s=g.times,a=g.ease,o="keyframes"}const d=C9(l.owner.current,u,e,{...this.options,duration:r,times:s,ease:a});return d.startTime=c??this.calcStartTime(),this.pendingTimeline?(YI(d,this.pendingTimeline),this.pendingTimeline=void 0):d.onfinish=()=>{const{onComplete:h}=this.options;l.set(Dv(e,this.options,i)),h&&h(),this.cancel(),this.resolveFinishedPromise()},{animation:d,duration:r,times:s,type:o,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:i}=e;return ws(i)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:i}=e;return ws(i.currentTime||0)}set time(e){const{resolved:i}=this;if(!i)return;const{animation:n}=i;n.currentTime=Rs(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:i}=e;return i.playbackRate}set speed(e){const{resolved:i}=this;if(!i)return;const{animation:n}=i;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:i}=e;return i.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:i}=e;return i.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:i}=this;if(!i)return Ri;const{animation:n}=i;YI(n,e)}return Ri}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.playState==="finished"&&this.updateFinishedPromise(),i.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:i}=e;i.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:i,keyframes:n,duration:r,type:s,ease:a,times:o}=e;if(i.playState==="idle"||i.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:c,onComplete:d,element:h,...f}=this.options,m=new j_({...f,keyframes:n,duration:r,type:s,ease:a,times:o,isGenerator:!0}),p=Rs(this.time);u.setWithVelocity(m.sample(p-u0).value,m.sample(p).value,u0)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:i,name:n,repeatDelay:r,repeatType:s,damping:a,type:o}=e;return D9()&&n&&k9.has(n)&&i&&i.owner&&i.owner.current instanceof HTMLElement&&!i.owner.getProps().onUpdate&&!r&&s!=="mirror"&&a!==0&&o!=="inertia"}}const $9=Y_(()=>window.ScrollTimeline!==void 0);class F9{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,i){return Promise.all(this.animations).then(e).catch(i)}getAll(e){return this.animations[0][e]}setAll(e,i){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=i}attachTimeline(e,i){const n=this.animations.map(r=>$9()&&r.attachTimeline?r.attachTimeline(e):i(r));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let i=0;i<this.animations.length;i++)e=Math.max(e,this.animations[i].duration);return e}runAll(e){this.animations.forEach(i=>i[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function U9({when:t,delay:e,delayChildren:i,staggerChildren:n,staggerDirection:r,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:u,...c}){return!!Object.keys(c).length}const q_=(t,e,i,n={},r,s)=>a=>{const o=O_(n,t)||{},l=o.delay||n.delay||0;let{elapsed:u=0}=n;u=u-Rs(l);let c={keyframes:Array.isArray(i)?i:[null,i],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-u,onUpdate:h=>{e.set(h),o.onUpdate&&o.onUpdate(h)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:t,motionValue:e,element:s?void 0:r};U9(o)||(c={...c,...i6(t,c)}),c.duration&&(c.duration=Rs(c.duration)),c.repeatDelay&&(c.repeatDelay=Rs(c.repeatDelay)),c.from!==void 0&&(c.keyframes[0]=c.from);let d=!1;if((c.type===!1||c.duration===0&&!c.repeatDelay)&&(c.duration=0,c.delay===0&&(d=!0)),d&&!s&&e.get()!==void 0){const h=Dv(c.keyframes,o);if(h!==void 0)return ze.update(()=>{c.onUpdate(h),c.onComplete()}),new F9([])}return!s&&qI.supports(c)?new qI(c):new j_(c)},B9=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),V9=t=>h1(t)?t[t.length-1]||0:t;function z_(t,e){t.indexOf(e)===-1&&t.push(e)}function Q_(t,e){const i=t.indexOf(e);i>-1&&t.splice(i,1)}class X_{constructor(){this.subscriptions=[]}add(e){return z_(this.subscriptions,e),()=>Q_(this.subscriptions,e)}notify(e,i,n){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,i,n);else for(let s=0;s<r;s++){const a=this.subscriptions[s];a&&a(e,i,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zI=30,H9=t=>!isNaN(parseFloat(t));class K9{constructor(e,i={}){this.version="11.11.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(n,r=!0)=>{const s=Jr.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=i.owner}setCurrent(e){this.current=e,this.updatedAt=Jr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=H9(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,i){this.events[e]||(this.events[e]=new X_);const n=this.events[e].add(i);return e==="change"?()=>{n(),ze.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,i){this.passiveEffect=e,this.stopPassiveEffect=i}set(e,i=!0){!i||!this.passiveEffect?this.updateAndNotify(e,i):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,i,n){this.set(i),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,i=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,i&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Jr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>zI)return 0;const i=Math.min(this.updatedAt-this.prevUpdatedAt,zI);return OO(parseFloat(this.current)-parseFloat(this.prevFrameValue),i)}start(e){return this.stop(),new Promise(i=>{this.hasAnimated=!0,this.animation=e(i),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Gh(t,e){return new K9(t,e)}function G9(t,e,i){t.hasValue(e)?t.getValue(e).set(i):t.addValue(e,Gh(i))}function W9(t,e){const i=Cv(t,e);let{transitionEnd:n={},transition:r={},...s}=i||{};s={...s,...n};for(const a in s){const o=V9(s[a]);G9(t,a,o)}}const Z_=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),j9="framerAppearId",KO="data-"+Z_(j9);function GO(t){return t.props[KO]}const Li=t=>!!(t&&t.getVelocity);function Y9(t){return!!(Li(t)&&t.add)}function T1(t,e){const i=t.getValue("willChange");if(Y9(i))return i.add(e)}function q9({protectedKeys:t,needsAnimating:e},i){const n=t.hasOwnProperty(i)&&e[i]!==!0;return e[i]=!1,n}function WO(t,e,{delay:i=0,transitionOverride:n,type:r}={}){var s;let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=e;n&&(a=n);const u=[],c=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const h=t.getValue(d,(s=t.latestValues[d])!==null&&s!==void 0?s:null),f=l[d];if(f===void 0||c&&q9(c,d))continue;const m={delay:i,...O_(a||{},d)};let p=!1;if(window.MotionHandoffAnimation){const g=GO(t);if(g){const v=window.MotionHandoffAnimation(g,d,ze);v!==null&&(m.startTime=v,p=!0)}}T1(t,d),h.start(q_(d,h,f,t.shouldReduceMotion&&gl.has(d)?{type:!1}:m,t,p));const y=h.animation;y&&u.push(y)}return o&&Promise.all(u).then(()=>{ze.update(()=>{o&&W9(t,o)})}),u}function b1(t,e,i={}){var n;const r=Cv(t,e,i.type==="exit"?(n=t.presenceContext)===null||n===void 0?void 0:n.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=r||{};i.transitionOverride&&(s=i.transitionOverride);const a=r?()=>Promise.all(WO(t,r,i)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:h}=s;return z9(t,e,c+u,d,h,i)}:()=>Promise.resolve(),{when:l}=s;if(l){const[u,c]=l==="beforeChildren"?[a,o]:[o,a];return u().then(()=>c())}else return Promise.all([a(),o(i.delay)])}function z9(t,e,i=0,n=0,r=1,s){const a=[],o=(t.variantChildren.size-1)*n,l=r===1?(u=0)=>u*n:(u=0)=>o-u*n;return Array.from(t.variantChildren).sort(Q9).forEach((u,c)=>{u.notify("AnimationStart",e),a.push(b1(u,e,{...s,delay:i+l(c)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function Q9(t,e){return t.sortNodePosition(e)}function X9(t,e,i={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const r=e.map(s=>b1(t,s,i));n=Promise.all(r)}else if(typeof e=="string")n=b1(t,e,i);else{const r=typeof e=="function"?Cv(t,e,i.custom):e;n=Promise.all(WO(t,r,i))}return n.then(()=>{t.notify("AnimationComplete",e)})}const Z9=P_.length;function jO(t){if(!t)return;if(!t.isControllingVariants){const i=t.parent?jO(t.parent)||{}:{};return t.props.initial!==void 0&&(i.initial=t.props.initial),i}const e={};for(let i=0;i<Z9;i++){const n=P_[i],r=t.props[n];(Vh(r)||r===!1)&&(e[n]=r)}return e}const J9=[...D_].reverse(),e7=D_.length;function t7(t){return e=>Promise.all(e.map(({animation:i,options:n})=>X9(t,i,n)))}function i7(t){let e=t7(t),i=QI(),n=!0;const r=l=>(u,c)=>{var d;const h=Cv(t,c,l==="exit"?(d=t.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(h){const{transition:f,transitionEnd:m,...p}=h;u={...u,...p,...m}}return u};function s(l){e=l(t)}function a(l){const{props:u}=t,c=jO(t.parent)||{},d=[],h=new Set;let f={},m=1/0;for(let y=0;y<e7;y++){const g=J9[y],v=i[g],E=u[g]!==void 0?u[g]:c[g],T=Vh(E),_=g===l?v.isActive:null;_===!1&&(m=y);let x=E===c[g]&&E!==u[g]&&T;if(x&&n&&t.manuallyAnimateOnMount&&(x=!1),v.protectedKeys={...f},!v.isActive&&_===null||!E&&!v.prevProp||wv(E)||typeof E=="boolean")continue;const A=n7(v.prevProp,E);let I=A||g===l&&v.isActive&&!x&&T||y>m&&T,L=!1;const b=Array.isArray(E)?E:[E];let R=b.reduce(r(g),{});_===!1&&(R={});const{prevResolvedValues:P={}}=v,w={...P,...R},$=V=>{I=!0,h.has(V)&&(L=!0,h.delete(V)),v.needsAnimating[V]=!0;const C=t.getValue(V);C&&(C.liveStyle=!1)};for(const V in w){const C=R[V],K=P[V];if(f.hasOwnProperty(V))continue;let z=!1;h1(C)&&h1(K)?z=!aO(C,K):z=C!==K,z?C!=null?$(V):h.add(V):C!==void 0&&h.has(V)?$(V):v.protectedKeys[V]=!0}v.prevProp=E,v.prevResolvedValues=R,v.isActive&&(f={...f,...R}),n&&t.blockInitialAnimation&&(I=!1),I&&(!(x&&A)||L)&&d.push(...b.map(V=>({animation:V,options:{type:g}})))}if(h.size){const y={};h.forEach(g=>{const v=t.getBaseTarget(g),E=t.getValue(g);E&&(E.liveStyle=!0),y[g]=v??null}),d.push({animation:y})}let p=!!d.length;return n&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(p=!1),n=!1,p?e(d):Promise.resolve()}function o(l,u){var c;if(i[l].isActive===u)return Promise.resolve();(c=t.variantChildren)===null||c===void 0||c.forEach(h=>{var f;return(f=h.animationState)===null||f===void 0?void 0:f.setActive(l,u)}),i[l].isActive=u;const d=a(l);for(const h in i)i[h].protectedKeys={};return d}return{animateChanges:a,setActive:o,setAnimateFunction:s,getState:()=>i,reset:()=>{i=QI(),n=!0}}}function n7(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!aO(e,t):!1}function oo(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function QI(){return{animate:oo(!0),whileInView:oo(),whileHover:oo(),whileTap:oo(),whileDrag:oo(),whileFocus:oo(),exit:oo()}}class no{constructor(e){this.isMounted=!1,this.node=e}update(){}}class r7 extends no{constructor(e){super(e),e.animationState||(e.animationState=i7(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();wv(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:i}=this.node.prevProps||{};e!==i&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let s7=0;class a7 extends no{constructor(){super(...arguments),this.id=s7++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:i}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const r=this.node.animationState.setActive("exit",!e);i&&!e&&r.then(()=>i(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const o7={animation:{Feature:r7},exit:{Feature:a7}},YO=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Pv(t,e="page"){return{point:{x:t[`${e}X`],y:t[`${e}Y`]}}}const l7=t=>e=>YO(e)&&t(e,Pv(e));function ks(t,e,i,n={passive:!0}){return t.addEventListener(e,i,n),()=>t.removeEventListener(e,i)}function Ds(t,e,i,n){return ks(t,e,l7(i),n)}const XI=(t,e)=>Math.abs(t-e);function u7(t,e){const i=XI(t.x,e.x),n=XI(t.y,e.y);return Math.sqrt(i**2+n**2)}class qO{constructor(e,i,{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=aE(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,f=u7(d.offset,{x:0,y:0})>=3;if(!h&&!f)return;const{point:m}=d,{timestamp:p}=fi;this.history.push({...m,timestamp:p});const{onStart:y,onMove:g}=this.handlers;h||(y&&y(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,d)},this.handlePointerMove=(d,h)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=sE(h,this.transformPagePoint),ze.update(this.updatePoint,!0)},this.handlePointerUp=(d,h)=>{this.end();const{onEnd:f,onSessionEnd:m,resumeAnimation:p}=this.handlers;if(this.dragSnapToOrigin&&p&&p(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const y=aE(d.type==="pointercancel"?this.lastMoveEventInfo:sE(h,this.transformPagePoint),this.history);this.startEvent&&f&&f(d,y),m&&m(d,y)},!YO(e))return;this.dragSnapToOrigin=s,this.handlers=i,this.transformPagePoint=n,this.contextWindow=r||window;const a=Pv(e),o=sE(a,this.transformPagePoint),{point:l}=o,{timestamp:u}=fi;this.history=[{...l,timestamp:u}];const{onSessionStart:c}=i;c&&c(e,aE(o,this.history)),this.removeListeners=Cs(Ds(this.contextWindow,"pointermove",this.handlePointerMove),Ds(this.contextWindow,"pointerup",this.handlePointerUp),Ds(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ya(this.updatePoint)}}function sE(t,e){return e?{point:e(t.point)}:t}function ZI(t,e){return{x:t.x-e.x,y:t.y-e.y}}function aE({point:t},e){return{point:t,delta:ZI(t,zO(e)),offset:ZI(t,c7(e)),velocity:d7(e,.1)}}function c7(t){return t[0]}function zO(t){return t[t.length-1]}function d7(t,e){if(t.length<2)return{x:0,y:0};let i=t.length-1,n=null;const r=zO(t);for(;i>=0&&(n=t[i],!(r.timestamp-n.timestamp>Rs(e)));)i--;if(!n)return{x:0,y:0};const s=ws(r.timestamp-n.timestamp);if(s===0)return{x:0,y:0};const a={x:(r.x-n.x)/s,y:(r.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function QO(t){let e=null;return()=>{const i=()=>{e=null};return e===null?(e=t,i):!1}}const JI=QO("dragHorizontal"),eL=QO("dragVertical");function XO(t){let e=!1;if(t==="y")e=eL();else if(t==="x")e=JI();else{const i=JI(),n=eL();i&&n?e=()=>{i(),n()}:(i&&i(),n&&n())}return e}function ZO(){const t=XO(!0);return t?(t(),!1):!0}function Lu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const JO=1e-4,h7=1-JO,f7=1+JO,eM=.01,m7=0-eM,p7=0+eM;function En(t){return t.max-t.min}function g7(t,e,i){return Math.abs(t-e)<=i}function tL(t,e,i,n=.5){t.origin=n,t.originPoint=St(e.min,e.max,t.origin),t.scale=En(i)/En(e),t.translate=St(i.min,i.max,t.origin)-t.originPoint,(t.scale>=h7&&t.scale<=f7||isNaN(t.scale))&&(t.scale=1),(t.translate>=m7&&t.translate<=p7||isNaN(t.translate))&&(t.translate=0)}function sh(t,e,i,n){tL(t.x,e.x,i.x,n?n.originX:void 0),tL(t.y,e.y,i.y,n?n.originY:void 0)}function iL(t,e,i){t.min=i.min+e.min,t.max=t.min+En(e)}function v7(t,e,i){iL(t.x,e.x,i.x),iL(t.y,e.y,i.y)}function nL(t,e,i){t.min=e.min-i.min,t.max=t.min+En(e)}function ah(t,e,i){nL(t.x,e.x,i.x),nL(t.y,e.y,i.y)}function y7(t,{min:e,max:i},n){return e!==void 0&&t<e?t=n?St(e,t,n.min):Math.max(t,e):i!==void 0&&t>i&&(t=n?St(i,t,n.max):Math.min(t,i)),t}function rL(t,e,i){return{min:e!==void 0?t.min+e:void 0,max:i!==void 0?t.max+i-(t.max-t.min):void 0}}function E7(t,{top:e,left:i,bottom:n,right:r}){return{x:rL(t.x,i,r),y:rL(t.y,e,n)}}function sL(t,e){let i=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([i,n]=[n,i]),{min:i,max:n}}function T7(t,e){return{x:sL(t.x,e.x),y:sL(t.y,e.y)}}function b7(t,e){let i=.5;const n=En(t),r=En(e);return r>n?i=Ec(e.min,e.max-n,t.min):n>r&&(i=Ec(t.min,t.max-r,e.min)),qa(0,1,i)}function S7(t,e){const i={};return e.min!==void 0&&(i.min=e.min-t.min),e.max!==void 0&&(i.max=e.max-t.min),i}const S1=.35;function _7(t=S1){return t===!1?t=0:t===!0&&(t=S1),{x:aL(t,"left","right"),y:aL(t,"top","bottom")}}function aL(t,e,i){return{min:oL(t,e),max:oL(t,i)}}function oL(t,e){return typeof t=="number"?t:t[e]||0}const lL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ru=()=>({x:lL(),y:lL()}),uL=()=>({min:0,max:0}),Dt=()=>({x:uL(),y:uL()});function Ln(t){return[t("x"),t("y")]}function tM({top:t,left:e,right:i,bottom:n}){return{x:{min:e,max:i},y:{min:t,max:n}}}function A7({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function x7(t,e){if(!e)return t;const i=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:i.y,left:i.x,bottom:n.y,right:n.x}}function oE(t){return t===void 0||t===1}function _1({scale:t,scaleX:e,scaleY:i}){return!oE(t)||!oE(e)||!oE(i)}function vo(t){return _1(t)||iM(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function iM(t){return cL(t.x)||cL(t.y)}function cL(t){return t&&t!=="0%"}function c0(t,e,i){const n=t-i,r=e*n;return i+r}function dL(t,e,i,n,r){return r!==void 0&&(t=c0(t,r,n)),c0(t,i,n)+e}function A1(t,e=0,i=1,n,r){t.min=dL(t.min,e,i,n,r),t.max=dL(t.max,e,i,n,r)}function nM(t,{x:e,y:i}){A1(t.x,e.translate,e.scale,e.originPoint),A1(t.y,i.translate,i.scale,i.originPoint)}const hL=.999999999999,fL=1.0000000000001;function k7(t,e,i,n=!1){const r=i.length;if(!r)return;e.x=e.y=1;let s,a;for(let o=0;o<r;o++){s=i[o],a=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(n&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Cu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,nM(t,a)),n&&vo(s.latestValues)&&Cu(t,s.latestValues))}e.x<fL&&e.x>hL&&(e.x=1),e.y<fL&&e.y>hL&&(e.y=1)}function wu(t,e){t.min=t.min+e,t.max=t.max+e}function mL(t,e,i,n,r=.5){const s=St(t.min,t.max,r);A1(t,e,i,s,n)}function Cu(t,e){mL(t.x,e.x,e.scaleX,e.scale,e.originX),mL(t.y,e.y,e.scaleY,e.scale,e.originY)}function rM(t,e){return tM(x7(t.getBoundingClientRect(),e))}function I7(t,e,i){const n=rM(t,i),{scroll:r}=e;return r&&(wu(n.x,r.offset.x),wu(n.y,r.offset.y)),n}const sM=({current:t})=>t?t.ownerDocument.defaultView:null,L7=new WeakMap;class R7{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dt(),this.visualElement=e}start(e,{snapToCursor:i=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const r=c=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),i&&this.snapToCursor(Pv(c,"page").point)},s=(c,d)=>{const{drag:h,dragPropagation:f,onDragStart:m}=this.getProps();if(h&&!f&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=XO(h),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ln(y=>{let g=this.getAxisMotionValue(y).get()||0;if(Zr.test(g)){const{projection:v}=this.visualElement;if(v&&v.layout){const E=v.layout.layoutBox[y];E&&(g=En(E)*(parseFloat(g)/100))}}this.originPoint[y]=g}),m&&ze.postRender(()=>m(c,d)),T1(this.visualElement,"transform");const{animationState:p}=this.visualElement;p&&p.setActive("whileDrag",!0)},a=(c,d)=>{const{dragPropagation:h,dragDirectionLock:f,onDirectionLock:m,onDrag:p}=this.getProps();if(!h&&!this.openGlobalLock)return;const{offset:y}=d;if(f&&this.currentDirection===null){this.currentDirection=w7(y),this.currentDirection!==null&&m&&m(this.currentDirection);return}this.updateAxis("x",d.point,y),this.updateAxis("y",d.point,y),this.visualElement.render(),p&&p(c,d)},o=(c,d)=>this.stop(c,d),l=()=>Ln(c=>{var d;return this.getAnimationState(c)==="paused"&&((d=this.getAxisMotionValue(c).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new qO(e,{onSessionStart:r,onStart:s,onMove:a,onSessionEnd:o,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:sM(this.visualElement)})}stop(e,i){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=i;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ze.postRender(()=>s(e,i))}cancel(){this.isDragging=!1;const{projection:e,animationState:i}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),i&&i.setActive("whileDrag",!1)}updateAxis(e,i,n){const{drag:r}=this.getProps();if(!n||!um(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=y7(a,this.constraints[e],this.elastic[e])),s.set(a)}resolveConstraints(){var e;const{dragConstraints:i,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;i&&Lu(i)?this.constraints||(this.constraints=this.resolveRefConstraints()):i&&r?this.constraints=E7(r.layoutBox,i):this.constraints=!1,this.elastic=_7(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Ln(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=S7(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:i}=this.getProps();if(!e||!Lu(e))return!1;const n=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=I7(n,r.root,this.visualElement.getTransformPagePoint());let a=T7(r.layout.layoutBox,s);if(i){const o=i(A7(a));this.hasMutatedConstraints=!!o,o&&(a=tM(o))}return a}startAnimation(e){const{drag:i,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:a,onDragTransitionEnd:o}=this.getProps(),l=this.constraints||{},u=Ln(c=>{if(!um(c,i,this.currentDirection))return;let d=l&&l[c]||{};a&&(d={min:0,max:0});const h=r?200:1e6,f=r?40:1e7,m={type:"inertia",velocity:n?e[c]:0,bounceStiffness:h,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10,...s,...d};return this.startAxisValueAnimation(c,m)});return Promise.all(u).then(o)}startAxisValueAnimation(e,i){const n=this.getAxisMotionValue(e);return T1(this.visualElement,e),n.start(q_(e,n,0,i,this.visualElement,!1))}stopAnimation(){Ln(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ln(e=>{var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.pause()})}getAnimationState(e){var i;return(i=this.getAxisMotionValue(e).animation)===null||i===void 0?void 0:i.state}getAxisMotionValue(e){const i=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),r=n[i];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ln(i=>{const{drag:n}=this.getProps();if(!um(i,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(i);if(r&&r.layout){const{min:a,max:o}=r.layout.layoutBox[i];s.set(e[i]-St(a,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:i}=this.getProps(),{projection:n}=this.visualElement;if(!Lu(i)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Ln(a=>{const o=this.getAxisMotionValue(a);if(o&&this.constraints!==!1){const l=o.get();r[a]=b7({min:l,max:l},this.constraints[a])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ln(a=>{if(!um(a,e,null))return;const o=this.getAxisMotionValue(a),{min:l,max:u}=this.constraints[a];o.set(St(l,u,r[a]))})}addListeners(){if(!this.visualElement.current)return;L7.set(this.visualElement,this);const e=this.visualElement.current,i=Ds(e,"pointerdown",l=>{const{drag:u,dragListener:c=!0}=this.getProps();u&&c&&this.start(l)}),n=()=>{const{dragConstraints:l}=this.getProps();Lu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ze.read(n);const a=ks(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:u})=>{this.isDragging&&u&&(Ln(c=>{const d=this.getAxisMotionValue(c);d&&(this.originPoint[c]+=l[c].translate,d.set(d.get()+l[c].translate))}),this.visualElement.render())});return()=>{a(),i(),s(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:i=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:a=S1,dragMomentum:o=!0}=e;return{...e,drag:i,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:a,dragMomentum:o}}}function um(t,e,i){return(e===!0||e===t)&&(i===null||i===t)}function w7(t,e=10){let i=null;return Math.abs(t.y)>e?i="y":Math.abs(t.x)>e&&(i="x"),i}class C7 extends no{constructor(e){super(e),this.removeGroupControls=Ri,this.removeListeners=Ri,this.controls=new R7(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ri}unmount(){this.removeGroupControls(),this.removeListeners()}}const pL=t=>(e,i)=>{t&&ze.postRender(()=>t(e,i))};class D7 extends no{constructor(){super(...arguments),this.removePointerDownListener=Ri}onPointerDown(e){this.session=new qO(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:sM(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:i,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:pL(e),onStart:pL(i),onMove:n,onEnd:(s,a)=>{delete this.session,r&&ze.postRender(()=>r(s,a))}}}mount(){this.removePointerDownListener=Ds(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ov=G.createContext(null);function P7(){const t=G.useContext(Ov);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:i,register:n}=t,r=G.useId();G.useEffect(()=>n(r),[]);const s=G.useCallback(()=>i&&i(r),[r,i]);return!e&&i?[!1,s]:[!0]}const J_=G.createContext({}),aM=G.createContext({}),cp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function gL(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const td={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(me.test(t))t=parseFloat(t);else return t;const i=gL(t,e.target.x),n=gL(t,e.target.y);return`${i}% ${n}%`}},O7={correct:(t,{treeScale:e,projectionDelta:i})=>{const n=t,r=za.parse(t);if(r.length>5)return n;const s=za.createTransformer(t),a=typeof r[0]!="number"?1:0,o=i.x.scale*e.x,l=i.y.scale*e.y;r[0+a]/=o,r[1+a]/=l;const u=St(o,l,.5);return typeof r[2+a]=="number"&&(r[2+a]/=u),typeof r[3+a]=="number"&&(r[3+a]/=u),s(r)}},d0={};function M7(t){Object.assign(d0,t)}const{schedule:eA,cancel:mle}=oO(queueMicrotask,!1);class N7 extends G.Component{componentDidMount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;M7($7),s&&(i.group&&i.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),cp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:i,visualElement:n,drag:r,isPresent:s}=this.props,a=n.projection;return a&&(a.isPresent=s,r||e.layoutDependency!==i||i===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?a.promote():a.relegate()||ze.postRender(()=>{const o=a.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),eA.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:i,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),i&&i.group&&i.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oM(t){const[e,i]=P7(),n=G.useContext(J_);return q.jsx(N7,{...t,layoutGroup:n,switchLayoutGroup:G.useContext(aM),isPresent:e,safeToRemove:i})}const $7={borderRadius:{...td,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:td,borderTopRightRadius:td,borderBottomLeftRadius:td,borderBottomRightRadius:td,boxShadow:O7},lM=["TopLeft","TopRight","BottomLeft","BottomRight"],F7=lM.length,vL=t=>typeof t=="string"?parseFloat(t):t,yL=t=>typeof t=="number"||me.test(t);function U7(t,e,i,n,r,s){r?(t.opacity=St(0,i.opacity!==void 0?i.opacity:1,B7(n)),t.opacityExit=St(e.opacity!==void 0?e.opacity:1,0,V7(n))):s&&(t.opacity=St(e.opacity!==void 0?e.opacity:1,i.opacity!==void 0?i.opacity:1,n));for(let a=0;a<F7;a++){const o=`border${lM[a]}Radius`;let l=EL(e,o),u=EL(i,o);if(l===void 0&&u===void 0)continue;l||(l=0),u||(u=0),l===0||u===0||yL(l)===yL(u)?(t[o]=Math.max(St(vL(l),vL(u),n),0),(Zr.test(u)||Zr.test(l))&&(t[o]+="%")):t[o]=u}(e.rotate||i.rotate)&&(t.rotate=St(e.rotate||0,i.rotate||0,n))}function EL(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const B7=uM(0,.5,mO),V7=uM(.5,.95,Ri);function uM(t,e,i){return n=>n<t?0:n>e?1:i(Ec(t,e,n))}function TL(t,e){t.min=e.min,t.max=e.max}function xn(t,e){TL(t.x,e.x),TL(t.y,e.y)}function bL(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function SL(t,e,i,n,r){return t-=e,t=c0(t,1/i,n),r!==void 0&&(t=c0(t,1/r,n)),t}function H7(t,e=0,i=1,n=.5,r,s=t,a=t){if(Zr.test(e)&&(e=parseFloat(e),e=St(a.min,a.max,e/100)-a.min),typeof e!="number")return;let o=St(s.min,s.max,n);t===s&&(o-=e),t.min=SL(t.min,e,i,o,r),t.max=SL(t.max,e,i,o,r)}function _L(t,e,[i,n,r],s,a){H7(t,e[i],e[n],e[r],e.scale,s,a)}const K7=["x","scaleX","originX"],G7=["y","scaleY","originY"];function AL(t,e,i,n){_L(t.x,e,K7,i?i.x:void 0,n?n.x:void 0),_L(t.y,e,G7,i?i.y:void 0,n?n.y:void 0)}function xL(t){return t.translate===0&&t.scale===1}function cM(t){return xL(t.x)&&xL(t.y)}function kL(t,e){return t.min===e.min&&t.max===e.max}function W7(t,e){return kL(t.x,e.x)&&kL(t.y,e.y)}function IL(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function dM(t,e){return IL(t.x,e.x)&&IL(t.y,e.y)}function LL(t){return En(t.x)/En(t.y)}function RL(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class j7{constructor(){this.members=[]}add(e){z_(this.members,e),e.scheduleRender()}remove(e){if(Q_(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const i=this.members[this.members.length-1];i&&this.promote(i)}}relegate(e){const i=this.members.findIndex(r=>e===r);if(i===0)return!1;let n;for(let r=i;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){n=s;break}}return n?(this.promote(n),!0):!1}promote(e,i){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,i&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:i,resumingFrom:n}=e;i.onExitComplete&&i.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Y7(t,e,i){let n="";const r=t.x.translate/e.x,s=t.y.translate/e.y,a=(i==null?void 0:i.z)||0;if((r||s||a)&&(n=`translate3d(${r}px, ${s}px, ${a}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),i){const{transformPerspective:u,rotate:c,rotateX:d,rotateY:h,skewX:f,skewY:m}=i;u&&(n=`perspective(${u}px) ${n}`),c&&(n+=`rotate(${c}deg) `),d&&(n+=`rotateX(${d}deg) `),h&&(n+=`rotateY(${h}deg) `),f&&(n+=`skewX(${f}deg) `),m&&(n+=`skewY(${m}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const q7=(t,e)=>t.depth-e.depth;class z7{constructor(){this.children=[],this.isDirty=!1}add(e){z_(this.children,e),this.isDirty=!0}remove(e){Q_(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(q7),this.isDirty=!1,this.children.forEach(e)}}function dp(t){const e=Li(t)?t.get():t;return B9(e)?e.toValue():e}function Q7(t,e){const i=Jr.now(),n=({timestamp:r})=>{const s=r-i;s>=e&&(Ya(n),t(s-e))};return ze.read(n,!0),()=>Ya(n)}function X7(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Z7(t,e,i){const n=Li(t)?t:Gh(t);return n.start(q_("",n,e,i)),n.animation}const yo={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},_d=typeof window<"u"&&window.MotionDebug!==void 0,lE=["","X","Y","Z"],J7={visibility:"hidden"},wL=1e3;let eV=0;function uE(t,e,i,n){const{latestValues:r}=e;r[t]&&(i[t]=r[t],e.setStaticValue(t,0),n&&(n[t]=0))}function hM(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const i=GO(e);if(window.MotionHasOptimisedAnimation(i,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(i,"transform",ze,!(r||s))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&hM(n)}function fM({attachResizeListener:t,defaultParent:e,measureScroll:i,checkIsScrollRoot:n,resetTransform:r}){return class{constructor(a={},o=e==null?void 0:e()){this.id=eV++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_d&&(yo.totalNodes=yo.resolvedTargetDeltas=yo.recalculatedProjection=0),this.nodes.forEach(nV),this.nodes.forEach(lV),this.nodes.forEach(uV),this.nodes.forEach(rV),_d&&window.MotionDebug.record(yo)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new z7)}addEventListener(a,o){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new X_),this.eventHandlers.get(a).add(o)}notifyListeners(a,...o){const l=this.eventHandlers.get(a);l&&l.notify(...o)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=X7(a),this.instance=a;const{layoutId:l,layout:u,visualElement:c}=this.options;if(c&&!c.current&&c.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(u||l)&&(this.isLayoutDirty=!0),t){let d;const h=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=Q7(h,250),cp.hasAnimatedSinceResize&&(cp.hasAnimatedSinceResize=!1,this.nodes.forEach(DL))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&c&&(l||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:h,hasRelativeTargetChanged:f,layout:m})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const p=this.options.transition||c.getDefaultTransition()||mV,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=c.getProps(),v=!this.targetLayout||!dM(this.targetLayout,m)||f,E=!h&&f;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||h&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,E);const T={...O_(p,"layout"),onPlay:y,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(T.delay=0,T.type=!1),this.startAnimation(T)}else h||DL(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=m})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ya(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cV),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&hM(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let c=0;c<this.path.length;c++){const d=this.path[c];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:l}=this.options;if(o===void 0&&!l)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(CL);return}this.isUpdating||this.nodes.forEach(aV),this.isUpdating=!1,this.nodes.forEach(oV),this.nodes.forEach(tV),this.nodes.forEach(iV),this.clearAllSnapshots();const o=Jr.now();fi.delta=qa(0,1e3/60,o-fi.timestamp),fi.timestamp=o,fi.isProcessing=!0,eE.update.process(fi),eE.preRender.process(fi),eE.render.process(fi),fi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,eA.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(sV),this.sharedNodes.forEach(dV)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ze.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ze.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(o=!1),o){const l=n(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:l,offset:i(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!cM(this.projectionDelta),l=this.getTransformTemplate(),u=l?l(this.latestValues,""):void 0,c=u!==this.prevTransformTemplateValue;a&&(o||vo(this.latestValues)||c)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const o=this.measurePageBox();let l=this.removeElementScroll(o);return a&&(l=this.removeTransform(l)),pV(l),{animationId:this.root.animationId,measuredBox:o,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:o}=this.options;if(!o)return Dt();const l=o.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(gV))){const{scroll:c}=this.root;c&&(wu(l.x,c.offset.x),wu(l.y,c.offset.y))}return l}removeElementScroll(a){var o;const l=Dt();if(xn(l,a),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return l;for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:h}=c;c!==this.root&&d&&h.layoutScroll&&(d.wasRoot&&xn(l,a),wu(l.x,d.offset.x),wu(l.y,d.offset.y))}return l}applyTransform(a,o=!1){const l=Dt();xn(l,a);for(let u=0;u<this.path.length;u++){const c=this.path[u];!o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&Cu(l,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),vo(c.latestValues)&&Cu(l,c.latestValues)}return vo(this.latestValues)&&Cu(l,this.latestValues),l}removeTransform(a){const o=Dt();xn(o,a);for(let l=0;l<this.path.length;l++){const u=this.path[l];if(!u.instance||!vo(u.latestValues))continue;_1(u.latestValues)&&u.updateSnapshot();const c=Dt(),d=u.measurePageBox();xn(c,d),AL(o,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,c)}return vo(this.latestValues)&&AL(o,this.latestValues),o}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var o;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:h}=this.options;if(!(!this.layout||!(d||h))){if(this.resolvedRelativeTargetAt=fi.timestamp,!this.targetDelta&&!this.relativeTarget){const f=this.getClosestProjectingParent();f&&f.layout&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),ah(this.relativeTargetOrigin,this.layout.layoutBox,f.layout.layoutBox),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Dt(),this.targetWithTransforms=Dt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),v7(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):xn(this.target,this.layout.layoutBox),nM(this.target,this.targetDelta)):xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const f=this.getClosestProjectingParent();f&&!!f.resumingFrom==!!this.resumingFrom&&!f.options.layoutScroll&&f.target&&this.animationProgress!==1?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dt(),this.relativeTargetOrigin=Dt(),ah(this.relativeTargetOrigin,this.target,f.target),xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_d&&yo.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||_1(this.parent.latestValues)||iM(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===fi.timestamp&&(u=!1),u)return;const{layout:c,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||d))return;xn(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;k7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dt());const{target:m}=o;if(!m){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(bL(this.prevProjectionDelta.x,this.projectionDelta.x),bL(this.prevProjectionDelta.y,this.projectionDelta.y)),sh(this.projectionDelta,this.layoutCorrected,m,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!RL(this.projectionDelta.x,this.prevProjectionDelta.x)||!RL(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",m)),_d&&yo.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),a){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ru(),this.projectionDelta=Ru(),this.projectionDeltaWithTransform=Ru()}setAnimationOrigin(a,o=!1){const l=this.snapshot,u=l?l.latestValues:{},c={...this.latestValues},d=Ru();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const h=Dt(),f=l?l.source:void 0,m=this.layout?this.layout.source:void 0,p=f!==m,y=this.getStack(),g=!y||y.members.length<=1,v=!!(p&&!g&&this.options.crossfade===!0&&!this.path.some(fV));this.animationProgress=0;let E;this.mixTargetDelta=T=>{const _=T/1e3;PL(d.x,a.x,_),PL(d.y,a.y,_),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ah(h,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hV(this.relativeTarget,this.relativeTargetOrigin,h,_),E&&W7(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Dt()),xn(E,this.relativeTarget)),p&&(this.animationValues=c,U7(c,u,this.latestValues,_,v,g)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=_},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ya(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ze.update(()=>{cp.hasAnimatedSinceResize=!0,this.currentAnimation=Z7(0,wL,{...a,onUpdate:o=>{this.mixTargetDelta(o),a.onUpdate&&a.onUpdate(o)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(wL),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:o,target:l,layout:u,latestValues:c}=a;if(!(!o||!l||!u)){if(this!==a&&this.layout&&u&&mM(this.options.animationType,this.layout.layoutBox,u.layoutBox)){l=this.target||Dt();const d=En(this.layout.layoutBox.x);l.x.min=a.target.x.min,l.x.max=l.x.min+d;const h=En(this.layout.layoutBox.y);l.y.min=a.target.y.min,l.y.max=l.y.min+h}xn(o,l),Cu(o,c),sh(this.projectionDeltaWithTransform,this.layoutCorrected,o,c)}}registerSharedNode(a,o){this.sharedNodes.has(a)||this.sharedNodes.set(a,new j7),this.sharedNodes.get(a).add(o);const u=o.options.initialPromotionConfig;o.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(o):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:o,preserveFollowOpacity:l}={}){const u=this.getStack();u&&u.promote(this,l),a&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let o=!1;const{latestValues:l}=a;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(o=!0),!o)return;const u={};l.z&&uE("z",a,u,this.animationValues);for(let c=0;c<lE.length;c++)uE(`rotate${lE[c]}`,a,u,this.animationValues),uE(`skew${lE[c]}`,a,u,this.animationValues);a.render();for(const c in u)a.setStaticValue(c,u[c]),this.animationValues&&(this.animationValues[c]=u[c]);a.scheduleRender()}getProjectionStyles(a){var o,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return J7;const u={visibility:""},c=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=dp(a==null?void 0:a.pointerEvents)||"",u.transform=c?c(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const p={};return this.options.layoutId&&(p.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,p.pointerEvents=dp(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!vo(this.latestValues)&&(p.transform=c?c({},""):"none",this.hasProjected=!1),p}const h=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Y7(this.projectionDeltaWithTransform,this.treeScale,h),c&&(u.transform=c(h,u.transform));const{x:f,y:m}=this.projectionDelta;u.transformOrigin=`${f.origin*100}% ${m.origin*100}% 0`,d.animationValues?u.opacity=d===this?(l=(o=h.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:u.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const p in d0){if(h[p]===void 0)continue;const{correct:y,applyTo:g}=d0[p],v=u.transform==="none"?h[p]:y(h[p],d);if(g){const E=g.length;for(let T=0;T<E;T++)u[g[T]]=v}else u[p]=v}return this.options.layoutId&&(u.pointerEvents=d===this?dp(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var o;return(o=a.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(CL),this.root.sharedNodes.clear()}}}function tV(t){t.updateLayout()}function iV(t){var e;const i=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&i&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=t.layout,{animationType:s}=t.options,a=i.source!==t.layout.source;s==="size"?Ln(d=>{const h=a?i.measuredBox[d]:i.layoutBox[d],f=En(h);h.min=n[d].min,h.max=h.min+f}):mM(s,i.layoutBox,n)&&Ln(d=>{const h=a?i.measuredBox[d]:i.layoutBox[d],f=En(n[d]);h.max=h.min+f,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+f)});const o=Ru();sh(o,n,i.layoutBox);const l=Ru();a?sh(l,t.applyTransform(r,!0),i.measuredBox):sh(l,n,i.layoutBox);const u=!cM(o);let c=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:h,layout:f}=d;if(h&&f){const m=Dt();ah(m,i.layoutBox,h.layoutBox);const p=Dt();ah(p,n,f.layoutBox),dM(m,p)||(c=!0),d.options.layoutRoot&&(t.relativeTarget=p,t.relativeTargetOrigin=m,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:i,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeTargetChanged:c})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function nV(t){_d&&yo.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function rV(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function sV(t){t.clearSnapshot()}function CL(t){t.clearMeasurements()}function aV(t){t.isLayoutDirty=!1}function oV(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function DL(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function lV(t){t.resolveTargetDelta()}function uV(t){t.calcProjection()}function cV(t){t.resetSkewAndRotation()}function dV(t){t.removeLeadSnapshot()}function PL(t,e,i){t.translate=St(e.translate,0,i),t.scale=St(e.scale,1,i),t.origin=e.origin,t.originPoint=e.originPoint}function OL(t,e,i,n){t.min=St(e.min,i.min,n),t.max=St(e.max,i.max,n)}function hV(t,e,i,n){OL(t.x,e.x,i.x,n),OL(t.y,e.y,i.y,n)}function fV(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const mV={duration:.45,ease:[.4,0,.1,1]},ML=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),NL=ML("applewebkit/")&&!ML("chrome/")?Math.round:Ri;function $L(t){t.min=NL(t.min),t.max=NL(t.max)}function pV(t){$L(t.x),$L(t.y)}function mM(t,e,i){return t==="position"||t==="preserve-aspect"&&!g7(LL(e),LL(i),.2)}function gV(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const vV=fM({attachResizeListener:(t,e)=>ks(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),cE={current:void 0},pM=fM({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!cE.current){const t=new vV({});t.mount(window),t.setOptions({layoutScroll:!0}),cE.current=t}return cE.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),yV={pan:{Feature:D7},drag:{Feature:C7,ProjectionNode:pM,MeasureLayout:oM}};function FL(t,e){const i=e?"pointerenter":"pointerleave",n=e?"onHoverStart":"onHoverEnd",r=(s,a)=>{if(s.pointerType==="touch"||ZO())return;const o=t.getProps();t.animationState&&o.whileHover&&t.animationState.setActive("whileHover",e);const l=o[n];l&&ze.postRender(()=>l(s,a))};return Ds(t.current,i,r,{passive:!t.getProps()[n]})}class EV extends no{mount(){this.unmount=Cs(FL(this.node,!0),FL(this.node,!1))}unmount(){}}class TV extends no{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Cs(ks(this.node.current,"focus",()=>this.onFocus()),ks(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const gM=(t,e)=>e?t===e?!0:gM(t,e.parentElement):!1;function dE(t,e){if(!e)return;const i=new PointerEvent("pointer"+t);e(i,Pv(i))}class bV extends no{constructor(){super(...arguments),this.removeStartListeners=Ri,this.removeEndListeners=Ri,this.removeAccessibleListeners=Ri,this.startPointerPress=(e,i)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=Ds(window,"pointerup",(o,l)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:c,globalTapTarget:d}=this.node.getProps(),h=!d&&!gM(this.node.current,o.target)?c:u;h&&ze.update(()=>h(o,l))},{passive:!(n.onTap||n.onPointerUp)}),a=Ds(window,"pointercancel",(o,l)=>this.cancelPress(o,l),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Cs(s,a),this.startPress(e,i)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const a=o=>{o.key!=="Enter"||!this.checkPressEnd()||dE("up",(l,u)=>{const{onTap:c}=this.node.getProps();c&&ze.postRender(()=>c(l,u))})};this.removeEndListeners(),this.removeEndListeners=ks(this.node.current,"keyup",a),dE("down",(o,l)=>{this.startPress(o,l)})},i=ks(this.node.current,"keydown",e),n=()=>{this.isPressing&&dE("cancel",(s,a)=>this.cancelPress(s,a))},r=ks(this.node.current,"blur",n);this.removeAccessibleListeners=Cs(i,r)}}startPress(e,i){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&ze.postRender(()=>n(e,i))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ZO()}cancelPress(e,i){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&ze.postRender(()=>n(e,i))}mount(){const e=this.node.getProps(),i=Ds(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=ks(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Cs(i,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const x1=new WeakMap,hE=new WeakMap,SV=t=>{const e=x1.get(t.target);e&&e(t)},_V=t=>{t.forEach(SV)};function AV({root:t,...e}){const i=t||document;hE.has(i)||hE.set(i,{});const n=hE.get(i),r=JSON.stringify(e);return n[r]||(n[r]=new IntersectionObserver(_V,{root:t,...e})),n[r]}function xV(t,e,i){const n=AV(e);return x1.set(t,i),n.observe(t),()=>{x1.delete(t),n.unobserve(t)}}const kV={some:0,all:1};class IV extends no{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:i,margin:n,amount:r="some",once:s}=e,a={root:i?i.current:void 0,rootMargin:n,threshold:typeof r=="number"?r:kV[r]},o=l=>{const{isIntersecting:u}=l;if(this.isInView===u||(this.isInView=u,s&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:c,onViewportLeave:d}=this.node.getProps(),h=u?c:d;h&&h(l)};return xV(this.node.current,a,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:i}=this.node;["amount","margin","root"].some(LV(e,i))&&this.startObserver()}unmount(){}}function LV({viewport:t={}},{viewport:e={}}={}){return i=>t[i]!==e[i]}const RV={inView:{Feature:IV},tap:{Feature:bV},focus:{Feature:TV},hover:{Feature:EV}},wV={layout:{ProjectionNode:pM,MeasureLayout:oM}},tA=G.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),Mv=G.createContext({}),iA=typeof window<"u",vM=iA?G.useLayoutEffect:G.useEffect,yM=G.createContext({strict:!1});function CV(t,e,i,n,r){var s,a;const{visualElement:o}=G.useContext(Mv),l=G.useContext(yM),u=G.useContext(Ov),c=G.useContext(tA).reducedMotion,d=G.useRef();n=n||l.renderer,!d.current&&n&&(d.current=n(t,{visualState:e,parent:o,props:i,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:c}));const h=d.current,f=G.useContext(aM);h&&!h.projection&&r&&(h.type==="html"||h.type==="svg")&&DV(d.current,i,r,f);const m=G.useRef(!1);G.useInsertionEffect(()=>{h&&m.current&&h.update(i,u)});const p=i[KO],y=G.useRef(!!p&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,p))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,p)));return vM(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),eA.render(h.render),y.current&&h.animationState&&h.animationState.animateChanges())}),G.useEffect(()=>{h&&(!y.current&&h.animationState&&h.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var g;(g=window.MotionHandoffMarkAsComplete)===null||g===void 0||g.call(window,p)}),y.current=!1))}),h}function DV(t,e,i,n){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:u}=e;t.projection=new i(t.latestValues,e["data-framer-portal-id"]?void 0:EM(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!a||o&&Lu(o),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:n,layoutScroll:l,layoutRoot:u})}function EM(t){if(t)return t.options.allowProjection!==!1?t.projection:EM(t.parent)}function PV(t,e,i){return G.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),i&&(typeof i=="function"?i(n):Lu(i)&&(i.current=n))},[e])}function Nv(t){return wv(t.animate)||P_.some(e=>Vh(t[e]))}function TM(t){return!!(Nv(t)||t.variants)}function OV(t,e){if(Nv(t)){const{initial:i,animate:n}=t;return{initial:i===!1||Vh(i)?i:void 0,animate:Vh(n)?n:void 0}}return t.inherit!==!1?e:{}}function MV(t){const{initial:e,animate:i}=OV(t,G.useContext(Mv));return G.useMemo(()=>({initial:e,animate:i}),[UL(e),UL(i)])}function UL(t){return Array.isArray(t)?t.join(" "):t}const BL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Tc={};for(const t in BL)Tc[t]={isEnabled:e=>BL[t].some(i=>!!e[i])};function NV(t){for(const e in t)Tc[e]={...Tc[e],...t[e]}}const $V=Symbol.for("motionComponentSymbol");function FV({preloadedFeatures:t,createVisualElement:e,useRender:i,useVisualState:n,Component:r}){t&&NV(t);function s(o,l){let u;const c={...G.useContext(tA),...o,layoutId:UV(o)},{isStatic:d}=c,h=MV(o),f=n(o,d);if(!d&&iA){BV();const m=VV(c);u=m.MeasureLayout,h.visualElement=CV(r,f,c,e,m.ProjectionNode)}return q.jsxs(Mv.Provider,{value:h,children:[u&&h.visualElement?q.jsx(u,{visualElement:h.visualElement,...c}):null,i(r,o,PV(f,h.visualElement,l),f,d,h.visualElement)]})}const a=G.forwardRef(s);return a[$V]=r,a}function UV({layoutId:t}){const e=G.useContext(J_).id;return e&&t!==void 0?e+"-"+t:t}function BV(t,e){G.useContext(yM).strict}function VV(t){const{drag:e,layout:i}=Tc;if(!e&&!i)return{};const n={...e,...i};return{MeasureLayout:e!=null&&e.isEnabled(t)||i!=null&&i.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}const HV=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function nA(t){return typeof t!="string"||t.includes("-")?!1:!!(HV.indexOf(t)>-1||/[A-Z]/u.test(t))}function bM(t,{style:e,vars:i},n,r){Object.assign(t.style,e,r&&r.getProjectionStyles(n));for(const s in i)t.style.setProperty(s,i[s])}const SM=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function _M(t,e,i,n){bM(t,e,void 0,n);for(const r in e.attrs)t.setAttribute(SM.has(r)?r:Z_(r),e.attrs[r])}function AM(t,{layout:e,layoutId:i}){return gl.has(t)||t.startsWith("origin")||(e||i!==void 0)&&(!!d0[t]||t==="opacity")}function rA(t,e,i){var n;const{style:r}=t,s={};for(const a in r)(Li(r[a])||e.style&&Li(e.style[a])||AM(a,t)||((n=i==null?void 0:i.getValue(a))===null||n===void 0?void 0:n.liveStyle)!==void 0)&&(s[a]=r[a]);return s}function xM(t,e,i){const n=rA(t,e,i);for(const r in t)if(Li(t[r])||Li(e[r])){const s=wf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function sA(t){const e=G.useRef(null);return e.current===null&&(e.current=t()),e.current}function KV({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:i},n,r,s){const a={latestValues:GV(n,r,s,t),renderState:e()};return i&&(a.mount=o=>i(n,o,a)),a}const kM=t=>(e,i)=>{const n=G.useContext(Mv),r=G.useContext(Ov),s=()=>KV(t,e,n,r);return i?s():sA(s)};function GV(t,e,i,n){const r={},s=n(t,{});for(const h in s)r[h]=dp(s[h]);let{initial:a,animate:o}=t;const l=Nv(t),u=TM(t);e&&u&&!l&&t.inherit!==!1&&(a===void 0&&(a=e.initial),o===void 0&&(o=e.animate));let c=i?i.initial===!1:!1;c=c||a===!1;const d=c?o:a;if(d&&typeof d!="boolean"&&!wv(d)){const h=Array.isArray(d)?d:[d];for(let f=0;f<h.length;f++){const m=C_(t,h[f]);if(m){const{transitionEnd:p,transition:y,...g}=m;for(const v in g){let E=g[v];if(Array.isArray(E)){const T=c?E.length-1:0;E=E[T]}E!==null&&(r[v]=E)}for(const v in p)r[v]=p[v]}}}return r}const aA=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),IM=()=>({...aA(),attrs:{}}),LM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,WV={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},jV=wf.length;function YV(t,e,i){let n="",r=!0;for(let s=0;s<jV;s++){const a=wf[s],o=t[a];if(o===void 0)continue;let l=!0;if(typeof o=="number"?l=o===(a.startsWith("scale")?1:0):l=parseFloat(o)===0,!l||i){const u=LM(o,V_[a]);if(!l){r=!1;const c=WV[a]||a;n+=`${c}(${u}) `}i&&(e[a]=u)}}return n=n.trim(),i?n=i(e,r?"":n):r&&(n="none"),n}function oA(t,e,i){const{style:n,vars:r,transformOrigin:s}=t;let a=!1,o=!1;for(const l in e){const u=e[l];if(gl.has(l)){a=!0;continue}else if(TO(l)){r[l]=u;continue}else{const c=LM(u,V_[l]);l.startsWith("origin")?(o=!0,s[l]=c):n[l]=c}}if(e.transform||(a||i?n.transform=YV(e,t.transform,i):n.transform&&(n.transform="none")),o){const{originX:l="50%",originY:u="50%",originZ:c=0}=s;n.transformOrigin=`${l} ${u} ${c}`}}function VL(t,e,i){return typeof t=="string"?t:me.transform(e+i*t)}function qV(t,e,i){const n=VL(e,t.x,t.width),r=VL(i,t.y,t.height);return`${n} ${r}`}const zV={offset:"stroke-dashoffset",array:"stroke-dasharray"},QV={offset:"strokeDashoffset",array:"strokeDasharray"};function XV(t,e,i=1,n=0,r=!0){t.pathLength=1;const s=r?zV:QV;t[s.offset]=me.transform(-n);const a=me.transform(e),o=me.transform(i);t[s.array]=`${a} ${o}`}function lA(t,{attrX:e,attrY:i,attrScale:n,originX:r,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...u},c,d){if(oA(t,u,d),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f,dimensions:m}=t;h.transform&&(m&&(f.transform=h.transform),delete h.transform),m&&(r!==void 0||s!==void 0||f.transform)&&(f.transformOrigin=qV(m,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(h.x=e),i!==void 0&&(h.y=i),n!==void 0&&(h.scale=n),a!==void 0&&XV(h,a,o,l,!1)}const uA=t=>typeof t=="string"&&t.toLowerCase()==="svg",ZV={useVisualState:kM({scrapeMotionValuesFromProps:xM,createRenderState:IM,onMount:(t,e,{renderState:i,latestValues:n})=>{ze.read(()=>{try{i.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{i.dimensions={x:0,y:0,width:0,height:0}}}),ze.render(()=>{lA(i,n,uA(e.tagName),t.transformTemplate),_M(e,i)})}})},JV={useVisualState:kM({scrapeMotionValuesFromProps:rA,createRenderState:aA})};function RM(t,e,i){for(const n in e)!Li(e[n])&&!AM(n,i)&&(t[n]=e[n])}function eH({transformTemplate:t},e){return G.useMemo(()=>{const i=aA();return oA(i,e,t),Object.assign({},i.vars,i.style)},[e])}function tH(t,e){const i=t.style||{},n={};return RM(n,i,t),Object.assign(n,eH(t,e)),n}function iH(t,e){const i={},n=tH(t,e);return t.drag&&t.dragListener!==!1&&(i.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(i.tabIndex=0),i.style=n,i}const nH=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function h0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||nH.has(t)}let wM=t=>!h0(t);function rH(t){t&&(wM=e=>e.startsWith("on")?!h0(e):t(e))}try{rH(require("@emotion/is-prop-valid").default)}catch{}function sH(t,e,i){const n={};for(const r in t)r==="values"&&typeof t.values=="object"||(wM(r)||i===!0&&h0(r)||!e&&!h0(r)||t.draggable&&r.startsWith("onDrag"))&&(n[r]=t[r]);return n}function aH(t,e,i,n){const r=G.useMemo(()=>{const s=IM();return lA(s,e,uA(n),t.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};RM(s,t.style,t),r.style={...s,...r.style}}return r}function oH(t=!1){return(i,n,r,{latestValues:s},a)=>{const l=(nA(i)?aH:iH)(n,s,a,i),u=sH(n,typeof i=="string",t),c=i!==G.Fragment?{...u,...l,ref:r}:{},{children:d}=n,h=G.useMemo(()=>Li(d)?d.get():d,[d]);return G.createElement(i,{...c,children:h})}}function lH(t,e){return function(n,{forwardMotionProps:r}={forwardMotionProps:!1}){const a={...nA(n)?ZV:JV,preloadedFeatures:t,useRender:oH(r),createVisualElement:e,Component:n};return FV(a)}}const k1={current:null},CM={current:!1};function uH(){if(CM.current=!0,!!iA)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>k1.current=t.matches;t.addListener(e),e()}else k1.current=!1}function cH(t,e,i){for(const n in e){const r=e[n],s=i[n];if(Li(r))t.addValue(n,r);else if(Li(s))t.addValue(n,Gh(r,{owner:t}));else if(s!==r)if(t.hasValue(n)){const a=t.getValue(n);a.liveStyle===!0?a.jump(r):a.hasAnimated||a.set(r)}else{const a=t.getStaticValue(n);t.addValue(n,Gh(a!==void 0?a:r,{owner:t}))}}for(const n in i)e[n]===void 0&&t.removeValue(n);return e}const HL=new WeakMap,dH=[..._O,xi,za],hH=t=>dH.find(SO(t)),KL=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class fH{scrapeMotionValuesFromProps(e,i,n){return{}}constructor({parent:e,props:i,presenceContext:n,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=F_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const h=Jr.now();this.renderScheduledAt<h&&(this.renderScheduledAt=h,ze.render(this.render,!1,!0))};const{latestValues:l,renderState:u}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=i.initial?{...l}:{},this.renderState=u,this.parent=e,this.props=i,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!s,this.isControllingVariants=Nv(i),this.isVariantNode=TM(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(i,{},this);for(const h in d){const f=d[h];l[h]!==void 0&&Li(f)&&f.set(l[h],!1)}}mount(e){this.current=e,HL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,n)=>this.bindToMotionValue(n,i)),CM.current||uH(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:k1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){HL.delete(this.current),this.projection&&this.projection.unmount(),Ya(this.notifyUpdate),Ya(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const i=this.features[e];i&&(i.unmount(),i.isMounted=!1)}this.current=null}bindToMotionValue(e,i){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=gl.has(e),r=i.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&ze.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=i.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,i)),this.valueSubscriptions.set(e,()=>{r(),s(),a&&a(),i.owner&&i.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Tc){const i=Tc[e];if(!i)continue;const{isEnabled:n,Feature:r}=i;if(!this.features[e]&&r&&n(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,i){this.latestValues[e]=i}update(e,i){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=i;for(let n=0;n<KL.length;n++){const r=KL[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,a=e[s];a&&(this.propEventSubscriptions[r]=this.on(r,a))}this.prevMotionValues=cH(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const i=this.getClosestVariantNode();if(i)return i.variantChildren&&i.variantChildren.add(e),()=>i.variantChildren.delete(e)}addValue(e,i){const n=this.values.get(e);i!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,i),this.values.set(e,i),this.latestValues[e]=i.get())}removeValue(e){this.values.delete(e);const i=this.valueSubscriptions.get(e);i&&(i(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,i){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&i!==void 0&&(n=Gh(i===null?void 0:i,{owner:this}),this.addValue(e,n)),n}readValue(e,i){var n;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(yO(r)||gO(r))?r=parseFloat(r):!hH(r)&&za.test(i)&&(r=CO(e,i)),this.setBaseTarget(e,Li(r)?r.get():r)),Li(r)?r.get():r}setBaseTarget(e,i){this.baseTarget[e]=i}getBaseTarget(e){var i;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=C_(this.props,n,(i=this.presenceContext)===null||i===void 0?void 0:i.custom);a&&(r=a[e])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Li(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,i){return this.events[e]||(this.events[e]=new X_),this.events[e].add(i)}notify(e,...i){this.events[e]&&this.events[e].notify(...i)}}class DM extends fH{constructor(){super(...arguments),this.KeyframeResolver=DO}sortInstanceNodePosition(e,i){return e.compareDocumentPosition(i)&2?1:-1}getBaseTargetFromProps(e,i){return e.style?e.style[i]:void 0}removeValueFromRenderState(e,{vars:i,style:n}){delete i[e],delete n[e]}}function mH(t){return window.getComputedStyle(t)}class pH extends DM{constructor(){super(...arguments),this.type="html",this.renderInstance=bM}readValueFromInstance(e,i){if(gl.has(i)){const n=H_(i);return n&&n.default||0}else{const n=mH(e),r=(TO(i)?n.getPropertyValue(i):n[i])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:i}){return rM(e,i)}build(e,i,n){oA(e,i,n.transformTemplate)}scrapeMotionValuesFromProps(e,i,n){return rA(e,i,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Li(e)&&(this.childSubscription=e.on("change",i=>{this.current&&(this.current.textContent=`${i}`)}))}}class gH extends DM{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dt}getBaseTargetFromProps(e,i){return e[i]}readValueFromInstance(e,i){if(gl.has(i)){const n=H_(i);return n&&n.default||0}return i=SM.has(i)?i:Z_(i),e.getAttribute(i)}scrapeMotionValuesFromProps(e,i,n){return xM(e,i,n)}build(e,i,n){lA(e,i,this.isSVGTag,n.transformTemplate)}renderInstance(e,i,n,r){_M(e,i,n,r)}mount(e){this.isSVGTag=uA(e.tagName),super.mount(e)}}const vH=(t,e)=>nA(t)?new gH(e):new pH(e,{allowProjection:t!==G.Fragment}),yH=lH({...o7,...RV,...yV,...wV},vH),Wh=XB(yH);class EH extends G.Component{getSnapshotBeforeUpdate(e){const i=this.props.childRef.current;if(i&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=i.offsetHeight||0,n.width=i.offsetWidth||0,n.top=i.offsetTop,n.left=i.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function TH({children:t,isPresent:e}){const i=G.useId(),n=G.useRef(null),r=G.useRef({width:0,height:0,top:0,left:0}),{nonce:s}=G.useContext(tA);return G.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:u}=r.current;if(e||!n.current||!a||!o)return;n.current.dataset.motionPopId=i;const c=document.createElement("style");return s&&(c.nonce=s),document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),q.jsx(EH,{isPresent:e,childRef:n,sizeRef:r,children:G.cloneElement(t,{ref:n})})}const bH=({children:t,initial:e,isPresent:i,onExitComplete:n,custom:r,presenceAffectsLayout:s,mode:a})=>{const o=sA(SH),l=G.useId(),u=G.useCallback(d=>{o.set(d,!0);for(const h of o.values())if(!h)return;n&&n()},[o,n]),c=G.useMemo(()=>({id:l,initial:e,isPresent:i,custom:r,onExitComplete:u,register:d=>(o.set(d,!1),()=>o.delete(d))}),s?[Math.random(),u]:[i,u]);return G.useMemo(()=>{o.forEach((d,h)=>o.set(h,!1))},[i]),G.useEffect(()=>{!i&&!o.size&&n&&n()},[i]),a==="popLayout"&&(t=q.jsx(TH,{isPresent:i,children:t})),q.jsx(Ov.Provider,{value:c,children:t})};function SH(){return new Map}const cm=t=>t.key||"";function GL(t){const e=[];return G.Children.forEach(t,i=>{G.isValidElement(i)&&e.push(i)}),e}const cA=({children:t,exitBeforeEnter:e,custom:i,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync"})=>{const o=G.useMemo(()=>GL(t),[t]),l=o.map(cm),u=G.useRef(!0),c=G.useRef(o),d=sA(()=>new Map),[h,f]=G.useState(o),[m,p]=G.useState(o);vM(()=>{u.current=!1,c.current=o;for(let v=0;v<m.length;v++){const E=cm(m[v]);l.includes(E)?d.delete(E):d.get(E)!==!0&&d.set(E,!1)}},[m,l.length,l.join("-")]);const y=[];if(o!==h){let v=[...o];for(let E=0;E<m.length;E++){const T=m[E],_=cm(T);l.includes(_)||(v.splice(E,0,T),y.push(T))}a==="wait"&&y.length&&(v=y),p(GL(v)),f(o);return}const{forceRender:g}=G.useContext(J_);return q.jsx(q.Fragment,{children:m.map(v=>{const E=cm(v),T=o===m||l.includes(E),_=()=>{if(d.has(E))d.set(E,!0);else return;let x=!0;d.forEach(A=>{A||(x=!1)}),x&&(g==null||g(),p(c.current),r&&r())};return q.jsx(bH,{isPresent:T,initial:!u.current||n?void 0:!1,custom:T?void 0:i,presenceAffectsLayout:s,mode:a,onExitComplete:T?void 0:_,children:v},E)})})};function _s(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function PM(t){if(!_s(t))return t;const e={};return Object.keys(t).forEach(i=>{e[i]=PM(t[i])}),e}function pn(t,e,i={clone:!0}){const n=i.clone?{...t}:t;return _s(t)&&_s(e)&&Object.keys(e).forEach(r=>{_s(e[r])&&Object.prototype.hasOwnProperty.call(t,r)&&_s(t[r])?n[r]=pn(t[r],e[r],i):i.clone?n[r]=_s(e[r])?PM(e[r]):e[r]:n[r]=e[r]}),n}function cl(t,...e){const i=new URL(`https://mui.com/production-error/?code=${t}`);return e.forEach(n=>i.searchParams.append("args[]",n)),`Minified MUI error #${t}; visit ${i} for the full message.`}function bc(t){if(typeof t!="string")throw new Error(cl(7));return t.charAt(0).toUpperCase()+t.slice(1)}function I1(t,e){const i={...e};for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=n;if(r==="components"||r==="slots")i[r]={...t[r],...i[r]};else if(r==="componentsProps"||r==="slotProps"){const s=t[r],a=e[r];if(!a)i[r]=s||{};else if(!s)i[r]=a;else{i[r]={...a};for(const o in s)if(Object.prototype.hasOwnProperty.call(s,o)){const l=o;i[r][l]=I1(s[l],a[l])}}}else i[r]===void 0&&(i[r]=t[r])}return i}function _H(t,e,i=void 0){const n={};for(const r in t){const s=t[r];let a="",o=!0;for(let l=0;l<s.length;l+=1){const u=s[l];u&&(a+=(o===!0?"":" ")+e(u),o=!1,i&&i[u]&&(a+=" "+i[u]))}n[r]=a}return n}const WL=t=>t,AH=()=>{let t=WL;return{configure(e){t=e},generate(e){return t(e)},reset(){t=WL}}},xH=AH(),kH={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function OM(t,e,i="Mui"){const n=kH[e];return n?`${i}-${n}`:`${xH.generate(t)}-${e}`}function IH(t,e,i="Mui"){const n={};return e.forEach(r=>{n[r]=OM(t,r,i)}),n}function LH(t,e=Number.MIN_SAFE_INTEGER,i=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,i))}function MM(t){var e,i,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(i=MM(t[e]))&&(n&&(n+=" "),n+=i)}else for(i in t)t[i]&&(n&&(n+=" "),n+=i);return n}function RH(){for(var t,e,i=0,n="",r=arguments.length;i<r;i++)(t=arguments[i])&&(e=MM(t))&&(n&&(n+=" "),n+=e);return n}function oh(t,e){return e?pn(t,e,{clone:!1}):t}function wH(t,e){if(!t.containerQueries)return e;const i=Object.keys(e).filter(n=>n.startsWith("@container")).sort((n,r)=>{var a,o;const s=/min-width:\s*([0-9.]+)/;return+(((a=n.match(s))==null?void 0:a[1])||0)-+(((o=r.match(s))==null?void 0:o[1])||0)});return i.length?i.reduce((n,r)=>{const s=e[r];return delete n[r],n[r]=s,n},{...e}):e}function CH(t,e){return e==="@"||e.startsWith("@")&&(t.some(i=>e.startsWith(`@${i}`))||!!e.match(/^@\d/))}function DH(t,e){const i=e.match(/^@([^/]+)?\/?(.+)?$/);if(!i)return null;const[,n,r]=i,s=Number.isNaN(+n)?n||0:+n;return t.containerQueries(r).up(s)}function PH(t){const e=(s,a)=>s.replace("@media",a?`@container ${a}`:"@container");function i(s,a){s.up=(...o)=>e(t.breakpoints.up(...o),a),s.down=(...o)=>e(t.breakpoints.down(...o),a),s.between=(...o)=>e(t.breakpoints.between(...o),a),s.only=(...o)=>e(t.breakpoints.only(...o),a),s.not=(...o)=>{const l=e(t.breakpoints.not(...o),a);return l.includes("not all and")?l.replace("not all and ","").replace("min-width:","width<").replace("max-width:","width>").replace("and","or"):l}}const n={},r=s=>(i(n,s),n);return i(r),{...t,containerQueries:r}}const $v={xs:0,sm:600,md:900,lg:1200,xl:1536},jL={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${$v[t]}px)`},OH={containerQueries:t=>({up:e=>{let i=typeof e=="number"?e:$v[e]||e;return typeof i=="number"&&(i=`${i}px`),t?`@container ${t} (min-width:${i})`:`@container (min-width:${i})`}})};function Us(t,e,i){const n=t.theme||{};if(Array.isArray(e)){const s=n.breakpoints||jL;return e.reduce((a,o,l)=>(a[s.up(s.keys[l])]=i(e[l]),a),{})}if(typeof e=="object"){const s=n.breakpoints||jL;return Object.keys(e).reduce((a,o)=>{if(CH(s.keys,o)){const l=DH(n.containerQueries?n:OH,o);l&&(a[l]=i(e[o],o))}else if(Object.keys(s.values||$v).includes(o)){const l=s.up(o);a[l]=i(e[o],o)}else{const l=o;a[l]=e[l]}return a},{})}return i(e)}function MH(t={}){var i;return((i=t.keys)==null?void 0:i.reduce((n,r)=>{const s=t.up(r);return n[s]={},n},{}))||{}}function NH(t,e){return t.reduce((i,n)=>{const r=i[n];return(!r||Object.keys(r).length===0)&&delete i[n],i},e)}function Fv(t,e,i=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&i){const n=`vars.${e}`.split(".").reduce((r,s)=>r&&r[s]?r[s]:null,t);if(n!=null)return n}return e.split(".").reduce((n,r)=>n&&n[r]!=null?n[r]:null,t)}function f0(t,e,i,n=i){let r;return typeof t=="function"?r=t(i):Array.isArray(t)?r=t[i]||n:r=Fv(t,i)||n,e&&(r=e(r,n,t)),r}function Nt(t){const{prop:e,cssProperty:i=t.prop,themeKey:n,transform:r}=t,s=a=>{if(a[e]==null)return null;const o=a[e],l=a.theme,u=Fv(l,n)||{};return Us(a,o,d=>{let h=f0(u,r,d);return d===h&&typeof d=="string"&&(h=f0(u,r,`${e}${d==="default"?"":bc(d)}`,d)),i===!1?h:{[i]:h}})};return s.propTypes={},s.filterProps=[e],s}function $H(t){const e={};return i=>(e[i]===void 0&&(e[i]=t(i)),e[i])}const FH={m:"margin",p:"padding"},UH={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},YL={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},BH=$H(t=>{if(t.length>2)if(YL[t])t=YL[t];else return[t];const[e,i]=t.split(""),n=FH[e],r=UH[i]||"";return Array.isArray(r)?r.map(s=>n+s):[n+r]}),dA=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],hA=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...dA,...hA];function Pf(t,e,i,n){const r=Fv(t,e,!0)??i;return typeof r=="number"||typeof r=="string"?s=>typeof s=="string"?s:typeof r=="string"?`calc(${s} * ${r})`:r*s:Array.isArray(r)?s=>{if(typeof s=="string")return s;const a=Math.abs(s),o=r[a];return s>=0?o:typeof o=="number"?-o:`-${o}`}:typeof r=="function"?r:()=>{}}function fA(t){return Pf(t,"spacing",8)}function Of(t,e){return typeof e=="string"||e==null?e:t(e)}function VH(t,e){return i=>t.reduce((n,r)=>(n[r]=Of(e,i),n),{})}function HH(t,e,i,n){if(!e.includes(i))return null;const r=BH(i),s=VH(r,n),a=t[i];return Us(t,a,s)}function NM(t,e){const i=fA(t.theme);return Object.keys(t).map(n=>HH(t,e,n,i)).reduce(oh,{})}function kt(t){return NM(t,dA)}kt.propTypes={};kt.filterProps=dA;function It(t){return NM(t,hA)}It.propTypes={};It.filterProps=hA;function Uv(...t){const e=t.reduce((n,r)=>(r.filterProps.forEach(s=>{n[s]=r}),n),{}),i=n=>Object.keys(n).reduce((r,s)=>e[s]?oh(r,e[s](n)):r,{});return i.propTypes={},i.filterProps=t.reduce((n,r)=>n.concat(r.filterProps),[]),i}function Pn(t){return typeof t!="number"?t:`${t}px solid`}function Hn(t,e){return Nt({prop:t,themeKey:"borders",transform:e})}const KH=Hn("border",Pn),GH=Hn("borderTop",Pn),WH=Hn("borderRight",Pn),jH=Hn("borderBottom",Pn),YH=Hn("borderLeft",Pn),qH=Hn("borderColor"),zH=Hn("borderTopColor"),QH=Hn("borderRightColor"),XH=Hn("borderBottomColor"),ZH=Hn("borderLeftColor"),JH=Hn("outline",Pn),eK=Hn("outlineColor"),Bv=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=Pf(t.theme,"shape.borderRadius",4),i=n=>({borderRadius:Of(e,n)});return Us(t,t.borderRadius,i)}return null};Bv.propTypes={};Bv.filterProps=["borderRadius"];Uv(KH,GH,WH,jH,YH,qH,zH,QH,XH,ZH,Bv,JH,eK);const Vv=t=>{if(t.gap!==void 0&&t.gap!==null){const e=Pf(t.theme,"spacing",8),i=n=>({gap:Of(e,n)});return Us(t,t.gap,i)}return null};Vv.propTypes={};Vv.filterProps=["gap"];const Hv=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=Pf(t.theme,"spacing",8),i=n=>({columnGap:Of(e,n)});return Us(t,t.columnGap,i)}return null};Hv.propTypes={};Hv.filterProps=["columnGap"];const Kv=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=Pf(t.theme,"spacing",8),i=n=>({rowGap:Of(e,n)});return Us(t,t.rowGap,i)}return null};Kv.propTypes={};Kv.filterProps=["rowGap"];const tK=Nt({prop:"gridColumn"}),iK=Nt({prop:"gridRow"}),nK=Nt({prop:"gridAutoFlow"}),rK=Nt({prop:"gridAutoColumns"}),sK=Nt({prop:"gridAutoRows"}),aK=Nt({prop:"gridTemplateColumns"}),oK=Nt({prop:"gridTemplateRows"}),lK=Nt({prop:"gridTemplateAreas"}),uK=Nt({prop:"gridArea"});Uv(Vv,Hv,Kv,tK,iK,nK,rK,sK,aK,oK,lK,uK);function Wu(t,e){return e==="grey"?e:t}const cK=Nt({prop:"color",themeKey:"palette",transform:Wu}),dK=Nt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:Wu}),hK=Nt({prop:"backgroundColor",themeKey:"palette",transform:Wu});Uv(cK,dK,hK);function hn(t){return t<=1&&t!==0?`${t*100}%`:t}const fK=Nt({prop:"width",transform:hn}),mA=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=i=>{var r,s,a,o,l;const n=((a=(s=(r=t.theme)==null?void 0:r.breakpoints)==null?void 0:s.values)==null?void 0:a[i])||$v[i];return n?((l=(o=t.theme)==null?void 0:o.breakpoints)==null?void 0:l.unit)!=="px"?{maxWidth:`${n}${t.theme.breakpoints.unit}`}:{maxWidth:n}:{maxWidth:hn(i)}};return Us(t,t.maxWidth,e)}return null};mA.filterProps=["maxWidth"];const mK=Nt({prop:"minWidth",transform:hn}),pK=Nt({prop:"height",transform:hn}),gK=Nt({prop:"maxHeight",transform:hn}),vK=Nt({prop:"minHeight",transform:hn});Nt({prop:"size",cssProperty:"width",transform:hn});Nt({prop:"size",cssProperty:"height",transform:hn});const yK=Nt({prop:"boxSizing"});Uv(fK,mA,mK,pK,gK,vK,yK);const Gv={border:{themeKey:"borders",transform:Pn},borderTop:{themeKey:"borders",transform:Pn},borderRight:{themeKey:"borders",transform:Pn},borderBottom:{themeKey:"borders",transform:Pn},borderLeft:{themeKey:"borders",transform:Pn},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Pn},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:Bv},color:{themeKey:"palette",transform:Wu},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:Wu},backgroundColor:{themeKey:"palette",transform:Wu},p:{style:It},pt:{style:It},pr:{style:It},pb:{style:It},pl:{style:It},px:{style:It},py:{style:It},padding:{style:It},paddingTop:{style:It},paddingRight:{style:It},paddingBottom:{style:It},paddingLeft:{style:It},paddingX:{style:It},paddingY:{style:It},paddingInline:{style:It},paddingInlineStart:{style:It},paddingInlineEnd:{style:It},paddingBlock:{style:It},paddingBlockStart:{style:It},paddingBlockEnd:{style:It},m:{style:kt},mt:{style:kt},mr:{style:kt},mb:{style:kt},ml:{style:kt},mx:{style:kt},my:{style:kt},margin:{style:kt},marginTop:{style:kt},marginRight:{style:kt},marginBottom:{style:kt},marginLeft:{style:kt},marginX:{style:kt},marginY:{style:kt},marginInline:{style:kt},marginInlineStart:{style:kt},marginInlineEnd:{style:kt},marginBlock:{style:kt},marginBlockStart:{style:kt},marginBlockEnd:{style:kt},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:Vv},rowGap:{style:Kv},columnGap:{style:Hv},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:hn},maxWidth:{style:mA},minWidth:{transform:hn},height:{transform:hn},maxHeight:{transform:hn},minHeight:{transform:hn},boxSizing:{},font:{themeKey:"font"},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function EK(...t){const e=t.reduce((n,r)=>n.concat(Object.keys(r)),[]),i=new Set(e);return t.every(n=>i.size===Object.keys(n).length)}function TK(t,e){return typeof t=="function"?t(e):t}function bK(){function t(i,n,r,s){const a={[i]:n,theme:r},o=s[i];if(!o)return{[i]:n};const{cssProperty:l=i,themeKey:u,transform:c,style:d}=o;if(n==null)return null;if(u==="typography"&&n==="inherit")return{[i]:n};const h=Fv(r,u)||{};return d?d(a):Us(a,n,m=>{let p=f0(h,c,m);return m===p&&typeof m=="string"&&(p=f0(h,c,`${i}${m==="default"?"":bc(m)}`,m)),l===!1?p:{[l]:p}})}function e(i){const{sx:n,theme:r={}}=i||{};if(!n)return null;const s=r.unstable_sxConfig??Gv;function a(o){let l=o;if(typeof o=="function")l=o(r);else if(typeof o!="object")return o;if(!l)return null;const u=MH(r.breakpoints),c=Object.keys(u);let d=u;return Object.keys(l).forEach(h=>{const f=TK(l[h],r);if(f!=null)if(typeof f=="object")if(s[h])d=oh(d,t(h,f,r,s));else{const m=Us({theme:r},f,p=>({[h]:p}));EK(m,f)?d[h]=e({sx:f,theme:r}):d=oh(d,m)}else d=oh(d,t(h,f,r,s))}),wH(r,NH(c,d))}return Array.isArray(n)?n.map(a):a(n)}return e}const Sc=bK();Sc.filterProps=["sx"];function L1(){return L1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},L1.apply(null,arguments)}function $M(t){var e=Object.create(null);return function(i){return e[i]===void 0&&(e[i]=t(i)),e[i]}}var SK=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,_K=$M(function(t){return SK.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),AK=!1;function xK(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function kK(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var IK=function(){function t(i){var n=this;this._insertTag=function(r){var s;n.tags.length===0?n.insertionPoint?s=n.insertionPoint.nextSibling:n.prepend?s=n.container.firstChild:s=n.before:s=n.tags[n.tags.length-1].nextSibling,n.container.insertBefore(r,s),n.tags.push(r)},this.isSpeedy=i.speedy===void 0?!AK:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(n){n.forEach(this._insertTag)},e.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(kK(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=xK(r);try{s.insertRule(n,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},e.flush=function(){this.tags.forEach(function(n){var r;return(r=n.parentNode)==null?void 0:r.removeChild(n)}),this.tags=[],this.ctr=0},t}(),_i="-ms-",m0="-moz-",Ue="-webkit-",FM="comm",pA="rule",gA="decl",LK="@import",UM="@keyframes",RK="@layer",wK=Math.abs,Wv=String.fromCharCode,CK=Object.assign;function DK(t,e){return gi(t,0)^45?(((e<<2^gi(t,0))<<2^gi(t,1))<<2^gi(t,2))<<2^gi(t,3):0}function BM(t){return t.trim()}function PK(t,e){return(t=e.exec(t))?t[0]:t}function Ve(t,e,i){return t.replace(e,i)}function R1(t,e){return t.indexOf(e)}function gi(t,e){return t.charCodeAt(e)|0}function jh(t,e,i){return t.slice(e,i)}function $r(t){return t.length}function vA(t){return t.length}function dm(t,e){return e.push(t),t}function OK(t,e){return t.map(e).join("")}var jv=1,_c=1,VM=0,zi=0,Kt=0,Uc="";function Yv(t,e,i,n,r,s,a){return{value:t,root:e,parent:i,type:n,props:r,children:s,line:jv,column:_c,length:a,return:""}}function id(t,e){return CK(Yv("",null,null,"",null,null,0),t,{length:-t.length},e)}function MK(){return Kt}function NK(){return Kt=zi>0?gi(Uc,--zi):0,_c--,Kt===10&&(_c=1,jv--),Kt}function gn(){return Kt=zi<VM?gi(Uc,zi++):0,_c++,Kt===10&&(_c=1,jv++),Kt}function es(){return gi(Uc,zi)}function hp(){return zi}function Mf(t,e){return jh(Uc,t,e)}function Yh(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function HM(t){return jv=_c=1,VM=$r(Uc=t),zi=0,[]}function KM(t){return Uc="",t}function fp(t){return BM(Mf(zi-1,w1(t===91?t+2:t===40?t+1:t)))}function $K(t){for(;(Kt=es())&&Kt<33;)gn();return Yh(t)>2||Yh(Kt)>3?"":" "}function FK(t,e){for(;--e&&gn()&&!(Kt<48||Kt>102||Kt>57&&Kt<65||Kt>70&&Kt<97););return Mf(t,hp()+(e<6&&es()==32&&gn()==32))}function w1(t){for(;gn();)switch(Kt){case t:return zi;case 34:case 39:t!==34&&t!==39&&w1(Kt);break;case 40:t===41&&w1(t);break;case 92:gn();break}return zi}function UK(t,e){for(;gn()&&t+Kt!==57;)if(t+Kt===84&&es()===47)break;return"/*"+Mf(e,zi-1)+"*"+Wv(t===47?t:gn())}function BK(t){for(;!Yh(es());)gn();return Mf(t,zi)}function VK(t){return KM(mp("",null,null,null,[""],t=HM(t),0,[0],t))}function mp(t,e,i,n,r,s,a,o,l){for(var u=0,c=0,d=a,h=0,f=0,m=0,p=1,y=1,g=1,v=0,E="",T=r,_=s,x=n,A=E;y;)switch(m=v,v=gn()){case 40:if(m!=108&&gi(A,d-1)==58){R1(A+=Ve(fp(v),"&","&\f"),"&\f")!=-1&&(g=-1);break}case 34:case 39:case 91:A+=fp(v);break;case 9:case 10:case 13:case 32:A+=$K(m);break;case 92:A+=FK(hp()-1,7);continue;case 47:switch(es()){case 42:case 47:dm(HK(UK(gn(),hp()),e,i),l);break;default:A+="/"}break;case 123*p:o[u++]=$r(A)*g;case 125*p:case 59:case 0:switch(v){case 0:case 125:y=0;case 59+c:g==-1&&(A=Ve(A,/\f/g,"")),f>0&&$r(A)-d&&dm(f>32?zL(A+";",n,i,d-1):zL(Ve(A," ","")+";",n,i,d-2),l);break;case 59:A+=";";default:if(dm(x=qL(A,e,i,u,c,r,o,E,T=[],_=[],d),s),v===123)if(c===0)mp(A,e,x,x,T,s,d,o,_);else switch(h===99&&gi(A,3)===110?100:h){case 100:case 108:case 109:case 115:mp(t,x,x,n&&dm(qL(t,x,x,0,0,r,o,E,r,T=[],d),_),r,_,d,o,n?T:_);break;default:mp(A,x,x,x,[""],_,0,o,_)}}u=c=f=0,p=g=1,E=A="",d=a;break;case 58:d=1+$r(A),f=m;default:if(p<1){if(v==123)--p;else if(v==125&&p++==0&&NK()==125)continue}switch(A+=Wv(v),v*p){case 38:g=c>0?1:(A+="\f",-1);break;case 44:o[u++]=($r(A)-1)*g,g=1;break;case 64:es()===45&&(A+=fp(gn())),h=es(),c=d=$r(E=A+=BK(hp())),v++;break;case 45:m===45&&$r(A)==2&&(p=0)}}return s}function qL(t,e,i,n,r,s,a,o,l,u,c){for(var d=r-1,h=r===0?s:[""],f=vA(h),m=0,p=0,y=0;m<n;++m)for(var g=0,v=jh(t,d+1,d=wK(p=a[m])),E=t;g<f;++g)(E=BM(p>0?h[g]+" "+v:Ve(v,/&\f/g,h[g])))&&(l[y++]=E);return Yv(t,e,i,r===0?pA:o,l,u,c)}function HK(t,e,i){return Yv(t,e,i,FM,Wv(MK()),jh(t,2,-2),0)}function zL(t,e,i,n){return Yv(t,e,i,gA,jh(t,0,n),jh(t,n+1,-1),n)}function ju(t,e){for(var i="",n=vA(t),r=0;r<n;r++)i+=e(t[r],r,t,e)||"";return i}function KK(t,e,i,n){switch(t.type){case RK:if(t.children.length)break;case LK:case gA:return t.return=t.return||t.value;case FM:return"";case UM:return t.return=t.value+"{"+ju(t.children,n)+"}";case pA:t.value=t.props.join(",")}return $r(i=ju(t.children,n))?t.return=t.value+"{"+i+"}":""}function GK(t){var e=vA(t);return function(i,n,r,s){for(var a="",o=0;o<e;o++)a+=t[o](i,n,r,s)||"";return a}}function WK(t){return function(e){e.root||(e=e.return)&&t(e)}}var jK=function(e,i,n){for(var r=0,s=0;r=s,s=es(),r===38&&s===12&&(i[n]=1),!Yh(s);)gn();return Mf(e,zi)},YK=function(e,i){var n=-1,r=44;do switch(Yh(r)){case 0:r===38&&es()===12&&(i[n]=1),e[n]+=jK(zi-1,i,n);break;case 2:e[n]+=fp(r);break;case 4:if(r===44){e[++n]=es()===58?"&\f":"",i[n]=e[n].length;break}default:e[n]+=Wv(r)}while(r=gn());return e},qK=function(e,i){return KM(YK(HM(e),i))},QL=new WeakMap,zK=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var i=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&i.charCodeAt(0)!==58&&!QL.get(n))&&!r){QL.set(e,!0);for(var s=[],a=qK(i,s),o=n.props,l=0,u=0;l<a.length;l++)for(var c=0;c<o.length;c++,u++)e.props[u]=s[l]?a[l].replace(/&\f/g,o[c]):o[c]+" "+a[l]}}},QK=function(e){if(e.type==="decl"){var i=e.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(e.return="",e.value="")}};function GM(t,e){switch(DK(t,e)){case 5103:return Ue+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ue+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Ue+t+m0+t+_i+t+t;case 6828:case 4268:return Ue+t+_i+t+t;case 6165:return Ue+t+_i+"flex-"+t+t;case 5187:return Ue+t+Ve(t,/(\w+).+(:[^]+)/,Ue+"box-$1$2"+_i+"flex-$1$2")+t;case 5443:return Ue+t+_i+"flex-item-"+Ve(t,/flex-|-self/,"")+t;case 4675:return Ue+t+_i+"flex-line-pack"+Ve(t,/align-content|flex-|-self/,"")+t;case 5548:return Ue+t+_i+Ve(t,"shrink","negative")+t;case 5292:return Ue+t+_i+Ve(t,"basis","preferred-size")+t;case 6060:return Ue+"box-"+Ve(t,"-grow","")+Ue+t+_i+Ve(t,"grow","positive")+t;case 4554:return Ue+Ve(t,/([^-])(transform)/g,"$1"+Ue+"$2")+t;case 6187:return Ve(Ve(Ve(t,/(zoom-|grab)/,Ue+"$1"),/(image-set)/,Ue+"$1"),t,"")+t;case 5495:case 3959:return Ve(t,/(image-set\([^]*)/,Ue+"$1$`$1");case 4968:return Ve(Ve(t,/(.+:)(flex-)?(.*)/,Ue+"box-pack:$3"+_i+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ue+t+t;case 4095:case 3583:case 4068:case 2532:return Ve(t,/(.+)-inline(.+)/,Ue+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if($r(t)-1-e>6)switch(gi(t,e+1)){case 109:if(gi(t,e+4)!==45)break;case 102:return Ve(t,/(.+:)(.+)-([^]+)/,"$1"+Ue+"$2-$3$1"+m0+(gi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~R1(t,"stretch")?GM(Ve(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(gi(t,e+1)!==115)break;case 6444:switch(gi(t,$r(t)-3-(~R1(t,"!important")&&10))){case 107:return Ve(t,":",":"+Ue)+t;case 101:return Ve(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ue+(gi(t,14)===45?"inline-":"")+"box$3$1"+Ue+"$2$3$1"+_i+"$2box$3")+t}break;case 5936:switch(gi(t,e+11)){case 114:return Ue+t+_i+Ve(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Ue+t+_i+Ve(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Ue+t+_i+Ve(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Ue+t+_i+t+t}return t}var XK=function(e,i,n,r){if(e.length>-1&&!e.return)switch(e.type){case gA:e.return=GM(e.value,e.length);break;case UM:return ju([id(e,{value:Ve(e.value,"@","@"+Ue)})],r);case pA:if(e.length)return OK(e.props,function(s){switch(PK(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ju([id(e,{props:[Ve(s,/:(read-\w+)/,":"+m0+"$1")]})],r);case"::placeholder":return ju([id(e,{props:[Ve(s,/:(plac\w+)/,":"+Ue+"input-$1")]}),id(e,{props:[Ve(s,/:(plac\w+)/,":"+m0+"$1")]}),id(e,{props:[Ve(s,/:(plac\w+)/,_i+"input-$1")]})],r)}return""})}},ZK=[XK],JK=function(e){var i=e.key;if(i==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(p){var y=p.getAttribute("data-emotion");y.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var r=e.stylisPlugins||ZK,s={},a,o=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(p){for(var y=p.getAttribute("data-emotion").split(" "),g=1;g<y.length;g++)s[y[g]]=!0;o.push(p)});var l,u=[zK,QK];{var c,d=[KK,WK(function(p){c.insert(p)})],h=GK(u.concat(r,d)),f=function(y){return ju(VK(y),h)};l=function(y,g,v,E){c=v,f(y?y+"{"+g.styles+"}":g.styles),E&&(m.inserted[g.name]=!0)}}var m={key:i,sheet:new IK({key:i,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return m.sheet.hydrate(o),m},eG=!0;function tG(t,e,i){var n="";return i.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):r&&(n+=r+" ")}),n}var WM=function(e,i,n){var r=e.key+"-"+i.name;(n===!1||eG===!1)&&e.registered[r]===void 0&&(e.registered[r]=i.styles)},iG=function(e,i,n){WM(e,i,n);var r=e.key+"-"+i.name;if(e.inserted[i.name]===void 0){var s=i;do e.insert(i===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function nG(t){for(var e=0,i,n=0,r=t.length;r>=4;++n,r-=4)i=t.charCodeAt(n)&255|(t.charCodeAt(++n)&255)<<8|(t.charCodeAt(++n)&255)<<16|(t.charCodeAt(++n)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,e=(i&65535)*1540483477+((i>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(n+2)&255)<<16;case 2:e^=(t.charCodeAt(n+1)&255)<<8;case 1:e^=t.charCodeAt(n)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var rG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},sG=!1,aG=/[A-Z]|^ms/g,oG=/_EMO_([^_]+?)_([^]*?)_EMO_/g,jM=function(e){return e.charCodeAt(1)===45},XL=function(e){return e!=null&&typeof e!="boolean"},fE=$M(function(t){return jM(t)?t:t.replace(aG,"-$&").toLowerCase()}),ZL=function(e,i){switch(e){case"animation":case"animationName":if(typeof i=="string")return i.replace(oG,function(n,r,s){return Fr={name:r,styles:s,next:Fr},r})}return rG[e]!==1&&!jM(e)&&typeof i=="number"&&i!==0?i+"px":i},lG="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function qh(t,e,i){if(i==null)return"";var n=i;if(n.__emotion_styles!==void 0)return n;switch(typeof i){case"boolean":return"";case"object":{var r=i;if(r.anim===1)return Fr={name:r.name,styles:r.styles,next:Fr},r.name;var s=i;if(s.styles!==void 0){var a=s.next;if(a!==void 0)for(;a!==void 0;)Fr={name:a.name,styles:a.styles,next:Fr},a=a.next;var o=s.styles+";";return o}return uG(t,e,i)}case"function":{if(t!==void 0){var l=Fr,u=i(t);return Fr=l,qh(t,e,u)}break}}var c=i;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function uG(t,e,i){var n="";if(Array.isArray(i))for(var r=0;r<i.length;r++)n+=qh(t,e,i[r])+";";else for(var s in i){var a=i[s];if(typeof a!="object"){var o=a;e!=null&&e[o]!==void 0?n+=s+"{"+e[o]+"}":XL(o)&&(n+=fE(s)+":"+ZL(s,o)+";")}else{if(s==="NO_COMPONENT_SELECTOR"&&sG)throw new Error(lG);if(Array.isArray(a)&&typeof a[0]=="string"&&(e==null||e[a[0]]===void 0))for(var l=0;l<a.length;l++)XL(a[l])&&(n+=fE(s)+":"+ZL(s,a[l])+";");else{var u=qh(t,e,a);switch(s){case"animation":case"animationName":{n+=fE(s)+":"+u+";";break}default:n+=s+"{"+u+"}"}}}}return n}var JL=/label:\s*([^\s;{]+)\s*(;|$)/g,Fr;function YM(t,e,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var n=!0,r="";Fr=void 0;var s=t[0];if(s==null||s.raw===void 0)n=!1,r+=qh(i,e,s);else{var a=s;r+=a[0]}for(var o=1;o<t.length;o++)if(r+=qh(i,e,t[o]),n){var l=s;r+=l[o]}JL.lastIndex=0;for(var u="",c;(c=JL.exec(r))!==null;)u+="-"+c[1];var d=nG(r)+u;return{name:d,styles:r,next:Fr}}var cG=function(e){return e()},dG=mT.useInsertionEffect?mT.useInsertionEffect:!1,hG=dG||cG,qM=G.createContext(typeof HTMLElement<"u"?JK({key:"css"}):null);qM.Provider;var fG=function(e){return G.forwardRef(function(i,n){var r=G.useContext(qM);return e(i,r,n)})},mG=G.createContext({}),pG=_K,gG=function(e){return e!=="theme"},eR=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?pG:gG},tR=function(e,i,n){var r;if(i){var s=i.shouldForwardProp;r=e.__emotion_forwardProp&&s?function(a){return e.__emotion_forwardProp(a)&&s(a)}:s}return typeof r!="function"&&n&&(r=e.__emotion_forwardProp),r},vG=!1,yG=function(e){var i=e.cache,n=e.serialized,r=e.isStringTag;return WM(i,n,r),hG(function(){return iG(i,n,r)}),null},EG=function t(e,i){var n=e.__emotion_real===e,r=n&&e.__emotion_base||e,s,a;i!==void 0&&(s=i.label,a=i.target);var o=tR(e,i,n),l=o||eR(r),u=!l("as");return function(){var c=arguments,d=n&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),c[0]==null||c[0].raw===void 0)d.push.apply(d,c);else{d.push(c[0][0]);for(var h=c.length,f=1;f<h;f++)d.push(c[f],c[0][f])}var m=fG(function(p,y,g){var v=u&&p.as||r,E="",T=[],_=p;if(p.theme==null){_={};for(var x in p)_[x]=p[x];_.theme=G.useContext(mG)}typeof p.className=="string"?E=tG(y.registered,T,p.className):p.className!=null&&(E=p.className+" ");var A=YM(d.concat(T),y.registered,_);E+=y.key+"-"+A.name,a!==void 0&&(E+=" "+a);var I=u&&o===void 0?eR(v):l,L={};for(var b in p)u&&b==="as"||I(b)&&(L[b]=p[b]);return L.className=E,g&&(L.ref=g),G.createElement(G.Fragment,null,G.createElement(yG,{cache:y,serialized:A,isStringTag:typeof v=="string"}),G.createElement(v,L))});return m.displayName=s!==void 0?s:"Styled("+(typeof r=="string"?r:r.displayName||r.name||"Component")+")",m.defaultProps=e.defaultProps,m.__emotion_real=m,m.__emotion_base=r,m.__emotion_styles=d,m.__emotion_forwardProp=o,Object.defineProperty(m,"toString",{value:function(){return a===void 0&&vG?"NO_COMPONENT_SELECTOR":"."+a}}),m.withComponent=function(p,y){return t(p,L1({},i,y,{shouldForwardProp:tR(m,y,!0)})).apply(void 0,d)},m}},TG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],C1=EG.bind();TG.forEach(function(t){C1[t]=C1(t)});/**
 * @mui/styled-engine v6.1.6
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function bG(t,e){return C1(t,e)}function SG(t,e){Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))}const iR=[];function nR(t){return iR[0]=t,YM(iR)}const _G=t=>{const e=Object.keys(t).map(i=>({key:i,val:t[i]}))||[];return e.sort((i,n)=>i.val-n.val),e.reduce((i,n)=>({...i,[n.key]:n.val}),{})};function AG(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:i="px",step:n=5,...r}=t,s=_G(e),a=Object.keys(s);function o(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${i})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-n/100}${i})`}function u(h,f){const m=a.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${i}) and (max-width:${(m!==-1&&typeof e[a[m]]=="number"?e[a[m]]:f)-n/100}${i})`}function c(h){return a.indexOf(h)+1<a.length?u(h,a[a.indexOf(h)+1]):o(h)}function d(h){const f=a.indexOf(h);return f===0?o(a[1]):f===a.length-1?l(a[f]):u(h,a[a.indexOf(h)+1]).replace("@media","@media not all and")}return{keys:a,values:s,up:o,down:l,between:u,only:c,not:d,unit:i,...r}}const xG={borderRadius:4},kG=xG;function zM(t=8,e=fA({spacing:t})){if(t.mui)return t;const i=(...n)=>(n.length===0?[1]:n).map(s=>{const a=e(s);return typeof a=="number"?`${a}px`:a}).join(" ");return i.mui=!0,i}function IG(t,e){var n;const i=this;if(i.vars){if(!((n=i.colorSchemes)!=null&&n[t])||typeof i.getColorSchemeSelector!="function")return{};let r=i.getColorSchemeSelector(t);return r==="&"?e:((r.includes("data-")||r.includes("."))&&(r=`*:where(${r.replace(/\s*&$/,"")}) &`),{[r]:e})}return i.palette.mode===t?e:{}}function QM(t={},...e){const{breakpoints:i={},palette:n={},spacing:r,shape:s={},...a}=t,o=AG(i),l=zM(r);let u=pn({breakpoints:o,direction:"ltr",components:{},palette:{mode:"light",...n},spacing:l,shape:{...kG,...s}},a);return u=PH(u),u.applyStyles=IG,u=e.reduce((c,d)=>pn(c,d),u),u.unstable_sxConfig={...Gv,...a==null?void 0:a.unstable_sxConfig},u.unstable_sx=function(d){return Sc({sx:d,theme:this})},u}function XM(t){const{variants:e,...i}=t,n={variants:e,style:nR(i),isProcessed:!0};return n.style===i||e&&e.forEach(r=>{typeof r.style!="function"&&(r.style=nR(r.style))}),n}const LG=QM();function mE(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function RG(t){return t?(e,i)=>i[t]:null}function wG(t,e,i){t.theme=PG(t.theme)?i:t.theme[e]||t.theme}function pp(t,e){const i=typeof e=="function"?e(t):e;if(Array.isArray(i))return i.flatMap(n=>pp(t,n));if(Array.isArray(i==null?void 0:i.variants)){let n;if(i.isProcessed)n=i.style;else{const{variants:r,...s}=i;n=s}return ZM(t,i.variants,[n])}return i!=null&&i.isProcessed?i.style:i}function ZM(t,e,i=[]){var r;let n;e:for(let s=0;s<e.length;s+=1){const a=e[s];if(typeof a.props=="function"){if(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),!a.props(n))continue}else for(const o in a.props)if(t[o]!==a.props[o]&&((r=t.ownerState)==null?void 0:r[o])!==a.props[o])continue e;typeof a.style=="function"?(n??(n={...t,...t.ownerState,ownerState:t.ownerState}),i.push(a.style(n))):i.push(a.style)}return i}function CG(t={}){const{themeId:e,defaultTheme:i=LG,rootShouldForwardProp:n=mE,slotShouldForwardProp:r=mE}=t;function s(o){wG(o,e,i)}return(o,l={})=>{SG(o,_=>_.filter(x=>x!==Sc));const{name:u,slot:c,skipVariantsResolver:d,skipSx:h,overridesResolver:f=RG(MG(c)),...m}=l,p=d!==void 0?d:c&&c!=="Root"&&c!=="root"||!1,y=h||!1;let g=mE;c==="Root"||c==="root"?g=n:c?g=r:OG(o)&&(g=void 0);const v=bG(o,{shouldForwardProp:g,label:DG(),...m}),E=_=>{if(typeof _=="function"&&_.__emotion_real!==_)return function(A){return pp(A,_)};if(_s(_)){const x=XM(_);return x.variants?function(I){return pp(I,x)}:x.style}return _},T=(..._)=>{const x=[],A=_.map(E),I=[];if(x.push(s),u&&f&&I.push(function(P){var U,V;const $=(V=(U=P.theme.components)==null?void 0:U[u])==null?void 0:V.styleOverrides;if(!$)return null;const B={};for(const C in $)B[C]=pp(P,$[C]);return f(P,B)}),u&&!p&&I.push(function(P){var B,U;const w=P.theme,$=(U=(B=w==null?void 0:w.components)==null?void 0:B[u])==null?void 0:U.variants;return $?ZM(P,$):null}),y||I.push(Sc),Array.isArray(A[0])){const R=A.shift(),P=new Array(x.length).fill(""),w=new Array(I.length).fill("");let $;$=[...P,...R,...w],$.raw=[...P,...R.raw,...w],x.unshift($)}const L=[...x,...A,...I],b=v(...L);return o.muiName&&(b.muiName=o.muiName),b};return v.withConfig&&(T.withConfig=v.withConfig),T}}function DG(t,e){return void 0}function PG(t){for(const e in t)return!1;return!0}function OG(t){return typeof t=="string"&&t.charCodeAt(0)>96}function MG(t){return t&&t.charAt(0).toLowerCase()+t.slice(1)}function yA(t,e=0,i=1){return LH(t,e,i)}function NG(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let i=t.match(e);return i&&i[0].length===1&&(i=i.map(n=>n+n)),i?`rgb${i.length===4?"a":""}(${i.map((n,r)=>r<3?parseInt(n,16):Math.round(parseInt(n,16)/255*1e3)/1e3).join(", ")})`:""}function Qa(t){if(t.type)return t;if(t.charAt(0)==="#")return Qa(NG(t));const e=t.indexOf("("),i=t.substring(0,e);if(!["rgb","rgba","hsl","hsla","color"].includes(i))throw new Error(cl(9,t));let n=t.substring(e+1,t.length-1),r;if(i==="color"){if(n=n.split(" "),r=n.shift(),n.length===4&&n[3].charAt(0)==="/"&&(n[3]=n[3].slice(1)),!["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].includes(r))throw new Error(cl(10,r))}else n=n.split(",");return n=n.map(s=>parseFloat(s)),{type:i,values:n,colorSpace:r}}const $G=t=>{const e=Qa(t);return e.values.slice(0,3).map((i,n)=>e.type.includes("hsl")&&n!==0?`${i}%`:i).join(" ")},Ad=(t,e)=>{try{return $G(t)}catch{return t}};function qv(t){const{type:e,colorSpace:i}=t;let{values:n}=t;return e.includes("rgb")?n=n.map((r,s)=>s<3?parseInt(r,10):r):e.includes("hsl")&&(n[1]=`${n[1]}%`,n[2]=`${n[2]}%`),e.includes("color")?n=`${i} ${n.join(" ")}`:n=`${n.join(", ")}`,`${e}(${n})`}function JM(t){t=Qa(t);const{values:e}=t,i=e[0],n=e[1]/100,r=e[2]/100,s=n*Math.min(r,1-r),a=(u,c=(u+i/30)%12)=>r-s*Math.max(Math.min(c-3,9-c,1),-1);let o="rgb";const l=[Math.round(a(0)*255),Math.round(a(8)*255),Math.round(a(4)*255)];return t.type==="hsla"&&(o+="a",l.push(e[3])),qv({type:o,values:l})}function D1(t){t=Qa(t);let e=t.type==="hsl"||t.type==="hsla"?Qa(JM(t)).values:t.values;return e=e.map(i=>(t.type!=="color"&&(i/=255),i<=.03928?i/12.92:((i+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function FG(t,e){const i=D1(t),n=D1(e);return(Math.max(i,n)+.05)/(Math.min(i,n)+.05)}function UG(t,e){return t=Qa(t),e=yA(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,qv(t)}function hm(t,e,i){try{return UG(t,e)}catch{return t}}function EA(t,e){if(t=Qa(t),e=yA(e),t.type.includes("hsl"))t.values[2]*=1-e;else if(t.type.includes("rgb")||t.type.includes("color"))for(let i=0;i<3;i+=1)t.values[i]*=1-e;return qv(t)}function Xe(t,e,i){try{return EA(t,e)}catch{return t}}function TA(t,e){if(t=Qa(t),e=yA(e),t.type.includes("hsl"))t.values[2]+=(100-t.values[2])*e;else if(t.type.includes("rgb"))for(let i=0;i<3;i+=1)t.values[i]+=(255-t.values[i])*e;else if(t.type.includes("color"))for(let i=0;i<3;i+=1)t.values[i]+=(1-t.values[i])*e;return qv(t)}function Ze(t,e,i){try{return TA(t,e)}catch{return t}}function BG(t,e=.15){return D1(t)>.5?EA(t,e):TA(t,e)}function fm(t,e,i){try{return BG(t,e)}catch{return t}}const VG=G.createContext(void 0);function HG(t){const{theme:e,name:i,props:n}=t;if(!e||!e.components||!e.components[i])return n;const r=e.components[i];return r.defaultProps?I1(r.defaultProps,n):!r.styleOverrides&&!r.variants?I1(r,n):n}function KG({props:t,name:e}){const i=G.useContext(VG);return HG({props:t,name:e,theme:{components:i}})}const rR={theme:void 0};function GG(t){let e,i;return function(r){let s=e;return(s===void 0||r.theme!==i)&&(rR.theme=r.theme,s=XM(t(rR)),e=s,i=r.theme),s}}function WG(t=""){function e(...n){if(!n.length)return"";const r=n[0];return typeof r=="string"&&!r.match(/(#|\(|\)|(-?(\d*\.)?\d+)(px|em|%|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc))|^(-?(\d*\.)?\d+)$|(\d+ \d+ \d+)/)?`, var(--${t?`${t}-`:""}${r}${e(...n.slice(1))})`:`, ${r}`}return(n,...r)=>`var(--${t?`${t}-`:""}${n}${e(...r)})`}const sR=(t,e,i,n=[])=>{let r=t;e.forEach((s,a)=>{a===e.length-1?Array.isArray(r)?r[Number(s)]=i:r&&typeof r=="object"&&(r[s]=i):r&&typeof r=="object"&&(r[s]||(r[s]=n.includes(s)?[]:{}),r=r[s])})},jG=(t,e,i)=>{function n(r,s=[],a=[]){Object.entries(r).forEach(([o,l])=>{(!i||i&&!i([...s,o]))&&l!=null&&(typeof l=="object"&&Object.keys(l).length>0?n(l,[...s,o],Array.isArray(l)?[...a,o]:a):e([...s,o],l,a))})}n(t)},YG=(t,e)=>typeof e=="number"?["lineHeight","fontWeight","opacity","zIndex"].some(n=>t.includes(n))||t[t.length-1].toLowerCase().includes("opacity")?e:`${e}px`:e;function pE(t,e){const{prefix:i,shouldSkipGeneratingVar:n}=e||{},r={},s={},a={};return jG(t,(o,l,u)=>{if((typeof l=="string"||typeof l=="number")&&(!n||!n(o,l))){const c=`--${i?`${i}-`:""}${o.join("-")}`,d=YG(o,l);Object.assign(r,{[c]:d}),sR(s,o,`var(${c})`,u),sR(a,o,`var(${c}, ${d})`,u)}},o=>o[0]==="vars"),{css:r,vars:s,varsWithDefaults:a}}function qG(t,e={}){const{getSelector:i=y,disableCssColorScheme:n,colorSchemeSelector:r}=e,{colorSchemes:s={},components:a,defaultColorScheme:o="light",...l}=t,{vars:u,css:c,varsWithDefaults:d}=pE(l,e);let h=d;const f={},{[o]:m,...p}=s;if(Object.entries(p||{}).forEach(([E,T])=>{const{vars:_,css:x,varsWithDefaults:A}=pE(T,e);h=pn(h,A),f[E]={css:x,vars:_}}),m){const{css:E,vars:T,varsWithDefaults:_}=pE(m,e);h=pn(h,_),f[o]={css:E,vars:T}}function y(E,T){var x,A;let _=r;if(r==="class"&&(_=".%s"),r==="data"&&(_="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(_=`[${r}="%s"]`),E){if(_==="media")return t.defaultColorScheme===E?":root":{[`@media (prefers-color-scheme: ${((A=(x=s[E])==null?void 0:x.palette)==null?void 0:A.mode)||E})`]:{":root":T}};if(_)return t.defaultColorScheme===E?`:root, ${_.replace("%s",String(E))}`:_.replace("%s",String(E))}return":root"}return{vars:h,generateThemeVars:()=>{let E={...u};return Object.entries(f).forEach(([,{vars:T}])=>{E=pn(E,T)}),E},generateStyleSheets:()=>{var I,L;const E=[],T=t.defaultColorScheme||"light";function _(b,R){Object.keys(R).length&&E.push(typeof b=="string"?{[b]:{...R}}:b)}_(i(void 0,{...c}),c);const{[T]:x,...A}=f;if(x){const{css:b}=x,R=(L=(I=s[T])==null?void 0:I.palette)==null?void 0:L.mode,P=!n&&R?{colorScheme:R,...b}:{...b};_(i(T,{...P}),P)}return Object.entries(A).forEach(([b,{css:R}])=>{var $,B;const P=(B=($=s[b])==null?void 0:$.palette)==null?void 0:B.mode,w=!n&&P?{colorScheme:P,...R}:{...R};_(i(b,{...w}),w)}),E}}}function zG(t){return function(i){return t==="media"?`@media (prefers-color-scheme: ${i})`:t?t.startsWith("data-")&&!t.includes("%s")?`[${t}="${i}"] &`:t==="class"?`.${i} &`:t==="data"?`[data-${i}] &`:`${t.replace("%s",i)} &`:"&"}}const zh={black:"#000",white:"#fff"},QG={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},XG=QG,ZG={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},xl=ZG,JG={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},kl=JG,eW={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},nd=eW,tW={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Il=tW,iW={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Ll=iW,nW={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Rl=nW;function eN(){return{text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:zh.white,default:zh.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}}}const rW=eN();function tN(){return{text:{primary:zh.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:zh.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}}}const aR=tN();function oR(t,e,i,n){const r=n.light||n,s=n.dark||n*1.5;t[e]||(t.hasOwnProperty(i)?t[e]=t[i]:e==="light"?t.light=TA(t.main,r):e==="dark"&&(t.dark=EA(t.main,s)))}function sW(t="light"){return t==="dark"?{main:Il[200],light:Il[50],dark:Il[400]}:{main:Il[700],light:Il[400],dark:Il[800]}}function aW(t="light"){return t==="dark"?{main:xl[200],light:xl[50],dark:xl[400]}:{main:xl[500],light:xl[300],dark:xl[700]}}function oW(t="light"){return t==="dark"?{main:kl[500],light:kl[300],dark:kl[700]}:{main:kl[700],light:kl[400],dark:kl[800]}}function lW(t="light"){return t==="dark"?{main:Ll[400],light:Ll[300],dark:Ll[700]}:{main:Ll[700],light:Ll[500],dark:Ll[900]}}function uW(t="light"){return t==="dark"?{main:Rl[400],light:Rl[300],dark:Rl[700]}:{main:Rl[800],light:Rl[500],dark:Rl[900]}}function cW(t="light"){return t==="dark"?{main:nd[400],light:nd[300],dark:nd[700]}:{main:"#ed6c02",light:nd[500],dark:nd[900]}}function bA(t){const{mode:e="light",contrastThreshold:i=3,tonalOffset:n=.2,...r}=t,s=t.primary||sW(e),a=t.secondary||aW(e),o=t.error||oW(e),l=t.info||lW(e),u=t.success||uW(e),c=t.warning||cW(e);function d(p){return FG(p,aR.text.primary)>=i?aR.text.primary:rW.text.primary}const h=({color:p,name:y,mainShade:g=500,lightShade:v=300,darkShade:E=700})=>{if(p={...p},!p.main&&p[g]&&(p.main=p[g]),!p.hasOwnProperty("main"))throw new Error(cl(11,y?` (${y})`:"",g));if(typeof p.main!="string")throw new Error(cl(12,y?` (${y})`:"",JSON.stringify(p.main)));return oR(p,"light",v,n),oR(p,"dark",E,n),p.contrastText||(p.contrastText=d(p.main)),p};let f;return e==="light"?f=eN():e==="dark"&&(f=tN()),pn({common:{...zh},mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:a,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:o,name:"error"}),warning:h({color:c,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:u,name:"success"}),grey:XG,contrastThreshold:i,getContrastText:d,augmentColor:h,tonalOffset:n,...f},r)}function dW(t){const e={};return Object.entries(t).forEach(n=>{const[r,s]=n;typeof s=="object"&&(e[r]=`${s.fontStyle?`${s.fontStyle} `:""}${s.fontVariant?`${s.fontVariant} `:""}${s.fontWeight?`${s.fontWeight} `:""}${s.fontStretch?`${s.fontStretch} `:""}${s.fontSize||""}${s.lineHeight?`/${s.lineHeight} `:""}${s.fontFamily||""}`)}),e}function hW(t,e){return{toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}},...e}}function fW(t){return Math.round(t*1e5)/1e5}const lR={textTransform:"uppercase"},uR='"Roboto", "Helvetica", "Arial", sans-serif';function mW(t,e){const{fontFamily:i=uR,fontSize:n=14,fontWeightLight:r=300,fontWeightRegular:s=400,fontWeightMedium:a=500,fontWeightBold:o=700,htmlFontSize:l=16,allVariants:u,pxToRem:c,...d}=typeof e=="function"?e(t):e,h=n/14,f=c||(y=>`${y/l*h}rem`),m=(y,g,v,E,T)=>({fontFamily:i,fontWeight:y,fontSize:f(g),lineHeight:v,...i===uR?{letterSpacing:`${fW(E/g)}em`}:{},...T,...u}),p={h1:m(r,96,1.167,-1.5),h2:m(r,60,1.2,-.5),h3:m(s,48,1.167,0),h4:m(s,34,1.235,.25),h5:m(s,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(s,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(s,16,1.5,.15),body2:m(s,14,1.43,.15),button:m(a,14,1.75,.4,lR),caption:m(s,12,1.66,.4),overline:m(s,12,2.66,1,lR),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return pn({htmlFontSize:l,pxToRem:f,fontFamily:i,fontSize:n,fontWeightLight:r,fontWeightRegular:s,fontWeightMedium:a,fontWeightBold:o,...p},d,{clone:!1})}const pW=.2,gW=.14,vW=.12;function pt(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${pW})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${gW})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${vW})`].join(",")}const yW=["none",pt(0,2,1,-1,0,1,1,0,0,1,3,0),pt(0,3,1,-2,0,2,2,0,0,1,5,0),pt(0,3,3,-2,0,3,4,0,0,1,8,0),pt(0,2,4,-1,0,4,5,0,0,1,10,0),pt(0,3,5,-1,0,5,8,0,0,1,14,0),pt(0,3,5,-1,0,6,10,0,0,1,18,0),pt(0,4,5,-2,0,7,10,1,0,2,16,1),pt(0,5,5,-3,0,8,10,1,0,3,14,2),pt(0,5,6,-3,0,9,12,1,0,3,16,2),pt(0,6,6,-3,0,10,14,1,0,4,18,3),pt(0,6,7,-4,0,11,15,1,0,4,20,3),pt(0,7,8,-4,0,12,17,2,0,5,22,4),pt(0,7,8,-4,0,13,19,2,0,5,24,4),pt(0,7,9,-4,0,14,21,2,0,5,26,4),pt(0,8,9,-5,0,15,22,2,0,6,28,5),pt(0,8,10,-5,0,16,24,2,0,6,30,5),pt(0,8,11,-5,0,17,26,2,0,6,32,5),pt(0,9,11,-5,0,18,28,2,0,7,34,6),pt(0,9,12,-6,0,19,29,2,0,7,36,6),pt(0,10,13,-6,0,20,31,3,0,8,38,7),pt(0,10,13,-6,0,21,33,3,0,8,40,7),pt(0,10,14,-6,0,22,35,3,0,8,42,7),pt(0,11,14,-7,0,23,36,3,0,9,44,8),pt(0,11,15,-7,0,24,38,3,0,9,46,8)],EW={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},TW={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function cR(t){return`${Math.round(t)}ms`}function bW(t){if(!t)return 0;const e=t/36;return Math.min(Math.round((4+15*e**.25+e/5)*10),3e3)}function SW(t){const e={...EW,...t.easing},i={...TW,...t.duration};return{getAutoHeightDuration:bW,create:(r=["all"],s={})=>{const{duration:a=i.standard,easing:o=e.easeInOut,delay:l=0,...u}=s;return(Array.isArray(r)?r:[r]).map(c=>`${c} ${typeof a=="string"?a:cR(a)} ${o} ${typeof l=="string"?l:cR(l)}`).join(",")},...t,easing:e,duration:i}}const _W={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},AW=_W;function xW(t){return _s(t)||typeof t>"u"||typeof t=="string"||typeof t=="boolean"||typeof t=="number"||Array.isArray(t)}function iN(t={}){const e={...t};function i(n){const r=Object.entries(n);for(let s=0;s<r.length;s++){const[a,o]=r[s];!xW(o)||a.startsWith("unstable_")?delete n[a]:_s(o)&&(n[a]={...o},i(n[a]))}}return i(e),`import { unstable_createBreakpoints as createBreakpoints, createTransitions } from '@mui/material/styles';

const theme = ${JSON.stringify(e,null,2)};

theme.breakpoints = createBreakpoints(theme.breakpoints || {});
theme.transitions = createTransitions(theme.transitions || {});

export default theme;`}function P1(t={},...e){const{breakpoints:i,mixins:n={},spacing:r,palette:s={},transitions:a={},typography:o={},shape:l,...u}=t;if(t.vars)throw new Error(cl(20));const c=bA(s),d=QM(t);let h=pn(d,{mixins:hW(d.breakpoints,n),palette:c,shadows:yW.slice(),typography:mW(c,o),transitions:SW(a),zIndex:{...AW}});return h=pn(h,u),h=e.reduce((f,m)=>pn(f,m),h),h.unstable_sxConfig={...Gv,...u==null?void 0:u.unstable_sxConfig},h.unstable_sx=function(m){return Sc({sx:m,theme:this})},h.toRuntimeSource=iN,h}function kW(t){let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,Math.round(e*10)/1e3}const IW=[...Array(25)].map((t,e)=>{if(e===0)return"none";const i=kW(e);return`linear-gradient(rgba(255 255 255 / ${i}), rgba(255 255 255 / ${i}))`});function nN(t){return{inputPlaceholder:t==="dark"?.5:.42,inputUnderline:t==="dark"?.7:.42,switchTrackDisabled:t==="dark"?.2:.12,switchTrack:t==="dark"?.3:.38}}function rN(t){return t==="dark"?IW:[]}function LW(t){const{palette:e={mode:"light"},opacity:i,overlays:n,...r}=t,s=bA(e);return{palette:s,opacity:{...nN(s.mode),...i},overlays:n||rN(s.mode),...r}}function RW(t){var e;return!!t[0].match(/(cssVarPrefix|colorSchemeSelector|rootSelector|typography|mixins|breakpoints|direction|transitions)/)||!!t[0].match(/sxConfig$/)||t[0]==="palette"&&!!((e=t[1])!=null&&e.match(/(mode|contrastThreshold|tonalOffset)/))}const wW=t=>[...[...Array(25)].map((e,i)=>`--${t?`${t}-`:""}overlays-${i}`),`--${t?`${t}-`:""}palette-AppBar-darkBg`,`--${t?`${t}-`:""}palette-AppBar-darkColor`],CW=t=>(e,i)=>{const n=t.rootSelector||":root",r=t.colorSchemeSelector;let s=r;if(r==="class"&&(s=".%s"),r==="data"&&(s="[data-%s]"),r!=null&&r.startsWith("data-")&&!r.includes("%s")&&(s=`[${r}="%s"]`),t.defaultColorScheme===e){if(e==="dark"){const a={};return wW(t.cssVarPrefix).forEach(o=>{a[o]=i[o],delete i[o]}),s==="media"?{[n]:i,"@media (prefers-color-scheme: dark)":{[n]:a}}:s?{[s.replace("%s",e)]:a,[`${n}, ${s.replace("%s",e)}`]:i}:{[n]:{...i,...a}}}if(s&&s!=="media")return`${n}, ${s.replace("%s",String(e))}`}else if(e){if(s==="media")return{[`@media (prefers-color-scheme: ${String(e)})`]:{[n]:i}};if(s)return s.replace("%s",String(e))}return n};function DW(t,e){e.forEach(i=>{t[i]||(t[i]={})})}function W(t,e,i){!t[e]&&i&&(t[e]=i)}function xd(t){return!t||!t.startsWith("hsl")?t:JM(t)}function os(t,e){`${e}Channel`in t||(t[`${e}Channel`]=Ad(xd(t[e]),`MUI: Can't create \`palette.${e}Channel\` because \`palette.${e}\` is not one of these formats: #nnn, #nnnnnn, rgb(), rgba(), hsl(), hsla(), color().
To suppress this warning, you need to explicitly provide the \`palette.${e}Channel\` as a string (in rgb format, for example "12 12 12") or undefined if you want to remove the channel token.`))}function PW(t){return typeof t=="number"?`${t}px`:typeof t=="string"||typeof t=="function"||Array.isArray(t)?t:"8px"}const vr=t=>{try{return t()}catch{}},OW=(t="mui")=>WG(t);function gE(t,e,i,n){if(!e)return;e=e===!0?{}:e;const r=n==="dark"?"dark":"light";if(!i){t[n]=LW({...e,palette:{mode:r,...e==null?void 0:e.palette}});return}const{palette:s,...a}=P1({...i,palette:{mode:r,...e==null?void 0:e.palette}});return t[n]={...e,palette:s,opacity:{...nN(r),...e==null?void 0:e.opacity},overlays:(e==null?void 0:e.overlays)||rN(r)},a}function MW(t={},...e){const{colorSchemes:i={light:!0},defaultColorScheme:n,disableCssColorScheme:r=!1,cssVarPrefix:s="mui",shouldSkipGeneratingVar:a=RW,colorSchemeSelector:o=i.light&&i.dark?"media":void 0,rootSelector:l=":root",...u}=t,c=Object.keys(i)[0],d=n||(i.light&&c!=="light"?"light":c),h=OW(s),{[d]:f,light:m,dark:p,...y}=i,g={...y};let v=f;if((d==="dark"&&!("dark"in i)||d==="light"&&!("light"in i))&&(v=!0),!v)throw new Error(cl(21,d));const E=gE(g,v,u,d);m&&!g.light&&gE(g,m,void 0,"light"),p&&!g.dark&&gE(g,p,void 0,"dark");let T={defaultColorScheme:d,...E,cssVarPrefix:s,colorSchemeSelector:o,rootSelector:l,getCssVar:h,colorSchemes:g,font:{...dW(E.typography),...E.font},spacing:PW(u.spacing)};Object.keys(T.colorSchemes).forEach(L=>{const b=T.colorSchemes[L].palette,R=P=>{const w=P.split("-"),$=w[1],B=w[2];return h(P,b[$][B])};if(b.mode==="light"&&(W(b.common,"background","#fff"),W(b.common,"onBackground","#000")),b.mode==="dark"&&(W(b.common,"background","#000"),W(b.common,"onBackground","#fff")),DW(b,["Alert","AppBar","Avatar","Button","Chip","FilledInput","LinearProgress","Skeleton","Slider","SnackbarContent","SpeedDialAction","StepConnector","StepContent","Switch","TableCell","Tooltip"]),b.mode==="light"){W(b.Alert,"errorColor",Xe(b.error.light,.6)),W(b.Alert,"infoColor",Xe(b.info.light,.6)),W(b.Alert,"successColor",Xe(b.success.light,.6)),W(b.Alert,"warningColor",Xe(b.warning.light,.6)),W(b.Alert,"errorFilledBg",R("palette-error-main")),W(b.Alert,"infoFilledBg",R("palette-info-main")),W(b.Alert,"successFilledBg",R("palette-success-main")),W(b.Alert,"warningFilledBg",R("palette-warning-main")),W(b.Alert,"errorFilledColor",vr(()=>b.getContrastText(b.error.main))),W(b.Alert,"infoFilledColor",vr(()=>b.getContrastText(b.info.main))),W(b.Alert,"successFilledColor",vr(()=>b.getContrastText(b.success.main))),W(b.Alert,"warningFilledColor",vr(()=>b.getContrastText(b.warning.main))),W(b.Alert,"errorStandardBg",Ze(b.error.light,.9)),W(b.Alert,"infoStandardBg",Ze(b.info.light,.9)),W(b.Alert,"successStandardBg",Ze(b.success.light,.9)),W(b.Alert,"warningStandardBg",Ze(b.warning.light,.9)),W(b.Alert,"errorIconColor",R("palette-error-main")),W(b.Alert,"infoIconColor",R("palette-info-main")),W(b.Alert,"successIconColor",R("palette-success-main")),W(b.Alert,"warningIconColor",R("palette-warning-main")),W(b.AppBar,"defaultBg",R("palette-grey-100")),W(b.Avatar,"defaultBg",R("palette-grey-400")),W(b.Button,"inheritContainedBg",R("palette-grey-300")),W(b.Button,"inheritContainedHoverBg",R("palette-grey-A100")),W(b.Chip,"defaultBorder",R("palette-grey-400")),W(b.Chip,"defaultAvatarColor",R("palette-grey-700")),W(b.Chip,"defaultIconColor",R("palette-grey-700")),W(b.FilledInput,"bg","rgba(0, 0, 0, 0.06)"),W(b.FilledInput,"hoverBg","rgba(0, 0, 0, 0.09)"),W(b.FilledInput,"disabledBg","rgba(0, 0, 0, 0.12)"),W(b.LinearProgress,"primaryBg",Ze(b.primary.main,.62)),W(b.LinearProgress,"secondaryBg",Ze(b.secondary.main,.62)),W(b.LinearProgress,"errorBg",Ze(b.error.main,.62)),W(b.LinearProgress,"infoBg",Ze(b.info.main,.62)),W(b.LinearProgress,"successBg",Ze(b.success.main,.62)),W(b.LinearProgress,"warningBg",Ze(b.warning.main,.62)),W(b.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.11)`),W(b.Slider,"primaryTrack",Ze(b.primary.main,.62)),W(b.Slider,"secondaryTrack",Ze(b.secondary.main,.62)),W(b.Slider,"errorTrack",Ze(b.error.main,.62)),W(b.Slider,"infoTrack",Ze(b.info.main,.62)),W(b.Slider,"successTrack",Ze(b.success.main,.62)),W(b.Slider,"warningTrack",Ze(b.warning.main,.62));const P=fm(b.background.default,.8);W(b.SnackbarContent,"bg",P),W(b.SnackbarContent,"color",vr(()=>b.getContrastText(P))),W(b.SpeedDialAction,"fabHoverBg",fm(b.background.paper,.15)),W(b.StepConnector,"border",R("palette-grey-400")),W(b.StepContent,"border",R("palette-grey-400")),W(b.Switch,"defaultColor",R("palette-common-white")),W(b.Switch,"defaultDisabledColor",R("palette-grey-100")),W(b.Switch,"primaryDisabledColor",Ze(b.primary.main,.62)),W(b.Switch,"secondaryDisabledColor",Ze(b.secondary.main,.62)),W(b.Switch,"errorDisabledColor",Ze(b.error.main,.62)),W(b.Switch,"infoDisabledColor",Ze(b.info.main,.62)),W(b.Switch,"successDisabledColor",Ze(b.success.main,.62)),W(b.Switch,"warningDisabledColor",Ze(b.warning.main,.62)),W(b.TableCell,"border",Ze(hm(b.divider,1),.88)),W(b.Tooltip,"bg",hm(b.grey[700],.92))}if(b.mode==="dark"){W(b.Alert,"errorColor",Ze(b.error.light,.6)),W(b.Alert,"infoColor",Ze(b.info.light,.6)),W(b.Alert,"successColor",Ze(b.success.light,.6)),W(b.Alert,"warningColor",Ze(b.warning.light,.6)),W(b.Alert,"errorFilledBg",R("palette-error-dark")),W(b.Alert,"infoFilledBg",R("palette-info-dark")),W(b.Alert,"successFilledBg",R("palette-success-dark")),W(b.Alert,"warningFilledBg",R("palette-warning-dark")),W(b.Alert,"errorFilledColor",vr(()=>b.getContrastText(b.error.dark))),W(b.Alert,"infoFilledColor",vr(()=>b.getContrastText(b.info.dark))),W(b.Alert,"successFilledColor",vr(()=>b.getContrastText(b.success.dark))),W(b.Alert,"warningFilledColor",vr(()=>b.getContrastText(b.warning.dark))),W(b.Alert,"errorStandardBg",Xe(b.error.light,.9)),W(b.Alert,"infoStandardBg",Xe(b.info.light,.9)),W(b.Alert,"successStandardBg",Xe(b.success.light,.9)),W(b.Alert,"warningStandardBg",Xe(b.warning.light,.9)),W(b.Alert,"errorIconColor",R("palette-error-main")),W(b.Alert,"infoIconColor",R("palette-info-main")),W(b.Alert,"successIconColor",R("palette-success-main")),W(b.Alert,"warningIconColor",R("palette-warning-main")),W(b.AppBar,"defaultBg",R("palette-grey-900")),W(b.AppBar,"darkBg",R("palette-background-paper")),W(b.AppBar,"darkColor",R("palette-text-primary")),W(b.Avatar,"defaultBg",R("palette-grey-600")),W(b.Button,"inheritContainedBg",R("palette-grey-800")),W(b.Button,"inheritContainedHoverBg",R("palette-grey-700")),W(b.Chip,"defaultBorder",R("palette-grey-700")),W(b.Chip,"defaultAvatarColor",R("palette-grey-300")),W(b.Chip,"defaultIconColor",R("palette-grey-300")),W(b.FilledInput,"bg","rgba(255, 255, 255, 0.09)"),W(b.FilledInput,"hoverBg","rgba(255, 255, 255, 0.13)"),W(b.FilledInput,"disabledBg","rgba(255, 255, 255, 0.12)"),W(b.LinearProgress,"primaryBg",Xe(b.primary.main,.5)),W(b.LinearProgress,"secondaryBg",Xe(b.secondary.main,.5)),W(b.LinearProgress,"errorBg",Xe(b.error.main,.5)),W(b.LinearProgress,"infoBg",Xe(b.info.main,.5)),W(b.LinearProgress,"successBg",Xe(b.success.main,.5)),W(b.LinearProgress,"warningBg",Xe(b.warning.main,.5)),W(b.Skeleton,"bg",`rgba(${R("palette-text-primaryChannel")} / 0.13)`),W(b.Slider,"primaryTrack",Xe(b.primary.main,.5)),W(b.Slider,"secondaryTrack",Xe(b.secondary.main,.5)),W(b.Slider,"errorTrack",Xe(b.error.main,.5)),W(b.Slider,"infoTrack",Xe(b.info.main,.5)),W(b.Slider,"successTrack",Xe(b.success.main,.5)),W(b.Slider,"warningTrack",Xe(b.warning.main,.5));const P=fm(b.background.default,.98);W(b.SnackbarContent,"bg",P),W(b.SnackbarContent,"color",vr(()=>b.getContrastText(P))),W(b.SpeedDialAction,"fabHoverBg",fm(b.background.paper,.15)),W(b.StepConnector,"border",R("palette-grey-600")),W(b.StepContent,"border",R("palette-grey-600")),W(b.Switch,"defaultColor",R("palette-grey-300")),W(b.Switch,"defaultDisabledColor",R("palette-grey-600")),W(b.Switch,"primaryDisabledColor",Xe(b.primary.main,.55)),W(b.Switch,"secondaryDisabledColor",Xe(b.secondary.main,.55)),W(b.Switch,"errorDisabledColor",Xe(b.error.main,.55)),W(b.Switch,"infoDisabledColor",Xe(b.info.main,.55)),W(b.Switch,"successDisabledColor",Xe(b.success.main,.55)),W(b.Switch,"warningDisabledColor",Xe(b.warning.main,.55)),W(b.TableCell,"border",Xe(hm(b.divider,1),.68)),W(b.Tooltip,"bg",hm(b.grey[700],.92))}os(b.background,"default"),os(b.background,"paper"),os(b.common,"background"),os(b.common,"onBackground"),os(b,"divider"),Object.keys(b).forEach(P=>{const w=b[P];w&&typeof w=="object"&&(w.main&&W(b[P],"mainChannel",Ad(xd(w.main))),w.light&&W(b[P],"lightChannel",Ad(xd(w.light))),w.dark&&W(b[P],"darkChannel",Ad(xd(w.dark))),w.contrastText&&W(b[P],"contrastTextChannel",Ad(xd(w.contrastText))),P==="text"&&(os(b[P],"primary"),os(b[P],"secondary")),P==="action"&&(w.active&&os(b[P],"active"),w.selected&&os(b[P],"selected")))})}),T=e.reduce((L,b)=>pn(L,b),T);const _={prefix:s,disableCssColorScheme:r,shouldSkipGeneratingVar:a,getSelector:CW(T)},{vars:x,generateThemeVars:A,generateStyleSheets:I}=qG(T,_);return T.vars=x,Object.entries(T.colorSchemes[T.defaultColorScheme]).forEach(([L,b])=>{T[L]=b}),T.generateThemeVars=A,T.generateStyleSheets=I,T.generateSpacing=function(){return zM(u.spacing,fA(this))},T.getColorSchemeSelector=zG(o),T.spacing=T.generateSpacing(),T.shouldSkipGeneratingVar=a,T.unstable_sxConfig={...Gv,...u==null?void 0:u.unstable_sxConfig},T.unstable_sx=function(b){return Sc({sx:b,theme:this})},T.toRuntimeSource=iN,T}function dR(t,e,i){t.colorSchemes&&i&&(t.colorSchemes[e]={...i!==!0&&i,palette:bA({...i===!0?{}:i.palette,mode:e})})}function NW(t={},...e){const{palette:i,cssVariables:n=!1,colorSchemes:r=i?void 0:{light:!0},defaultColorScheme:s=i==null?void 0:i.mode,...a}=t,o=s||"light",l=r==null?void 0:r[o],u={...r,...i?{[o]:{...typeof l!="boolean"&&l,palette:i}}:void 0};if(n===!1){if(!("colorSchemes"in t))return P1(t,...e);let c=i;"palette"in t||u[o]&&(u[o]!==!0?c=u[o].palette:o==="dark"&&(c={mode:"dark"}));const d=P1({...t,palette:c},...e);return d.defaultColorScheme=o,d.colorSchemes=u,d.palette.mode==="light"&&(d.colorSchemes.light={...u.light!==!0&&u.light,palette:d.palette},dR(d,"dark",u.dark)),d.palette.mode==="dark"&&(d.colorSchemes.dark={...u.dark!==!0&&u.dark,palette:d.palette},dR(d,"light",u.light)),d}return!i&&!("light"in u)&&o==="light"&&(u.light=!0),MW({...a,colorSchemes:u,defaultColorScheme:o,...typeof n!="boolean"&&n},...e)}const $W=NW(),FW=$W,UW="$$material";function BW(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const VW=t=>BW(t)&&t!=="classes",HW=VW,KW=CG({themeId:UW,defaultTheme:FW,rootShouldForwardProp:HW}),GW=GG;function WW(t){return KG(t)}function jW(t){return OM("MuiSvgIcon",t)}IH("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const YW=t=>{const{color:e,fontSize:i,classes:n}=t,r={root:["root",e!=="inherit"&&`color${bc(e)}`,`fontSize${bc(i)}`]};return _H(r,jW,n)},qW=KW("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:i}=t;return[e.root,i.color!=="inherit"&&e[`color${bc(i.color)}`],e[`fontSize${bc(i.fontSize)}`]]}})(GW(({theme:t})=>{var e,i,n,r,s,a,o,l,u,c,d,h,f,m;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",flexShrink:0,transition:(r=(e=t.transitions)==null?void 0:e.create)==null?void 0:r.call(e,"fill",{duration:(n=(i=(t.vars??t).transitions)==null?void 0:i.duration)==null?void 0:n.shorter}),variants:[{props:p=>!p.hasSvgAsChild,style:{fill:"currentColor"}},{props:{fontSize:"inherit"},style:{fontSize:"inherit"}},{props:{fontSize:"small"},style:{fontSize:((a=(s=t.typography)==null?void 0:s.pxToRem)==null?void 0:a.call(s,20))||"1.25rem"}},{props:{fontSize:"medium"},style:{fontSize:((l=(o=t.typography)==null?void 0:o.pxToRem)==null?void 0:l.call(o,24))||"1.5rem"}},{props:{fontSize:"large"},style:{fontSize:((c=(u=t.typography)==null?void 0:u.pxToRem)==null?void 0:c.call(u,35))||"2.1875rem"}},...Object.entries((t.vars??t).palette).filter(([,p])=>p&&p.main).map(([p])=>{var y,g;return{props:{color:p},style:{color:(g=(y=(t.vars??t).palette)==null?void 0:y[p])==null?void 0:g.main}}}),{props:{color:"action"},style:{color:(h=(d=(t.vars??t).palette)==null?void 0:d.action)==null?void 0:h.active}},{props:{color:"disabled"},style:{color:(m=(f=(t.vars??t).palette)==null?void 0:f.action)==null?void 0:m.disabled}},{props:{color:"inherit"},style:{color:void 0}}]}})),p0=G.forwardRef(function(e,i){const n=WW({props:e,name:"MuiSvgIcon"}),{children:r,className:s,color:a="inherit",component:o="svg",fontSize:l="medium",htmlColor:u,inheritViewBox:c=!1,titleAccess:d,viewBox:h="0 0 24 24",...f}=n,m=G.isValidElement(r)&&r.type==="svg",p={...n,color:a,component:o,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:c,viewBox:h,hasSvgAsChild:m},y={};c||(y.viewBox=h);const g=YW(p);return q.jsxs(qW,{as:o,className:RH(g.root,s),focusable:"false",color:u,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:i,...y,...f,...m&&r.props,ownerState:p,children:[m?r.props.children:r,d?q.jsx("title",{children:d}):null]})});p0&&(p0.muiName="SvgIcon");function sN(t,e){function i(n,r){return q.jsx(p0,{"data-testid":`${e}Icon`,ref:r,...n,children:t})}return i.muiName=p0.muiName,G.memo(G.forwardRef(i))}const zW=sN(q.jsx("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu"),QW=sN(q.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos");var aN={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function i(){for(var s="",a=0;a<arguments.length;a++){var o=arguments[a];o&&(s=r(s,n(o)))}return s}function n(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return i.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var o in s)e.call(s,o)&&s[o]&&(a=r(a,o));return a}function r(s,a){return a?s?s+" "+a:s+a:s}t.exports?(i.default=i,t.exports=i):window.classNames=i})()})(aN);var XW=aN.exports;const ZW=Oc(XW),Te=t=>typeof t=="string",rd=()=>{let t,e;const i=new Promise((n,r)=>{t=n,e=r});return i.resolve=t,i.reject=e,i},hR=t=>t==null?"":""+t,JW=(t,e,i)=>{t.forEach(n=>{e[n]&&(i[n]=e[n])})},ej=/###/g,fR=t=>t&&t.indexOf("###")>-1?t.replace(ej,"."):t,mR=t=>!t||Te(t),lh=(t,e,i)=>{const n=Te(e)?e.split("."):e;let r=0;for(;r<n.length-1;){if(mR(t))return{};const s=fR(n[r]);!t[s]&&i&&(t[s]=new i),Object.prototype.hasOwnProperty.call(t,s)?t=t[s]:t={},++r}return mR(t)?{}:{obj:t,k:fR(n[r])}},pR=(t,e,i)=>{const{obj:n,k:r}=lh(t,e,Object);if(n!==void 0||e.length===1){n[r]=i;return}let s=e[e.length-1],a=e.slice(0,e.length-1),o=lh(t,a,Object);for(;o.obj===void 0&&a.length;)s=`${a[a.length-1]}.${s}`,a=a.slice(0,a.length-1),o=lh(t,a,Object),o!=null&&o.obj&&typeof o.obj[`${o.k}.${s}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${s}`]=i},tj=(t,e,i,n)=>{const{obj:r,k:s}=lh(t,e,Object);r[s]=r[s]||[],r[s].push(i)},g0=(t,e)=>{const{obj:i,k:n}=lh(t,e);if(i&&Object.prototype.hasOwnProperty.call(i,n))return i[n]},ij=(t,e,i)=>{const n=g0(t,i);return n!==void 0?n:g0(e,i)},oN=(t,e,i)=>{for(const n in e)n!=="__proto__"&&n!=="constructor"&&(n in t?Te(t[n])||t[n]instanceof String||Te(e[n])||e[n]instanceof String?i&&(t[n]=e[n]):oN(t[n],e[n],i):t[n]=e[n]);return t},wl=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var nj={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const rj=t=>Te(t)?t.replace(/[&<>"'\/]/g,e=>nj[e]):t;class sj{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const i=this.regExpMap.get(e);if(i!==void 0)return i;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}const aj=[" ",",","?","!",";"],oj=new sj(20),lj=(t,e,i)=>{e=e||"",i=i||"";const n=aj.filter(a=>e.indexOf(a)<0&&i.indexOf(a)<0);if(n.length===0)return!0;const r=oj.getRegExp(`(${n.map(a=>a==="?"?"\\?":a).join("|")})`);let s=!r.test(t);if(!s){const a=t.indexOf(i);a>0&&!r.test(t.substring(0,a))&&(s=!0)}return s},O1=(t,e,i=".")=>{if(!t)return;if(t[e])return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0;const n=e.split(i);let r=t;for(let s=0;s<n.length;){if(!r||typeof r!="object")return;let a,o="";for(let l=s;l<n.length;++l)if(l!==s&&(o+=i),o+=n[l],a=r[o],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&l<n.length-1)continue;s+=l-s+1;break}r=a}return r},Qh=t=>t==null?void 0:t.replace("_","-"),uj={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){var i,n;(n=(i=console==null?void 0:console[t])==null?void 0:i.apply)==null||n.call(i,console,e)}};let cj=class M1{constructor(e,i={}){this.init(e,i)}init(e,i={}){this.prefix=i.prefix||"i18next:",this.logger=e||uj,this.options=i,this.debug=i.debug}log(...e){return this.forward(e,"log","",!0)}warn(...e){return this.forward(e,"warn","",!0)}error(...e){return this.forward(e,"error","")}deprecate(...e){return this.forward(e,"warn","WARNING DEPRECATED: ",!0)}forward(e,i,n,r){return r&&!this.debug?null:(Te(e[0])&&(e[0]=`${n}${this.prefix} ${e[0]}`),this.logger[i](e))}create(e){return new M1(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new M1(this.logger,e)}};var Gr=new cj;let zv=class{constructor(){this.observers={}}on(e,i){return e.split(" ").forEach(n=>{this.observers[n]||(this.observers[n]=new Map);const r=this.observers[n].get(i)||0;this.observers[n].set(i,r+1)}),this}off(e,i){if(this.observers[e]){if(!i){delete this.observers[e];return}this.observers[e].delete(i)}}emit(e,...i){this.observers[e]&&Array.from(this.observers[e].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r(...i)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(([r,s])=>{for(let a=0;a<s;a++)r.apply(r,[e,...i])})}};class gR extends zv{constructor(e,i={ns:["translation"],defaultNS:"translation"}){super(),this.data=e||{},this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const i=this.options.ns.indexOf(e);i>-1&&this.options.ns.splice(i,1)}getResource(e,i,n,r={}){var u,c;const s=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,a=r.ignoreJSONStructure!==void 0?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;e.indexOf(".")>-1?o=e.split("."):(o=[e,i],n&&(Array.isArray(n)?o.push(...n):Te(n)&&s?o.push(...n.split(s)):o.push(n)));const l=g0(this.data,o);return!l&&!i&&!n&&e.indexOf(".")>-1&&(e=o[0],i=o[1],n=o.slice(2).join(".")),l||!a||!Te(n)?l:O1((c=(u=this.data)==null?void 0:u[e])==null?void 0:c[i],n,s)}addResource(e,i,n,r,s={silent:!1}){const a=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator;let o=[e,i];n&&(o=o.concat(a?n.split(a):n)),e.indexOf(".")>-1&&(o=e.split("."),r=i,i=o[1]),this.addNamespaces(i),pR(this.data,o,r),s.silent||this.emit("added",e,i,n,r)}addResources(e,i,n,r={silent:!1}){for(const s in n)(Te(n[s])||Array.isArray(n[s]))&&this.addResource(e,i,s,n[s],{silent:!0});r.silent||this.emit("added",e,i,n)}addResourceBundle(e,i,n,r,s,a={silent:!1,skipCopy:!1}){let o=[e,i];e.indexOf(".")>-1&&(o=e.split("."),r=n,n=i,i=o[1]),this.addNamespaces(i);let l=g0(this.data,o)||{};a.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?oN(l,n,s):l={...l,...n},pR(this.data,o,l),a.silent||this.emit("added",e,i,n)}removeResourceBundle(e,i){this.hasResourceBundle(e,i)&&delete this.data[e][i],this.removeNamespaces(i),this.emit("removed",e,i)}hasResourceBundle(e,i){return this.getResource(e,i)!==void 0}getResourceBundle(e,i){return i||(i=this.options.defaultNS),this.getResource(e,i)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const i=this.getDataByLanguage(e);return!!(i&&Object.keys(i)||[]).find(r=>i[r]&&Object.keys(i[r]).length>0)}toJSON(){return this.data}}var lN={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,i,n,r){return t.forEach(s=>{var a;e=((a=this.processors[s])==null?void 0:a.process(e,i,n,r))??e}),e}};const uN=Symbol("i18next/PATH_KEY");function dj(){const t=[],e=Object.create(null);let i;return e.get=(n,r)=>{var s;return(s=i==null?void 0:i.revoke)==null||s.call(i),r===uN?t:(t.push(r),i=Proxy.revocable(n,e),i.proxy)},Proxy.revocable(Object.create(null),e).proxy}function N1(t,e){const{[uN]:i}=t(dj());return i.join((e==null?void 0:e.keySeparator)??".")}const vR={},vE=t=>!Te(t)&&typeof t!="boolean"&&typeof t!="number";class v0 extends zv{constructor(e,i={}){super(),JW(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=i,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Gr.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e,i={interpolation:{}}){const n={...i};if(e==null)return!1;const r=this.resolve(e,n);if((r==null?void 0:r.res)===void 0)return!1;const s=vE(r.res);return!(n.returnObjects===!1&&s)}extractFromKey(e,i){let n=i.nsSeparator!==void 0?i.nsSeparator:this.options.nsSeparator;n===void 0&&(n=":");const r=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let s=i.ns||this.options.defaultNS||[];const a=n&&e.indexOf(n)>-1,o=!this.options.userDefinedKeySeparator&&!i.keySeparator&&!this.options.userDefinedNsSeparator&&!i.nsSeparator&&!lj(e,n,r);if(a&&!o){const l=e.match(this.interpolator.nestingRegexp);if(l&&l.length>0)return{key:e,namespaces:Te(s)?[s]:s};const u=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(u[0])>-1)&&(s=u.shift()),e=u.join(r)}return{key:e,namespaces:Te(s)?[s]:s}}translate(e,i,n){let r=typeof i=="object"?{...i}:i;if(typeof r!="object"&&this.options.overloadTranslationOptionHandler&&(r=this.options.overloadTranslationOptionHandler(arguments)),typeof r=="object"&&(r={...r}),r||(r={}),e==null)return"";typeof e=="function"&&(e=N1(e,{...this.options,...r})),Array.isArray(e)||(e=[String(e)]);const s=r.returnDetails!==void 0?r.returnDetails:this.options.returnDetails,a=r.keySeparator!==void 0?r.keySeparator:this.options.keySeparator,{key:o,namespaces:l}=this.extractFromKey(e[e.length-1],r),u=l[l.length-1];let c=r.nsSeparator!==void 0?r.nsSeparator:this.options.nsSeparator;c===void 0&&(c=":");const d=r.lng||this.language,h=r.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if((d==null?void 0:d.toLowerCase())==="cimode")return h?s?{res:`${u}${c}${o}`,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:`${u}${c}${o}`:s?{res:o,usedKey:o,exactUsedKey:o,usedLng:d,usedNS:u,usedParams:this.getUsedParamsDetails(r)}:o;const f=this.resolve(e,r);let m=f==null?void 0:f.res;const p=(f==null?void 0:f.usedKey)||o,y=(f==null?void 0:f.exactUsedKey)||o,g=["[object Number]","[object Function]","[object RegExp]"],v=r.joinArrays!==void 0?r.joinArrays:this.options.joinArrays,E=!this.i18nFormat||this.i18nFormat.handleAsObject,T=r.count!==void 0&&!Te(r.count),_=v0.hasDefaultValue(r),x=T?this.pluralResolver.getSuffix(d,r.count,r):"",A=r.ordinal&&T?this.pluralResolver.getSuffix(d,r.count,{ordinal:!1}):"",I=T&&!r.ordinal&&r.count===0,L=I&&r[`defaultValue${this.options.pluralSeparator}zero`]||r[`defaultValue${x}`]||r[`defaultValue${A}`]||r.defaultValue;let b=m;E&&!m&&_&&(b=L);const R=vE(b),P=Object.prototype.toString.apply(b);if(E&&b&&R&&g.indexOf(P)<0&&!(Te(v)&&Array.isArray(b))){if(!r.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const w=this.options.returnedObjectHandler?this.options.returnedObjectHandler(p,b,{...r,ns:l}):`key '${o} (${this.language})' returned an object instead of string.`;return s?(f.res=w,f.usedParams=this.getUsedParamsDetails(r),f):w}if(a){const w=Array.isArray(b),$=w?[]:{},B=w?y:p;for(const U in b)if(Object.prototype.hasOwnProperty.call(b,U)){const V=`${B}${a}${U}`;_&&!m?$[U]=this.translate(V,{...r,defaultValue:vE(L)?L[U]:void 0,joinArrays:!1,ns:l}):$[U]=this.translate(V,{...r,joinArrays:!1,ns:l}),$[U]===V&&($[U]=b[U])}m=$}}else if(E&&Te(v)&&Array.isArray(m))m=m.join(v),m&&(m=this.extendTranslation(m,e,r,n));else{let w=!1,$=!1;!this.isValidLookup(m)&&_&&(w=!0,m=L),this.isValidLookup(m)||($=!0,m=o);const U=(r.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&$?void 0:m,V=_&&L!==m&&this.options.updateMissing;if($||w||V){if(this.logger.log(V?"updateKey":"missingKey",d,u,o,V?L:m),a){const H=this.resolve(o,{...r,keySeparator:!1});H&&H.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let C=[];const K=this.languageUtils.getFallbackCodes(this.options.fallbackLng,r.lng||this.language);if(this.options.saveMissingTo==="fallback"&&K&&K[0])for(let H=0;H<K.length;H++)C.push(K[H]);else this.options.saveMissingTo==="all"?C=this.languageUtils.toResolveHierarchy(r.lng||this.language):C.push(r.lng||this.language);const z=(H,Y,oe)=>{var fe;const pe=_&&oe!==m?oe:U;this.options.missingKeyHandler?this.options.missingKeyHandler(H,u,Y,pe,V,r):(fe=this.backendConnector)!=null&&fe.saveMissing&&this.backendConnector.saveMissing(H,u,Y,pe,V,r),this.emit("missingKey",H,u,Y,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?C.forEach(H=>{const Y=this.pluralResolver.getSuffixes(H,r);I&&r[`defaultValue${this.options.pluralSeparator}zero`]&&Y.indexOf(`${this.options.pluralSeparator}zero`)<0&&Y.push(`${this.options.pluralSeparator}zero`),Y.forEach(oe=>{z([H],o+oe,r[`defaultValue${oe}`]||L)})}):z(C,o,L))}m=this.extendTranslation(m,e,r,f,n),$&&m===o&&this.options.appendNamespaceToMissingKey&&(m=`${u}${c}${o}`),($||w)&&this.options.parseMissingKeyHandler&&(m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${u}${c}${o}`:o,w?m:void 0,r))}return s?(f.res=m,f.usedParams=this.getUsedParamsDetails(r),f):m}extendTranslation(e,i,n,r,s){var l,u;if((l=this.i18nFormat)!=null&&l.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...n},n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init({...n,interpolation:{...this.options.interpolation,...n.interpolation}});const c=Te(e)&&(((u=n==null?void 0:n.interpolation)==null?void 0:u.skipOnVariables)!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(c){const f=e.match(this.interpolator.nestingRegexp);d=f&&f.length}let h=n.replace&&!Te(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),e=this.interpolator.interpolate(e,h,n.lng||this.language||r.usedLng,n),c){const f=e.match(this.interpolator.nestingRegexp),m=f&&f.length;d<m&&(n.nest=!1)}!n.lng&&r&&r.res&&(n.lng=this.language||r.usedLng),n.nest!==!1&&(e=this.interpolator.nest(e,(...f)=>(s==null?void 0:s[0])===f[0]&&!n.context?(this.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${i[0]}`),null):this.translate(...f,i),n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,o=Te(a)?[a]:a;return e!=null&&(o!=null&&o.length)&&n.applyPostProcessor!==!1&&(e=lN.handle(o,e,i,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...r,usedParams:this.getUsedParamsDetails(n)},...n}:n,this)),e}resolve(e,i={}){let n,r,s,a,o;return Te(e)&&(e=[e]),e.forEach(l=>{if(this.isValidLookup(n))return;const u=this.extractFromKey(l,i),c=u.key;r=c;let d=u.namespaces;this.options.fallbackNS&&(d=d.concat(this.options.fallbackNS));const h=i.count!==void 0&&!Te(i.count),f=h&&!i.ordinal&&i.count===0,m=i.context!==void 0&&(Te(i.context)||typeof i.context=="number")&&i.context!=="",p=i.lngs?i.lngs:this.languageUtils.toResolveHierarchy(i.lng||this.language,i.fallbackLng);d.forEach(y=>{var g,v;this.isValidLookup(n)||(o=y,!vR[`${p[0]}-${y}`]&&((g=this.utils)!=null&&g.hasLoadedNamespace)&&!((v=this.utils)!=null&&v.hasLoadedNamespace(o))&&(vR[`${p[0]}-${y}`]=!0,this.logger.warn(`key "${r}" for languages "${p.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(E=>{var x;if(this.isValidLookup(n))return;a=E;const T=[c];if((x=this.i18nFormat)!=null&&x.addLookupKeys)this.i18nFormat.addLookupKeys(T,c,E,y,i);else{let A;h&&(A=this.pluralResolver.getSuffix(E,i.count,i));const I=`${this.options.pluralSeparator}zero`,L=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(h&&(i.ordinal&&A.indexOf(L)===0&&T.push(c+A.replace(L,this.options.pluralSeparator)),T.push(c+A),f&&T.push(c+I)),m){const b=`${c}${this.options.contextSeparator||"_"}${i.context}`;T.push(b),h&&(i.ordinal&&A.indexOf(L)===0&&T.push(b+A.replace(L,this.options.pluralSeparator)),T.push(b+A),f&&T.push(b+I))}}let _;for(;_=T.pop();)this.isValidLookup(n)||(s=_,n=this.getResource(E,y,_,i))}))})}),{res:n,usedKey:r,exactUsedKey:s,usedLng:a,usedNS:o}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,i,n,r={}){var s;return(s=this.i18nFormat)!=null&&s.getResource?this.i18nFormat.getResource(e,i,n,r):this.resourceStore.getResource(e,i,n,r)}getUsedParamsDetails(e={}){const i=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Te(e.replace);let r=n?e.replace:e;if(n&&typeof e.count<"u"&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r={...this.options.interpolation.defaultVariables,...r}),!n){r={...r};for(const s of i)delete r[s]}return r}static hasDefaultValue(e){const i="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&i===n.substring(0,i.length)&&e[n]!==void 0)return!0;return!1}}class yR{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Gr.create("languageUtils")}getScriptPartFromCode(e){if(e=Qh(e),!e||e.indexOf("-")<0)return null;const i=e.split("-");return i.length===2||(i.pop(),i[i.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(i.join("-"))}getLanguagePartFromCode(e){if(e=Qh(e),!e||e.indexOf("-")<0)return e;const i=e.split("-");return this.formatLanguageCode(i[0])}formatLanguageCode(e){if(Te(e)&&e.indexOf("-")>-1){let i;try{i=Intl.getCanonicalLocales(e)[0]}catch{}return i&&this.options.lowerCaseLng&&(i=i.toLowerCase()),i||(this.options.lowerCaseLng?e.toLowerCase():e)}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let i;return e.forEach(n=>{if(i)return;const r=this.formatLanguageCode(n);(!this.options.supportedLngs||this.isSupportedCode(r))&&(i=r)}),!i&&this.options.supportedLngs&&e.forEach(n=>{if(i)return;const r=this.getScriptPartFromCode(n);if(this.isSupportedCode(r))return i=r;const s=this.getLanguagePartFromCode(n);if(this.isSupportedCode(s))return i=s;i=this.options.supportedLngs.find(a=>{if(a===s)return a;if(!(a.indexOf("-")<0&&s.indexOf("-")<0)&&(a.indexOf("-")>0&&s.indexOf("-")<0&&a.substring(0,a.indexOf("-"))===s||a.indexOf(s)===0&&s.length>1))return a})}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}getFallbackCodes(e,i){if(!e)return[];if(typeof e=="function"&&(e=e(i)),Te(e)&&(e=[e]),Array.isArray(e))return e;if(!i)return e.default||[];let n=e[i];return n||(n=e[this.getScriptPartFromCode(i)]),n||(n=e[this.formatLanguageCode(i)]),n||(n=e[this.getLanguagePartFromCode(i)]),n||(n=e.default),n||[]}toResolveHierarchy(e,i){const n=this.getFallbackCodes((i===!1?[]:i)||this.options.fallbackLng||[],e),r=[],s=a=>{a&&(this.isSupportedCode(a)?r.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return Te(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&s(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&s(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&s(this.getLanguagePartFromCode(e))):Te(e)&&s(this.formatLanguageCode(e)),n.forEach(a=>{r.indexOf(a)<0&&s(this.formatLanguageCode(a))}),r}}const ER={zero:0,one:1,two:2,few:3,many:4,other:5},TR={select:t=>t===1?"one":"other",resolvedOptions:()=>({pluralCategories:["one","other"]})};class hj{constructor(e,i={}){this.languageUtils=e,this.options=i,this.logger=Gr.create("pluralResolver"),this.pluralRulesCache={}}addRule(e,i){this.rules[e]=i}clearCache(){this.pluralRulesCache={}}getRule(e,i={}){const n=Qh(e==="dev"?"en":e),r=i.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:n,type:r});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(n,{type:r})}catch{if(!Intl)return this.logger.error("No Intl support, please use an Intl polyfill!"),TR;if(!e.match(/-|_/))return TR;const l=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(l,i)}return this.pluralRulesCache[s]=a,a}needsPlural(e,i={}){let n=this.getRule(e,i);return n||(n=this.getRule("dev",i)),(n==null?void 0:n.resolvedOptions().pluralCategories.length)>1}getPluralFormsOfKey(e,i,n={}){return this.getSuffixes(e,n).map(r=>`${i}${r}`)}getSuffixes(e,i={}){let n=this.getRule(e,i);return n||(n=this.getRule("dev",i)),n?n.resolvedOptions().pluralCategories.sort((r,s)=>ER[r]-ER[s]).map(r=>`${this.options.prepend}${i.ordinal?`ordinal${this.options.prepend}`:""}${r}`):[]}getSuffix(e,i,n={}){const r=this.getRule(e,n);return r?`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${r.select(i)}`:(this.logger.warn(`no plural rule found for: ${e}`),this.getSuffix("dev",i,n))}}const bR=(t,e,i,n=".",r=!0)=>{let s=ij(t,e,i);return!s&&r&&Te(i)&&(s=O1(t,i,n),s===void 0&&(s=O1(e,i,n))),s},yE=t=>t.replace(/\$/g,"$$$$");class fj{constructor(e={}){var i;this.logger=Gr.create("interpolator"),this.options=e,this.format=((i=e==null?void 0:e.interpolation)==null?void 0:i.format)||(n=>n),this.init(e)}init(e={}){e.interpolation||(e.interpolation={escapeValue:!0});const{escape:i,escapeValue:n,useRawValueToEscape:r,prefix:s,prefixEscaped:a,suffix:o,suffixEscaped:l,formatSeparator:u,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:h,nestingPrefixEscaped:f,nestingSuffix:m,nestingSuffixEscaped:p,nestingOptionsSeparator:y,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=i!==void 0?i:rj,this.escapeValue=n!==void 0?n:!0,this.useRawValueToEscape=r!==void 0?r:!1,this.prefix=s?wl(s):a||"{{",this.suffix=o?wl(o):l||"}}",this.formatSeparator=u||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=h?wl(h):f||wl("$t("),this.nestingSuffix=m?wl(m):p||wl(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=g||1e3,this.alwaysFormat=v!==void 0?v:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(i,n)=>(i==null?void 0:i.source)===n?(i.lastIndex=0,i):new RegExp(n,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}((?:[^()"']+|"[^"]*"|'[^']*'|\\((?:[^()]|"[^"]*"|'[^']*')*\\))*?)${this.nestingSuffix}`)}interpolate(e,i,n,r){var f;let s,a,o;const l=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=m=>{if(m.indexOf(this.formatSeparator)<0){const v=bR(i,l,m,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(v,void 0,n,{...r,...i,interpolationkey:m}):v}const p=m.split(this.formatSeparator),y=p.shift().trim(),g=p.join(this.formatSeparator).trim();return this.format(bR(i,l,y,this.options.keySeparator,this.options.ignoreJSONStructure),g,n,{...r,...i,interpolationkey:y})};this.resetRegExp();const c=(r==null?void 0:r.missingInterpolationHandler)||this.options.missingInterpolationHandler,d=((f=r==null?void 0:r.interpolation)==null?void 0:f.skipOnVariables)!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:m=>yE(m)},{regex:this.regexp,safeValue:m=>this.escapeValue?yE(this.escape(m)):yE(m)}].forEach(m=>{for(o=0;s=m.regex.exec(e);){const p=s[1].trim();if(a=u(p),a===void 0)if(typeof c=="function"){const g=c(e,s,r);a=Te(g)?g:""}else if(r&&Object.prototype.hasOwnProperty.call(r,p))a="";else if(d){a=s[0];continue}else this.logger.warn(`missed to pass in variable ${p} for interpolating ${e}`),a="";else!Te(a)&&!this.useRawValueToEscape&&(a=hR(a));const y=m.safeValue(a);if(e=e.replace(s[0],y),d?(m.regex.lastIndex+=a.length,m.regex.lastIndex-=s[0].length):m.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),e}nest(e,i,n={}){let r,s,a;const o=(l,u)=>{const c=this.nestingOptionsSeparator;if(l.indexOf(c)<0)return l;const d=l.split(new RegExp(`${c}[ ]*{`));let h=`{${d[1]}`;l=d[0],h=this.interpolate(h,a);const f=h.match(/'/g),m=h.match(/"/g);(((f==null?void 0:f.length)??0)%2===0&&!m||m.length%2!==0)&&(h=h.replace(/'/g,'"'));try{a=JSON.parse(h),u&&(a={...u,...a})}catch(p){return this.logger.warn(`failed parsing options string in nesting for key ${l}`,p),`${l}${c}${h}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,l};for(;r=this.nestingRegexp.exec(e);){let l=[];a={...n},a=a.replace&&!Te(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;const u=/{.*}/.test(r[1])?r[1].lastIndexOf("}")+1:r[1].indexOf(this.formatSeparator);if(u!==-1&&(l=r[1].slice(u).split(this.formatSeparator).map(c=>c.trim()).filter(Boolean),r[1]=r[1].slice(0,u)),s=i(o.call(this,r[1].trim(),a),a),s&&r[0]===e&&!Te(s))return s;Te(s)||(s=hR(s)),s||(this.logger.warn(`missed to resolve ${r[1]} for nesting ${e}`),s=""),l.length&&(s=l.reduce((c,d)=>this.format(c,d,n.lng,{...n,interpolationkey:r[1].trim()}),s.trim())),e=e.replace(r[0],s),this.regexp.lastIndex=0}return e}}const mj=t=>{let e=t.toLowerCase().trim();const i={};if(t.indexOf("(")>-1){const n=t.split("(");e=n[0].toLowerCase().trim();const r=n[1].substring(0,n[1].length-1);e==="currency"&&r.indexOf(":")<0?i.currency||(i.currency=r.trim()):e==="relativetime"&&r.indexOf(":")<0?i.range||(i.range=r.trim()):r.split(";").forEach(a=>{if(a){const[o,...l]=a.split(":"),u=l.join(":").trim().replace(/^'+|'+$/g,""),c=o.trim();i[c]||(i[c]=u),u==="false"&&(i[c]=!1),u==="true"&&(i[c]=!0),isNaN(u)||(i[c]=parseInt(u,10))}})}return{formatName:e,formatOptions:i}},SR=t=>{const e={};return(i,n,r)=>{let s=r;r&&r.interpolationkey&&r.formatParams&&r.formatParams[r.interpolationkey]&&r[r.interpolationkey]&&(s={...s,[r.interpolationkey]:void 0});const a=n+JSON.stringify(s);let o=e[a];return o||(o=t(Qh(n),r),e[a]=o),o(i)}},pj=t=>(e,i,n)=>t(Qh(i),n)(e);class gj{constructor(e={}){this.logger=Gr.create("formatter"),this.options=e,this.init(e)}init(e,i={interpolation:{}}){this.formatSeparator=i.interpolation.formatSeparator||",";const n=i.cacheInBuiltFormats?SR:pj;this.formats={number:n((r,s)=>{const a=new Intl.NumberFormat(r,{...s});return o=>a.format(o)}),currency:n((r,s)=>{const a=new Intl.NumberFormat(r,{...s,style:"currency"});return o=>a.format(o)}),datetime:n((r,s)=>{const a=new Intl.DateTimeFormat(r,{...s});return o=>a.format(o)}),relativetime:n((r,s)=>{const a=new Intl.RelativeTimeFormat(r,{...s});return o=>a.format(o,s.range||"day")}),list:n((r,s)=>{const a=new Intl.ListFormat(r,{...s});return o=>a.format(o)})}}add(e,i){this.formats[e.toLowerCase().trim()]=i}addCached(e,i){this.formats[e.toLowerCase().trim()]=SR(i)}format(e,i,n,r={}){const s=i.split(this.formatSeparator);if(s.length>1&&s[0].indexOf("(")>1&&s[0].indexOf(")")<0&&s.find(o=>o.indexOf(")")>-1)){const o=s.findIndex(l=>l.indexOf(")")>-1);s[0]=[s[0],...s.splice(1,o)].join(this.formatSeparator)}return s.reduce((o,l)=>{var d;const{formatName:u,formatOptions:c}=mj(l);if(this.formats[u]){let h=o;try{const f=((d=r==null?void 0:r.formatParams)==null?void 0:d[r.interpolationkey])||{},m=f.locale||f.lng||r.locale||r.lng||n;h=this.formats[u](o,m,{...c,...r,...f})}catch(f){this.logger.warn(f)}return h}else this.logger.warn(`there was no format function for ${u}`);return o},e)}}const vj=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class yj extends zv{constructor(e,i,n,r={}){var s,a;super(),this.backend=e,this.store=i,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=Gr.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],(a=(s=this.backend)==null?void 0:s.init)==null||a.call(s,n,r.backend,r)}queueLoad(e,i,n,r){const s={},a={},o={},l={};return e.forEach(u=>{let c=!0;i.forEach(d=>{const h=`${u}|${d}`;!n.reload&&this.store.hasResourceBundle(u,d)?this.state[h]=2:this.state[h]<0||(this.state[h]===1?a[h]===void 0&&(a[h]=!0):(this.state[h]=1,c=!1,a[h]===void 0&&(a[h]=!0),s[h]===void 0&&(s[h]=!0),l[d]===void 0&&(l[d]=!0)))}),c||(o[u]=!0)}),(Object.keys(s).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(s),pending:Object.keys(a),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(l)}}loaded(e,i,n){const r=e.split("|"),s=r[0],a=r[1];i&&this.emit("failedLoading",s,a,i),!i&&n&&this.store.addResourceBundle(s,a,n,void 0,void 0,{skipCopy:!0}),this.state[e]=i?-1:2,i&&n&&(this.state[e]=0);const o={};this.queue.forEach(l=>{tj(l.loaded,[s],a),vj(l,e),i&&l.errors.push(i),l.pendingCount===0&&!l.done&&(Object.keys(l.loaded).forEach(u=>{o[u]||(o[u]={});const c=l.loaded[u];c.length&&c.forEach(d=>{o[u][d]===void 0&&(o[u][d]=!0)})}),l.done=!0,l.errors.length?l.callback(l.errors):l.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(l=>!l.done)}read(e,i,n,r=0,s=this.retryTimeout,a){if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:i,fcName:n,tried:r,wait:s,callback:a});return}this.readingCalls++;const o=(u,c)=>{if(this.readingCalls--,this.waitingReads.length>0){const d=this.waitingReads.shift();this.read(d.lng,d.ns,d.fcName,d.tried,d.wait,d.callback)}if(u&&c&&r<this.maxRetries){setTimeout(()=>{this.read.call(this,e,i,n,r+1,s*2,a)},s);return}a(u,c)},l=this.backend[n].bind(this.backend);if(l.length===2){try{const u=l(e,i);u&&typeof u.then=="function"?u.then(c=>o(null,c)).catch(o):o(null,u)}catch(u){o(u)}return}return l(e,i,o)}prepareLoading(e,i,n={},r){if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Te(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Te(i)&&(i=[i]);const s=this.queueLoad(e,i,n,r);if(!s.toLoad.length)return s.pending.length||r(),null;s.toLoad.forEach(a=>{this.loadOne(a)})}load(e,i,n){this.prepareLoading(e,i,{},n)}reload(e,i,n){this.prepareLoading(e,i,{reload:!0},n)}loadOne(e,i=""){const n=e.split("|"),r=n[0],s=n[1];this.read(r,s,"read",void 0,void 0,(a,o)=>{a&&this.logger.warn(`${i}loading namespace ${s} for language ${r} failed`,a),!a&&o&&this.logger.log(`${i}loaded namespace ${s} for language ${r}`,o),this.loaded(e,a,o)})}saveMissing(e,i,n,r,s,a={},o=()=>{}){var l,u,c,d,h;if((u=(l=this.services)==null?void 0:l.utils)!=null&&u.hasLoadedNamespace&&!((d=(c=this.services)==null?void 0:c.utils)!=null&&d.hasLoadedNamespace(i))){this.logger.warn(`did not save key "${n}" as the namespace "${i}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(n==null||n==="")){if((h=this.backend)!=null&&h.create){const f={...a,isUpdate:s},m=this.backend.create.bind(this.backend);if(m.length<6)try{let p;m.length===5?p=m(e,i,n,r,f):p=m(e,i,n,r),p&&typeof p.then=="function"?p.then(y=>o(null,y)).catch(o):o(null,p)}catch(p){o(p)}else m(e,i,n,r,o,f)}!e||!e[0]||this.store.addResource(e[0],i,n,r)}}}const _R=()=>({debug:!1,initAsync:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),Te(t[1])&&(e.defaultValue=t[1]),Te(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const i=t[3]||t[2];Object.keys(i).forEach(n=>{e[n]=i[n]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0},cacheInBuiltFormats:!0}),AR=t=>{var e,i;return Te(t.ns)&&(t.ns=[t.ns]),Te(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),Te(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),((i=(e=t.supportedLngs)==null?void 0:e.indexOf)==null?void 0:i.call(e,"cimode"))<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),typeof t.initImmediate=="boolean"&&(t.initAsync=t.initImmediate),t},mm=()=>{},Ej=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(i=>{typeof t[i]=="function"&&(t[i]=t[i].bind(t))})};class uh extends zv{constructor(e={},i){if(super(),this.options=AR(e),this.services={},this.logger=Gr,this.modules={external:[]},Ej(this),i&&!this.isInitialized&&!e.isClone){if(!this.options.initAsync)return this.init(e,i),this;setTimeout(()=>{this.init(e,i)},0)}}init(e={},i){this.isInitializing=!0,typeof e=="function"&&(i=e,e={}),e.defaultNS==null&&e.ns&&(Te(e.ns)?e.defaultNS=e.ns:e.ns.indexOf("translation")<0&&(e.defaultNS=e.ns[0]));const n=_R();this.options={...n,...this.options,...AR(e)},this.options.interpolation={...n.interpolation,...this.options.interpolation},e.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=e.keySeparator),e.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=e.nsSeparator);const r=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?Gr.init(r(this.modules.logger),this.options):Gr.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:u=gj;const c=new yR(this.options);this.store=new gR(this.options.resources,this.options);const d=this.services;d.logger=Gr,d.resourceStore=this.store,d.languageUtils=c,d.pluralResolver=new hj(c,{prepend:this.options.pluralSeparator,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),this.options.interpolation.format&&this.options.interpolation.format!==n.interpolation.format&&this.logger.deprecate("init: you are still using the legacy format function, please use the new approach: https://www.i18next.com/translation-function/formatting"),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(d.formatter=r(u),d.formatter.init&&d.formatter.init(d,this.options),this.options.interpolation.format=d.formatter.format.bind(d.formatter)),d.interpolator=new fj(this.options),d.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},d.backendConnector=new yj(r(this.modules.backend),d.resourceStore,d,this.options),d.backendConnector.on("*",(f,...m)=>{this.emit(f,...m)}),this.modules.languageDetector&&(d.languageDetector=r(this.modules.languageDetector),d.languageDetector.init&&d.languageDetector.init(d,this.options.detection,this.options)),this.modules.i18nFormat&&(d.i18nFormat=r(this.modules.i18nFormat),d.i18nFormat.init&&d.i18nFormat.init(this)),this.translator=new v0(this.services,this.options),this.translator.on("*",(f,...m)=>{this.emit(f,...m)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,i||(i=mm),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=(...c)=>this.store[u](...c)}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=(...c)=>(this.store[u](...c),this)});const o=rd(),l=()=>{const u=(c,d)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),o.resolve(d),i(c,d)};if(this.languages&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initAsync?l():setTimeout(l,0),o}loadResources(e,i=mm){var s,a;let n=i;const r=Te(e)?e:this.language;if(typeof e=="function"&&(n=e),!this.options.resources||this.options.partialBundledLanguages){if((r==null?void 0:r.toLowerCase())==="cimode"&&(!this.options.preload||this.options.preload.length===0))return n();const o=[],l=u=>{if(!u||u==="cimode")return;this.services.languageUtils.toResolveHierarchy(u).forEach(d=>{d!=="cimode"&&o.indexOf(d)<0&&o.push(d)})};r?l(r):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>l(c)),(a=(s=this.options.preload)==null?void 0:s.forEach)==null||a.call(s,u=>l(u)),this.services.backendConnector.load(o,this.options.ns,u=>{!u&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),n(u)})}else n(null)}reloadResources(e,i,n){const r=rd();return typeof e=="function"&&(n=e,e=void 0),typeof i=="function"&&(n=i,i=void 0),e||(e=this.languages),i||(i=this.options.ns),n||(n=mm),this.services.backendConnector.reload(e,i,s=>{r.resolve(),n(s)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&lN.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1)){for(let i=0;i<this.languages.length;i++){const n=this.languages[i];if(!(["cimode","dev"].indexOf(n)>-1)&&this.store.hasLanguageSomeTranslations(n)){this.resolvedLanguage=n;break}}!this.resolvedLanguage&&this.languages.indexOf(e)<0&&this.store.hasLanguageSomeTranslations(e)&&(this.resolvedLanguage=e,this.languages.unshift(e))}}changeLanguage(e,i){this.isLanguageChangingTo=e;const n=rd();this.emit("languageChanging",e);const r=o=>{this.language=o,this.languages=this.services.languageUtils.toResolveHierarchy(o),this.resolvedLanguage=void 0,this.setResolvedLanguage(o)},s=(o,l)=>{l?this.isLanguageChangingTo===e&&(r(l),this.translator.changeLanguage(l),this.isLanguageChangingTo=void 0,this.emit("languageChanged",l),this.logger.log("languageChanged",l)):this.isLanguageChangingTo=void 0,n.resolve((...u)=>this.t(...u)),i&&i(o,(...u)=>this.t(...u))},a=o=>{var c,d;!e&&!o&&this.services.languageDetector&&(o=[]);const l=Te(o)?o:o&&o[0],u=this.store.hasLanguageSomeTranslations(l)?l:this.services.languageUtils.getBestMatchFromCodes(Te(o)?[o]:o);u&&(this.language||r(u),this.translator.language||this.translator.changeLanguage(u),(d=(c=this.services.languageDetector)==null?void 0:c.cacheUserLanguage)==null||d.call(c,u)),this.loadResources(u,h=>{s(h,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),n}getFixedT(e,i,n){const r=(s,a,...o)=>{let l;typeof a!="object"?l=this.options.overloadTranslationOptionHandler([s,a].concat(o)):l={...a},l.lng=l.lng||r.lng,l.lngs=l.lngs||r.lngs,l.ns=l.ns||r.ns,l.keyPrefix!==""&&(l.keyPrefix=l.keyPrefix||n||r.keyPrefix);const u=this.options.keySeparator||".";let c;return l.keyPrefix&&Array.isArray(s)?c=s.map(d=>(typeof d=="function"&&(d=N1(d,{...this.options,...a})),`${l.keyPrefix}${u}${d}`)):(typeof s=="function"&&(s=N1(s,{...this.options,...a})),c=l.keyPrefix?`${l.keyPrefix}${u}${s}`:s),this.t(c,l)};return Te(e)?r.lng=e:r.lngs=e,r.ns=i,r.keyPrefix=n,r}t(...e){var i;return(i=this.translator)==null?void 0:i.translate(...e)}exists(...e){var i;return(i=this.translator)==null?void 0:i.exists(...e)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e,i={}){if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=i.lng||this.resolvedLanguage||this.languages[0],r=this.options?this.options.fallbackLng:!1,s=this.languages[this.languages.length-1];if(n.toLowerCase()==="cimode")return!0;const a=(o,l)=>{const u=this.services.backendConnector.state[`${o}|${l}`];return u===-1||u===0||u===2};if(i.precheck){const o=i.precheck(this,a);if(o!==void 0)return o}return!!(this.hasResourceBundle(n,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(n,e)&&(!r||a(s,e)))}loadNamespaces(e,i){const n=rd();return this.options.ns?(Te(e)&&(e=[e]),e.forEach(r=>{this.options.ns.indexOf(r)<0&&this.options.ns.push(r)}),this.loadResources(r=>{n.resolve(),i&&i(r)}),n):(i&&i(),Promise.resolve())}loadLanguages(e,i){const n=rd();Te(e)&&(e=[e]);const r=this.options.preload||[],s=e.filter(a=>r.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return s.length?(this.options.preload=r.concat(s),this.loadResources(a=>{n.resolve(),i&&i(a)}),n):(i&&i(),Promise.resolve())}dir(e){var r,s;if(e||(e=this.resolvedLanguage||(((r=this.languages)==null?void 0:r.length)>0?this.languages[0]:this.language)),!e)return"rtl";try{const a=new Intl.Locale(e);if(a&&a.getTextInfo){const o=a.getTextInfo();if(o&&o.direction)return o.direction}}catch{}const i=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],n=((s=this.services)==null?void 0:s.languageUtils)||new yR(_R());return e.toLowerCase().indexOf("-latn")>1?"ltr":i.indexOf(n.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(e={},i){const n=new uh(e,i);return n.createInstance=uh.createInstance,n}cloneInstance(e={},i=mm){const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r={...this.options,...e,isClone:!0},s=new uh(r);if((e.debug!==void 0||e.prefix!==void 0)&&(s.logger=s.logger.clone(e)),["store","services","language"].forEach(o=>{s[o]=this[o]}),s.services={...this.services},s.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},n){const o=Object.keys(this.store.data).reduce((l,u)=>(l[u]={...this.store.data[u]},l[u]=Object.keys(l[u]).reduce((c,d)=>(c[d]={...l[u][d]},c),l[u]),l),{});s.store=new gR(o,r),s.services.resourceStore=s.store}return s.translator=new v0(s.services,r),s.translator.on("*",(o,...l)=>{s.emit(o,...l)}),s.init(r,i),s.translator.options=r,s.translator.backendConnector.services.utils={hasLoadedNamespace:s.hasLoadedNamespace.bind(s)},s}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Fi=uh.createInstance();Fi.createInstance;Fi.dir;Fi.init;Fi.loadResources;Fi.reloadResources;Fi.use;Fi.changeLanguage;Fi.getFixedT;Fi.t;Fi.exists;Fi.setDefaultNamespace;Fi.hasLoadedNamespace;Fi.loadNamespaces;Fi.loadLanguages;const Tj=(t,e,i,n)=>{var s,a,o,l;const r=[i,{code:e,...n||{}}];if((a=(s=t==null?void 0:t.services)==null?void 0:s.logger)!=null&&a.forward)return t.services.logger.forward(r,"warn","react-i18next::",!0);dl(r[0])&&(r[0]=`react-i18next:: ${r[0]}`),(l=(o=t==null?void 0:t.services)==null?void 0:o.logger)!=null&&l.warn?t.services.logger.warn(...r):console!=null&&console.warn&&console.warn(...r)},xR={},cN=(t,e,i,n)=>{dl(i)&&xR[i]||(dl(i)&&(xR[i]=new Date),Tj(t,e,i,n))},dN=(t,e)=>()=>{if(t.isInitialized)e();else{const i=()=>{setTimeout(()=>{t.off("initialized",i)},0),e()};t.on("initialized",i)}},$1=(t,e,i)=>{t.loadNamespaces(e,dN(t,i))},kR=(t,e,i,n)=>{if(dl(i)&&(i=[i]),t.options.preload&&t.options.preload.indexOf(e)>-1)return $1(t,i,n);i.forEach(r=>{t.options.ns.indexOf(r)<0&&t.options.ns.push(r)}),t.loadLanguages(e,dN(t,n))},bj=(t,e,i={})=>!e.languages||!e.languages.length?(cN(e,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:e.languages}),!0):e.hasLoadedNamespace(t,{lng:i.lng,precheck:(n,r)=>{if(i.bindI18n&&i.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!r(n.isLanguageChangingTo,t))return!1}}),dl=t=>typeof t=="string",Sj=t=>typeof t=="object"&&t!==null,_j=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Aj={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"","&#169;":"","&reg;":"","&#174;":"","&hellip;":"","&#8230;":"","&#x2F;":"/","&#47;":"/"},xj=t=>Aj[t],kj=t=>t.replace(_j,xj);let F1={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:kj};const Ij=(t={})=>{F1={...F1,...t}},Lj=()=>F1;let hN;const Rj=t=>{hN=t},wj=()=>hN,Cj={type:"3rdParty",init(t){Ij(t.options.react),Rj(t)}},Dj=G.createContext();class Pj{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(i=>{this.usedNamespaces[i]||(this.usedNamespaces[i]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}var fN={exports:{}},mN={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ac=G;function Oj(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mj=typeof Object.is=="function"?Object.is:Oj,Nj=Ac.useState,$j=Ac.useEffect,Fj=Ac.useLayoutEffect,Uj=Ac.useDebugValue;function Bj(t,e){var i=e(),n=Nj({inst:{value:i,getSnapshot:e}}),r=n[0].inst,s=n[1];return Fj(function(){r.value=i,r.getSnapshot=e,EE(r)&&s({inst:r})},[t,i,e]),$j(function(){return EE(r)&&s({inst:r}),t(function(){EE(r)&&s({inst:r})})},[t]),Uj(i),i}function EE(t){var e=t.getSnapshot;t=t.value;try{var i=e();return!Mj(t,i)}catch{return!0}}function Vj(t,e){return e()}var Hj=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Vj:Bj;mN.useSyncExternalStore=Ac.useSyncExternalStore!==void 0?Ac.useSyncExternalStore:Hj;fN.exports=mN;var Kj=fN.exports;const Gj=(t,e)=>dl(e)?e:Sj(e)&&dl(e.defaultValue)?e.defaultValue:Array.isArray(t)?t[t.length-1]:t,Wj={t:Gj,ready:!1},jj=()=>()=>{},vl=(t,e={})=>{var L,b,R;const{i18n:i}=e,{i18n:n,defaultNS:r}=G.useContext(Dj)||{},s=i||n||wj();s&&!s.reportNamespaces&&(s.reportNamespaces=new Pj),s||cN(s,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const a=G.useMemo(()=>{var P;return{...Lj(),...(P=s==null?void 0:s.options)==null?void 0:P.react,...e}},[s,e]),{useSuspense:o,keyPrefix:l}=a,u=t||r||((L=s==null?void 0:s.options)==null?void 0:L.defaultNS),c=dl(u)?[u]:u||["translation"],d=G.useMemo(()=>c,c);(R=(b=s==null?void 0:s.reportNamespaces)==null?void 0:b.addUsedNamespaces)==null||R.call(b,d);const h=G.useRef(0),f=G.useCallback(P=>{if(!s)return jj;const{bindI18n:w,bindI18nStore:$}=a,B=()=>{h.current+=1,P()};return w&&s.on(w,B),$&&s.store.on($,B),()=>{w&&w.split(" ").forEach(U=>s.off(U,B)),$&&$.split(" ").forEach(U=>s.store.off(U,B))}},[s,a]),m=G.useRef(),p=G.useCallback(()=>{if(!s)return Wj;const P=!!(s.isInitialized||s.initializedStoreOnce)&&d.every(C=>bj(C,s,a)),w=e.lng||s.language,$=h.current,B=m.current;if(B&&B.ready===P&&B.lng===w&&B.keyPrefix===l&&B.revision===$)return B;const V={t:s.getFixedT(w,a.nsMode==="fallback"?d:d[0],l),ready:P,lng:w,keyPrefix:l,revision:$};return m.current=V,V},[s,d,l,a,e.lng]),[y,g]=G.useState(0),{t:v,ready:E}=Kj.useSyncExternalStore(f,p,p);G.useEffect(()=>{if(s&&!E&&!o){const P=()=>g(w=>w+1);e.lng?kR(s,e.lng,d,P):$1(s,d,P)}},[s,e.lng,d,E,o,y]);const T=s||{},_=G.useRef(null),x=G.useRef(),A=P=>{const w=Object.getOwnPropertyDescriptors(P);w.__original&&delete w.__original;const $=Object.create(Object.getPrototypeOf(P),w);if(!Object.prototype.hasOwnProperty.call($,"__original"))try{Object.defineProperty($,"__original",{value:P,writable:!1,enumerable:!1,configurable:!1})}catch{}return $},I=G.useMemo(()=>{const P=T,w=P==null?void 0:P.language;let $=P;P&&(_.current&&_.current.__original===P?x.current!==w?($=A(P),_.current=$,x.current=w):$=_.current:($=A(P),_.current=$,x.current=w));const B=[v,$,E];return B.t=v,B.i18n=$,B.ready=E,B},[v,T,E,T.resolvedLanguage,T.language,T.languages]);if(s&&o&&!E)throw new Promise(P=>{const w=()=>P();e.lng?kR(s,e.lng,d,w):$1(s,d,w)});return I},Yj=({activeSection:t})=>{const{t:e}=vl(),i=[{label:e("nav.music"),id:"music"},{label:e("nav.live"),id:"live"},{label:e("nav.about"),id:"about"}],n=r=>{const s=document.getElementById(r);if(s){const a=window.innerWidth>=768?-62:-74,o=s.getBoundingClientRect().top+window.pageYOffset+a;window.scrollTo({top:o,behavior:"smooth"})}};return q.jsx("ul",{children:i.map(r=>q.jsx("li",{children:q.jsx("a",{className:ZW({active:t===r.id}),onClick:()=>n(r.id),children:r.label})},r.id))})},U1="/assets/totes_line_1-B0OqcEkw.png",qj="/assets/totes_svart_symbol-D75XB7J7.png",zj=({isMobile:t,menuWidth:e,isOpen:i})=>{const[n,r]=G.useState(!1),[s,a]=G.useState(!1),o=G.useRef(0);G.useEffect(()=>{const d=()=>{const h=window.scrollY,f=h>o.current;if(o.current=h,f?(h>200&&r(!0),h>700&&a(!0)):(h<300&&r(!1),h<500&&a(!1)),t&&i){r(!0);return}};return d(),window.addEventListener("scroll",d),()=>window.removeEventListener("scroll",d)},[t,i]);const l={hidden:{opacity:0,y:-40},visible:{opacity:1,y:0},exit:{opacity:0,y:-40}},u=s?qj:U1,c=t?s?"menu__logo--desktop-alt":"menu__logo--desktop":s?"menu__logo--mobile-alt":"menu__logo--mobile";return q.jsx(cA,{mode:"wait",children:n&&q.jsx(Wh.div,{initial:"hidden",animate:"visible",exit:"exit",variants:l,transition:{duration:.2},className:"menu__animation",style:{width:e-20},children:q.jsx("img",{src:u,alt:"Totes Logo",className:c})},u)})},Qj=(t,e=150)=>{const[i,n]=G.useState("");return G.useEffect(()=>{const r=()=>{const s=window.scrollY+e,a=document.getElementById(t[0]);if(a&&s<a.offsetTop){n("");return}const o=t.find(l=>{const u=document.getElementById(l);return u&&u.offsetTop<=s&&u.offsetTop+u.offsetHeight>s});o&&n(o)};return window.addEventListener("scroll",r),r(),()=>window.removeEventListener("scroll",r)},[t,e]),i};var pN={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IR=ai.createContext&&ai.createContext(pN),Xj=["attr","size","title"];function Zj(t,e){if(t==null)return{};var i=Jj(t,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Jj(t,e){if(t==null)return{};var i={};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){if(e.indexOf(n)>=0)continue;i[n]=t[n]}return i}function y0(){return y0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},y0.apply(this,arguments)}function LR(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function E0(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?LR(Object(i),!0).forEach(function(n){eY(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):LR(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function eY(t,e,i){return e=tY(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function tY(t){var e=iY(t,"string");return typeof e=="symbol"?e:e+""}function iY(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gN(t){return t&&t.map((e,i)=>ai.createElement(e.tag,E0({key:i},e.attr),gN(e.child)))}function Nf(t){return e=>ai.createElement(nY,y0({attr:E0({},t.attr)},e),gN(t.child))}function nY(t){var e=i=>{var{attr:n,size:r,title:s}=t,a=Zj(t,Xj),o=r||i.size||"1em",l;return i.className&&(l=i.className),t.className&&(l=(l?l+" ":"")+t.className),ai.createElement("svg",y0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},i.attr,n,a,{className:l,style:E0(E0({color:t.color||i.color},i.style),t.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),s&&ai.createElement("title",null,s),t.children)};return IR!==void 0?ai.createElement(IR.Consumer,null,i=>e(i)):e(pN)}function rY(t){return Nf({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"},child:[]}]})(t)}function sY(t){return Nf({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"},child:[]}]})(t)}function aY(t){return Nf({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm200 248c0 22.5-3.9 44.2-10.8 64.4h-20.3c-4.3 0-8.4-1.7-11.4-4.8l-32-32.6c-4.5-4.6-4.5-12.1.1-16.7l12.5-12.5v-8.7c0-3-1.2-5.9-3.3-8l-9.4-9.4c-2.1-2.1-5-3.3-8-3.3h-16c-6.2 0-11.3-5.1-11.3-11.3 0-3 1.2-5.9 3.3-8l9.4-9.4c2.1-2.1 5-3.3 8-3.3h32c6.2 0 11.3-5.1 11.3-11.3v-9.4c0-6.2-5.1-11.3-11.3-11.3h-36.7c-8.8 0-16 7.2-16 16v4.5c0 6.9-4.4 13-10.9 15.2l-31.6 10.5c-3.3 1.1-5.5 4.1-5.5 7.6v2.2c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8s-3.6-8-8-8H247c-3 0-5.8 1.7-7.2 4.4l-9.4 18.7c-2.7 5.4-8.2 8.8-14.3 8.8H194c-8.8 0-16-7.2-16-16V199c0-4.2 1.7-8.3 4.7-11.3l20.1-20.1c4.6-4.6 7.2-10.9 7.2-17.5 0-3.4 2.2-6.5 5.5-7.6l40-13.3c1.7-.6 3.2-1.5 4.4-2.7l26.8-26.8c2.1-2.1 3.3-5 3.3-8 0-6.2-5.1-11.3-11.3-11.3H258l-16 16v8c0 4.4-3.6 8-8 8h-16c-4.4 0-8-3.6-8-8v-20c0-2.5 1.2-4.9 3.2-6.4l28.9-21.7c1.9-.1 3.8-.3 5.7-.3C358.3 56 448 145.7 448 256zM130.1 149.1c0-3 1.2-5.9 3.3-8l25.4-25.4c2.1-2.1 5-3.3 8-3.3 6.2 0 11.3 5.1 11.3 11.3v16c0 3-1.2 5.9-3.3 8l-9.4 9.4c-2.1 2.1-5 3.3-8 3.3h-16c-6.2 0-11.3-5.1-11.3-11.3zm128 306.4v-7.1c0-8.8-7.2-16-16-16h-20.2c-10.8 0-26.7-5.3-35.4-11.8l-22.2-16.7c-11.5-8.6-18.2-22.1-18.2-36.4v-23.9c0-16 8.4-30.8 22.1-39l42.9-25.7c7.1-4.2 15.2-6.5 23.4-6.5h31.2c10.9 0 21.4 3.9 29.6 10.9l43.2 37.1h18.3c8.5 0 16.6 3.4 22.6 9.4l17.3 17.3c3.4 3.4 8.1 5.3 12.9 5.3H423c-32.4 58.9-93.8 99.5-164.9 103.1z"},child:[]}]})(t)}const oY={hidden:{opacity:0,scale:.95,y:-8},visible:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.98,y:8}},lY=({isMenuOpen:t})=>{var o;const{i18n:e,t:i}=vl(),[n,r]=G.useState(!1),s=(o=e.language)!=null&&o.startsWith("sv")?"sv":"en",a=l=>{e.changeLanguage(l),r(!1)};return q.jsxs(q.Fragment,{children:[q.jsx("button",{className:`menu__lang-btn ${t?"menu__lang-btn--floating":""}`,"aria-label":i("lang.change"),onClick:()=>r(!0),type:"button",children:q.jsx(aY,{})}),q.jsx(cA,{children:n&&q.jsx(Wh.div,{className:"lang-modal__backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>r(!1),children:q.jsxs(Wh.div,{className:"lang-modal",variants:oY,initial:"hidden",animate:"visible",exit:"exit",onClick:l=>l.stopPropagation(),children:[q.jsxs("button",{className:`lang-modal__option ${s==="en"?"is-active":""}`,onClick:()=>a("en"),type:"button","aria-label":"English",children:[q.jsx("span",{className:"flag",children:""}),q.jsx("span",{children:i("lang.english")})]}),q.jsxs("button",{className:`lang-modal__option ${s==="sv"?"is-active":""}`,onClick:()=>a("sv"),type:"button","aria-label":"Svenska",children:[q.jsx("span",{className:"flag",children:""}),q.jsx("span",{children:i("lang.swedish")})]})]})})})]})},uY=({isMobile:t,isOpen:e,setIsOpen:i})=>{const[n,r]=G.useState(300),a=Qj(["music","live","about"]);return G.useEffect(()=>{const o=()=>{r(window.innerWidth>=768?500:220)};return o(),window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]),q.jsxs("nav",{className:"menu",children:[q.jsx("div",{onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"menu__logo",children:q.jsx(zj,{isMobile:t,isOpen:e,menuWidth:n})}),q.jsxs("div",{className:"menu__controls",children:[q.jsx("div",{className:"menu__icon",onClick:()=>i(!e),children:e?q.jsx(QW,{fontSize:"medium"}):q.jsx(zW,{fontSize:"large"})}),t&&e?q.jsx(q.Fragment,{}):q.jsx(lY,{isMenuOpen:e,isMobile:t})]}),q.jsx(Wh.div,{className:"menu__animation",animate:{width:e?n:0},initial:{width:0},transition:{duration:.3},children:e&&q.jsx(Yj,{activeSection:a})})]})},Qv=({sectionName:t,children:e,className:i})=>q.jsx("section",{id:t,className:`section ${t} ${i&&i}`,children:e}),cY="/assets/tes-BqBdhu8N.png",vN="/assets/totespic-Bl19i_zG.png",yN="/assets/totesabout-CPwP9Cq1.jpg",dY=({isMobile:t,isMenuOpen:e})=>q.jsxs(Qv,{sectionName:"hero",children:[q.jsx("div",{className:"logo-top",children:!e&&t?q.jsx("img",{src:U1,alt:"Totes Logo",className:"logo-img"}):!t&&q.jsx("img",{src:U1,alt:"Totes Logo",className:"logo-img logo-img--desk"})}),q.jsxs("div",{className:"hero-bottom-row",children:[t?q.jsx("img",{src:yN,alt:"Band",className:"band-img band-img--mobile"}):q.jsx("img",{src:vN,alt:"Band",className:"band-img"}),q.jsx("div",{className:"logo-bottom",children:q.jsx("img",{src:cY,alt:"Totes Logo",className:"logo-img"})})]})]});var hY=Object.create,EN=Object.defineProperty,fY=Object.getOwnPropertyDescriptor,mY=Object.getOwnPropertyNames,pY=Object.getPrototypeOf,gY=Object.prototype.hasOwnProperty,TN=function(t,e){return function(){return t&&(e=t(t=0)),e}},Xi=function(t,e){return function(){return e||t((e={exports:{}}).exports,e),e.exports}},vY=function(t,e,i,n){if(e&&typeof e=="object"||typeof e=="function")for(var r=mY(e),s=0,a=r.length,o;s<a;s++)o=r[s],!gY.call(t,o)&&o!==i&&EN(t,o,{get:(function(l){return e[l]}).bind(null,o),enumerable:!(n=fY(e,o))||n.enumerable});return t},Sn=function(t,e,i){return i=t!=null?hY(pY(t)):{},vY(e||!t||!t.__esModule?EN(i,"default",{value:t,enumerable:!0}):i,t)},mr=Xi(function(t,e){var i;typeof window<"u"?i=window:typeof global<"u"?i=global:typeof self<"u"?i=self:i={},e.exports=i});function yl(t,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](t):yl(t,e)}var El=TN(function(){El()});function bN(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}var SN=TN(function(){}),_N=Xi(function(t,e){var i=Array.prototype.slice;e.exports=n;function n(r,s){for(("length"in r)||(r=[r]),r=i.call(r);r.length;){var a=r.shift(),o=s(a);if(o)return o;a.childNodes&&a.childNodes.length&&(r=i.call(a.childNodes).concat(r))}}}),yY=Xi(function(t,e){El(),e.exports=i;function i(n,r){if(!yl(this,i))return new i(n,r);this.data=n,this.nodeValue=n,this.length=n.length,this.ownerDocument=r||null}i.prototype.nodeType=8,i.prototype.nodeName="#comment",i.prototype.toString=function(){return"[object Comment]"}}),EY=Xi(function(t,e){El(),e.exports=i;function i(n,r){if(!yl(this,i))return new i(n);this.data=n||"",this.length=this.data.length,this.ownerDocument=r||null}i.prototype.type="DOMTextNode",i.prototype.nodeType=3,i.prototype.nodeName="#text",i.prototype.toString=function(){return this.data},i.prototype.replaceData=function(n,r,s){var a=this.data,o=a.substring(0,n),l=a.substring(n+r,a.length);this.data=o+s+l,this.length=this.data.length}}),AN=Xi(function(t,e){e.exports=i;function i(n){var r=this,s=n.type;n.target||(n.target=r),r.listeners||(r.listeners={});var a=r.listeners[s];if(a)return a.forEach(function(o){n.currentTarget=r,typeof o=="function"?o(n):o.handleEvent(n)});r.parentNode&&r.parentNode.dispatchEvent(n)}}),xN=Xi(function(t,e){e.exports=i;function i(n,r){var s=this;s.listeners||(s.listeners={}),s.listeners[n]||(s.listeners[n]=[]),s.listeners[n].indexOf(r)===-1&&s.listeners[n].push(r)}}),kN=Xi(function(t,e){e.exports=i;function i(n,r){var s=this;if(s.listeners&&s.listeners[n]){var a=s.listeners[n],o=a.indexOf(r);o!==-1&&a.splice(o,1)}}}),TY=Xi(function(t,e){SN(),e.exports=n;var i=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function n(h){switch(h.nodeType){case 3:return c(h.data);case 8:return"<!--"+h.data+"-->";default:return r(h)}}function r(h){var f=[],m=h.tagName;return h.namespaceURI==="http://www.w3.org/1999/xhtml"&&(m=m.toLowerCase()),f.push("<"+m+u(h)+o(h)),i.indexOf(m)>-1?f.push(" />"):(f.push(">"),h.childNodes.length?f.push.apply(f,h.childNodes.map(n)):h.textContent||h.innerText?f.push(c(h.textContent||h.innerText)):h.innerHTML&&f.push(h.innerHTML),f.push("</"+m+">")),f.join("")}function s(h,f){var m=bN(h[f]);return f==="style"&&Object.keys(h.style).length>0?!0:h.hasOwnProperty(f)&&(m==="string"||m==="boolean"||m==="number")&&f!=="nodeName"&&f!=="className"&&f!=="tagName"&&f!=="textContent"&&f!=="innerText"&&f!=="namespaceURI"&&f!=="innerHTML"}function a(h){if(typeof h=="string")return h;var f="";return Object.keys(h).forEach(function(m){var p=h[m];m=m.replace(/[A-Z]/g,function(y){return"-"+y.toLowerCase()}),f+=m+":"+p+";"}),f}function o(h){var f=h.dataset,m=[];for(var p in f)m.push({name:"data-"+p,value:f[p]});return m.length?l(m):""}function l(h){var f=[];return h.forEach(function(m){var p=m.name,y=m.value;p==="style"&&(y=a(y)),f.push(p+'="'+d(y)+'"')}),f.length?" "+f.join(" "):""}function u(h){var f=[];for(var m in h)s(h,m)&&f.push({name:m,value:h[m]});for(var p in h._attributes)for(var y in h._attributes[p]){var g=h._attributes[p][y],v=(g.prefix?g.prefix+":":"")+y;f.push({name:v,value:g.value})}return h.className&&f.push({name:"class",value:h.className}),f.length?l(f):""}function c(h){var f="";return typeof h=="string"?f=h:h&&(f=h.toString()),f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(h){return c(h).replace(/"/g,"&quot;")}}),IN=Xi(function(t,e){El();var i=_N(),n=AN(),r=xN(),s=kN(),a=TY(),o="http://www.w3.org/1999/xhtml";e.exports=l;function l(u,c,d){if(!yl(this,l))return new l(u);var h=d===void 0?o:d||null;this.tagName=h===o?String(u).toUpperCase():u,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=c||null,this.namespaceURI=h,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(u){return u.parentNode&&u.parentNode.removeChild(u),this.childNodes.push(u),u.parentNode=this,u},l.prototype.replaceChild=function(u,c){u.parentNode&&u.parentNode.removeChild(u);var d=this.childNodes.indexOf(c);return c.parentNode=null,this.childNodes[d]=u,u.parentNode=this,c},l.prototype.removeChild=function(u){var c=this.childNodes.indexOf(u);return this.childNodes.splice(c,1),u.parentNode=null,u},l.prototype.insertBefore=function(u,c){u.parentNode&&u.parentNode.removeChild(u);var d=c==null?-1:this.childNodes.indexOf(c);return d>-1?this.childNodes.splice(d,0,u):this.childNodes.push(u),u.parentNode=this,u},l.prototype.setAttributeNS=function(u,c,d){var h=null,f=c,m=c.indexOf(":");if(m>-1&&(h=c.substr(0,m),f=c.substr(m+1)),this.tagName==="INPUT"&&c==="type")this.type=d;else{var p=this._attributes[u]||(this._attributes[u]={});p[f]={value:d,prefix:h}}},l.prototype.getAttributeNS=function(u,c){var d=this._attributes[u],h=d&&d[c]&&d[c].value;return this.tagName==="INPUT"&&c==="type"?this.type:typeof h!="string"?null:h},l.prototype.removeAttributeNS=function(u,c){var d=this._attributes[u];d&&delete d[c]},l.prototype.hasAttributeNS=function(u,c){var d=this._attributes[u];return!!d&&c in d},l.prototype.setAttribute=function(u,c){return this.setAttributeNS(null,u,c)},l.prototype.getAttribute=function(u){return this.getAttributeNS(null,u)},l.prototype.removeAttribute=function(u){return this.removeAttributeNS(null,u)},l.prototype.hasAttribute=function(u){return this.hasAttributeNS(null,u)},l.prototype.removeEventListener=s,l.prototype.addEventListener=r,l.prototype.dispatchEvent=n,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(u){var c=u.split(" "),d=[];return i(this,function(h){if(h.nodeType===1){var f=h.className||"",m=f.split(" ");c.every(function(p){return m.indexOf(p)!==-1})&&d.push(h)}}),d},l.prototype.getElementsByTagName=function(u){u=u.toLowerCase();var c=[];return i(this.childNodes,function(d){d.nodeType===1&&(u==="*"||d.tagName.toLowerCase()===u)&&c.push(d)}),c},l.prototype.contains=function(u){return i(this,function(c){return u===c})||!1}}),bY=Xi(function(t,e){El();var i=IN();e.exports=n;function n(r){if(!yl(this,n))return new n;this.childNodes=[],this.parentNode=null,this.ownerDocument=r||null}n.prototype.type="DocumentFragment",n.prototype.nodeType=11,n.prototype.nodeName="#document-fragment",n.prototype.appendChild=i.prototype.appendChild,n.prototype.replaceChild=i.prototype.replaceChild,n.prototype.removeChild=i.prototype.removeChild,n.prototype.toString=function(){return this.childNodes.map(function(r){return String(r)}).join("")}}),SY=Xi(function(t,e){e.exports=i;function i(n){}i.prototype.initEvent=function(n,r,s){this.type=n,this.bubbles=r,this.cancelable=s},i.prototype.preventDefault=function(){}}),_Y=Xi(function(t,e){El();var i=_N(),n=yY(),r=EY(),s=IN(),a=bY(),o=SY(),l=AN(),u=xN(),c=kN();e.exports=d;function d(){if(!yl(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var h=d.prototype;h.createTextNode=function(f){return new r(f,this)},h.createElementNS=function(f,m){var p=f===null?null:String(f);return new s(m,this,p)},h.createElement=function(f){return new s(f,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(f){return new o(f)},h.createComment=function(f){return new n(f,this)},h.getElementById=function(f){f=String(f);var m=i(this.childNodes,function(p){if(String(p.id)===f)return p});return m||null},h.getElementsByClassName=s.prototype.getElementsByClassName,h.getElementsByTagName=s.prototype.getElementsByTagName,h.contains=s.prototype.contains,h.removeEventListener=c,h.addEventListener=u,h.dispatchEvent=l}),AY=Xi(function(t,e){var i=_Y();e.exports=new i}),LN=Xi(function(t,e){var i=typeof global<"u"?global:typeof window<"u"?window:{},n=AY(),r;typeof document<"u"?r=document:(r=i["__GLOBAL_DOCUMENT_CACHE@4"],r||(r=i["__GLOBAL_DOCUMENT_CACHE@4"]=n)),e.exports=r});function xY(t){if(Array.isArray(t))return t}function kY(t,e){var i=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(i!=null){var n=[],r=!0,s=!1,a,o;try{for(i=i.call(t);!(r=(a=i.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,o=l}finally{try{!r&&i.return!=null&&i.return()}finally{if(s)throw o}}return n}}function IY(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B1(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function RN(t,e){if(t){if(typeof t=="string")return B1(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(i);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B1(t,e)}}function Bs(t,e){return xY(t)||kY(t,e)||RN(t,e)||IY()}var ch=Sn(mr()),RR=Sn(mr()),LY=Sn(mr()),RY={now:function(){var t=LY.default.performance,e=t&&t.timing,i=e&&e.navigationStart,n=typeof i=="number"&&typeof t.now=="function"?i+t.now():Date.now();return Math.round(n)}},jt=RY,Xh=function(){var t,e,i;if(typeof((t=RR.default.crypto)===null||t===void 0?void 0:t.getRandomValues)=="function"){i=new Uint8Array(32),RR.default.crypto.getRandomValues(i);for(var n=0;n<32;n++)i[n]=i[n]%16}else{i=[];for(var r=0;r<32;r++)i[r]=Math.random()*16|0}var s=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var u=l==="x"?i[s]:i[s]&3|8;return s++,u.toString(16)});var a=jt.now(),o=a==null?void 0:a.toString(16).substring(3);return o?e.substring(0,28)+o:e},wN=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},Xn=function(t){if(t&&typeof t.nodeName<"u")return t.muxId||(t.muxId=wN()),t.muxId;var e;try{e=document.querySelector(t)}catch{}return e&&!e.muxId&&(e.muxId=t),(e==null?void 0:e.muxId)||t},T0=function(t){var e;t&&typeof t.nodeName<"u"?(e=t,t=Xn(e)):e=document.querySelector(t);var i=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,t,i]};function wY(t){if(Array.isArray(t))return B1(t)}function CY(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function DY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zn(t){return wY(t)||CY(t)||RN(t)||DY()}var Co={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},PY=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,i,n,r,s,a,o=t?[console,t]:[console],l=(i=console.trace).bind.apply(i,Zn(o)),u=(n=console.info).bind.apply(n,Zn(o)),c=(r=console.debug).bind.apply(r,Zn(o)),d=(s=console.warn).bind.apply(s,Zn(o)),h=(a=console.error).bind.apply(a,Zn(o)),f=e;return{trace:function(){for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];if(!(f>Co.TRACE))return l.apply(void 0,Zn(p))},debug:function(){for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];if(!(f>Co.DEBUG))return c.apply(void 0,Zn(p))},info:function(){for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];if(!(f>Co.INFO))return u.apply(void 0,Zn(p))},warn:function(){for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];if(!(f>Co.WARN))return d.apply(void 0,Zn(p))},error:function(){for(var m=arguments.length,p=new Array(m),y=0;y<m;y++)p[y]=arguments[y];if(!(f>Co.ERROR))return h.apply(void 0,Zn(p))},get level(){return f},set level(m){m!==this.level&&(f=m??e)}}},Je=PY("[mux]"),TE=Sn(mr());function V1(){var t=TE.default.doNotTrack||TE.default.navigator&&TE.default.navigator.doNotTrack;return t==="1"}function ge(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}El();function li(t,e){if(!yl(t,e))throw new TypeError("Cannot call a class as a function")}function wR(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ss(t,e,i){return e&&wR(t.prototype,e),i&&wR(t,i),t}function J(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xc(t){return xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},xc(t)}function OY(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=xc(t),t!==null););return t}function gp(t,e,i){return typeof Reflect<"u"&&Reflect.get?gp=Reflect.get:gp=function(n,r,s){var a=OY(n,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(s||n):o.value}},gp(t,e,i||t)}function H1(t,e){return H1=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},H1(t,e)}function MY(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&H1(t,e)}function NY(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}SN();function $Y(t,e){return e&&(bN(e)==="object"||typeof e=="function")?e:ge(t)}function FY(t){var e=NY();return function(){var i=xc(t),n;if(e){var r=xc(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return $Y(this,n)}}var or=function(t){return Zh(t)[0]},Zh=function(t){if(typeof t!="string"||t==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,i=t.match(e)||[],n=i[4],r;return n&&(r=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,r]},bE=Sn(mr()),UY={exists:function(){var t=bE.default.performance,e=t&&t.timing;return e!==void 0},domContentLoadedEventEnd:function(){var t=bE.default.performance,e=t&&t.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var t=bE.default.performance,e=t&&t.timing;return e&&e.navigationStart}},b0=UY;function Gt(t,e,i){i=i===void 0?1:i,t[e]=t[e]||0,t[e]+=i}function S0(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{},n=Object.keys(i);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable}))),n.forEach(function(r){J(t,r,i[r])})}return t}function BY(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function SA(t,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):BY(Object(e)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))}),t}var VY=["x-cdn","content-type"],CN=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],HY=VY.concat(CN);function _A(t){t=t||"";var e={},i=t.trim().split(/[\r\n]+/);return i.forEach(function(n){if(n){var r=n.split(": "),s=r.shift();s&&(HY.indexOf(s.toLowerCase())>=0||s.toLowerCase().indexOf("x-litix-")===0)&&(e[s]=r.join(": "))}}),e}function _0(t){if(t){var e=CN.find(function(i){return t[i]!==void 0});return e?t[e]:void 0}}var KY=function(t){var e={};for(var i in t){var n=t[i],r=n["DATA-ID"].search("io.litix.data.");if(r!==-1){var s=n["DATA-ID"].replace("io.litix.data.","");e[s]=n.VALUE}}return e},DN=KY,pm=function(t){if(!t)return{};var e=b0.navigationStart(),i=t.loading,n=i?i.start:t.trequest,r=i?i.first:t.tfirst,s=i?i.end:t.tload;return{bytesLoaded:t.total,requestStart:Math.round(e+n),responseStart:Math.round(e+r),responseEnd:Math.round(e+s)}},sd=function(t){if(!(!t||typeof t.getAllResponseHeaders!="function"))return _A(t.getAllResponseHeaders())},GY=function(t,e,i){var n=arguments.length>4?arguments[4]:void 0,r=t.log,s=t.utils.secondsToMs,a=function(y){var g=parseInt(n.version),v;return g===1&&y.programDateTime!==null&&(v=y.programDateTime),g===0&&y.pdt!==null&&(v=y.pdt),v};if(!b0.exists()){r.warn("performance timing not supported. Not tracking HLS.js.");return}var o=function(y,g){return t.emit(e,y,g)},l=function(y,g){var v=g.levels,E=g.audioTracks,T=g.url,_=g.stats,x=g.networkDetails,A=g.sessionData,I={},L={};v.forEach(function(B,U){I[U]={width:B.width,height:B.height,bitrate:B.bitrate,attrs:B.attrs}}),E.forEach(function(B,U){L[U]={name:B.name,language:B.lang,bitrate:B.bitrate}});var b=pm(_),R=b.bytesLoaded,P=b.requestStart,w=b.responseStart,$=b.responseEnd;o("requestcompleted",SA(S0({},DN(A)),{request_event_type:y,request_bytes_loaded:R,request_start:P,request_response_start:w,request_response_end:$,request_type:"manifest",request_hostname:or(T),request_response_headers:sd(x),request_rendition_lists:{media:I,audio:L,video:{}}}))};i.on(n.Events.MANIFEST_LOADED,l);var u=function(y,g){var v=g.details,E=g.level,T=g.networkDetails,_=g.stats,x=pm(_),A=x.bytesLoaded,I=x.requestStart,L=x.responseStart,b=x.responseEnd,R=v.fragments[v.fragments.length-1],P=a(R)+s(R.duration);o("requestcompleted",{request_event_type:y,request_bytes_loaded:A,request_start:I,request_response_start:L,request_response_end:b,request_current_level:E,request_type:"manifest",request_hostname:or(v.url),request_response_headers:sd(T),video_holdback:v.holdBack&&s(v.holdBack),video_part_holdback:v.partHoldBack&&s(v.partHoldBack),video_part_target_duration:v.partTarget&&s(v.partTarget),video_target_duration:v.targetduration&&s(v.targetduration),video_source_is_live:v.live,player_manifest_newest_program_time:isNaN(P)?void 0:P})};i.on(n.Events.LEVEL_LOADED,u);var c=function(y,g){var v=g.details,E=g.networkDetails,T=g.stats,_=pm(T),x=_.bytesLoaded,A=_.requestStart,I=_.responseStart,L=_.responseEnd;o("requestcompleted",{request_event_type:y,request_bytes_loaded:x,request_start:A,request_response_start:I,request_response_end:L,request_type:"manifest",request_hostname:or(v.url),request_response_headers:sd(E)})};i.on(n.Events.AUDIO_TRACK_LOADED,c);var d=function(y,g){var v=g.stats,E=g.networkDetails,T=g.frag;v=v||T.stats;var _=pm(v),x=_.bytesLoaded,A=_.requestStart,I=_.responseStart,L=_.responseEnd,b=E?sd(E):void 0,R={request_event_type:y,request_bytes_loaded:x,request_start:A,request_response_start:I,request_response_end:L,request_hostname:E?or(E.responseURL):void 0,request_id:b?_0(b):void 0,request_response_headers:b,request_media_duration:T.duration,request_url:E==null?void 0:E.responseURL};T.type==="main"?(R.request_type="media",R.request_current_level=T.level,R.request_video_width=(i.levels[T.level]||{}).width,R.request_video_height=(i.levels[T.level]||{}).height,R.request_labeled_bitrate=(i.levels[T.level]||{}).bitrate):R.request_type=T.type,o("requestcompleted",R)};i.on(n.Events.FRAG_LOADED,d);var h=function(y,g){var v=g.frag,E=v.start,T=a(v),_={currentFragmentPDT:T,currentFragmentStart:s(E)};o("fragmentchange",_)};i.on(n.Events.FRAG_CHANGED,h);var f=function(y,g){var v=g.type,E=g.details,T=g.response,_=g.fatal,x=g.frag,A=g.networkDetails,I=(x==null?void 0:x.url)||g.url||"",L=A?sd(A):void 0;if((E===n.ErrorDetails.MANIFEST_LOAD_ERROR||E===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||E===n.ErrorDetails.FRAG_LOAD_ERROR||E===n.ErrorDetails.FRAG_LOAD_TIMEOUT||E===n.ErrorDetails.LEVEL_LOAD_ERROR||E===n.ErrorDetails.LEVEL_LOAD_TIMEOUT||E===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||E===n.ErrorDetails.SUBTITLE_LOAD_ERROR||E===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||E===n.ErrorDetails.KEY_LOAD_ERROR||E===n.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:E,request_url:I,request_hostname:or(I),request_id:L?_0(L):void 0,request_type:E===n.ErrorDetails.FRAG_LOAD_ERROR||E===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":E===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||E===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":E===n.ErrorDetails.SUBTITLE_LOAD_ERROR||E===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":E===n.ErrorDetails.KEY_LOAD_ERROR||E===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:T==null?void 0:T.code,request_error_text:T==null?void 0:T.text}),_){var b,R="".concat(I?"url: ".concat(I,`
`):"")+"".concat(T&&(T.code||T.text)?"response: ".concat(T.code,", ").concat(T.text,`
`):"")+"".concat(g.reason?"failure reason: ".concat(g.reason,`
`):"")+"".concat(g.level?"level: ".concat(g.level,`
`):"")+"".concat(g.parent?"parent stream controller: ".concat(g.parent,`
`):"")+"".concat(g.buffer?"buffer length: ".concat(g.buffer,`
`):"")+"".concat(g.error?"error: ".concat(g.error,`
`):"")+"".concat(g.event?"event: ".concat(g.event,`
`):"")+"".concat(g.err?"error message: ".concat((b=g.err)===null||b===void 0?void 0:b.message,`
`):"");o("error",{player_error_code:v,player_error_message:E,player_error_context:R})}};i.on(n.Events.ERROR,f);var m=function(y,g){var v=g.frag,E=v&&v._url||"";o("requestcanceled",{request_event_type:y,request_url:E,request_type:"media",request_hostname:or(E)})};i.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var p=function(y,g){var v=g.level,E=i.levels[v];if(E&&E.attrs&&E.attrs.BANDWIDTH){var T=E.attrs.BANDWIDTH,_,x=parseFloat(E.attrs["FRAME-RATE"]);isNaN(x)||(_=x),T?o("renditionchange",{video_source_fps:_,video_source_bitrate:T,video_source_width:E.width,video_source_height:E.height,video_source_rendition_name:E.name,video_source_codec:E==null?void 0:E.videoCodec}):r.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};i.on(n.Events.LEVEL_SWITCHED,p),i._stopMuxMonitor=function(){i.off(n.Events.MANIFEST_LOADED,l),i.off(n.Events.LEVEL_LOADED,u),i.off(n.Events.AUDIO_TRACK_LOADED,c),i.off(n.Events.FRAG_LOADED,d),i.off(n.Events.FRAG_CHANGED,h),i.off(n.Events.ERROR,f),i.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),i.off(n.Events.LEVEL_SWITCHED,p),i.off(n.Events.DESTROYING,i._stopMuxMonitor),delete i._stopMuxMonitor},i.on(n.Events.DESTROYING,i._stopMuxMonitor)},WY=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},CR=function(t,e){if(!t||!t.requestEndDate)return{};var i=or(t.url),n=t.url,r=t.bytesLoaded,s=new Date(t.requestStartDate).getTime(),a=new Date(t.firstByteDate).getTime(),o=new Date(t.requestEndDate).getTime(),l=isNaN(t.duration)?0:t.duration,u=typeof e.getMetricsFor=="function"?e.getMetricsFor(t.mediaType).HttpList:e.getDashMetrics().getHttpRequests(t.mediaType),c;u.length>0&&(c=_A(u[u.length-1]._responseHeaders||""));var d=c?_0(c):void 0;return{requestStart:s,requestResponseStart:a,requestResponseEnd:o,requestBytesLoaded:r,requestResponseHeaders:c,requestMediaDuration:l,requestHostname:i,requestUrl:n,requestId:d}},jY=function(t,e){var i=e.getQualityFor(t),n=e.getCurrentTrackFor(t).bitrateList;return n?{currentLevel:i,renditionWidth:n[i].width||null,renditionHeight:n[i].height||null,renditionBitrate:n[i].bandwidth}:{}},YY=function(t){var e;return(e=t.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},qY=function(t){try{var e,i,n=(i=t.getVersion)===null||i===void 0||(e=i.call(t))===null||e===void 0?void 0:e.split(".").map(function(r){return parseInt(r)})[0];return n}catch{return!1}},zY=function(t,e,i){var n=t.log;if(!i||!i.on){n.warn("Invalid dash.js player reference. Monitoring blocked.");return}var r=qY(i),s=function(v,E){return t.emit(e,v,E)},a=function(v){var E=v.type,T=v.data,_=(T||{}).url;s("requestcompleted",{request_event_type:E,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:or(_),request_url:_})};i.on("manifestLoaded",a);var o={},l=function(v){if(typeof v.getRequests!="function")return null;var E=v.getRequests({state:"executed"});return E.length===0?null:E[E.length-1]},u=function(v){var E=v.type,T=v.fragmentModel,_=v.chunk,x=l(T);c({type:E,request:x,chunk:_})},c=function(v){var E=v.type,T=v.chunk,_=v.request,x=(T||{}).mediaInfo,A=x||{},I=A.type,L=A.bitrateList;L=L||[];var b={};L.forEach(function(z,H){b[H]={},b[H].width=z.width,b[H].height=z.height,b[H].bitrate=z.bandwidth,b[H].attrs={}}),I==="video"?o.video=b:I==="audio"?o.audio=b:o.media=b;var R=CR(_,i),P=R.requestStart,w=R.requestResponseStart,$=R.requestResponseEnd,B=R.requestResponseHeaders,U=R.requestMediaDuration,V=R.requestHostname,C=R.requestUrl,K=R.requestId;s("requestcompleted",{request_event_type:E,request_start:P,request_response_start:w,request_response_end:$,request_bytes_loaded:-1,request_type:I+"_init",request_response_headers:B,request_hostname:V,request_id:K,request_url:C,request_media_duration:U,request_rendition_lists:o})};r>=4?i.on("initFragmentLoaded",c):i.on("initFragmentLoaded",u);var d=function(v){var E=v.type,T=v.fragmentModel,_=v.chunk,x=l(T);h({type:E,request:x,chunk:_})},h=function(v){var E=v.type,T=v.chunk,_=v.request,x=T||{},A=x.mediaInfo,I=x.start,L=A||{},b=L.type,R=CR(_,i),P=R.requestStart,w=R.requestResponseStart,$=R.requestResponseEnd,B=R.requestBytesLoaded,U=R.requestResponseHeaders,V=R.requestMediaDuration,C=R.requestHostname,K=R.requestUrl,z=R.requestId,H=jY(b,i),Y=H.currentLevel,oe=H.renditionWidth,pe=H.renditionHeight,fe=H.renditionBitrate;s("requestcompleted",{request_event_type:E,request_start:P,request_response_start:w,request_response_end:$,request_bytes_loaded:B,request_type:b,request_response_headers:U,request_hostname:C,request_id:z,request_url:K,request_media_start_time:I,request_media_duration:V,request_current_level:Y,request_labeled_bitrate:fe,request_video_width:oe,request_video_height:pe})};r>=4?i.on("mediaFragmentLoaded",h):i.on("mediaFragmentLoaded",d);var f={video:void 0,audio:void 0,totalBitrate:void 0},m=function(){if(f.video&&typeof f.video.bitrate=="number"){if(!(f.video.width&&f.video.height)){n.warn("have bitrate info for video but missing width/height");return}var v=f.video.bitrate;if(f.audio&&typeof f.audio.bitrate=="number"&&(v+=f.audio.bitrate),v!==f.totalBitrate)return f.totalBitrate=v,{video_source_bitrate:v,video_source_height:f.video.height,video_source_width:f.video.width,video_source_codec:YY(f.video.codec)}}},p=function(v,E,T){if(typeof v.newQuality!="number"){n.warn("missing evt.newQuality in qualityChangeRendered event",v);return}var _=v.mediaType;if(_==="audio"||_==="video"){var x=i.getBitrateInfoListFor(_).find(function(I){var L=I.qualityIndex;return L===v.newQuality});if(!(x&&typeof x.bitrate=="number")){n.warn("missing bitrate info for ".concat(_));return}f[_]=SA(S0({},x),{codec:i.getCurrentTrackFor(_).codec});var A=m();A&&s("renditionchange",A)}};i.on("qualityChangeRendered",p);var y=function(v){var E=v.request,T=v.mediaType;E=E||{},s("requestcanceled",{request_event_type:E.type+"_"+E.action,request_url:E.url,request_type:T,request_hostname:or(E.url)})};i.on("fragmentLoadingAbandoned",y);var g=function(v){var E=v.error,T,_,x=(E==null||(T=E.data)===null||T===void 0?void 0:T.request)||{},A=(E==null||(_=E.data)===null||_===void 0?void 0:_.response)||{};(E==null?void 0:E.code)===27&&s("requestfailed",{request_error:x.type+"_"+x.action,request_url:x.url,request_hostname:or(x.url),request_type:x.mediaType,request_error_code:A.status,request_error_text:A.statusText});var I="".concat(x!=null&&x.url?"url: ".concat(x.url,`
`):"")+"".concat(A!=null&&A.status||A!=null&&A.statusText?"response: ".concat(A==null?void 0:A.status,", ").concat(A==null?void 0:A.statusText,`
`):"");s("error",{player_error_code:E==null?void 0:E.code,player_error_message:E==null?void 0:E.message,player_error_context:I})};i.on("error",g),i._stopMuxMonitor=function(){i.off("manifestLoaded",a),i.off("initFragmentLoaded",c),i.off("mediaFragmentLoaded",h),i.off("qualityChangeRendered",p),i.off("error",g),i.off("fragmentLoadingAbandoned",y),delete i._stopMuxMonitor}},QY=function(t){t&&typeof t._stopMuxMonitor=="function"&&t._stopMuxMonitor()},DR=0,XY=function(){function t(){li(this,t),J(this,"_listeners",void 0)}return ss(t,[{key:"on",value:function(e,i,n){return i._eventEmitterGuid=i._eventEmitterGuid||++DR,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(i=i.bind(n)),this._listeners[e].push(i),i}},{key:"off",value:function(e,i){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(r,s){r._eventEmitterGuid===i._eventEmitterGuid&&n.splice(s,1)})}},{key:"one",value:function(e,i,n){var r=this;i._eventEmitterGuid=i._eventEmitterGuid||++DR;var s=function(){r.off(e,s),i.apply(n||this,arguments)};s._eventEmitterGuid=i._eventEmitterGuid,this.on(e,s)}},{key:"emit",value:function(e,i){var n=this;if(this._listeners){i=i||{};var r=this._listeners["before*"]||[],s=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(l,u){l=l.slice(),l.forEach(function(c){c.call(n,{type:e},u)})};o(r,i),o(s,i),o(a,i)}}}]),t}(),ZY=XY,SE=Sn(mr()),JY=function(){function t(e){var i=this;li(this,t),J(this,"_playbackHeartbeatInterval",void 0),J(this,"_playheadShouldBeProgressing",void 0),J(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){i._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?i._stopPlaybackHeartbeatInterval():i._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){i._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(n,r){i._playbackHeartbeatInterval!==null&&(SE.default.clearInterval(i._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:r.viewer_time}),i._playbackHeartbeatInterval=null)})}return ss(t,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=SE.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(SE.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),t}(),eq=JY,tq=function t(e){var i=this;li(this,t),J(this,"viewErrored",void 0),e.on("viewinit",function(){i.viewErrored=!1}),e.on("error",function(n,r){try{var s=e.errorTranslator({player_error_code:r.player_error_code,player_error_message:r.player_error_message,player_error_context:r.player_error_context,player_error_severity:r.player_error_severity,player_error_business_exception:r.player_error_business_exception});s&&(e.data.player_error_code=s.player_error_code||r.player_error_code,e.data.player_error_message=s.player_error_message||r.player_error_message,e.data.player_error_context=s.player_error_context||r.player_error_context,e.data.player_error_severity=s.player_error_severity||r.player_error_severity,e.data.player_error_business_exception=s.player_error_business_exception||r.player_error_business_exception,i.viewErrored=!0)}catch(a){e.mux.log.warn("Exception in error translator callback.",a),i.viewErrored=!0}}),e.on("aftererror",function(){var n,r,s,a,o;(n=e.data)===null||n===void 0||delete n.player_error_code,(r=e.data)===null||r===void 0||delete r.player_error_message,(s=e.data)===null||s===void 0||delete s.player_error_context,(a=e.data)===null||a===void 0||delete a.player_error_severity,(o=e.data)===null||o===void 0||delete o.player_error_business_exception})},iq=tq,nq=function(){function t(e){li(this,t),J(this,"_watchTimeTrackerLastCheckedTime",void 0),J(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return ss(t,[{key:"_updateWatchTime",value:function(e,i){var n=i.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=n),Gt(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,i){this._updateWatchTime(e,i),this._watchTimeTrackerLastCheckedTime=null}}]),t}(),rq=nq,sq=function(){function t(e){var i=this;li(this,t),J(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),J(this,"_lastTime",void 0),J(this,"_isAdPlaying",void 0),J(this,"_callbackUpdatePlaybackTime",void 0),J(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=jt.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var n=this._startPlaybackTimeTracking.bind(this);e.on("playing",n),e.on("adplaying",n),e.on("seeked",n);var r=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",r),e.on("seeking",r),e.on("adplaying",function(){i._isAdPlaying=!0}),e.on("adended",function(){i._isAdPlaying=!1}),e.on("adpause",function(){i._isAdPlaying=!1}),e.on("adbreakstart",function(){i._isAdPlaying=!1}),e.on("adbreakend",function(){i._isAdPlaying=!1}),e.on("adplay",function(){i._isAdPlaying=!1}),e.on("viewinit",function(){i._playbackTimeTrackerLastPlayheadPosition=-1,i._lastTime=jt.now(),i._isAdPlaying=!1,i._callbackUpdatePlaybackTime=null})}return ss(t,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,i=jt.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=i-this._lastTime),n>0&&n<=1e3&&Gt(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=i}}]),t}(),aq=sq,oq=function(){function t(e){li(this,t),J(this,"pm",void 0),this.pm=e;var i=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",i),e.on("playbackheartbeatend",i),e.on("timeupdate",i),e.on("destroy",function(){e.off("timeupdate",i)})}return ss(t,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,i){var n=this,r=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(i&&i.player_playhead_time)this.pm.data.player_playhead_time=i.player_playhead_time,r(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var s=this.pm.getPlayheadTime();typeof s<"u"&&(this.pm.data.player_playhead_time=s,r(),this._updateMaxPlayheadPosition())}}}]),t}(),lq=oq,PR=5*60*1e3,uq=function t(e){if(li(this,t),!e.disableRebufferTracking){var i,n=function(s,a){r(a),i=void 0},r=function(s){if(i){var a=s.viewer_time-i;Gt(e.data,"view_rebuffer_duration",a),i=s.viewer_time,e.data.view_rebuffer_duration>PR&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(PR,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(s,a){return r(a)}),e.on("rebufferstart",function(s,a){i||(Gt(e.data,"view_rebuffer_count",1),i=a.viewer_time,e.one("rebufferend",n))}),e.on("viewinit",function(){i=void 0,e.off("rebufferend",n)})}},cq=uq,dq=function(){function t(e){var i=this;li(this,t),J(this,"_lastCheckedTime",void 0),J(this,"_lastPlayheadTime",void 0),J(this,"_lastPlayheadTimeUpdatedTime",void 0),J(this,"_rebuffering",void 0),J(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){i._cleanupRebufferTracker(null,{viewer_time:jt.now()})}))}return ss(t,[{key:"_checkIfRebuffering",value:function(e,i){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,i);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(i.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,i,!0);return}var n=i.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=i.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:i.viewer_time});else{if(this._lastCheckedTime===null)return;var r=this.pm.data.player_playhead_time-this._lastPlayheadTime,s=i.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&r>0&&s-r>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+s-r}))}n?this._prepareRebufferTrackerState(i.viewer_time):this._clearRebufferTrackerState()}}]),t}(),hq=dq,fq=function(){function t(e){var i=this;li(this,t),J(this,"NAVIGATION_START",void 0),J(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var n=e.data,r=n.view_id;if(!n.view_program_changed){var s=function(a,o){var l=o.viewer_time;(a.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||a.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||i._inPrerollPosition()))&&i.calculateTimeToFirstFrame(l||jt.now(),r)};e.one("playing",s),e.one("adplaying",s),e.one("viewend",function(){e.off("playing",s),e.off("adplaying",s)})}})}return ss(t,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,i){i===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),t}(),mq=fq,pq=function t(e){var i=this;li(this,t),J(this,"_lastPlayerHeight",void 0),J(this,"_lastPlayerWidth",void 0),J(this,"_lastPlayheadPosition",void 0),J(this,"_lastSourceHeight",void 0),J(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){i._lastPlayheadPosition=-1});var n=["pause","rebufferstart","seeking","error","adbreakstart","hb","renditionchange","orientationchange","viewend"],r=["playing","hb","renditionchange","orientationchange"];n.forEach(function(s){e.on(s,function(){if(i._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&i._lastPlayerWidth>=0&&i._lastSourceWidth>0&&i._lastPlayerHeight>=0&&i._lastSourceHeight>0){var a=e.data.player_playhead_time-i._lastPlayheadPosition;if(a<0){i._lastPlayheadPosition=-1;return}var o=Math.min(i._lastPlayerWidth/i._lastSourceWidth,i._lastPlayerHeight/i._lastSourceHeight),l=Math.max(0,o-1),u=Math.max(0,1-o);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,l),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,u),Gt(e.data,"view_total_content_playback_time",a),Gt(e.data,"view_total_upscaling",l*a),Gt(e.data,"view_total_downscaling",u*a)}i._lastPlayheadPosition=-1})}),r.forEach(function(s){e.on(s,function(){i._lastPlayheadPosition=e.data.player_playhead_time,i._lastPlayerWidth=e.data.player_width,i._lastPlayerHeight=e.data.player_height,i._lastSourceWidth=e.data.video_source_width,i._lastSourceHeight=e.data.video_source_height})})},gq=pq,vq=2e3,yq=function t(e){var i=this;li(this,t),J(this,"isSeeking",void 0),this.isSeeking=!1;var n=-1,r=function(){var s=jt.now(),a=(e.data.viewer_time||s)-(n||s);Gt(e.data,"view_seek_duration",a),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,a),i.isSeeking=!1,n=-1};e.on("seeking",function(s,a){if(Object.assign(e.data,a),i.isSeeking&&a.viewer_time-n<=vq){n=a.viewer_time;return}i.isSeeking&&r(),i.isSeeking=!0,n=a.viewer_time,Gt(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){r()}),e.on("viewend",function(){i.isSeeking&&(r(),e.send("seeked")),i.isSeeking=!1,n=-1})},Eq=yq,OR=function(t,e){t.push(e),t.sort(function(i,n){return i.viewer_time-n.viewer_time})},Tq=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],bq=function(){function t(e){var i=this;li(this,t),J(this,"_adHasPlayed",void 0),J(this,"_adRequests",void 0),J(this,"_adResponses",void 0),J(this,"_currentAdRequestNumber",void 0),J(this,"_currentAdResponseNumber",void 0),J(this,"_prerollPlayTime",void 0),J(this,"_wouldBeNewAdPlay",void 0),J(this,"isAdBreak",void 0),J(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){i.isAdBreak=!1,i._currentAdRequestNumber=0,i._currentAdResponseNumber=0,i._adRequests=[],i._adResponses=[],i._adHasPlayed=!1,i._wouldBeNewAdPlay=!0,i._prerollPlayTime=void 0}),Tq.forEach(function(r){return e.on(r,i._updateAdData.bind(i))});var n=function(){i.isAdBreak=!1};e.on("adbreakstart",function(){i.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(r,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+i._currentAdRequestNumber++},s),OR(i._adRequests,s),Gt(e.data,"view_ad_request_count"),i.inPrerollPosition()&&(e.data.view_preroll_requested=!0,i._adHasPlayed||Gt(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+i._currentAdResponseNumber++},s),OR(i._adResponses,s);var a=i.findAdRequest(s.ad_request_id);a&&Gt(e.data,"view_ad_request_time",Math.max(0,s.viewer_time-a.viewer_time))}),e.on("adplay",function(r,s){i._adHasPlayed=!0,i._wouldBeNewAdPlay&&(i._wouldBeNewAdPlay=!1,Gt(e.data,"view_ad_played_count")),i.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,i._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,s.viewer_time-i._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,s.viewer_time-e.data.view_start)),i._prerollPlayTime=s.viewer_time)}),e.on("adplaying",function(r,s){i.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof i._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=s.viewer_time-i._prerollPlayTime,e.data.view_startup_preroll_load_time=s.viewer_time-i._prerollPlayTime)}),e.on("adclicked",function(r,s){i._wouldBeNewAdPlay||Gt(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(r,s){i._wouldBeNewAdPlay||Gt(e.data,"view_ad_skipped_count")}),e.on("adended",function(){i._wouldBeNewAdPlay=!0}),e.on("aderror",function(){i._wouldBeNewAdPlay=!0})}return ss(t,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var i=0;i<this._adRequests.length;i++)if(this._adRequests[i].ad_request_id===e)return this._adRequests[i]}},{key:"_updateAdData",value:function(e,i){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&i.ad_tag_url){var n=Bs(Zh(i.ad_tag_url),2),r=n[0],s=n[1];this.pm.data.view_preroll_ad_tag_domain=s,this.pm.data.view_preroll_ad_tag_hostname=r}if(!this.pm.data.view_preroll_ad_asset_hostname&&i.ad_asset_url){var a=Bs(Zh(i.ad_asset_url),2),o=a[0],l=a[1];this.pm.data.view_preroll_ad_asset_domain=l,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=i==null?void 0:i.ad_asset_url,this.pm.data.ad_tag_url=i==null?void 0:i.ad_tag_url,this.pm.data.ad_creative_id=i==null?void 0:i.ad_creative_id,this.pm.data.ad_id=i==null?void 0:i.ad_id,this.pm.data.ad_universal_id=i==null?void 0:i.ad_universal_id}}]),t}(),Sq=bq,MR=Sn(mr()),_q=function t(e){li(this,t);var i,n,r=function(){e.disableRebufferTracking||(Gt(e.data,"view_waiting_rebuffer_count",1),i=jt.now(),n=MR.default.setInterval(function(){if(i){var u=jt.now();Gt(e.data,"view_waiting_rebuffer_duration",u-i),i=u}},250))},s=function(){e.disableRebufferTracking||i&&(Gt(e.data,"view_waiting_rebuffer_duration",jt.now()-i),i=!1,MR.default.clearInterval(n))},a=!1,o=function(){a=!0},l=function(){a=!1,s()};e.on("waiting",function(){a&&r()}),e.on("playing",function(){s(),o()}),e.on("pause",l),e.on("seeking",l)},Aq=_q,xq=function t(e){var i=this;li(this,t),J(this,"lastWallClockTime",void 0);var n=function(){i.lastWallClockTime=jt.now(),e.on("before*",r)},r=function(s){var a=jt.now(),o=i.lastWallClockTime;i.lastWallClockTime=a,a-o>3e4&&(e.emit("devicesleep",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:a}),Object.assign(e.data,{viewer_time:a}),e.send("devicewake"))};e.one("playbackheartbeat",n),e.on("playbackheartbeatend",function(){e.off("before*",r),e.one("playbackheartbeat",n)})},kq=xq,_E=Sn(mr()),PN=function(t){return t()}(function(){var t=function(){for(var i=0,n={};i<arguments.length;i++){var r=arguments[i];for(var s in r)n[s]=r[s]}return n};function e(i){function n(r,s,a){var o;if(typeof document<"u"){if(arguments.length>1){if(a=t({path:"/"},n.defaults,a),typeof a.expires=="number"){var l=new Date;l.setMilliseconds(l.getMilliseconds()+a.expires*864e5),a.expires=l}try{o=JSON.stringify(s),/^[\{\[]/.test(o)&&(s=o)}catch{}return i.write?s=i.write(s,r):s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),r=encodeURIComponent(String(r)),r=r.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),r=r.replace(/[\(\)]/g,escape),document.cookie=[r,"=",s,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}r||(o={});for(var u=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,d=0;d<u.length;d++){var h=u[d].split("="),f=h.slice(1).join("=");f.charAt(0)==='"'&&(f=f.slice(1,-1));try{var m=h[0].replace(c,decodeURIComponent);if(f=i.read?i.read(f,m):i(f,m)||f.replace(c,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch{}if(r===m){o=f;break}r||(o[m]=f)}catch{}}return o}}return n.set=n,n.get=function(r){return n.call(n,r)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(r,s){n(r,"",t(s,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),ON="muxData",Iq=function(t){return Object.entries(t).map(function(e){var i=Bs(e,2),n=i[0],r=i[1];return"".concat(n,"=").concat(r)}).join("&")},Lq=function(t){return t.split("&").reduce(function(e,i){var n=Bs(i.split("="),2),r=n[0],s=n[1],a=+s,o=s&&a==s?a:s;return e[r]=o,e},{})},MN=function(){var t;try{t=Lq(PN.get(ON)||"")}catch{t={}}return t},NN=function(t){try{PN.set(ON,Iq(t),{expires:365})}catch{}},Rq=function(){var t=MN();return t.mux_viewer_id=t.mux_viewer_id||Xh(),t.msn=t.msn||Math.random(),NN(t),{mux_viewer_id:t.mux_viewer_id,mux_sample_number:t.msn}},wq=function(){var t=MN(),e=jt.now();return t.session_start&&(t.sst=t.session_start,delete t.session_start),t.session_id&&(t.sid=t.session_id,delete t.session_id),t.session_expires&&(t.sex=t.session_expires,delete t.session_expires),(!t.sex||t.sex<e)&&(t.sid=Xh(),t.sst=e),t.sex=e+25*60*1e3,NN(t),{session_id:t.sid,session_start:t.sst,session_expires:t.sex}};function Cq(t,e){var i=e.beaconCollectionDomain,n=e.beaconDomain;if(i)return"https://"+i;t=t||"inferred";var r=n||"litix.io";return t.match(/^[a-z0-9]+$/)?"https://"+t+"."+r:"https://img.litix.io/a.gif"}var Dq=Sn(mr()),$N=function(){var t;switch(FN()){case"cellular":t="cellular";break;case"ethernet":t="wired";break;case"wifi":t="wifi";break;case void 0:break;default:t="other"}return t},FN=function(){var t=Dq.default.navigator,e=t&&(t.connection||t.mozConnection||t.webkitConnection);return e&&e.type};$N.getConnectionFromAPI=FN;var Pq=$N,Oq={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},Mq=UN(Oq),Nq={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},NR=UN(Nq);function UN(t){var e={};for(var i in t)t.hasOwnProperty(i)&&(e[t[i]]=i);return e}function K1(t){var e={},i={};return Object.keys(t).forEach(function(n){var r=!1;if(t.hasOwnProperty(n)&&t[n]!==void 0){var s=n.split("_"),a=s[0],o=Mq[a];o||(Je.info("Data key word `"+s[0]+"` not expected in "+n),o=a+"_"),s.splice(1).forEach(function(l){l==="url"&&(r=!0),NR[l]?o+=NR[l]:Number.isInteger(Number(l))?o+=l:(Je.info("Data key word `"+l+"` not expected in "+n),o+="_"+l+"_")}),r?i[o]=t[n]:e[o]=t[n]}}),Object.assign(e,i)}var $o=Sn(mr()),$q=Sn(LN()),Fq={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},Uq=56*1024,Bq=["hb","requestcompleted","requestfailed","requestcanceled"],Vq="https://img.litix.io",Ks=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=t||Vq,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},Fq,e)};Ks.prototype.queueEvent=function(t,e){var i=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||t==="eventrateexceeded"?(this._eventQueue.push(i),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};Ks.prototype.flushEvents=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(t&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};Ks.prototype.destroy=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,t?this._clearBeaconQueue():this.flushEvents(),$o.default.clearTimeout(this._sendTimeout)};Ks.prototype._clearBeaconQueue=function(){var t=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(t);t>0&&Object.assign(e[e.length-1],K1({mux_view_message:"event queue truncated"}));var i=this._createPayload(e);BN(this._beaconUrl,i,!0,function(){})};Ks.prototype._sendBeaconQueue=function(){var t=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var i=this._createPayload(e),n=jt.now();BN(this._beaconUrl,i,!1,function(r,s){s?(t._eventQueue=e.concat(t._eventQueue),t._failureCount+=1,Je.info("Error sending beacon: "+s)):t._failureCount=0,t._roundTripTime=jt.now()-n,t._postInFlight=!1,t._resendAfterPost&&(t._resendAfterPost=!1,t._eventQueue.length>0&&t._sendBeaconQueue())})};Ks.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var t=Math.pow(2,this._failureCount-1);return t=t*Math.random(),(1+t)*this._options.baseTimeBetweenBeacons};Ks.prototype._startBeaconSending=function(){var t=this;$o.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=$o.default.setTimeout(function(){t._eventQueue.length&&t._sendBeaconQueue(),t._startBeaconSending()},this._getNextBeaconTime()))};Ks.prototype._createPayload=function(t){var e=this,i={transmission_timestamp:Math.round(jt.now())};this._roundTripTime&&(i.rtt_ms=Math.round(this._roundTripTime));var n,r,s,a=function(){n=JSON.stringify({metadata:i,events:r||t}),s=n.length/1024},o=function(){return s<=e._options.maxPayloadKBSize};return a(),o()||(Je.info("Payload size is too big ("+s+" kb). Removing unnecessary events."),r=t.filter(function(l){return Bq.indexOf(l.e)===-1}),a()),o()||(Je.info("Payload size still too big ("+s+" kb). Cropping fields.."),r.forEach(function(l){for(var u in l){var c=l[u],d=50*1024;typeof c=="string"&&c.length>d&&(l[u]=c.substring(0,d))}}),a()),n};var Hq=typeof $q.default.exitPictureInPicture=="function"?function(t){return t.length<=Uq}:function(t){return!1},BN=function(t,e,i,n){if(i&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(t,e)){n();return}if($o.default.fetch){$o.default.fetch(t,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:Hq(e)}).then(function(s){return n(null,s.ok?null:"Error")}).catch(function(s){return n(null,s)});return}if($o.default.XMLHttpRequest){var r=new $o.default.XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4)return n(null,r.status!==200?"error":void 0)},r.open("POST",t),r.setRequestHeader("Content-Type","text/plain"),r.send(e);return}n()},Kq=Ks,Gq=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],Wq=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],jq=["ad_id","ad_creative_id","ad_universal_id"],Yq=["viewstart","error","ended","viewend"],qq=10*60*1e3,zq=function(){function t(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};li(this,t);var r,s,a,o,l,u,c,d,h,f,m,p;J(this,"mux",void 0),J(this,"envKey",void 0),J(this,"options",void 0),J(this,"eventQueue",void 0),J(this,"sampleRate",void 0),J(this,"disableCookies",void 0),J(this,"respectDoNotTrack",void 0),J(this,"previousBeaconData",void 0),J(this,"lastEventTime",void 0),J(this,"rateLimited",void 0),J(this,"pageLevelData",void 0),J(this,"viewerData",void 0),this.mux=e,this.envKey=i,this.options=n,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new Kq(Cq(this.envKey,this.options));var y;this.sampleRate=(y=this.options.sampleRate)!==null&&y!==void 0?y:1;var g;this.disableCookies=(g=this.options.disableCookies)!==null&&g!==void 0?g:!1;var v;this.respectDoNotTrack=(v=this.options.respectDoNotTrack)!==null&&v!==void 0?v:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(r=this.options.platform)===null||r===void 0?void 0:r.name,viewer_application_version:(s=this.options.platform)===null||s===void 0?void 0:s.version,viewer_application_engine:(a=this.options.platform)===null||a===void 0?void 0:a.layout,viewer_device_name:(o=this.options.platform)===null||o===void 0?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:(l=this.options.platform)===null||l===void 0?void 0:l.manufacturer,viewer_os_family:(c=this.options.platform)===null||c===void 0||(u=c.os)===null||u===void 0?void 0:u.family,viewer_os_architecture:(h=this.options.platform)===null||h===void 0||(d=h.os)===null||d===void 0?void 0:d.architecture,viewer_os_version:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.version,viewer_connection_type:Pq(),page_url:_E.default===null||_E.default===void 0||(p=_E.default.location)===null||p===void 0?void 0:p.href},this.viewerData=this.disableCookies?{}:Rq()}return ss(t,[{key:"send",value:function(e,i){if(!(!e||!(i!=null&&i.view_id))){if(this.respectDoNotTrack&&V1())return Je.info("Not sending `"+e+"` because Do Not Track is enabled");if(!i||typeof i!="object")return Je.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:wq(),r=SA(S0({},this.pageLevelData,i,n,this.viewerData),{event:e,env_key:this.envKey});r.user_id&&(r.viewer_user_id=r.user_id,delete r.user_id);var s,a=((s=r.mux_sample_number)!==null&&s!==void 0?s:0)>=this.sampleRate,o=this._deduplicateBeaconData(e,r),l=K1(o);if(this.lastEventTime=this.mux.utils.now(),a)return Je.info("Not sending event due to sample rate restriction",e,r,l);if(this.envKey||Je.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,r,l),!this.rateLimited){if(Je.info("Sending event",e,r,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):Yq.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return r.event="eventrateexceeded",l=K1(r),this.eventQueue.queueEvent(r.event,l),Je.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,i){var n=this,r={},s=i.view_id;if(s==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=qq)r=S0({},i),s&&(this.previousBeaconData=r),s&&e==="viewend"&&(this.previousBeaconData=null);else{var a=e.indexOf("request")===0;Object.entries(i).forEach(function(o){var l=Bs(o,2),u=l[0],c=l[1];n.previousBeaconData&&(c!==n.previousBeaconData[u]||Gq.indexOf(u)>-1||n.objectHasChanged(a,u,c,n.previousBeaconData[u])||n.eventRequiresKey(e,u))&&(r[u]=c,n.previousBeaconData[u]=c)})}return r}},{key:"objectHasChanged",value:function(e,i,n,r){return!e||i.indexOf("request_")!==0?!1:i==="request_response_headers"||typeof n!="object"||typeof r!="object"?!0:Object.keys(n||{}).length!==Object.keys(r||{}).length}},{key:"eventRequiresKey",value:function(e,i){return!!(e==="renditionchange"&&i.indexOf("video_source_")===0||jq.includes(i)&&Wq.includes(e))}}]),t}(),Qq=function t(e){li(this,t);var i=0,n=0,r=0,s=0,a=0,o=0,l=0,u=function(h,f){var m=f.request_start,p=f.request_response_start,y=f.request_response_end,g=f.request_bytes_loaded;s++;var v,E;if(p?(v=p-(m??0),E=(y??0)-p):E=(y??0)-(m??0),E>0&&g&&g>0){var T=g/E*8e3;a++,n+=g,r+=E,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,T),e.data.view_average_request_throughput=n/r*8e3,e.data.view_request_count=s,v>0&&(i+=v,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,v),e.data.view_average_request_latency=i/a)}},c=function(h,f){s++,o++,e.data.view_request_count=s,e.data.view_request_failed_count=o},d=function(h,f){s++,l++,e.data.view_request_count=s,e.data.view_request_canceled_count=l};e.on("requestcompleted",u),e.on("requestfailed",c),e.on("requestcanceled",d)},Xq=Qq,Zq=60*60*1e3,Jq=function t(e){var i=this;li(this,t),J(this,"_lastEventTime",void 0),e.on("before*",function(n,r){var s=r.viewer_time,a=jt.now(),o=i._lastEventTime;if(i._lastEventTime=a,o&&a-o>Zq){var l=Object.keys(e.data).reduce(function(c,d){return d.indexOf("video_")===0?Object.assign(c,J({},d,e.data[d])):c},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var u=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:s},l)),e.playbackHeartbeat._playheadShouldBeProgressing=u,e.playbackHeartbeat._playheadShouldBeProgressing&&n.type!=="play"&&n.type!=="adbreakstart"&&(e.emit("play",{viewer_time:s}),n.type!=="playing"&&e.emit("playing",{viewer_time:s}))}})},ez=Jq,tz=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],iz=new Set(["requestcompleted","requestfailed","requestcanceled"]),nz=function(t){MY(i,t);var e=FY(i);function i(n,r,s){li(this,i);var a;a=e.call(this),J(ge(a),"DOM_CONTENT_LOADED_EVENT_END",void 0),J(ge(a),"NAVIGATION_START",void 0),J(ge(a),"_destroyed",void 0),J(ge(a),"_heartBeatTimeout",void 0),J(ge(a),"adTracker",void 0),J(ge(a),"dashjs",void 0),J(ge(a),"data",void 0),J(ge(a),"disablePlayheadRebufferTracking",void 0),J(ge(a),"disableRebufferTracking",void 0),J(ge(a),"errorTracker",void 0),J(ge(a),"errorTranslator",void 0),J(ge(a),"emitTranslator",void 0),J(ge(a),"getAdData",void 0),J(ge(a),"getPlayheadTime",void 0),J(ge(a),"getStateData",void 0),J(ge(a),"stateDataTranslator",void 0),J(ge(a),"hlsjs",void 0),J(ge(a),"id",void 0),J(ge(a),"longResumeTracker",void 0),J(ge(a),"minimumRebufferDuration",void 0),J(ge(a),"mux",void 0),J(ge(a),"playbackEventDispatcher",void 0),J(ge(a),"playbackHeartbeat",void 0),J(ge(a),"playbackHeartbeatTime",void 0),J(ge(a),"playheadTime",void 0),J(ge(a),"seekingTracker",void 0),J(ge(a),"sustainedRebufferThreshold",void 0),J(ge(a),"watchTimeTracker",void 0),J(ge(a),"currentFragmentPDT",void 0),J(ge(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=b0.domContentLoadedEventEnd(),a.NAVIGATION_START=b0.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(h){return h},emitTranslator:function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return f},stateDataTranslator:function(h){return h}};a.mux=n,a.id=r,s!=null&&s.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),s=Object.assign(o,s),s.data=s.data||{},s.data.property_key&&(s.data.env_key=s.data.property_key,delete s.data.property_key),Je.level=s.debug?Co.DEBUG:Co.WARN,a.getPlayheadTime=s.getPlayheadTime,a.getStateData=s.getStateData||function(){return{}},a.getAdData=s.getAdData||function(){},a.minimumRebufferDuration=s.minimumRebufferDuration,a.sustainedRebufferThreshold=s.sustainedRebufferThreshold,a.playbackHeartbeatTime=s.playbackHeartbeatTime,a.disableRebufferTracking=s.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=s.disablePlayheadRebufferTracking,a.errorTranslator=s.errorTranslator,a.emitTranslator=s.emitTranslator,a.stateDataTranslator=s.stateDataTranslator,a.playbackEventDispatcher=new zq(n,s.data.env_key,s),a.data={player_instance_id:Xh(),mux_sample_rate:s.sampleRate,beacon_domain:s.beaconCollectionDomain||s.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1;var l=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(ge(a));if(a.on("viewinit",function(h,f){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,f),this._initializeViewData(),this.one("play",l),this.one("adbreakstart",l)}),a.on("videochange",function(h,f){this._resetView(f)}),a.on("programchange",function(h,f){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(f,{view_program_changed:!0})),l(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(h,f){this.currentFragmentPDT=f.currentFragmentPDT,this.currentFragmentStart=f.currentFragmentStart}),a.on("destroy",a.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var u=function(){var h=typeof a.data.view_start<"u";a.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",h&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",u,!1);var c=function(h){h.persisted||a.destroy()};window.addEventListener("pagehide",c,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",u),window.removeEventListener("pagehide",c)})}a.on("playerready",function(h,f){Object.assign(this.data,f)}),tz.forEach(function(h){a.on(h,function(f,m){h.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,m),this._sanitizeData()}),a.on("after"+h,function(){(h!=="error"||this.errorTracker.viewErrored)&&this.send(h)})}),a.on("viewend",function(h,f){Object.assign(a.data,f)});var d=function(h){var f=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=f-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return a.one("playerready",d),a.longResumeTracker=new ez(ge(a)),a.errorTracker=new iq(ge(a)),new kq(ge(a)),a.seekingTracker=new Eq(ge(a)),a.playheadTime=new lq(ge(a)),a.playbackHeartbeat=new eq(ge(a)),new gq(ge(a)),a.watchTimeTracker=new rq(ge(a)),new aq(ge(a)),a.adTracker=new Sq(ge(a)),new hq(ge(a)),new cq(ge(a)),new mq(ge(a)),new Aq(ge(a)),new Xq(ge(a)),s.hlsjs&&a.addHLSJS(s),s.dashjs&&a.addDashJS(s),a.emit("viewinit",s.data),a}return ss(i,[{key:"emit",value:function(n,r){var s,a=Object.assign({viewer_time:this.mux.utils.now()},r),o=[n,a];if(this.emitTranslator)try{o=this.emitTranslator(n,a)}catch(l){this.mux.log.warn("Exception in emit translator callback.",l)}o!=null&&o.length&&(s=gp(xc(i.prototype),"emit",this)).call.apply(s,[this].concat(Zn(o)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(n){if(this.data.view_id){var r=Object.assign({},this.data),s=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(r.video_source_is_live===void 0&&(r.player_source_duration===1/0||r.video_source_duration===1/0?r.video_source_is_live=!0:(r.player_source_duration>0||r.video_source_duration>0)&&(r.video_source_is_live=!1)),r.video_source_is_live||s.forEach(function(u){r[u]=void 0}),r.video_source_url=r.video_source_url||r.player_source_url,r.video_source_url){var a=Bs(Zh(r.video_source_url),2),o=a[0],l=a[1];r.video_source_domain=l,r.video_source_hostname=o}delete r.ad_request_id,this.playbackEventDispatcher.send(n,r),this.data.view_sequence_number++,this.data.player_sequence_number++,iz.has(n)||this._restartHeartBeat(),n==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(n){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",n)}},{key:"_updateStateData",value:function(){var n=this.getStateData();if(typeof this.stateDataTranslator=="function")try{n=this.stateDataTranslator(n)}catch(r){this.mux.log.warn("Exception in stateDataTranslator translator callback.",r)}Object.assign(this.data,n),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var n=this,r=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];r.forEach(function(a){var o=parseInt(n.data[a],10);n.data[a]=isNaN(o)?void 0:o});var s=["player_source_url","video_source_url"];s.forEach(function(a){if(n.data[a]){var o=n.data[a].toLowerCase();(o.indexOf("data:")===0||o.indexOf("blob:")===0)&&(n.data[a]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var n=this;Object.keys(this.data).forEach(function(r){r.indexOf("video_")===0&&delete n.data[r]})}},{key:"_resetViewData",value:function(){var n=this;Object.keys(this.data).forEach(function(r){r.indexOf("view_")===0&&delete n.data[r]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var n=this,r=this.data.view_id=Xh(),s=function(){r===n.data.view_id&&Gt(n.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",s):s()}},{key:"_restartHeartBeat",value:function(){var n=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){n.data.player_is_paused||n.emit("hb")},1e4)}},{key:"addHLSJS",value:function(n){if(!n.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=n.hlsjs,GY(this.mux,this.id,n.hlsjs,{},n.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(WY(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(n){if(!n.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=n.dashjs,zY(this.mux,this.id,n.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(QY(this.dashjs),this.dashjs=void 0)}}]),i}(ZY),rz=nz,ad=Sn(LN());function sz(){return ad.default&&!!(ad.default.fullscreenElement||ad.default.webkitFullscreenElement||ad.default.mozFullScreenElement||ad.default.msFullscreenElement)}var az=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],oz={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function lz(t,e,i){var n=Bs(T0(e),3),r=n[0],s=n[1],a=n[2],o=t.log,l=t.utils.getComputedStyle,u=t.utils.secondsToMs,c={automaticErrorTracking:!0};if(r){if(a!=="video"&&a!=="audio")return o.error("The element of `"+s+"` was not a media element.")}else return o.error("No element was found with the `"+s+"` query selector.");r.mux&&(r.mux.destroy(),delete r.mux,o.warn("Already monitoring this video element, replacing existing event listeners"));var d={getPlayheadTime:function(){return u(r.currentTime)},getStateData:function(){var f,m,p,y=((f=(m=this).getPlayheadTime)===null||f===void 0?void 0:f.call(m))||u(r.currentTime),g=this.hlsjs&&this.hlsjs.url,v=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),E={player_is_paused:r.paused,player_width:parseInt(l(r,"width")),player_height:parseInt(l(r,"height")),player_autoplay_on:r.autoplay,player_preload_on:r.preload,player_language_code:r.lang,player_is_fullscreen:sz(),video_poster_url:r.poster,video_source_url:g||v||r.currentSrc,video_source_duration:u(r.duration),video_source_height:r.videoHeight,video_source_width:r.videoWidth,view_dropped_frame_count:r==null||(p=r.getVideoPlaybackQuality)===null||p===void 0?void 0:p.call(r).droppedVideoFrames};if(r.getStartDate&&y>0){var T=r.getStartDate();if(T&&typeof T.getTime=="function"&&T.getTime()){var _=T.getTime();if(E.player_program_time=_+y,r.seekable.length>0){var x=_+r.seekable.end(r.seekable.length-1);E.player_live_edge_program_time=x}}}return E}};i=Object.assign(c,i,d),i.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:t.VERSION},i.data),r.mux=r.mux||{},r.mux.deleted=!1,r.mux.emit=function(f,m){t.emit(s,f,m)},r.mux.updateData=function(f){r.mux.emit("hb",f)};var h=function(){o.error("The monitor for this video element has already been destroyed.")};r.mux.destroy=function(){Object.keys(r.mux.listeners).forEach(function(f){r.removeEventListener(f,r.mux.listeners[f],!1)}),delete r.mux.listeners,r.mux.destroy=h,r.mux.swapElement=h,r.mux.emit=h,r.mux.addHLSJS=h,r.mux.addDashJS=h,r.mux.removeHLSJS=h,r.mux.removeDashJS=h,r.mux.updateData=h,r.mux.setEmitTranslator=h,r.mux.setStateDataTranslator=h,r.mux.setGetPlayheadTime=h,r.mux.deleted=!0,t.emit(s,"destroy")},r.mux.swapElement=function(f){var m=Bs(T0(f),3),p=m[0],y=m[1],g=m[2];if(p){if(g!=="video"&&g!=="audio")return t.log.error("The element of `"+y+"` was not a media element.")}else return t.log.error("No element was found with the `"+y+"` query selector.");p.muxId=r.muxId,delete r.muxId,p.mux=p.mux||{},p.mux.listeners=Object.assign({},r.mux.listeners),delete r.mux.listeners,Object.keys(p.mux.listeners).forEach(function(v){r.removeEventListener(v,p.mux.listeners[v],!1),p.addEventListener(v,p.mux.listeners[v],!1)}),p.mux.swapElement=r.mux.swapElement,p.mux.destroy=r.mux.destroy,delete r.mux,r=p},r.mux.addHLSJS=function(f){t.addHLSJS(s,f)},r.mux.addDashJS=function(f){t.addDashJS(s,f)},r.mux.removeHLSJS=function(){t.removeHLSJS(s)},r.mux.removeDashJS=function(){t.removeDashJS(s)},r.mux.setEmitTranslator=function(f){t.setEmitTranslator(s,f)},r.mux.setStateDataTranslator=function(f){t.setStateDataTranslator(s,f)},r.mux.setGetPlayheadTime=function(f){f||(f=i.getPlayheadTime),t.setGetPlayheadTime(s,f)},t.init(s,i),t.emit(s,"playerready"),r.paused||(t.emit(s,"play"),r.readyState>2&&t.emit(s,"playing")),r.mux.listeners={},az.forEach(function(f){f==="error"&&!i.automaticErrorTracking||(r.mux.listeners[f]=function(){var m={};if(f==="error"){if(!r.error||r.error.code===1)return;m.player_error_code=r.error.code,m.player_error_message=oz[r.error.code]||r.error.message}t.emit(s,f,m)},r.addEventListener(f,r.mux.listeners[f],!1))})}function uz(t,e,i,n){var r=n;if(t&&typeof t[e]=="function")try{r=t[e].apply(t,i)}catch(s){Je.info("safeCall error",s)}return r}var dh=Sn(mr()),Kl;dh.default&&dh.default.WeakMap&&(Kl=new WeakMap);function cz(t,e){if(!t||!e||!dh.default||typeof dh.default.getComputedStyle!="function")return"";var i;return Kl&&Kl.has(t)&&(i=Kl.get(t)),i||(i=dh.default.getComputedStyle(t,null),Kl&&Kl.set(t,i)),i.getPropertyValue(e)}function dz(t){return Math.floor(t*1e3)}var lo={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},Xv=function(t){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(t),this.manifest};Xv.prototype.process=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};Xv.prototype.processLine=function(t){var e=t.indexOf(":"),i=pz(t,e),n=i[0],r=i.length===2?AA(i[1]):void 0;if(n[0]!=="#")this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case lo.TARGET_DURATION:{if(!isFinite(r)||r<0)return;this.manifest.targetDuration=r,this.setHoldBack();break}case lo.PART_INF:{AE(this.manifest,i),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case lo.SERVER_CONTROL:{AE(this.manifest,i),this.setHoldBack();break}case lo.INF:{r===0?this.currentUri.duration=.01:r>0&&(this.currentUri.duration=r);break}case lo.PROGRAM_DATE_TIME:{var s=r,a=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=a;break}case lo.VERSION:{AE(this.manifest,i);break}case lo.SESSION_DATA:{var o=gz(i[1]),l=DN(o);Object.assign(this.manifest.sessionData,l)}}};Xv.prototype.setHoldBack=function(){var t=this.manifest,e=t.serverControl,i=t.targetDuration,n=t.partTargetDuration;if(e){var r="holdBack",s="partHoldBack",a=i&&i*3,o=n&&n*2;i&&!e.hasOwnProperty(r)&&(e[r]=a),a&&e[r]<a&&(e[r]=a),n&&!e.hasOwnProperty(s)&&(e[s]=n*3),n&&e[s]<o&&(e[s]=o)}};var AE=function(t,e){var i=VN(e[0].replace("#EXT-X-","")),n;mz(e[1])?(n={},n=Object.assign(fz(e[1]),n)):n=AA(e[1]),t[i]=n},VN=function(t){return t.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},AA=function(t){if(t.toLowerCase()==="yes"||t.toLowerCase()==="no")return t.toLowerCase()==="yes";var e=t.indexOf(":")!==-1?t:parseFloat(t);return isNaN(e)?t:e},hz=function(t){var e={},i=t.split("=");if(i.length>1){var n=VN(i[0]);e[n]=AA(i[1])}return e},fz=function(t){for(var e=t.split(","),i={},n=0;e.length>n;n++){var r=e[n],s=hz(r);i=Object.assign(s,i)}return i},mz=function(t){return t.indexOf("=")>-1},pz=function(t,e){return e===-1?[t]:[t.substring(0,e),t.substring(e+1)]},gz=function(t){var e={};if(t){var i=t.search(","),n=t.slice(0,i),r=t.slice(i+1),s=[n,r];return s.forEach(function(a,o){for(var l=a.replace(/['"]+/g,"").split("="),u=0;u<l.length;u++)l[u]==="DATA-ID"&&(e["DATA-ID"]=l[1-u]),l[u]==="VALUE"&&(e.VALUE=l[1-u])}),{data:e}}},vz=Xv,yz={safeCall:uz,safeIncrement:Gt,getComputedStyle:cz,secondsToMs:dz,assign:Object.assign,headersStringToObject:_A,cdnHeadersToRequestId:_0,extractHostnameAndDomain:Zh,extractHostname:or,manifestParser:vz,generateShortID:wN,generateUUID:Xh,now:jt.now,findMediaElement:T0},Ez=yz,Tz={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},bz=Tz,Sz="mux-embed",_z="5.9.0",Az="2.1",Ut={},Ha=function(t){var e=arguments;typeof t=="string"?Ha.hasOwnProperty(t)?ch.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),Ha[t].apply(null,e)},0):Je.warn("`"+t+"` is an unknown task"):typeof t=="function"?ch.default.setTimeout(function(){t(Ha)},0):Je.warn("`"+t+"` is invalid.")},xz={loaded:jt.now(),NAME:Sz,VERSION:_z,API_VERSION:Az,PLAYER_TRACKED:!1,monitor:function(t,e){return lz(Ha,t,e)},destroyMonitor:function(t){var e=Bs(T0(t),1),i=e[0];i&&i.mux&&typeof i.mux.destroy=="function"?i.mux.destroy():Je.error("A video element monitor for `"+t+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(t,e){var i=Xn(t);Ut[i]?Ut[i].addHLSJS(e):Je.error("A monitor for `"+i+"` has not been initialized.")},addDashJS:function(t,e){var i=Xn(t);Ut[i]?Ut[i].addDashJS(e):Je.error("A monitor for `"+i+"` has not been initialized.")},removeHLSJS:function(t){var e=Xn(t);Ut[e]?Ut[e].removeHLSJS():Je.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(t){var e=Xn(t);Ut[e]?Ut[e].removeDashJS():Je.error("A monitor for `"+e+"` has not been initialized.")},init:function(t,e){V1()&&e&&e.respectDoNotTrack&&Je.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var i=Xn(t);Ut[i]=new rz(Ha,i,e)},emit:function(t,e,i){var n=Xn(t);Ut[n]?(Ut[n].emit(e,i),e==="destroy"&&delete Ut[n]):Je.error("A monitor for `"+n+"` has not been initialized.")},updateData:function(t,e){var i=Xn(t);Ut[i]?Ut[i].emit("hb",e):Je.error("A monitor for `"+i+"` has not been initialized.")},setEmitTranslator:function(t,e){var i=Xn(t);Ut[i]?Ut[i].emitTranslator=e:Je.error("A monitor for `"+i+"` has not been initialized.")},setStateDataTranslator:function(t,e){var i=Xn(t);Ut[i]?Ut[i].stateDataTranslator=e:Je.error("A monitor for `"+i+"` has not been initialized.")},setGetPlayheadTime:function(t,e){var i=Xn(t);Ut[i]?Ut[i].getPlayheadTime=e:Je.error("A monitor for `"+i+"` has not been initialized.")},checkDoNotTrack:V1,log:Je,utils:Ez,events:bz,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(Ha,xz);typeof ch.default<"u"&&typeof ch.default.addEventListener=="function"&&ch.default.addEventListener("pagehide",function(t){t.persisted||(Ha.WINDOW_UNLOADING=!0)},!1);var xA=Ha;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/const te=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},kz=Number.isSafeInteger||function(t){return typeof t=="number"&&Math.abs(t)<=Iz},Iz=Number.MAX_SAFE_INTEGER||9007199254740991;let le=function(t){return t.NETWORK_ERROR="networkError",t.MEDIA_ERROR="mediaError",t.KEY_SYSTEM_ERROR="keySystemError",t.MUX_ERROR="muxError",t.OTHER_ERROR="otherError",t}({}),M=function(t){return t.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",t.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",t.KEY_SYSTEM_NO_SESSION="keySystemNoSession",t.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",t.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",t.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",t.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",t.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",t.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",t.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",t.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",t.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",t.MANIFEST_LOAD_ERROR="manifestLoadError",t.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",t.MANIFEST_PARSING_ERROR="manifestParsingError",t.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",t.LEVEL_EMPTY_ERROR="levelEmptyError",t.LEVEL_LOAD_ERROR="levelLoadError",t.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",t.LEVEL_PARSING_ERROR="levelParsingError",t.LEVEL_SWITCH_ERROR="levelSwitchError",t.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",t.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",t.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",t.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",t.FRAG_LOAD_ERROR="fragLoadError",t.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",t.FRAG_DECRYPT_ERROR="fragDecryptError",t.FRAG_PARSING_ERROR="fragParsingError",t.FRAG_GAP="fragGap",t.REMUX_ALLOC_ERROR="remuxAllocError",t.KEY_LOAD_ERROR="keyLoadError",t.KEY_LOAD_TIMEOUT="keyLoadTimeOut",t.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",t.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",t.BUFFER_APPEND_ERROR="bufferAppendError",t.BUFFER_APPENDING_ERROR="bufferAppendingError",t.BUFFER_STALLED_ERROR="bufferStalledError",t.BUFFER_FULL_ERROR="bufferFullError",t.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",t.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",t.ASSET_LIST_LOAD_ERROR="assetListLoadError",t.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",t.ASSET_LIST_PARSING_ERROR="assetListParsingError",t.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",t.INTERNAL_EXCEPTION="internalException",t.INTERNAL_ABORTED="aborted",t.ATTACH_MEDIA_ERROR="attachMediaError",t.UNKNOWN="unknown",t}({}),S=function(t){return t.MEDIA_ATTACHING="hlsMediaAttaching",t.MEDIA_ATTACHED="hlsMediaAttached",t.MEDIA_DETACHING="hlsMediaDetaching",t.MEDIA_DETACHED="hlsMediaDetached",t.MEDIA_ENDED="hlsMediaEnded",t.STALL_RESOLVED="hlsStallResolved",t.BUFFER_RESET="hlsBufferReset",t.BUFFER_CODECS="hlsBufferCodecs",t.BUFFER_CREATED="hlsBufferCreated",t.BUFFER_APPENDING="hlsBufferAppending",t.BUFFER_APPENDED="hlsBufferAppended",t.BUFFER_EOS="hlsBufferEos",t.BUFFERED_TO_END="hlsBufferedToEnd",t.BUFFER_FLUSHING="hlsBufferFlushing",t.BUFFER_FLUSHED="hlsBufferFlushed",t.MANIFEST_LOADING="hlsManifestLoading",t.MANIFEST_LOADED="hlsManifestLoaded",t.MANIFEST_PARSED="hlsManifestParsed",t.LEVEL_SWITCHING="hlsLevelSwitching",t.LEVEL_SWITCHED="hlsLevelSwitched",t.LEVEL_LOADING="hlsLevelLoading",t.LEVEL_LOADED="hlsLevelLoaded",t.LEVEL_UPDATED="hlsLevelUpdated",t.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",t.LEVELS_UPDATED="hlsLevelsUpdated",t.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",t.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",t.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",t.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",t.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",t.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",t.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",t.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",t.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",t.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",t.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",t.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",t.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",t.CUES_PARSED="hlsCuesParsed",t.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",t.INIT_PTS_FOUND="hlsInitPtsFound",t.FRAG_LOADING="hlsFragLoading",t.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",t.FRAG_LOADED="hlsFragLoaded",t.FRAG_DECRYPTED="hlsFragDecrypted",t.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",t.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",t.FRAG_PARSING_METADATA="hlsFragParsingMetadata",t.FRAG_PARSED="hlsFragParsed",t.FRAG_BUFFERED="hlsFragBuffered",t.FRAG_CHANGED="hlsFragChanged",t.FPS_DROP="hlsFpsDrop",t.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",t.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",t.ERROR="hlsError",t.DESTROYING="hlsDestroying",t.KEY_LOADING="hlsKeyLoading",t.KEY_LOADED="hlsKeyLoaded",t.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",t.BACK_BUFFER_REACHED="hlsBackBufferReached",t.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",t.ASSET_LIST_LOADING="hlsAssetListLoading",t.ASSET_LIST_LOADED="hlsAssetListLoaded",t.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",t.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",t.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",t.INTERSTITIAL_STARTED="hlsInterstitialStarted",t.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",t.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",t.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",t.INTERSTITIAL_ENDED="hlsInterstitialEnded",t.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",t.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",t.EVENT_CUE_ENTER="hlsEventCueEnter",t}({});var ke={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ne={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class Cl{constructor(e,i=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=i,this.totalWeight_=n}sample(e,i){const n=Math.pow(this.alpha_,e);this.estimate_=i*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class Lz{constructor(e,i,n,r=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Cl(e),this.fast_=new Cl(i),this.defaultTTFB_=r,this.ttfb_=new Cl(e)}update(e,i){const{slow_:n,fast_:r,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new Cl(e,n.getEstimate(),n.getTotalWeight())),r.halfLife!==i&&(this.fast_=new Cl(i,r.getEstimate(),r.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Cl(e,s.getEstimate(),s.getTotalWeight()))}sample(e,i){e=Math.max(e,this.minDelayMs_);const n=8*i,r=e/1e3,s=n/r;this.fast_.sample(r,s),this.slow_.sample(r,s)}sampleTTFB(e){const i=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(i,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function Rz(t,e,i){return(e=Cz(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Qe(){return Qe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)({}).hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},Qe.apply(null,arguments)}function $R(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),i.push.apply(i,n)}return i}function Ge(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?$R(Object(i),!0).forEach(function(n){Rz(t,n,i[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):$R(Object(i)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(i,n))})}return t}function wz(t,e){if(typeof t!="object"||!t)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var n=i.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Cz(t){var e=wz(t,"string");return typeof e=="symbol"?e:e+""}class Kn{constructor(e,i){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const n=`[${e}]:`;this.trace=ca,this.debug=i.debug.bind(null,n),this.log=i.log.bind(null,n),this.warn=i.warn.bind(null,n),this.info=i.info.bind(null,n),this.error=i.error.bind(null,n)}}const ca=function(){},Dz={trace:ca,debug:ca,log:ca,warn:ca,info:ca,error:ca};function G1(){return Qe({},Dz)}function Pz(t,e){const i=self.console[t];return i?i.bind(self.console,`${e?"["+e+"] ":""}[${t}] >`):ca}function FR(t,e,i){return e[t]?e[t].bind(e):Pz(t,i)}const W1=G1();function Oz(t,e,i){const n=G1();if(typeof console=="object"&&t===!0||typeof t=="object"){const r=["debug","log","info","warn","error"];r.forEach(s=>{n[s]=FR(s,t,i)});try{n.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return G1()}r.forEach(s=>{W1[s]=FR(s,t)})}else Qe(W1,n);return n}const We=W1;function Xa(t=!0){return typeof self>"u"?void 0:(t||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Mz(t){return typeof self<"u"&&t===self.ManagedMediaSource}function HN(t,e){const i=Object.keys(t),n=Object.keys(e),r=i.length,s=n.length;return!r||!s||r===s&&!i.some(a=>n.indexOf(a)===-1)}function vn(t,e=!1){if(typeof TextDecoder<"u"){const u=new TextDecoder("utf-8").decode(t);if(e){const c=u.indexOf("\0");return c!==-1?u.substring(0,c):u}return u.replace(/\0/g,"")}const i=t.length;let n,r,s,a="",o=0;for(;o<i;){if(n=t[o++],n===0&&e)return a;if(n===0||n===3)continue;switch(n>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(n);break;case 12:case 13:r=t[o++],a+=String.fromCharCode((n&31)<<6|r&63);break;case 14:r=t[o++],s=t[o++],a+=String.fromCharCode((n&15)<<12|(r&63)<<6|(s&63)<<0);break}}return a}function pi(t){let e="";for(let i=0;i<t.length;i++){let n=t[i].toString(16);n.length<2&&(n="0"+n),e+=n}return e}function KN(t){return Uint8Array.from(t.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function Nz(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xE={exports:{}},UR;function $z(){return UR||(UR=1,function(t,e){(function(i){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,r=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,u,c){if(c=c||{},l=l.trim(),u=u.trim(),!u){if(!c.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(u);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return c.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):u;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=r.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var p={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(p.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)p.path=f.path,h.params||(p.params=f.params,h.query||(p.query=f.query));else{var y=f.path,g=y.substring(0,y.lastIndexOf("/")+1)+h.path;p.path=o.normalizePath(g)}return p.path===null&&(p.path=c.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(p)},parseURL:function(l){var u=n.exec(l);return u?{scheme:u[1]||"",netLoc:u[2]||"",path:u[3]||"",params:u[4]||"",query:u[5]||"",fragment:u[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};t.exports=o})()}(xE)),xE.exports}var kA=$z();class IA{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var et={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class GN{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,Uz(this,"stats")}setByteRange(e,i){const n=e.split("@",2);let r;n.length===1?r=(i==null?void 0:i.byteRangeEndOffset)||0:r=parseInt(n[1]),this._byteRange=[r,parseInt(n[0])+r]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[et.AUDIO]:null,[et.VIDEO]:null,[et.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new IA),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=kA.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[et.AUDIO]=null,e[et.VIDEO]=null,e[et.AUDIOVIDEO]=null}}function Mt(t){return t.sn!=="initSegment"}class kE extends GN{constructor(e,i){super(i),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],i=this.byteRange[1];if(te(e)&&te(i))return i-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:i}=this;if(!i||i.NONE)return null;if(i.identity)this._decryptdata||(this._decryptdata=i.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const n=Object.keys(i);if(n.length===1){const r=this._decryptdata=i[n[0]]||null;r&&(this._decryptdata=r.getDecryptData(this.sn,i))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=te(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var i;const n=Object.keys(this.levelkeys),r=n.length;if(r>1||r===1&&(i=this.levelkeys[n[0]])!=null&&i.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!te(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return Mt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const i=this.levelkeys;if(i){var n;const r=i[e];r&&!((n=this._decryptdata)!=null&&n.keyId)&&(this._decryptdata=r.getDecryptData(this.sn,i))}}abortRequests(){var e,i;(e=this.loader)==null||e.abort(),(i=this.keyLoader)==null||i.abort()}setElementaryStreamInfo(e,i,n,r,s,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:i,endPTS:n,startDTS:r,endDTS:s,partial:a};return}l.startPTS=Math.min(l.startPTS,i),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,r),l.endDTS=Math.max(l.endDTS,s)}}let Fz=class extends GN{constructor(e,i,n,r,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=i,this.index=r;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};function WN(t,e){const i=Object.getPrototypeOf(t);if(i){const n=Object.getOwnPropertyDescriptor(i,e);return n||WN(i,e)}}function Uz(t,e){const i=WN(t,e);i&&(i.enumerable=!0,Object.defineProperty(t,e,i))}const BR=Math.pow(2,32)-1,Bz=[].push,jN={video:1,audio:2,id3:3,text:4};function Xt(t){return String.fromCharCode.apply(null,t)}function YN(t,e){const i=t[e]<<8|t[e+1];return i<0?65536+i:i}function ye(t,e){const i=qN(t,e);return i<0?4294967296+i:i}function VR(t,e){let i=ye(t,e);return i*=Math.pow(2,32),i+=ye(t,e+4),i}function qN(t,e){return t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3]}function Vz(t){const e=t.byteLength;for(let i=0;i<e;){const n=ye(t,i);if(n>8&&t[i+4]===109&&t[i+5]===111&&t[i+6]===111&&t[i+7]===102)return!0;i=n>1?i+n:e}return!1}function xe(t,e){const i=[];if(!e.length)return i;const n=t.byteLength;for(let r=0;r<n;){const s=ye(t,r),a=Xt(t.subarray(r+4,r+8)),o=s>1?r+s:n;if(a===e[0])if(e.length===1)i.push(t.subarray(r+8,o));else{const l=xe(t.subarray(r+8,o),e.slice(1));l.length&&Bz.apply(i,l)}r=o}return i}function Hz(t){const e=[],i=t[0];let n=8;const r=ye(t,n);n+=4;let s=0,a=0;i===0?(s=ye(t,n),a=ye(t,n+4),n+=8):(s=VR(t,n),a=VR(t,n+8),n+=16),n+=2;let o=t.length+a;const l=YN(t,n);n+=2;for(let u=0;u<l;u++){let c=n;const d=ye(t,c);c+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return We.warn("SIDX has hierarchical references (not supported)"),null;const m=ye(t,c);c+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/r,start:o,end:o+h-1}}),o+=h,c+=4,n=c}return{earliestPresentationTime:s,timescale:r,version:i,referencesCount:l,references:e}}function zN(t){const e=[],i=xe(t,["moov","trak"]);for(let r=0;r<i.length;r++){const s=i[r],a=xe(s,["tkhd"])[0];if(a){let o=a[0];const l=ye(a,o===0?12:20),u=xe(s,["mdia","mdhd"])[0];if(u){o=u[0];const c=ye(u,o===0?12:20),d=xe(s,["mdia","hdlr"])[0];if(d){const h=Xt(d.subarray(8,12)),f={soun:et.AUDIO,vide:et.VIDEO}[h],m=xe(s,["mdia","minf","stbl","stsd"])[0],p=Kz(m);f?(e[l]={timescale:c,type:f,stsd:p},e[f]=Ge({timescale:c,id:l},p)):e[l]={timescale:c,type:h,stsd:p}}}}}return xe(t,["moov","mvex","trex"]).forEach(r=>{const s=ye(r,4),a=e[s];a&&(a.default={duration:ye(r,12),flags:ye(r,20)})}),e}function Kz(t){const e=t.subarray(8),i=e.subarray(86),n=Xt(e.subarray(4,8));let r=n,s;const a=n==="enca"||n==="encv";if(a){const u=xe(e,[n])[0].subarray(n==="enca"?28:78);xe(u,["sinf"]).forEach(d=>{const h=xe(d,["schm"])[0];if(h){const f=Xt(h.subarray(4,8));if(f==="cbcs"||f==="cenc"){const m=xe(d,["frma"])[0];m&&(r=Xt(m))}}})}const o=r;switch(r){case"avc1":case"avc2":case"avc3":case"avc4":{const l=xe(i,["avcC"])[0];l&&l.length>3&&(r+="."+vm(l[1])+vm(l[2])+vm(l[3]),s=gm(o==="avc1"?"dva1":"dvav",i));break}case"mp4a":{const l=xe(e,[n])[0],u=xe(l.subarray(28),["esds"])[0];if(u&&u.length>7){let c=4;if(u[c++]!==3)break;c=IE(u,c),c+=2;const d=u[c++];if(d&128&&(c+=2),d&64&&(c+=u[c++]),u[c++]!==4)break;c=IE(u,c);const h=u[c++];if(h===64)r+="."+vm(h);else break;if(c+=12,u[c++]!==5)break;c=IE(u,c);const f=u[c++];let m=(f&248)>>3;m===31&&(m+=1+((f&7)<<3)+((u[c]&224)>>5)),r+="."+m}break}case"hvc1":case"hev1":{const l=xe(i,["hvcC"])[0];if(l&&l.length>12){const u=l[1],c=["","A","B","C"][u>>6],d=u&31,h=ye(l,2),f=(u&32)>>5?"H":"L",m=l[12],p=l.subarray(6,12);r+="."+c+d,r+="."+Gz(h).toString(16).toUpperCase(),r+="."+f+m;let y="";for(let g=p.length;g--;){const v=p[g];(v||y)&&(y="."+v.toString(16).toUpperCase()+y)}r+=y}s=gm(o=="hev1"?"dvhe":"dvh1",i);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{r=gm(r,i)||r;break}case"vp09":{const l=xe(i,["vpcC"])[0];if(l&&l.length>6){const u=l[4],c=l[5],d=l[6]>>4&15;r+="."+Mr(u)+"."+Mr(c)+"."+Mr(d)}break}case"av01":{const l=xe(i,["av1C"])[0];if(l&&l.length>2){const u=l[1]>>>5,c=l[1]&31,d=l[2]>>>7?"H":"M",h=(l[2]&64)>>6,f=(l[2]&32)>>5,m=u===2&&h?f?12:10:h?10:8,p=(l[2]&16)>>4,y=(l[2]&8)>>3,g=(l[2]&4)>>2,v=l[2]&3;r+="."+u+"."+Mr(c)+d+"."+Mr(m)+"."+p+"."+y+g+v+"."+Mr(1)+"."+Mr(1)+"."+Mr(1)+"."+0,s=gm("dav1",i)}break}}return{codec:r,encrypted:a,supplemental:s}}function gm(t,e){const i=xe(e,["dvvC"]),n=i.length?i[0]:xe(e,["dvcC"])[0];if(n){const r=n[2]>>1&127,s=n[2]<<5&32|n[3]>>3&31;return t+"."+Mr(r)+"."+Mr(s)}}function Gz(t){let e=0;for(let i=0;i<32;i++)e|=(t>>i&1)<<31-i;return e>>>0}function IE(t,e){const i=e+5;for(;t[e++]&128&&e<i;);return e}function vm(t){return("0"+t.toString(16).toUpperCase()).slice(-2)}function Mr(t){return(t<10?"0":"")+t}function Wz(t,e){if(!t||!e)return;const i=e.keyId;i&&e.isCommonEncryption&&QN(t,(n,r)=>{const s=n.subarray(8,24);s.some(a=>a!==0)||(We.log(`[eme] Patching keyId in 'enc${r?"a":"v"}>sinf>>tenc' box: ${pi(s)} -> ${pi(i)}`),n.set(i,8))})}function jz(t){const e=[];return QN(t,i=>e.push(i.subarray(8,24))),e}function QN(t,e){xe(t,["moov","trak"]).forEach(n=>{const r=xe(n,["mdia","minf","stbl","stsd"])[0];if(!r)return;const s=r.subarray(8);let a=xe(s,["enca"]);const o=a.length>0;o||(a=xe(s,["encv"])),a.forEach(l=>{const u=o?l.subarray(28):l.subarray(78);xe(u,["sinf"]).forEach(d=>{const h=XN(d);h&&e(h,o)})})})}function XN(t){const e=xe(t,["schm"])[0];if(e){const i=Xt(e.subarray(4,8));if(i==="cbcs"||i==="cenc"){const n=xe(t,["schi","tenc"])[0];if(n)return n}}}function Yz(t,e,i){const n={},r=xe(t,["moof","traf"]);for(let s=0;s<r.length;s++){const a=r[s],o=xe(a,["tfhd"])[0],l=ye(o,4),u=e[l];if(!u)continue;n[l]||(n[l]={start:NaN,duration:0,sampleCount:0,timescale:u.timescale,type:u.type});const c=n[l],d=xe(a,["tfdt"])[0];if(d){const E=d[0];let T=ye(d,4);E===1&&(T===BR?i.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(T*=BR+1,T+=ye(d,8))),te(T)&&(!te(c.start)||T<c.start)&&(c.start=T)}const h=u.default,f=ye(o,0)|(h==null?void 0:h.flags);let m=(h==null?void 0:h.duration)||0;f&8&&(f&2?m=ye(o,12):m=ye(o,8));const p=xe(a,["trun"]);let y=c.start||0,g=0,v=m;for(let E=0;E<p.length;E++){const T=p[E],_=ye(T,4),x=c.sampleCount;c.sampleCount+=_;const A=T[3]&1,I=T[3]&4,L=T[2]&1,b=T[2]&2,R=T[2]&4,P=T[2]&8;let w=8,$=_;for(A&&(w+=4),I&&_&&(!(T[w+1]&1)&&c.keyFrameIndex===void 0&&(c.keyFrameIndex=x),w+=4,L?(v=ye(T,w),w+=4):v=m,b&&(w+=4),P&&(w+=4),y+=v,g+=v,$--);$--;)L?(v=ye(T,w),w+=4):v=m,b&&(w+=4),R&&(T[w+1]&1||c.keyFrameIndex===void 0&&(c.keyFrameIndex=c.sampleCount-($+1),c.keyFrameStart=y),w+=4),P&&(w+=4),y+=v,g+=v;!g&&m&&(g+=m*_)}c.duration+=g}if(!Object.keys(n).some(s=>n[s].duration)){let s=1/0,a=0;const o=xe(t,["sidx"]);for(let l=0;l<o.length;l++){const u=Hz(o[l]);if(u!=null&&u.references){s=Math.min(s,u.earliestPresentationTime/u.timescale);const c=u.references.reduce((d,h)=>d+h.info.duration||0,0);a=Math.max(a,c+u.earliestPresentationTime/u.timescale)}}a&&te(a)&&Object.keys(n).forEach(l=>{n[l].duration||(n[l].duration=a*n[l].timescale-n[l].start)})}return n}function qz(t){const e={valid:null,remainder:null},i=xe(t,["moof"]);if(i.length<2)return e.remainder=t,e;const n=i[i.length-1];return e.valid=t.slice(0,n.byteOffset-8),e.remainder=t.slice(n.byteOffset-8),e}function Vn(t,e){const i=new Uint8Array(t.length+e.length);return i.set(t),i.set(e,t.length),i}function HR(t,e){const i=[],n=e.samples,r=e.timescale,s=e.id;let a=!1;return xe(n,["moof"]).map(l=>{const u=l.byteOffset-8;xe(l,["traf"]).map(d=>{const h=xe(d,["tfdt"]).map(f=>{const m=f[0];let p=ye(f,4);return m===1&&(p*=Math.pow(2,32),p+=ye(f,8)),p/r})[0];return h!==void 0&&(t=h),xe(d,["tfhd"]).map(f=>{const m=ye(f,4),p=ye(f,0)&16777215,y=(p&1)!==0,g=(p&2)!==0,v=(p&8)!==0;let E=0;const T=(p&16)!==0;let _=0;const x=(p&32)!==0;let A=8;m===s&&(y&&(A+=8),g&&(A+=4),v&&(E=ye(f,A),A+=4),T&&(_=ye(f,A),A+=4),x&&(A+=4),e.type==="video"&&(a=Zv(e.codec)),xe(d,["trun"]).map(I=>{const L=I[0],b=ye(I,0)&16777215,R=(b&1)!==0;let P=0;const w=(b&4)!==0,$=(b&256)!==0;let B=0;const U=(b&512)!==0;let V=0;const C=(b&1024)!==0,K=(b&2048)!==0;let z=0;const H=ye(I,4);let Y=8;R&&(P=ye(I,Y),Y+=4),w&&(Y+=4);let oe=P+u;for(let pe=0;pe<H;pe++){if($?(B=ye(I,Y),Y+=4):B=E,U?(V=ye(I,Y),Y+=4):V=_,C&&(Y+=4),K&&(L===0?z=ye(I,Y):z=qN(I,Y),Y+=4),e.type===et.VIDEO){let fe=0;for(;fe<V;){const Ee=ye(n,oe);if(oe+=4,zz(a,n[oe])){const dt=n.subarray(oe,oe+Ee);LA(dt,a?2:1,t+z/r,i)}oe+=Ee,fe+=Ee+4}}t+=B/r}}))})})}),i}function Zv(t){if(!t)return!1;const e=t.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function zz(t,e){if(t){const i=e>>1&63;return i===39||i===40}else return(e&31)===6}function LA(t,e,i,n){const r=ZN(t);let s=0;s+=e;let a=0,o=0,l=0;for(;s<r.length;){a=0;do{if(s>=r.length)break;l=r[s++],a+=l}while(l===255);o=0;do{if(s>=r.length)break;l=r[s++],o+=l}while(l===255);const u=r.length-s;let c=s;if(o<u)s+=o;else if(o>u){We.error(`Malformed SEI payload. ${o} is too small, only ${u} bytes left to parse.`);break}if(a===4){if(r[c++]===181){const h=YN(r,c);if(c+=2,h===49){const f=ye(r,c);if(c+=4,f===1195456820){const m=r[c++];if(m===3){const p=r[c++],y=31&p,g=64&p,v=g?2+y*3:0,E=new Uint8Array(v);if(g){E[0]=p;for(let T=1;T<v;T++)E[T]=r[c++]}n.push({type:m,payloadType:a,pts:i,bytes:E})}}}}}else if(a===5&&o>16){const d=[];for(let m=0;m<16;m++){const p=r[c++].toString(16);d.push(p.length==1?"0"+p:p),(m===3||m===5||m===7||m===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let m=0;m<h;m++)f[m]=r[c++];n.push({payloadType:a,pts:i,uuid:d.join(""),userData:vn(f),userDataBytes:f})}}}function ZN(t){const e=t.byteLength,i=[];let n=1;for(;n<e-2;)t[n]===0&&t[n+1]===0&&t[n+2]===3?(i.push(n+2),n+=2):n++;if(i.length===0)return t;const r=e-i.length,s=new Uint8Array(r);let a=0;for(n=0;n<r;a++,n++)a===i[0]&&(a++,i.shift()),s[n]=t[a];return s}function Qz(t){const e=t[0];let i="",n="",r=0,s=0,a=0,o=0,l=0,u=0;if(e===0){for(;Xt(t.subarray(u,u+1))!=="\0";)i+=Xt(t.subarray(u,u+1)),u+=1;for(i+=Xt(t.subarray(u,u+1)),u+=1;Xt(t.subarray(u,u+1))!=="\0";)n+=Xt(t.subarray(u,u+1)),u+=1;n+=Xt(t.subarray(u,u+1)),u+=1,r=ye(t,12),s=ye(t,16),o=ye(t,20),l=ye(t,24),u=28}else if(e===1){u+=4,r=ye(t,u),u+=4;const d=ye(t,u);u+=4;const h=ye(t,u);for(u+=4,a=2**32*d+h,kz(a)||(a=Number.MAX_SAFE_INTEGER,We.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=ye(t,u),u+=4,l=ye(t,u),u+=4;Xt(t.subarray(u,u+1))!=="\0";)i+=Xt(t.subarray(u,u+1)),u+=1;for(i+=Xt(t.subarray(u,u+1)),u+=1;Xt(t.subarray(u,u+1))!=="\0";)n+=Xt(t.subarray(u,u+1)),u+=1;n+=Xt(t.subarray(u,u+1)),u+=1}const c=t.subarray(u,t.byteLength);return{schemeIdUri:i,value:n,timeScale:r,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:c}}function Xz(t,...e){const i=e.length;let n=8,r=i;for(;r--;)n+=e[r].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(t,4),r=0,n=8;r<i;r++)s.set(e[r],n),n+=e[r].byteLength;return s}function Zz(t,e,i){if(t.byteLength!==16)throw new RangeError("Invalid system id");let n,r;n=0,r=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return i.byteLength>0&&new DataView(a.buffer).setUint32(0,i.byteLength,!1),Xz([112,115,115,104],new Uint8Array([n,0,0,0]),t,s,r,a,i)}function Jz(t){const e=[];if(t instanceof ArrayBuffer){const i=t.byteLength;let n=0;for(;n+32<i;){const r=new DataView(t,n),s=eQ(r);e.push(s),n+=s.size}}return e}function eQ(t){const e=t.getUint32(0),i=t.byteOffset,n=t.byteLength;if(n<e)return{offset:i,size:n};if(t.getUint32(4)!==1886614376)return{offset:i,size:e};const s=t.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:i,size:e};const a=t.buffer,o=pi(new Uint8Array(a,i+12,16));let l=null,u=null,c=0;if(s===0)c=28;else{const h=t.getUint32(28);if(!h||n<32+h*16)return{offset:i,size:e};l=[];for(let f=0;f<h;f++)l.push(new Uint8Array(a,i+32+f*16,16));c=32+h*16}if(!c)return{offset:i,size:e};const d=t.getUint32(c);return e-32<d?{offset:i,size:e}:(u=new Uint8Array(a,i+c+4,d),{version:s,systemId:o,kids:l,data:u,offset:i,size:e})}const JN=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),kc={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function RA(t,e){const i=kc[e];return!!i&&!!i[t.slice(0,4)]}function Jh(t,e,i=!0){return!t.split(",").some(n=>!wA(n,e,i))}function wA(t,e,i=!0){var n;const r=Xa(i);return(n=r==null?void 0:r.isTypeSupported(ef(t,e)))!=null?n:!1}function ef(t,e){return`${e}/mp4;codecs=${t}`}function KR(t){if(t){const e=t.substring(0,4);return kc.video[e]}return 2}function A0(t){const e=JN();return t.split(",").reduce((i,n)=>{const s=e&&Zv(n)?9:kc.video[n];return s?(s*2+i)/(i?3:2):(kc.audio[n]+i)/(i?2:1)},0)}const LE={};function tQ(t,e=!0){if(LE[t])return LE[t];const i={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[t];for(let r=0;r<i.length;r++){var n;if(wA(i[r],"audio",e))return LE[t]=i[r],i[r];if(i[r]==="mp3"&&(n=Xa(e))!=null&&n.isTypeSupported("audio/mpeg"))return""}return t}const iQ=/flac|opus|mp4a\.40\.34/i;function x0(t,e=!0){return t.replace(iQ,i=>tQ(i.toLowerCase(),e))}function nQ(t,e){const i=[];if(t){const n=t.split(",");for(let r=0;r<n.length;r++)RA(n[r],"video")||i.push(n[r])}return e&&i.push(e),i.join(",")}function vp(t,e){if(t&&(t.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(t)!==-1)&&(GR(t,"audio")||GR(t,"video")))return t;if(e){const i=e.split(",");if(i.length>1){if(t){for(let n=i.length;n--;)if(i[n].substring(0,4)===t.substring(0,4))return i[n]}return i[0]}}return e||t}function GR(t,e){return RA(t,e)&&wA(t,e)}function rQ(t){const e=t.split(",");for(let i=0;i<e.length;i++){const n=e[i].split(".");n.length>2&&n[0]==="avc1"&&(e[i]=`avc1.${parseInt(n[1]).toString(16)}${("000"+parseInt(n[2]).toString(16)).slice(-4)}`)}return e.join(",")}function sQ(t){if(t.startsWith("av01.")){const e=t.split("."),i=["0","111","01","01","01","0"];for(let n=e.length;n>4&&n<10;n++)e[n]=i[n-4];return e.join(".")}return t}function WR(t){const e=Xa(t)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function j1(t){return t.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const aQ={supported:!0,powerEfficient:!0,smooth:!0},oQ={supported:!1,smooth:!1,powerEfficient:!1},e3={supported:!0,configurations:[],decodingInfoResults:[aQ]};function t3(t,e){return{supported:!1,configurations:e,decodingInfoResults:[oQ],error:t}}function lQ(t,e,i,n,r,s){const a=t.videoCodec,o=t.audioCodec?t.audioGroups:null,l=s==null?void 0:s.audioCodec,u=s==null?void 0:s.channels,c=u?parseInt(u):l?1/0:2;let d=null;if(o!=null&&o.length)try{o.length===1&&o[0]?d=e.groups[o[0]].channels:d=o.reduce((h,f)=>{if(f){const m=e.groups[f];if(!m)throw new Error(`Audio track group ${f} not found`);Object.keys(m.channels).forEach(p=>{h[p]=(h[p]||0)+m.channels[p]})}return h},{2:0})}catch{return!0}return a!==void 0&&(a.split(",").some(h=>Zv(h))||t.width>1920&&t.height>1088||t.height>1920&&t.width>1088||t.frameRate>Math.max(n,30)||t.videoRange!=="SDR"&&t.videoRange!==i||t.bitrate>Math.max(r,8e6))||!!d&&te(c)&&Object.keys(d).some(h=>parseInt(h)>c)}function i3(t,e,i,n={}){const r=t.videoCodec;if(!r&&!t.audioCodec||!i)return Promise.resolve(e3);const s=[],a=uQ(t),o=a.length,l=cQ(t,e,o>0),u=l.length;for(let c=o||1*u||1;c--;){const d={type:"media-source"};if(o&&(d.video=a[c%o]),u){d.audio=l[c%u];const h=d.audio.bitrate;d.video&&h&&(d.video.bitrate-=h)}s.push(d)}if(r){const c=navigator.userAgent;if(r.split(",").some(d=>Zv(d))&&JN())return Promise.resolve(t3(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${c})`),s))}return Promise.all(s.map(c=>{const d=hQ(c);return n[d]||(n[d]=i.decodingInfo(c))})).then(c=>({supported:!c.some(d=>!d.supported),configurations:s,decodingInfoResults:c})).catch(c=>({supported:!1,configurations:s,decodingInfoResults:[],error:c}))}function uQ(t){var e;const i=(e=t.videoCodec)==null?void 0:e.split(","),n=n3(t),r=t.width||640,s=t.height||480,a=t.frameRate||30,o=t.videoRange.toLowerCase();return i?i.map(l=>{const u={contentType:ef(sQ(l),"video"),width:r,height:s,bitrate:n,framerate:a};return o!=="sdr"&&(u.transferFunction=o),u}):[]}function cQ(t,e,i){var n;const r=(n=t.audioCodec)==null?void 0:n.split(","),s=n3(t);return r&&t.audioGroups?t.audioGroups.reduce((a,o)=>{var l;const u=o?(l=e.groups[o])==null?void 0:l.tracks:null;return u?u.reduce((c,d)=>{if(d.groupId===o){const h=parseFloat(d.channels||"");r.forEach(f=>{const m={contentType:ef(f,"audio"),bitrate:i?dQ(f,s):s};h&&(m.channels=""+h),c.push(m)})}return c},a):a},[]):[]}function dQ(t,e){if(e<=1)return 1;let i=128e3;return t==="ec-3"?i=768e3:t==="ac-3"&&(i=64e4),Math.min(e/2,i)}function n3(t){return Math.ceil(Math.max(t.bitrate*.9,t.averageBitrate)/1e3)*1e3||1}function hQ(t){let e="";const{audio:i,video:n}=t;if(n){const r=j1(n.contentType);e+=`${r}_r${n.height}x${n.width}f${Math.ceil(n.framerate)}${n.transferFunction||"sd"}_${Math.ceil(n.bitrate/1e5)}`}if(i){const r=j1(i.contentType);e+=`${n?"_":""}${r}_c${i.channels}`}return e}const Y1=["NONE","TYPE-0","TYPE-1",null];function fQ(t){return Y1.indexOf(t)>-1}const k0=["SDR","PQ","HLG"];function mQ(t){return!!t&&k0.indexOf(t)>-1}var yp={No:"",Yes:"YES",v2:"v2"};function jR(t){const{canSkipUntil:e,canSkipDateRanges:i,age:n}=t,r=n<e/2;return e&&r?i?yp.v2:yp.Yes:yp.No}class YR{constructor(e,i,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=i,this.skip=n}addDirectives(e){const i=new self.URL(e);return this.msn!==void 0&&i.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&i.searchParams.set("_HLS_part",this.part.toString()),this.skip&&i.searchParams.set("_HLS_skip",this.skip),i.href}}class tf{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(n=>!!n).map(n=>n.substring(0,4)).join(","),"supplemental"in e){var i;this.supplemental=e.supplemental;const n=(i=e.supplemental)==null?void 0:i.videoCodec;n&&n!==e.videoCodec&&(this.codecSet+=`,${n.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return qR(this._audioGroups,e)}hasSubtitleGroup(e){return qR(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,i){if(i){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(i)===-1&&n.push(i)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(i)===-1&&n.push(i)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function qR(t,e){return!e||!t?!1:t.indexOf(e)!==-1}function pQ(){if(typeof matchMedia=="function"){const t=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(t.media!==e.media)return t.matches===!0}return!1}function gQ(t,e){let i=!1,n=[];if(t&&(i=t!=="SDR",n=[t]),e){n=e.allowedVideoRanges||k0.slice(0);const r=n.join("")!=="SDR"&&!e.videoCodec;i=e.preferHDR!==void 0?e.preferHDR:r&&pQ(),i||(n=["SDR"])}return{preferHDR:i,allowedVideoRanges:n}}const vQ=t=>{const e=new WeakSet;return(i,n)=>{if(t&&(n=t(i,n)),typeof n=="object"&&n!==null){if(e.has(n))return;e.add(n)}return n}},tt=(t,e)=>JSON.stringify(t,vQ(e));function yQ(t,e,i,n,r){const s=Object.keys(t),a=n==null?void 0:n.channels,o=n==null?void 0:n.audioCodec,l=r==null?void 0:r.videoCodec,u=a&&parseInt(a)===2;let c=!1,d=!1,h=1/0,f=1/0,m=1/0,p=1/0,y=0,g=[];const{preferHDR:v,allowedVideoRanges:E}=gQ(e,r);for(let I=s.length;I--;){const L=t[s[I]];c||(c=L.channels[2]>0),h=Math.min(h,L.minHeight),f=Math.min(f,L.minFramerate),m=Math.min(m,L.minBitrate),E.filter(R=>L.videoRanges[R]>0).length>0&&(d=!0)}h=te(h)?h:0,f=te(f)?f:0;const T=Math.max(1080,h),_=Math.max(30,f);m=te(m)?m:i,i=Math.max(m,i),d||(e=void 0);const x=s.length>1;return{codecSet:s.reduce((I,L)=>{const b=t[L];if(L===I)return I;if(g=d?E.filter(R=>b.videoRanges[R]>0):[],x){if(b.minBitrate>i)return yr(L,`min bitrate of ${b.minBitrate} > current estimate of ${i}`),I;if(!b.hasDefaultAudio)return yr(L,"no renditions with default or auto-select sound found"),I;if(o&&L.indexOf(o.substring(0,4))%5!==0)return yr(L,`audio codec preference "${o}" not found`),I;if(a&&!u){if(!b.channels[a])return yr(L,`no renditions with ${a} channel sound found (channels options: ${Object.keys(b.channels)})`),I}else if((!o||u)&&c&&b.channels[2]===0)return yr(L,"no renditions with stereo sound found"),I;if(b.minHeight>T)return yr(L,`min resolution of ${b.minHeight} > maximum of ${T}`),I;if(b.minFramerate>_)return yr(L,`min framerate of ${b.minFramerate} > maximum of ${_}`),I;if(!g.some(R=>b.videoRanges[R]>0))return yr(L,`no variants with VIDEO-RANGE of ${tt(g)} found`),I;if(l&&L.indexOf(l.substring(0,4))%5!==0)return yr(L,`video codec preference "${l}" not found`),I;if(b.maxScore<y)return yr(L,`max score of ${b.maxScore} < selected max of ${y}`),I}return I&&(A0(L)>=A0(I)||b.fragmentError>t[I].fragmentError)?I:(p=b.minIndex,y=b.maxScore,L)},void 0),videoRanges:g,preferHDR:v,minFramerate:f,minBitrate:m,minIndex:p}}function yr(t,e){We.log(`[abr] start candidates with "${t}" ignored because ${e}`)}function r3(t){return t.reduce((e,i)=>{let n=e.groups[i.groupId];n||(n=e.groups[i.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(i);const r=i.channels||"2";return n.channels[r]=(n.channels[r]||0)+1,n.hasDefault=n.hasDefault||i.default,n.hasAutoSelect=n.hasAutoSelect||i.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function EQ(t,e,i,n){return t.slice(i,n+1).reduce((r,s,a)=>{if(!s.codecSet)return r;const o=s.audioGroups;let l=r[s.codecSet];l||(r[s.codecSet]=l={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:a,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!o,fragmentError:0}),l.minBitrate=Math.min(l.minBitrate,s.bitrate);const u=Math.min(s.height,s.width);return l.minHeight=Math.min(l.minHeight,u),l.minFramerate=Math.min(l.minFramerate,s.frameRate),l.minIndex=Math.min(l.minIndex,a),l.maxScore=Math.max(l.maxScore,s.score),l.fragmentError+=s.fragmentError,l.videoRanges[s.videoRange]=(l.videoRanges[s.videoRange]||0)+1,o&&o.forEach(c=>{if(!c)return;const d=e.groups[c];d&&(l.hasDefaultAudio=l.hasDefaultAudio||e.hasDefaultAudio?d.hasDefault:d.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(d.channels).forEach(h=>{l.channels[h]=(l.channels[h]||0)+d.channels[h]}))}),r},{})}function zR(t){if(!t)return t;const{lang:e,assocLang:i,characteristics:n,channels:r,audioCodec:s}=t;return{lang:e,assocLang:i,characteristics:n,channels:r,audioCodec:s}}function Wr(t,e,i){if("attrs"in t){const n=e.indexOf(t);if(n!==-1)return n}for(let n=0;n<e.length;n++){const r=e[n];if(Xo(t,r,i))return n}return-1}function Xo(t,e,i){const{groupId:n,name:r,lang:s,assocLang:a,default:o}=t,l=t.forced;return(n===void 0||e.groupId===n)&&(r===void 0||e.name===r)&&(s===void 0||TQ(s,e.lang))&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in t)||bQ(t.characteristics||"",e.characteristics))&&(i===void 0||i(t,e))}function TQ(t,e="--"){return t.length===e.length?t===e:t.startsWith(e)||e.startsWith(t)}function bQ(t,e=""){const i=t.split(","),n=e.split(",");return i.length===n.length&&!i.some(r=>n.indexOf(r)===-1)}function Eo(t,e){const{audioCodec:i,channels:n}=t;return(i===void 0||(e.audioCodec||"").substring(0,4)===i.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function SQ(t,e,i,n,r){const s=e[n],o=e.reduce((h,f,m)=>{const p=f.uri;return(h[p]||(h[p]=[])).push(m),h},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=s.videoRange,u=s.frameRate,c=s.codecSet.substring(0,4),d=QR(e,n,h=>{if(h.videoRange!==l||h.frameRate!==u||h.codecSet.substring(0,4)!==c)return!1;const f=h.audioGroups,m=i.filter(p=>!f||f.indexOf(p.groupId)!==-1);return Wr(t,m,r)>-1});return d>-1?d:QR(e,n,h=>{const f=h.audioGroups,m=i.filter(p=>!f||f.indexOf(p.groupId)!==-1);return Wr(t,m,r)>-1})}function QR(t,e,i){for(let n=e;n>-1;n--)if(i(t[n]))return n;for(let n=e+1;n<t.length;n++)if(i(t[n]))return n;return-1}function I0(t,e){var i;return!!t&&t!==((i=e.loadLevelObj)==null?void 0:i.uri)}class _Q extends Kn{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=i=>{var n;const{fragCurrent:r,partCurrent:s,hls:a}=this,{autoLevelEnabled:o,media:l}=a;if(!r||!l)return;const u=performance.now(),c=s?s.stats:r.stats,d=s?s.duration:r.duration,h=u-c.loading.start,f=a.minAutoLevel,m=r.level,p=this._nextAutoLevel;if(c.aborted||c.loaded&&c.loaded===c.total||m<=f){this.clearTimer(),this._nextAutoLevel=-1;return}if(!o)return;const y=p>-1&&p!==m,g=!!i||y;if(!g&&(l.paused||!l.playbackRate||!l.readyState))return;const v=a.mainForwardBufferInfo;if(!g&&v===null)return;const E=this.bwEstimator.getEstimateTTFB(),T=Math.abs(l.playbackRate);if(h<=Math.max(E,1e3*(d/(T*2))))return;const _=v?v.len/T:0,x=c.loading.first?c.loading.first-c.loading.start:-1,A=c.loaded&&x>-1,I=this.getBwEstimate(),L=a.levels,b=L[m],R=Math.max(c.loaded,Math.round(d*(r.bitrate||b.averageBitrate)/8));let P=A?h-x:h;P<1&&A&&(P=Math.min(h,c.loaded*8/I));const w=A?c.loaded*1e3/P:0,$=E/1e3,B=w?(R-c.loaded)/w:R*8/I+$;if(B<=_)return;const U=w?w*8:I,V=((n=(i==null?void 0:i.details)||this.hls.latestLevelDetails)==null?void 0:n.live)===!0,C=this.hls.config.abrBandWidthUpFactor;let K=Number.POSITIVE_INFINITY,z;for(z=m-1;z>f;z--){const pe=L[z].maxBitrate,fe=!L[z].details||V;if(K=this.getTimeToLoadFrag($,U,d*pe,fe),K<Math.min(_,d+$))break}if(K>=B||K>d*10)return;A?this.bwEstimator.sample(h-Math.min(E,x),c.loaded):this.bwEstimator.sampleTTFB(h);const H=L[z].maxBitrate;this.getBwEstimate()*C>H&&this.resetEstimator(H);const Y=this.findBestLevel(H,f,z,0,_,1,1);Y>-1&&(z=Y),this.warn(`Fragment ${r.sn}${s?" part "+s.index:""} of level ${m} is loading too slowly;
      Fragment duration: ${r.duration.toFixed(3)}
      Time to underbuffer: ${_.toFixed(3)} s
      Estimated load time for current fragment: ${B.toFixed(3)} s
      Estimated load time for down switch fragment: ${K.toFixed(3)} s
      TTFB estimate: ${x|0} ms
      Current BW estimate: ${te(I)?I|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${z} @ ${H|0} bps`),a.nextLoadLevel=a.nextAutoLevel=z,this.clearTimer();const oe=()=>{if(this.clearTimer(),this.fragCurrent===r&&this.hls.loadLevel===z&&z>0){const pe=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${z>0?"and switching down":""}
      Fragment duration: ${r.duration.toFixed(3)} s
      Time to underbuffer: ${pe.toFixed(3)} s`),r.abortRequests(),this.fragCurrent=this.partCurrent=null,z>f){let fe=this.findBestLevel(this.hls.levels[f].bitrate,f,z,0,pe,1,1);fe===-1&&(fe=f),this.hls.nextLoadLevel=this.hls.nextAutoLevel=fe,this.resetEstimator(this.hls.levels[fe].bitrate)}}};y||B>K*2?oe():this.timer=self.setInterval(oe,K*1e3),a.trigger(S.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,part:s,stats:c})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new Lz(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(S.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,i){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,i){const n=i.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var r;this.fragCurrent=n,this.partCurrent=(r=i.part)!=null?r:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,i){this.clearTimer()}onError(e,i){if(!i.fatal)switch(i.details){case M.BUFFER_ADD_CODEC_ERROR:case M.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case M.FRAG_LOAD_TIMEOUT:{const n=i.frag,{fragCurrent:r,partCurrent:s}=this;if(n&&r&&n.sn===r.sn&&n.level===r.level){const a=performance.now(),o=s?s.stats:n.stats,l=a-o.loading.start,u=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&u>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,u),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,i,n,r){const s=e+n/i,a=r?e+this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,i){const n=this.hls.config,{loading:r}=i.stats,s=r.end-r.first;te(s)&&(this.lastLevelLoadSec=s/1e3),i.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(i.levelInfo)}onFragLoaded(e,{frag:i,part:n}){const r=n?n.stats:i.stats;if(i.type===ne.MAIN&&this.bwEstimator.sampleTTFB(r.loading.first-r.loading.start),!this.ignoreFragment(i)){if(this.clearTimer(),i.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:i.duration,a=this.hls.levels[i.level],o=(a.loaded?a.loaded.bytes:0)+r.loaded,l=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(i.bitrateTest){const s={stats:r,frag:i,part:n,id:i.type};this.onFragBuffered(S.FRAG_BUFFERED,s),i.bitrateTest=!1}else this.lastLoadedFragLevel=i.level}}onFragBuffered(e,i){const{frag:n,part:r}=i,s=r!=null&&r.stats.loaded?r.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ne.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:i}=this.hls,n=this.getBwEstimate(),r=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,i,e,0,r,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,i),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),r=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!r||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&r?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:i,hls:n}=this;if(n.levels.length<=1)return n.loadLevel;const{maxAutoLevel:r,config:s,minAutoLevel:a}=n,o=i?i.duration:e?e.duration:0,l=this.getBwEstimate(),u=this.getStarvationDelay();let c=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(u){const y=this.findBestLevel(l,a,r,u,0,c,d);if(y>=0)return this.rebufferNotice=-1,y}let h=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!u){const y=this.bitrateTestDelay;y&&(h=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-y,this.info(`bitrate test took ${Math.round(1e3*y)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),c=d=1)}const f=this.findBestLevel(l,a,r,u,h,c,d);if(this.rebufferNotice!==f&&(this.rebufferNotice=f,this.info(`${u?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`)),f>-1)return f;const m=n.levels[a],p=n.loadLevelObj;return p&&(m==null?void 0:m.bitrate)<p.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,i=e.media;if(!i)return 1/0;const n=i&&i.playbackRate!==0?Math.abs(i.playbackRate):1,r=e.mainForwardBufferInfo;return(r?r.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,i,n,r,s,a,o){var l;const u=r+s,c=this.lastLoadedFragLevel,d=c===-1?this.hls.firstLevel:c,{fragCurrent:h,partCurrent:f}=this,{levels:m,allAudioTracks:p,loadLevel:y,config:g}=this.hls;if(m.length===1)return 0;const v=m[d],E=!!((l=this.hls.latestLevelDetails)!=null&&l.live),T=y===-1||c===-1;let _,x="SDR",A=(v==null?void 0:v.frameRate)||0;const{audioPreference:I,videoPreference:L}=g,b=this.audioTracksByGroup||(this.audioTracksByGroup=r3(p));let R=-1;if(T){if(this.firstSelection!==-1)return this.firstSelection;const U=this.codecTiers||(this.codecTiers=EQ(m,b,i,n)),V=yQ(U,x,e,I,L),{codecSet:C,videoRanges:K,minFramerate:z,minBitrate:H,minIndex:Y,preferHDR:oe}=V;R=Y,_=C,x=oe?K[K.length-1]:K[0],A=z,e=Math.max(e,H),this.log(`picked start tier ${tt(V)}`)}else _=v==null?void 0:v.codecSet,x=v==null?void 0:v.videoRange;const P=f?f.duration:h?h.duration:0,w=this.bwEstimator.getEstimateTTFB()/1e3,$=[];for(let U=n;U>=i;U--){var B;const V=m[U],C=U>d;if(!V)continue;if(g.useMediaCapabilities&&!V.supportedResult&&!V.supportedPromise){const fe=navigator.mediaCapabilities;typeof(fe==null?void 0:fe.decodingInfo)=="function"&&lQ(V,b,x,A,e,I)?(V.supportedPromise=i3(V,b,fe,this.supportedCache),V.supportedPromise.then(Ee=>{if(!this.hls)return;V.supportedResult=Ee;const dt=this.hls.levels,$t=dt.indexOf(V);Ee.error?this.warn(`MediaCapabilities decodingInfo error: "${Ee.error}" for level ${$t} ${tt(Ee)}`):Ee.supported?Ee.decodingInfoResults.some(Ci=>Ci.smooth===!1||Ci.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${$t} not smooth or powerEfficient: ${tt(Ee)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${$t} ${tt(Ee)}`),$t>-1&&dt.length>1&&(this.log(`Removing unsupported level ${$t}`),this.hls.removeLevel($t),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(Ee=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${Ee}`)})):V.supportedResult=e3}if((_&&V.codecSet!==_||x&&V.videoRange!==x||C&&A>V.frameRate||!C&&A>0&&A<V.frameRate||(B=V.supportedResult)!=null&&(B=B.decodingInfoResults)!=null&&B.some(fe=>fe.smooth===!1))&&(!T||U!==R)){$.push(U);continue}const K=V.details,z=(f?K==null?void 0:K.partTarget:K==null?void 0:K.averagetargetduration)||P;let H;C?H=o*e:H=a*e;const Y=P&&r>=P*2&&s===0?V.averageBitrate:V.maxBitrate,oe=this.getTimeToLoadFrag(w,H,Y*z,K===void 0);if(H>=Y&&(U===c||V.loadError===0&&V.fragmentError===0)&&(oe<=w||!te(oe)||E&&!this.bitrateTestDelay||oe<u)){const fe=this.forcedAutoLevel;return U!==y&&(fe===-1||fe!==y)&&($.length&&this.trace(`Skipped level(s) ${$.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${m[$[0]].codecs}" ${m[$[0]].videoRange}; not compatible with "${_}" ${x}`),this.info(`switch candidate:${d}->${U} adjustedbw(${Math.round(H)})-bitrate=${Math.round(H-Y)} ttfb:${w.toFixed(1)} avgDuration:${z.toFixed(1)} maxFetchDuration:${u.toFixed(1)} fetchDuration:${oe.toFixed(1)} firstSelection:${T} codecSet:${V.codecSet} videoRange:${V.videoRange} hls.loadLevel:${y}`)),T&&(this.firstSelection=U),U}}return-1}set nextAutoLevel(e){const i=this.deriveNextAutoLevel(e);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}deriveNextAutoLevel(e){const{maxAutoLevel:i,minAutoLevel:n}=this.hls;return Math.min(Math.max(e,n),i)}}const s3={search:function(t,e){let i=0,n=t.length-1,r=null,s=null;for(;i<=n;){r=(i+n)/2|0,s=t[r];const a=e(s);if(a>0)i=r+1;else if(a<0)n=r-1;else return s}return null}};function AQ(t,e,i){if(e===null||!Array.isArray(t)||!t.length||!te(e))return null;const n=t[0].programDateTime;if(e<(n||0))return null;const r=t[t.length-1].endProgramDateTime;if(e>=(r||0))return null;for(let s=0;s<t.length;++s){const a=t[s];if(kQ(e,i,a))return a}return null}function hl(t,e,i=0,n=0,r=.005){let s=null;if(t){s=e[1+t.sn-e[0].sn]||null;const o=t.endDTS-i;o>0&&o<15e-7&&(i+=15e-7),s&&t.level!==s.level&&s.end<=t.end&&(s=e[2+t.sn-e[0].sn]||null)}else i===0&&e[0].start===0&&(s=e[0]);if(s&&((!t||t.level===s.level)&&XR(i,n,s)===0||xQ(s,t,Math.min(r,n))))return s;const a=s3.search(e,XR.bind(null,i,n));return a&&(a!==t||!s)?a:s}function xQ(t,e,i){if(e&&e.start===0&&e.level<t.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((r,s)=>(s[0]==="INF"&&(r+=parseFloat(s[1])),r),i);return t.start<=n}return!1}function XR(t=0,e=0,i){if(i.start<=t&&i.start+i.duration>t)return 0;const n=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0));return i.start+i.duration-n<=t?1:i.start-n>t&&i.start?-1:0}function kQ(t,e,i){const n=Math.min(e,i.duration+(i.deltaPTS?i.deltaPTS:0))*1e3;return(i.endProgramDateTime||0)-n>t}function a3(t,e,i){if(t&&t.startCC<=e&&t.endCC>=e){let n=t.fragments;const{fragmentHint:r}=t;r&&(n=n.concat(r));let s;return s3.search(n,a=>a.cc<e?1:a.cc>e?-1:(s=a,a.end<=i?1:a.start>i?-1:0)),s||null}return null}function L0(t){switch(t.details){case M.FRAG_LOAD_TIMEOUT:case M.KEY_LOAD_TIMEOUT:case M.LEVEL_LOAD_TIMEOUT:case M.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function o3(t){return t.details.startsWith("key")}function l3(t){return o3(t)&&!!t.frag&&!t.frag.decryptdata}function ZR(t,e){const i=L0(e);return t.default[`${i?"timeout":"error"}Retry`]}function CA(t,e){const i=t.backoff==="linear"?1:Math.pow(2,e);return Math.min(i*t.retryDelayMs,t.maxRetryDelayMs)}function JR(t){return Ge(Ge({},t),{errorRetry:null,timeoutRetry:null})}function R0(t,e,i,n){if(!t)return!1;const r=n==null?void 0:n.code,s=e<t.maxNumRetry&&(IQ(r)||!!i);return t.shouldRetry?t.shouldRetry(t,e,i,n,s):s}function IQ(t){return q1(t)||!!t&&(t<400||t>499)}function q1(t){return t===0&&navigator.onLine===!1}var mi={DoNothing:0,SendEndCallback:1,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,InsertDiscontinuity:4,RetryRequest:5},sn={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4,SwitchToSDR:8};class LQ extends Kn{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.ERROR,this.onError,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.ERROR,this.onError,this),e.off(S.ERROR,this.onErrorOut,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return(e==null?void 0:e.type)===ne.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const i=this.hls,n=i.currentLevel;return(e=i.loadLevelObj)!=null&&e.details||n===-1?i.loadLevel:n}variantHasKey(e,i){if(e){var n;if((n=e.details)!=null&&n.hasKey(i))return!0;const r=e.audioGroups;if(r)return this.hls.allAudioTracks.filter(a=>r.indexOf(a.groupId)>=0).some(a=>{var o;return(o=a.details)==null?void 0:o.hasKey(i)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,i){var n;if(i.fatal)return;const r=this.hls,s=i.context;switch(i.details){case M.FRAG_LOAD_ERROR:case M.FRAG_LOAD_TIMEOUT:case M.KEY_LOAD_ERROR:case M.KEY_LOAD_TIMEOUT:i.errorAction=this.getFragRetryOrSwitchAction(i);return;case M.FRAG_PARSING_ERROR:if((n=i.frag)!=null&&n.gap){i.errorAction=Yu();return}case M.FRAG_GAP:case M.FRAG_DECRYPT_ERROR:{i.errorAction=this.getFragRetryOrSwitchAction(i),i.errorAction.action=mi.SendAlternateToPenaltyBox;return}case M.LEVEL_EMPTY_ERROR:case M.LEVEL_PARSING_ERROR:{var a;const l=i.parent===ne.MAIN?i.level:r.loadLevel;i.details===M.LEVEL_EMPTY_ERROR&&((a=i.context)!=null&&(a=a.levelDetails)!=null&&a.live)?i.errorAction=this.getPlaylistRetryOrSwitchAction(i,l):(i.levelRetry=!1,i.errorAction=this.getLevelSwitchAction(i,l))}return;case M.LEVEL_LOAD_ERROR:case M.LEVEL_LOAD_TIMEOUT:typeof(s==null?void 0:s.level)=="number"&&(i.errorAction=this.getPlaylistRetryOrSwitchAction(i,s.level));return;case M.AUDIO_TRACK_LOAD_ERROR:case M.AUDIO_TRACK_LOAD_TIMEOUT:case M.SUBTITLE_LOAD_ERROR:case M.SUBTITLE_TRACK_LOAD_TIMEOUT:if(s){const l=r.loadLevelObj;if(l&&(s.type===ke.AUDIO_TRACK&&l.hasAudioGroup(s.groupId)||s.type===ke.SUBTITLE_TRACK&&l.hasSubtitleGroup(s.groupId))){i.errorAction=this.getPlaylistRetryOrSwitchAction(i,r.loadLevel),i.errorAction.action=mi.SendAlternateToPenaltyBox,i.errorAction.flags=sn.MoveAllAlternatesMatchingHost;return}}return;case M.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:i.errorAction={action:mi.SendAlternateToPenaltyBox,flags:sn.MoveAllAlternatesMatchingHDCP};return;case M.KEY_SYSTEM_SESSION_UPDATE_FAILED:case M.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case M.KEY_SYSTEM_NO_SESSION:i.errorAction={action:mi.SendAlternateToPenaltyBox,flags:sn.MoveAllAlternatesMatchingKey};return;case M.BUFFER_ADD_CODEC_ERROR:case M.REMUX_ALLOC_ERROR:case M.BUFFER_APPEND_ERROR:if(!i.errorAction){var o;i.errorAction=this.getLevelSwitchAction(i,(o=i.level)!=null?o:r.loadLevel)}return;case M.INTERNAL_EXCEPTION:case M.BUFFER_APPENDING_ERROR:case M.BUFFER_FULL_ERROR:case M.LEVEL_SWITCH_ERROR:case M.BUFFER_STALLED_ERROR:case M.BUFFER_SEEK_OVER_HOLE:case M.BUFFER_NUDGE_ON_STALL:i.errorAction=Yu();return}i.type===le.KEY_SYSTEM_ERROR&&(i.levelRetry=!1,i.errorAction=Yu())}getPlaylistRetryOrSwitchAction(e,i){const n=this.hls,r=ZR(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(R0(r,s,L0(e),e.response))return{action:mi.RetryRequest,flags:sn.None,retryConfig:r,retryCount:s};const o=this.getLevelSwitchAction(e,i);return r&&(o.retryConfig=r,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const i=this.hls,n=this.getVariantLevelIndex(e.frag),r=i.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=i.config,o=ZR(o3(e)?a:s,e),l=i.levels.reduce((c,d)=>c+d.fragmentError,0);if(r&&(e.details!==M.FRAG_GAP&&r.fragmentError++,!l3(e)&&R0(o,l,L0(e),e.response)))return{action:mi.RetryRequest,flags:sn.None,retryConfig:o,retryCount:l};const u=this.getLevelSwitchAction(e,n);return o&&(u.retryConfig=o,u.retryCount=l),u}getLevelSwitchAction(e,i){const n=this.hls;i==null&&(i=n.loadLevel);const r=this.hls.levels[i];if(r){var s,a;const u=e.details;r.loadError++,u===M.BUFFER_APPEND_ERROR&&r.fragmentError++;let c=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:m}=n;!n.autoLevelEnabled&&!n.config.preserveManualLevelOnError&&(n.loadLevel=-1);const p=(s=e.frag)==null?void 0:s.type,g=(p===ne.AUDIO&&u===M.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(u===M.BUFFER_ADD_CODEC_ERROR||u===M.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:x})=>r.audioCodec!==x),E=e.sourceBufferName==="video"&&(u===M.BUFFER_ADD_CODEC_ERROR||u===M.BUFFER_APPEND_ERROR)&&d.some(({codecSet:x,audioCodec:A})=>r.codecSet!==x&&r.audioCodec===A),{type:T,groupId:_}=(a=e.context)!=null?a:{};for(let x=d.length;x--;){const A=(x+h)%d.length;if(A!==h&&A>=f&&A<=m&&d[A].loadError===0){var o,l;const I=d[A];if(u===M.FRAG_GAP&&p===ne.MAIN&&e.frag){const L=d[A].details;if(L){const b=hl(e.frag,L.fragments,e.frag.start);if(b!=null&&b.gap)continue}}else{if(T===ke.AUDIO_TRACK&&I.hasAudioGroup(_)||T===ke.SUBTITLE_TRACK&&I.hasSubtitleGroup(_))continue;if(p===ne.AUDIO&&(o=r.audioGroups)!=null&&o.some(L=>I.hasAudioGroup(L))||p===ne.SUBTITLE&&(l=r.subtitleGroups)!=null&&l.some(L=>I.hasSubtitleGroup(L))||g&&r.audioCodec===I.audioCodec||E&&r.codecSet===I.codecSet||!g&&r.codecSet!==I.codecSet)continue}c=A;break}}if(c>-1&&n.loadLevel!==c)return e.levelRetry=!0,this.playlistError=0,{action:mi.SendAlternateToPenaltyBox,flags:sn.None,nextAutoLevel:c}}return{action:mi.SendAlternateToPenaltyBox,flags:sn.MoveAllAlternatesMatchingHost}}onErrorOut(e,i){var n;switch((n=i.errorAction)==null?void 0:n.action){case mi.DoNothing:break;case mi.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(i),!i.errorAction.resolved&&i.details!==M.FRAG_GAP?i.fatal=!0:/MediaSource readyState: ended/.test(i.error.message)&&(this.warn(`MediaSource ended after "${i.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(i.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const i=this.hls,n=e.errorAction;if(!n)return;const{flags:r}=n,s=n.nextAutoLevel;switch(r){case sn.None:this.switchLevel(e,s);break;case sn.MoveAllAlternatesMatchingHDCP:{const l=this.getVariantLevelIndex(e.frag),u=i.levels[l],c=u==null?void 0:u.attrs["HDCP-LEVEL"];if(n.hdcpLevel=c,c==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(c){i.maxHdcpLevel=Y1[Y1.indexOf(c)-1],n.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${i.maxHdcpLevel}" or lower`);break}}case sn.MoveAllAlternatesMatchingKey:{const l=e.decryptdata;if(l){const u=this.hls.levels,c=u.length;for(let h=c;h--;)if(this.variantHasKey(u[h],l)){var a,o;this.log(`Banned key found in level ${h} (${u[h].bitrate}bps) or audio group "${(a=u[h].audioGroups)==null?void 0:a.join(",")}" (${(o=e.frag)==null?void 0:o.type} fragment) ${pi(l.keyId||[])}`),u[h].fragmentError++,u[h].loadError++,this.log(`Removing level ${h} with key error (${e.error})`),this.hls.removeLevel(h)}const d=e.frag;if(this.hls.levels.length<c)n.resolved=!0;else if(d&&d.type!==ne.MAIN){const h=d.decryptdata;h&&!l.matches(h)&&(n.resolved=!0)}}break}}n.resolved||this.switchLevel(e,s)}switchLevel(e,i){if(i!==void 0&&e.errorAction&&(this.warn(`switching to level ${i} after ${e.details}`),this.hls.nextAutoLevel=i,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===M.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const n=j1(e.mimeType),r=this.hls.levels;for(let s=r.length;s--;)r[s][`${e.sourceBufferName}Codec`]===n&&(this.log(`Removing level ${s} for ${e.details} ("${n}" not supported)`),this.hls.removeLevel(s))}}}function Yu(t){const e={action:mi.DoNothing,flags:sn.None};return t&&(e.resolved=!0),e}var Jt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class RQ{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.BUFFER_APPENDED,this.onBufferAppended,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.BUFFER_APPENDED,this.onBufferAppended,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,i){const n=this.activePartLists[i];if(n)for(let r=n.length;r--;){const s=n[r];if(!s)break;if(s.start<=e&&e<=s.end&&s.loaded)return s}return this.getBufferedFrag(e,i)}getBufferedFrag(e,i){return this.getFragAtPos(e,i,!0)}getFragAtPos(e,i,n){const{fragments:r}=this,s=Object.keys(r);for(let a=s.length;a--;){const o=r[s[a]];if((o==null?void 0:o.body.type)===i&&(!n||o.buffered)){const l=o.body;if(l.start<=e&&e<=l.end)return l}}return null}detectEvictedFragments(e,i,n,r,s){this.timeRanges&&(this.timeRanges[e]=i);const a=(r==null?void 0:r.fragment.sn)||-1;Object.keys(this.fragments).forEach(o=>{const l=this.fragments[o];if(!l||a>=l.body.sn)return;if(!l.buffered&&(!l.loaded||s)){l.body.type===n&&this.removeFragment(l.body);return}const u=l.range[e];if(u){if(u.time.length===0){this.removeFragment(l.body);return}u.time.some(c=>{const d=!this.isTimeBuffered(c.startPTS,c.endPTS,i);return d&&this.removeFragment(l.body),d})}})}detectPartialFragments(e){const i=this.timeRanges;if(!i||e.frag.sn==="initSegment")return;const n=e.frag,r=Dl(n),s=this.fragments[r];if(!s||s.buffered&&n.gap)return;const a=!n.relurl;Object.keys(i).forEach(o=>{const l=n.elementaryStreams[o];if(!l)return;const u=i[o],c=a||l.partial===!0;s.range[o]=this.getBufferedTimes(n,e.part,c,u)}),s.loaded=null,Object.keys(s.range).length?(this.bufferedEnd(s,n),ym(s)||this.removeParts(n.sn-1,n.type)):this.removeFragment(s.body)}bufferedEnd(e,i){e.buffered=!0,(e.body.endList=i.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,i){const n=this.activePartLists[i];n&&(this.activePartLists[i]=ew(n,r=>r.fragment.sn>=e))}fragBuffered(e,i){const n=Dl(e);let r=this.fragments[n];!r&&i&&(r=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),r&&(r.loaded=null,this.bufferedEnd(r,e))}getBufferedTimes(e,i,n,r){const s={time:[],partial:n},a=e.start,o=e.end,l=e.minEndPTS||o,u=e.maxStartPTS||a;for(let c=0;c<r.length;c++){const d=r.start(c)-this.bufferPadding,h=r.end(c)+this.bufferPadding;if(u>=d&&l<=h){s.time.push({startPTS:Math.max(a,r.start(c)),endPTS:Math.min(o,r.end(c))});break}else if(a<h&&o>d){const f=Math.max(a,r.start(c)),m=Math.min(o,r.end(c));m>f&&(s.partial=!0,s.time.push({startPTS:f,endPTS:m}))}else if(o<=d)break}return s}getPartialFragment(e){let i=null,n,r,s,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(u=>{const c=l[u];c&&ym(c)&&(r=c.body.start-o,s=c.body.end+o,e>=r&&e<=s&&(n=Math.min(e-r,s-e),a<=n&&(i=c.body,a=n)))}),i}isEndListAppended(e){const i=this.endListFragments[e];return i!==void 0&&(i.buffered||ym(i))}getState(e){const i=Dl(e),n=this.fragments[i];return n?n.buffered?ym(n)?Jt.PARTIAL:Jt.OK:Jt.APPENDING:Jt.NOT_LOADED}isTimeBuffered(e,i,n){let r,s;for(let a=0;a<n.length;a++){if(r=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=r&&i<=s)return!0;if(i<=r)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,i){if(i.frag.sn==="initSegment"||i.frag.bitrateTest)return;const n=i.frag,r=i.part?null:i,s=Dl(n);this.fragments[s]={body:n,appendedPTS:null,loaded:r,buffered:!1,range:Object.create(null)}}onBufferAppended(e,i){const{frag:n,part:r,timeRanges:s,type:a}=i;if(n.sn==="initSegment")return;const o=n.type;if(r){let u=this.activePartLists[o];u||(this.activePartLists[o]=u=[]),u.push(r)}this.timeRanges=s;const l=s[a];this.detectEvictedFragments(a,l,o,r)}onFragBuffered(e,i){this.detectPartialFragments(i)}hasFragment(e){const i=Dl(e);return!!this.fragments[i]}hasFragments(e){const{fragments:i}=this,n=Object.keys(i);if(!e)return n.length>0;for(let r=n.length;r--;){const s=i[n[r]];if((s==null?void 0:s.body.type)===e)return!0}return!1}hasParts(e){var i;return!!((i=this.activePartLists[e])!=null&&i.length)}removeFragmentsInRange(e,i,n,r,s){r&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==n||r&&!l.gap||l.start<i&&l.end>e&&(o.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const i=Dl(e);e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const r=e.sn;this.activePartLists[e.type]=ew(n,s=>s.fragment.sn!==r)}delete this.fragments[i],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const i=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;i&&i.forEach(n=>n.clearElementaryStreamInfo())}}function ym(t){var e,i,n;return t.buffered&&!!(t.body.gap||(e=t.range.video)!=null&&e.partial||(i=t.range.audio)!=null&&i.partial||(n=t.range.audiovideo)!=null&&n.partial)}function Dl(t){return`${t.type}_${t.level}_${t.sn}`}function ew(t,e){return t.filter(i=>{const n=e(i);return n||i.clearElementaryStreamInfo(),n})}var Za={cbc:0,ctr:1};class wQ{constructor(e,i,n){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=i,this.aesMode=n}decrypt(e,i){switch(this.aesMode){case Za.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},i,e);case Za.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},i,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function CQ(t){const e=t.byteLength,i=e&&new DataView(t.buffer).getUint8(e-1);return i?t.slice(0,e-i):t}class DQ{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const i=new DataView(e),n=new Uint32Array(4);for(let r=0;r<4;r++)n[r]=i.getUint32(r*4);return n}initTable(){const e=this.sBox,i=this.invSBox,n=this.subMix,r=n[0],s=n[1],a=n[2],o=n[3],l=this.invSubMix,u=l[0],c=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let m=0,p=0,y=0;for(y=0;y<256;y++)y<128?f[y]=y<<1:f[y]=y<<1^283;for(y=0;y<256;y++){let g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^g&255^99,e[m]=g,i[g]=m;const v=f[m],E=f[v],T=f[E];let _=f[g]*257^g*16843008;r[m]=_<<24|_>>>8,s[m]=_<<16|_>>>16,a[m]=_<<8|_>>>24,o[m]=_,_=T*16843009^E*65537^v*257^m*16843008,u[g]=_<<24|_>>>8,c[g]=_<<16|_>>>16,d[g]=_<<8|_>>>24,h[g]=_,m?(m=v^f[f[f[T^v]]],p^=f[f[p]]):m=p=1}}expandKey(e){const i=this.uint8ArrayToUint32Array_(e);let n=!0,r=0;for(;r<i.length&&n;)n=i[r]===this.key[r],r++;if(n)return;this.key=i;const s=this.keySize=i.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,l;const u=this.keySchedule=new Uint32Array(a),c=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,m=f[0],p=f[1],y=f[2],g=f[3];let v,E;for(o=0;o<a;o++){if(o<s){v=u[o]=i[o];continue}E=v,o%s===0?(E=E<<8|E>>>24,E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255],E^=h[o/s|0]<<24):s>6&&o%s===4&&(E=d[E>>>24]<<24|d[E>>>16&255]<<16|d[E>>>8&255]<<8|d[E&255]),u[o]=v=(u[o-s]^E)>>>0}for(l=0;l<a;l++)o=a-l,l&3?E=u[o]:E=u[o-4],l<4||o<=4?c[l]=E:c[l]=m[d[E>>>24]]^p[d[E>>>16&255]]^y[d[E>>>8&255]]^g[d[E&255]],c[l]=c[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,i,n){const r=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],u=o[1],c=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(n);let f=h[0],m=h[1],p=h[2],y=h[3];const g=new Int32Array(e),v=new Int32Array(g.length);let E,T,_,x,A,I,L,b,R,P,w,$,B,U;const V=this.networkToHostOrderSwap;for(;i<g.length;){for(R=V(g[i]),P=V(g[i+1]),w=V(g[i+2]),$=V(g[i+3]),A=R^s[0],I=$^s[1],L=w^s[2],b=P^s[3],B=4,U=1;U<r;U++)E=l[A>>>24]^u[I>>16&255]^c[L>>8&255]^d[b&255]^s[B],T=l[I>>>24]^u[L>>16&255]^c[b>>8&255]^d[A&255]^s[B+1],_=l[L>>>24]^u[b>>16&255]^c[A>>8&255]^d[I&255]^s[B+2],x=l[b>>>24]^u[A>>16&255]^c[I>>8&255]^d[L&255]^s[B+3],A=E,I=T,L=_,b=x,B=B+4;E=a[A>>>24]<<24^a[I>>16&255]<<16^a[L>>8&255]<<8^a[b&255]^s[B],T=a[I>>>24]<<24^a[L>>16&255]<<16^a[b>>8&255]<<8^a[A&255]^s[B+1],_=a[L>>>24]<<24^a[b>>16&255]<<16^a[A>>8&255]<<8^a[I&255]^s[B+2],x=a[b>>>24]<<24^a[A>>16&255]<<16^a[I>>8&255]<<8^a[L&255]^s[B+3],v[i]=V(E^f),v[i+1]=V(x^m),v[i+2]=V(_^p),v[i+3]=V(T^y),f=R,m=P,p=w,y=$,i=i+4}return v.buffer}}class PQ{constructor(e,i,n){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=i,this.aesMode=n}expandKey(){const e=OQ(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function OQ(t){switch(t){case Za.cbc:return"AES-CBC";case Za.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${t}`)}}const MQ=16;class DA{constructor(e,{removePKCS7Padding:i=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=i,i)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:i}=this;if(!e||i)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?CQ(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,i,n,r){return this.useSoftware?new Promise((s,a)=>{const o=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(o,i,n,r);const l=this.flush();l?s(l.buffer):a(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),i,n,r)}softwareDecrypt(e,i,n,r){const{currentIV:s,currentResult:a,remainderData:o}=this;if(r!==Za.cbc||i.byteLength!==16)return We.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),o&&(e=Vn(o,e),this.remainderData=null);const l=this.getValidChunk(e);if(!l.length)return null;s&&(n=s);let u=this.softwareDecrypter;u||(u=this.softwareDecrypter=new DQ),u.expandKey(i);const c=a;return this.currentResult=u.decrypt(l.buffer,0,n),this.currentIV=l.slice(-16).buffer,c||null}webCryptoDecrypt(e,i,n,r){if(this.key!==i||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,i,n,r));this.key=i,this.fastAesKey=new PQ(this.subtle,i,r)}return this.fastAesKey.expandKey().then(s=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new wQ(this.subtle,new Uint8Array(n),r).decrypt(e.buffer,s)):Promise.reject(new Error("web crypto not initialized"))).catch(s=>(We.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${s.name}: ${s.message}`),this.onWebCryptoError(e,i,n,r)))}onWebCryptoError(e,i,n,r){const s=this.enableSoftwareAES;if(s){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,i,n,r);const a=this.flush();if(a)return a.buffer}throw new Error("WebCrypto"+(s?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let i=e;const n=e.length-e.length%MQ;return n!==e.length&&(i=e.slice(0,n),this.remainderData=e.slice(n)),i}logOnce(e){this.logEnabled&&(We.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const tw=Math.pow(2,17);class NQ{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,i){const n=e.url;if(!n)return Promise.reject(new gs({type:le.NETWORK_ERROR,details:M.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(m=>m[0]==="GAP")){l(nw(e));return}else e.gap=!1;const u=this.loader=s?new s(r):new a(r),c=iw(e);e.loader=u;const d=JR(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:tw};e.stats=u.stats;const f={onSuccess:(m,p,y,g)=>{this.resetLoader(e,u);let v=m.data;y.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(v.slice(0,16)),v=v.slice(16)),o({frag:e,part:null,payload:v,networkDetails:g})},onError:(m,p,y,g)=>{this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ge({url:n,data:void 0},m),error:new Error(`HTTP Error ${m.code} ${m.text}`),networkDetails:y,stats:g}))},onAbort:(m,p,y)=>{this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:y,stats:m}))},onTimeout:(m,p,y)=>{this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:y,stats:m}))}};i&&(f.onProgress=(m,p,y,g)=>i({frag:e,part:null,payload:y,networkDetails:g})),u.load(c,h,f)})}loadPart(e,i,n){this.abort();const r=this.config,s=r.fLoader,a=r.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||i.gap){l(nw(e,i));return}const u=this.loader=s?new s(r):new a(r),c=iw(e,i);e.loader=u;const d=JR(r.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:tw};i.stats=u.stats,u.load(c,h,{onSuccess:(f,m,p,y)=>{this.resetLoader(e,u),this.updateStatsFromPart(e,i);const g={frag:e,part:i,payload:f.data,networkDetails:y};n(g),o(g)},onError:(f,m,p,y)=>{this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:i,response:Ge({url:c.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:p,stats:y}))},onAbort:(f,m,p)=>{e.stats.aborted=i.stats.aborted,this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.INTERNAL_ABORTED,fatal:!1,frag:e,part:i,error:new Error("Aborted"),networkDetails:p,stats:f}))},onTimeout:(f,m,p)=>{this.resetLoader(e,u),l(new gs({type:le.NETWORK_ERROR,details:M.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:i,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:p,stats:f}))}})})}updateStatsFromPart(e,i){const n=e.stats,r=i.stats,s=r.total;if(n.loaded+=r.loaded,s){const l=Math.round(e.duration/i.duration),u=Math.min(Math.round(n.loaded/s),l),d=(l-u)*Math.round(n.loaded/u);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=r.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,i){e.loader=null,this.loader===i&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),i.destroy()}}function iw(t,e=null){const i=e||t,n={frag:t,part:e,responseType:"arraybuffer",url:i.url,headers:{},rangeStart:0,rangeEnd:0},r=i.byteRangeStartOffset,s=i.byteRangeEndOffset;if(te(r)&&te(s)){var a;let o=r,l=s;if(t.sn==="initSegment"&&$Q((a=t.decryptdata)==null?void 0:a.method)){const u=s-r;u%16&&(l=s+(16-u%16)),r!==0&&(n.resetIV=!0,o=r-16)}n.rangeStart=o,n.rangeEnd=l}return n}function nw(t,e){const i=new Error(`GAP ${t.gap?"tag":"attribute"} found`),n={type:le.MEDIA_ERROR,details:M.FRAG_GAP,fatal:!1,frag:t,error:i,networkDetails:null};return e&&(n.part=e),(e||t).stats.aborted=!0,new gs(n)}function $Q(t){return t==="AES-128"||t==="AES-256"}class gs extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class u3 extends Kn{constructor(e,i){super(e,i),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class PA{constructor(e,i,n,r=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Em(),this.buffering={audio:Em(),video:Em(),audiovideo:Em()},this.level=e,this.sn=i,this.id=n,this.size=r,this.part=s,this.partial=a}}function Em(){return{start:0,executeStart:0,executeEnd:0,end:0}}const rw={length:0,start:()=>0,end:()=>0};class be{static isBuffered(e,i){if(e){const n=be.getBuffered(e);for(let r=n.length;r--;)if(i>=n.start(r)&&i<=n.end(r))return!0}return!1}static bufferedRanges(e){if(e){const i=be.getBuffered(e);return be.timeRangesToArray(i)}return[]}static timeRangesToArray(e){const i=[];for(let n=0;n<e.length;n++)i.push({start:e.start(n),end:e.end(n)});return i}static bufferInfo(e,i,n){if(e){const r=be.bufferedRanges(e);if(r.length)return be.bufferedInfo(r,i,n)}return{len:0,start:i,end:i,bufferedIndex:-1}}static bufferedInfo(e,i,n){i=Math.max(0,i),e.length>1&&e.sort((c,d)=>c.start-d.start||d.end-c.end);let r=-1,s=[];if(n)for(let c=0;c<e.length;c++){i>=e[c].start&&i<=e[c].end&&(r=c);const d=s.length;if(d){const h=s[d-1].end;e[c].start-h<n?e[c].end>h&&(s[d-1].end=e[c].end):s.push(e[c])}else s.push(e[c])}else s=e;let a=0,o,l=i,u=i;for(let c=0;c<s.length;c++){const d=s[c].start,h=s[c].end;if(r===-1&&i>=d&&i<=h&&(r=c),i+n>=d&&i<h)l=d,u=h,a=u-i;else if(i+n<d){o=d;break}}return{len:a,start:l||0,end:u||0,nextStart:o,buffered:e,bufferedIndex:r}}static getBuffered(e){try{return e.buffered||rw}catch(i){return We.log("failed to get media.buffered",i),rw}}}const c3=/\{\$([a-zA-Z0-9-_]+)\}/g;function sw(t){return c3.test(t)}function z1(t,e){if(t.variableList!==null||t.hasVariableRefs){const i=t.variableList;return e.replace(c3,n=>{const r=n.substring(2,n.length-1),s=i==null?void 0:i[r];return s===void 0?(t.playlistParsingError||(t.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${r}"`)),n):s})}return e}function aw(t,e,i){let n=t.variableList;n||(t.variableList=n={});let r,s;if("QUERYPARAM"in e){r=e.QUERYPARAM;try{const a=new self.URL(i).searchParams;if(a.has(r))s=a.get(r);else throw new Error(`"${r}" does not match any query parameter in URI: "${i}"`)}catch(a){t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else r=e.NAME,s=e.VALUE;r in n?t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${r}"`)):n[r]=s||""}function FQ(t,e,i){const n=e.IMPORT;if(i&&n in i){let r=t.variableList;r||(t.variableList=r={}),r[n]=i[n]}else t.playlistParsingError||(t.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}const UQ=/^(\d+)x(\d+)$/,ow=/(.+?)=(".*?"|.*?)(?:,|$)/g;class Et{constructor(e,i){typeof e=="string"&&(e=Et.parseAttrList(e,i)),Qe(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const i=parseInt(this[e],10);return i>Number.MAX_SAFE_INTEGER?1/0:i}hexadecimalInteger(e){if(this[e]){let i=(this[e]||"0x").slice(2);i=(i.length&1?"0":"")+i;const n=new Uint8Array(i.length/2);for(let r=0;r<i.length/2;r++)n[r]=parseInt(i.slice(r*2,r*2+2),16);return n}return null}hexadecimalIntegerAsNumber(e){const i=parseInt(this[e],16);return i>Number.MAX_SAFE_INTEGER?1/0:i}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,i){const n=this[e];return n?parseFloat(n):i}enumeratedString(e){return this[e]}enumeratedStringList(e,i){const n=this[e];return(n?n.split(/[ ,]+/):[]).reduce((r,s)=>(r[s.toLowerCase()]=!0,r),i)}bool(e){return this[e]==="YES"}decimalResolution(e){const i=UQ.exec(this[e]);if(i!==null)return{width:parseInt(i[1],10),height:parseInt(i[2],10)}}static parseAttrList(e,i){let n;const r={},s='"';for(ow.lastIndex=0;(n=ow.exec(e))!==null;){const a=n[1].trim();let o=n[2];const l=o.indexOf(s)===0&&o.lastIndexOf(s)===o.length-1;let u=!1;if(l)o=o.slice(1,-1);else switch(a){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":u=!0}if(i&&(l||u))o=z1(i,o);else if(!u&&!l)switch(a){case"CLOSED-CAPTIONS":if(o==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":We.warn(`${e}: attribute ${a} is missing quotes`)}r[a]=o}return r}}const BQ="com.apple.hls.interstitial";function VQ(t){return t!=="ID"&&t!=="CLASS"&&t!=="CUE"&&t!=="START-DATE"&&t!=="DURATION"&&t!=="END-DATE"&&t!=="END-ON-NEXT"}function HQ(t){return t==="SCTE35-OUT"||t==="SCTE35-IN"||t==="SCTE35-CMD"}class d3{constructor(e,i,n=0){var r;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=(i==null?void 0:i.tagAnchor)||null,this.tagOrder=(r=i==null?void 0:i.tagOrder)!=null?r:n,i){const s=i.attr;for(const a in s)if(Object.prototype.hasOwnProperty.call(e,a)&&e[a]!==s[a]){We.warn(`DATERANGE tag attribute: "${a}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=a;break}e=Qe(new Et({}),s,e)}if(this.attr=e,i?(this._startDate=i._startDate,this._cue=i._cue,this._endDate=i._endDate,this._dateAtEnd=i._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const s=(i==null?void 0:i.endDate)||new Date(this.attr["END-DATE"]);te(s.getTime())&&(this._endDate=s)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(We.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const i=this.duration;return i!==null?this._dateAtEnd=new Date(this._startDate.getTime()+i*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(te(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===BQ}get isValid(){return!!this.id&&!this._badValueForSameId&&te(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const KQ=10;class GQ{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const i=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!i||!this.live,this.advanced=this.endSN>e.endSN||i>0||i===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(i=>{let n=i.decryptdata;return n||(i.setKeyFormat(e.keyFormat),n=i.decryptdata),!!n&&e.matches(n)})}get hasProgramDateTime(){return this.fragments.length?te(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||KQ}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const i=this.lastPartIndex;if(i!==-1){for(let n=e.length;n--;)if(e[n].index>i)return e[n].index;return i}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function w0(t,e){return t.length===e.length?!t.some((i,n)=>i!==e[n]):!1}function lw(t,e){return!t&&!e?!0:!t||!e?!1:w0(t,e)}function qu(t){return t==="AES-128"||t==="AES-256"||t==="AES-256-CTR"}function OA(t){switch(t){case"AES-128":case"AES-256":return Za.cbc;case"AES-256-CTR":return Za.ctr;default:throw new Error(`invalid full segment method ${t}`)}}function MA(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}function Q1(t){return Uint8Array.from(unescape(encodeURIComponent(t)),e=>e.charCodeAt(0))}function WQ(t){const e=Q1(t).subarray(0,16),i=new Uint8Array(16);return i.set(e,16-e.length),i}function h3(t){const e=function(n,r,s){const a=n[r];n[r]=n[s],n[s]=a};e(t,0,3),e(t,1,2),e(t,4,5),e(t,6,7)}function f3(t){const e=t.split(":");let i=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),r=n[n.length-1].split(",");if(r.length===2){const s=r[0]==="base64",a=r[1];s?(n.splice(-1,1),i=MA(a)):i=WQ(a)}}return i}const C0=typeof self<"u"?self:void 0;var bt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},vi={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Ep(t){switch(t){case vi.FAIRPLAY:return bt.FAIRPLAY;case vi.PLAYREADY:return bt.PLAYREADY;case vi.WIDEVINE:return bt.WIDEVINE;case vi.CLEARKEY:return bt.CLEARKEY}}function RE(t){switch(t){case bt.FAIRPLAY:return vi.FAIRPLAY;case bt.PLAYREADY:return vi.PLAYREADY;case bt.WIDEVINE:return vi.WIDEVINE;case bt.CLEARKEY:return vi.CLEARKEY}}function kd(t){const{drmSystems:e,widevineLicenseUrl:i}=t,n=e?[bt.FAIRPLAY,bt.WIDEVINE,bt.PLAYREADY,bt.CLEARKEY].filter(r=>!!e[r]):[];return!n[bt.WIDEVINE]&&i&&n.push(bt.WIDEVINE),n}const m3=function(t){return C0!=null&&(t=C0.navigator)!=null&&t.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function jQ(t,e,i,n){let r;switch(t){case bt.FAIRPLAY:r=["cenc","sinf"];break;case bt.WIDEVINE:case bt.PLAYREADY:r=["cenc"];break;case bt.CLEARKEY:r=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${t}`)}return YQ(r,e,i,n)}function YQ(t,e,i,n){return[{initDataTypes:t,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs=${s}`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:i.map(s=>({contentType:`video/mp4; codecs=${s}`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function qQ(t){var e;return!!t&&(t.sessionType==="persistent-license"||!!((e=t.sessionTypes)!=null&&e.some(i=>i==="persistent-license")))}function p3(t){const e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2),i=String.fromCharCode.apply(null,Array.from(e)),n=i.substring(i.indexOf("<"),i.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=MA(o).subarray(0,16);return h3(l),l}}return null}let Pl={};class Ka{static clearKeyUriToKeyIdMap(){Pl={}}static setKeyIdForUri(e,i){Pl[e]=i}static addKeyIdForUri(e){const i=Object.keys(Pl).length%Number.MAX_SAFE_INTEGER,n=new Uint8Array(16);return new DataView(n.buffer,12,4).setUint32(0,i),Pl[e]=n,n}constructor(e,i,n,r=[1],s=null,a){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=i,this.keyFormat=n,this.keyFormatVersions=r,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!qu(e),a!=null&&a.startsWith("0x")&&(this.keyId=new Uint8Array(KN(a)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&w0(e.keyFormatVersions,this.keyFormatVersions)&&lw(e.iv,this.iv)&&lw(e.keyId,this.keyId)}isSupported(){if(this.method){if(qu(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case vi.FAIRPLAY:case vi.WIDEVINE:case vi.PLAYREADY:case vi.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,i){if(!this.encrypted||!this.uri)return null;if(qu(this.method)){let s=this.iv;return s||(typeof e!="number"&&(We.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),s=QQ(e)),new Ka(this.method,this.uri,"identity",this.keyFormatVersions,s)}if(this.keyId){const s=Pl[this.uri];if(s&&!w0(this.keyId,s)&&Ka.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const n=f3(this.uri);if(n)switch(this.keyFormat){case vi.WIDEVINE:if(this.pssh=n,!this.keyId){const s=Jz(n.buffer);if(s.length){var r;const a=s[0];this.keyId=(r=a.kids)!=null&&r.length?a.kids[0]:null}}this.keyId||(this.keyId=uw(i));break;case vi.PLAYREADY:{const s=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Zz(s,null,n),this.keyId=p3(n);break}default:{let s=n.subarray(0,16);if(s.length!==16){const a=new Uint8Array(16);a.set(s,16-s.length),s=a}this.keyId=s;break}}if(!this.keyId||this.keyId.byteLength!==16){let s;s=zQ(i),s||(s=uw(i),s||(s=Pl[this.uri])),s&&(this.keyId=s,Ka.setKeyIdForUri(this.uri,s))}return this}}function zQ(t){const e=t==null?void 0:t[vi.WIDEVINE];return e?e.keyId:null}function uw(t){const e=t==null?void 0:t[vi.PLAYREADY];if(e){const i=f3(e.uri);if(i)return p3(i)}return null}function QQ(t){const e=new Uint8Array(16);for(let i=12;i<16;i++)e[i]=t>>8*(15-i)&255;return e}const cw=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,dw=/#EXT-X-MEDIA:(.*)/g,XQ=/^#EXT(?:INF|-X-TARGETDURATION):/m,wE=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),ZQ=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class jr{static findGroup(e,i){for(let n=0;n<e.length;n++){const r=e[n];if(r.id===i)return r}}static resolve(e,i){return kA.buildAbsoluteURL(i,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return XQ.test(e)}static parseMasterPlaylist(e,i){const n=sw(e),r={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];if(cw.lastIndex=0,!e.startsWith("#EXTM3U"))return r.playlistParsingError=new Error("no EXTM3U delimiter"),r;let a;for(;(a=cw.exec(e))!=null;)if(a[1]){var o;const u=new Et(a[1],r),c=z1(r,a[2]),d={attrs:u,bitrate:u.decimalInteger("BANDWIDTH")||u.decimalInteger("AVERAGE-BANDWIDTH"),name:u.NAME,url:jr.resolve(c,i)},h=u.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),mw(u.CODECS,d);const f=u["SUPPLEMENTAL-CODECS"];f&&(d.supplemental={},mw(f,d.supplemental)),(o=d.unknownCodecs)!=null&&o.length||s.push(d),r.levels.push(d)}else if(a[3]){const u=a[3],c=a[4];switch(u){case"SESSION-DATA":{const d=new Et(c,r),h=d["DATA-ID"];h&&(r.sessionData===null&&(r.sessionData={}),r.sessionData[h]=d);break}case"SESSION-KEY":{const d=hw(c,i,r);d.encrypted&&d.isSupported()?(r.sessionKeys===null&&(r.sessionKeys=[]),r.sessionKeys.push(d)):We.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${c}"`);break}case"DEFINE":{{const d=new Et(c,r);aw(r,d,i)}break}case"CONTENT-STEERING":{const d=new Et(c,r);r.contentSteering={uri:jr.resolve(d["SERVER-URI"],i),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{r.startTimeOffset=fw(c);break}}}const l=s.length>0&&s.length<r.levels.length;return r.levels=l?s:r.levels,r.levels.length===0&&(r.playlistParsingError=new Error("no levels found in manifest")),r}static parseMasterPlaylistMedia(e,i,n){let r;const s={},a=n.levels,o={AUDIO:a.map(u=>({id:u.attrs.AUDIO,audioCodec:u.audioCodec})),SUBTITLES:a.map(u=>({id:u.attrs.SUBTITLES,textCodec:u.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(dw.lastIndex=0;(r=dw.exec(e))!==null;){const u=new Et(r[1],n),c=u.TYPE;if(c){const d=o[c],h=s[c]||[];s[c]=h;const f=u.LANGUAGE,m=u["ASSOC-LANGUAGE"],p=u.CHANNELS,y=u.CHARACTERISTICS,g=u["INSTREAM-ID"],v={attrs:u,bitrate:0,id:l++,groupId:u["GROUP-ID"]||"",name:u.NAME||f||"",type:c,default:u.bool("DEFAULT"),autoselect:u.bool("AUTOSELECT"),forced:u.bool("FORCED"),lang:f,url:u.URI?jr.resolve(u.URI,i):""};if(m&&(v.assocLang=m),p&&(v.channels=p),y&&(v.characteristics=y),g&&(v.instreamId=g),d!=null&&d.length){const E=jr.findGroup(d,v.groupId)||d[0];pw(v,E,"audioCodec"),pw(v,E,"textCodec")}h.push(v)}}return s}static parseLevelPlaylist(e,i,n,r,s,a){var o;const l={url:i},u=new GQ(i),c=u.fragments,d=[];let h=null,f=0,m=0,p=0,y=0,g=0,v=null,E=new kE(r,l),T,_,x,A=-1,I=!1,L=null,b;if(wE.lastIndex=0,u.m3u8=e,u.hasVariableRefs=sw(e),((o=wE.exec(e))==null?void 0:o[0])!=="#EXTM3U")return u.playlistParsingError=new Error("Missing format identifier #EXTM3U"),u;for(;(T=wE.exec(e))!==null;){I&&(I=!1,E=new kE(r,l),E.playlistOffset=p,E.setStart(p),E.sn=f,E.cc=y,g&&(E.bitrate=g),E.level=n,h&&(E.initSegment=h,h.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime,h.rawProgramDateTime=null),L&&(E.setByteRange(L),L=null)));const $=T[1];if($){E.duration=parseFloat($);const B=(" "+T[2]).slice(1);E.title=B||null,E.tagList.push(B?["INF",$,B]:["INF",$])}else if(T[3]){if(te(E.duration)){E.playlistOffset=p,E.setStart(p),x&&vw(E,x,u),E.sn=f,E.level=n,E.cc=y,c.push(E);const B=(" "+T[3]).slice(1);E.relurl=z1(u,B),X1(E,v,d),v=E,p+=E.duration,f++,m=0,I=!0}}else{if(T=T[0].match(ZQ),!T){We.warn("No matches on slow regex match for level playlist!");continue}for(_=1;_<T.length&&T[_]===void 0;_++);const B=(" "+T[_]).slice(1),U=(" "+T[_+1]).slice(1),V=T[_+2]?(" "+T[_+2]).slice(1):null;switch(B){case"BYTERANGE":v?E.setByteRange(U,v):E.setByteRange(U);break;case"PROGRAM-DATE-TIME":E.rawProgramDateTime=U,E.tagList.push(["PROGRAM-DATE-TIME",U]),A===-1&&(A=c.length);break;case"PLAYLIST-TYPE":u.type&&ls(u,B,T),u.type=U.toUpperCase();break;case"MEDIA-SEQUENCE":u.startSN!==0?ls(u,B,T):c.length>0&&yw(u,B,T),f=u.startSN=parseInt(U);break;case"SKIP":{u.skippedSegments&&ls(u,B,T);const C=new Et(U,u),K=C.decimalInteger("SKIPPED-SEGMENTS");if(te(K)){u.skippedSegments+=K;for(let H=K;H--;)c.push(null);f+=K}const z=C.enumeratedString("RECENTLY-REMOVED-DATERANGES");z&&(u.recentlyRemovedDateranges=(u.recentlyRemovedDateranges||[]).concat(z.split("	")));break}case"TARGETDURATION":u.targetduration!==0&&ls(u,B,T),u.targetduration=Math.max(parseInt(U),1);break;case"VERSION":u.version!==null&&ls(u,B,T),u.version=parseInt(U);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":u.live||ls(u,B,T),u.live=!1;break;case"#":(U||V)&&E.tagList.push(V?[U,V]:[U]);break;case"DISCONTINUITY":y++,E.tagList.push(["DIS"]);break;case"GAP":E.gap=!0,E.tagList.push([B]);break;case"BITRATE":E.tagList.push([B,U]),g=parseInt(U)*1e3,te(g)?E.bitrate=g:g=0;break;case"DATERANGE":{const C=new Et(U,u),K=new d3(C,u.dateRanges[C.ID],u.dateRangeTagCount);u.dateRangeTagCount++,K.isValid||u.skippedSegments?u.dateRanges[K.id]=K:We.warn(`Ignoring invalid DATERANGE tag: "${U}"`),E.tagList.push(["EXT-X-DATERANGE",U]);break}case"DEFINE":{{const C=new Et(U,u);"IMPORT"in C?FQ(u,C,a):aw(u,C,i)}break}case"DISCONTINUITY-SEQUENCE":u.startCC!==0?ls(u,B,T):c.length>0&&yw(u,B,T),u.startCC=y=parseInt(U);break;case"KEY":{const C=hw(U,i,u);if(C.isSupported()){if(C.method==="NONE"){x=void 0;break}x||(x={});const K=x[C.keyFormat];K!=null&&K.matches(C)||(K&&(x=Qe({},x)),x[C.keyFormat]=C)}else We.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${U}"`);break}case"START":u.startTimeOffset=fw(U);break;case"MAP":{const C=new Et(U,u);if(E.duration){const K=new kE(r,l);gw(K,C,n,x),h=K,E.initSegment=h,h.rawProgramDateTime&&!E.rawProgramDateTime&&(E.rawProgramDateTime=h.rawProgramDateTime)}else{const K=E.byteRangeEndOffset;if(K){const z=E.byteRangeStartOffset;L=`${K-z}@${z}`}else L=null;gw(E,C,n,x),h=E,I=!0}h.cc=y;break}case"SERVER-CONTROL":{b&&ls(u,B,T),b=new Et(U),u.canBlockReload=b.bool("CAN-BLOCK-RELOAD"),u.canSkipUntil=b.optionalFloat("CAN-SKIP-UNTIL",0),u.canSkipDateRanges=u.canSkipUntil>0&&b.bool("CAN-SKIP-DATERANGES"),u.partHoldBack=b.optionalFloat("PART-HOLD-BACK",0),u.holdBack=b.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{u.partTarget&&ls(u,B,T);const C=new Et(U);u.partTarget=C.decimalFloatingPoint("PART-TARGET");break}case"PART":{let C=u.partList;C||(C=u.partList=[]);const K=m>0?C[C.length-1]:void 0,z=m++,H=new Et(U,u),Y=new Fz(H,E,l,z,K);C.push(Y),E.duration+=Y.duration;break}case"PRELOAD-HINT":{const C=new Et(U,u);u.preloadHint=C;break}case"RENDITION-REPORT":{const C=new Et(U,u);u.renditionReports=u.renditionReports||[],u.renditionReports.push(C);break}default:We.warn(`line parsed but not handled: ${T}`);break}}}v&&!v.relurl?(c.pop(),p-=v.duration,u.partList&&(u.fragmentHint=v)):u.partList&&(X1(E,v,d),E.cc=y,u.fragmentHint=E,x&&vw(E,x,u)),u.targetduration||(u.playlistParsingError=new Error("Missing Target Duration"));const R=c.length,P=c[0],w=c[R-1];if(p+=u.skippedSegments*u.targetduration,p>0&&R&&w){u.averagetargetduration=p/R;const $=w.sn;u.endSN=$!=="initSegment"?$:0,u.live||(w.endList=!0),A>0&&(eX(c,A),P&&d.unshift(P))}return u.fragmentHint&&(p+=u.fragmentHint.duration),u.totalduration=p,d.length&&u.dateRangeTagCount&&P&&g3(d,u),u.endCC=y,u}}function g3(t,e){let i=t.length;if(!i)if(e.hasProgramDateTime){const o=e.fragments[e.fragments.length-1];t.push(o),i++}else return;const n=t[i-1],r=e.live?1/0:e.totalduration,s=Object.keys(e.dateRanges);for(let o=s.length;o--;){const l=e.dateRanges[s[o]],u=l.startDate.getTime();l.tagAnchor=n.ref;for(let c=i;c--;){var a;if(((a=t[c])==null?void 0:a.sn)<e.startSN)break;const d=JQ(e,u,t,c,r);if(d!==-1){l.tagAnchor=e.fragments[d].ref;break}}}}function JQ(t,e,i,n,r){const s=i[n];if(s){const o=s.programDateTime;if(e>=o||n===0){var a;const l=(((a=i[n+1])==null?void 0:a.start)||r)-s.start;if(e<=o+l*1e3){const u=i[n].sn-t.startSN;if(u<0)return-1;const c=t.fragments;if(c.length>i.length){const h=(i[n+1]||c[c.length-1]).sn-t.startSN;for(let f=h;f>u;f--){const m=c[f].programDateTime;if(e>=m&&e<m+c[f].duration*1e3)return f}}return u}}}return-1}function hw(t,e,i){var n,r;const s=new Et(t,i),a=(n=s.METHOD)!=null?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),u=s.KEYFORMATVERSIONS,c=(r=s.KEYFORMAT)!=null?r:"identity";o&&s.IV&&!l&&We.error(`Invalid IV: ${s.IV}`);const d=o?jr.resolve(o,e):"",h=(u||"1").split("/").map(Number).filter(Number.isFinite);return new Ka(a,d,c,h,l,s.KEYID)}function fw(t){const i=new Et(t).decimalFloatingPoint("TIME-OFFSET");return te(i)?i:null}function mw(t,e){let i=(t||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const r=i.filter(s=>RA(s,n));r.length&&(e[`${n}Codec`]=r.map(s=>s.split("/")[0]).join(","),i=i.filter(s=>r.indexOf(s)===-1))}),e.unknownCodecs=i}function pw(t,e,i){const n=e[i];n&&(t[i]=n)}function eX(t,e){let i=t[e];for(let n=e;n--;){const r=t[n];if(!r)return;r.programDateTime=i.programDateTime-r.duration*1e3,i=r}}function X1(t,e,i){t.rawProgramDateTime?i.push(t):e!=null&&e.programDateTime&&(t.programDateTime=e.endProgramDateTime)}function gw(t,e,i,n){t.relurl=e.URI,e.BYTERANGE&&t.setByteRange(e.BYTERANGE),t.level=i,t.sn="initSegment",n&&(t.levelkeys=n),t.initSegment=null}function vw(t,e,i){t.levelkeys=e;const{encryptedFragments:n}=i;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(r=>e[r].isCommonEncryption)&&n.push(t)}function ls(t,e,i){t.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${i[0]})`)}function yw(t,e,i){t.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${i[0]})`)}function CE(t,e){const i=e.startPTS;if(te(i)){let n=0,r;e.sn>t.sn?(n=i-t.start,r=t):(n=t.start-i,r=e),r.duration!==n&&r.setDuration(n)}else e.sn>t.sn?t.cc===e.cc&&t.minEndPTS?e.setStart(t.start+(t.minEndPTS-t.start)):e.setStart(t.start+t.duration):e.setStart(Math.max(t.start-e.duration,0))}function v3(t,e,i,n,r,s,a){n-i<=0&&(a.warn("Fragment should have a positive duration",e),n=i+e.duration,s=r+e.duration);let l=i,u=n;const c=e.startPTS,d=e.endPTS;if(te(c)){const g=Math.abs(c-i);t&&g>t.totalduration?a.warn(`media timestamps and playlist times differ by ${g}s for level ${e.level} ${t.url}`):te(e.deltaPTS)?e.deltaPTS=Math.max(g,e.deltaPTS):e.deltaPTS=g,l=Math.max(i,c),i=Math.min(i,c),r=e.startDTS!==void 0?Math.min(r,e.startDTS):r,u=Math.min(n,d),n=Math.max(n,d),s=e.endDTS!==void 0?Math.max(s,e.endDTS):s}const h=i-e.start;e.start!==0&&e.setStart(i),e.setDuration(n-e.start),e.startPTS=i,e.maxStartPTS=l,e.startDTS=r,e.endPTS=n,e.minEndPTS=u,e.endDTS=s;const f=e.sn;if(!t||f<t.startSN||f>t.endSN)return 0;let m;const p=f-t.startSN,y=t.fragments;for(y[p]=e,m=p;m>0;m--)CE(y[m],y[m-1]);for(m=p;m<y.length-1;m++)CE(y[m],y[m+1]);return t.fragmentHint&&CE(y[y.length-1],t.fragmentHint),t.PTSKnown=t.alignedSliding=!0,h}function tX(t,e,i){if(t===e)return;let n=null;const r=t.fragments;for(let c=r.length-1;c>=0;c--){const d=r[c].initSegment;if(d){n=d;break}}t.fragmentHint&&delete t.fragmentHint.endPTS;let s;rX(t,e,(c,d,h,f)=>{if((!e.startCC||e.skippedSegments)&&d.cc!==c.cc){const m=c.cc-d.cc;for(let p=h;p<f.length;p++)f[p].cc+=m;e.endCC=f[f.length-1].cc}te(c.startPTS)&&te(c.endPTS)&&(d.setStart(d.startPTS=c.startPTS),d.startDTS=c.startDTS,d.maxStartPTS=c.maxStartPTS,d.endPTS=c.endPTS,d.endDTS=c.endDTS,d.minEndPTS=c.minEndPTS,d.setDuration(c.endPTS-c.startPTS),d.duration&&(s=d),e.PTSKnown=e.alignedSliding=!0),c.hasStreams&&(d.elementaryStreams=c.elementaryStreams),d.loader=c.loader,c.hasStats&&(d.stats=c.stats),c.initSegment&&(d.initSegment=c.initSegment,n=c.initSegment)});const a=e.fragments,o=e.fragmentHint?a.concat(e.fragmentHint):a;if(n&&o.forEach(c=>{var d;c&&(!c.initSegment||c.initSegment.relurl===((d=n)==null?void 0:d.relurl))&&(c.initSegment=n)}),e.skippedSegments){if(e.deltaUpdateFailed=a.some(c=>!c),e.deltaUpdateFailed){i.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let c=e.skippedSegments;c--;)a.shift();e.startSN=a[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=iX(t.dateRanges,e,i));const c=t.fragments.filter(d=>d.rawProgramDateTime);if(t.hasProgramDateTime&&!e.hasProgramDateTime)for(let d=1;d<o.length;d++)o[d].programDateTime===null&&X1(o[d],o[d-1],c);g3(c,e)}e.endCC=a[a.length-1].cc}if(!e.startCC){var l;const c=T3(t,e.startSN-1);e.startCC=(l=c==null?void 0:c.cc)!=null?l:a[0].cc}nX(t.partList,e.partList,(c,d)=>{d.elementaryStreams=c.elementaryStreams,d.stats=c.stats}),s?v3(e,s,s.startPTS,s.endPTS,s.startDTS,s.endDTS,i):y3(t,e),a.length&&(e.totalduration=e.edge-a[0].start),e.driftStartTime=t.driftStartTime,e.driftStart=t.driftStart;const u=e.advancedDateTime;if(e.advanced&&u){const c=e.edge;e.driftStart||(e.driftStartTime=u,e.driftStart=c),e.driftEndTime=u,e.driftEnd=c}else e.driftEndTime=t.driftEndTime,e.driftEnd=t.driftEnd,e.advancedDateTime=t.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=t.requestScheduled)}function iX(t,e,i){const{dateRanges:n,recentlyRemovedDateranges:r}=e,s=Qe({},t);r&&r.forEach(l=>{delete s[l]});const o=Object.keys(s).length;return o?(Object.keys(n).forEach(l=>{const u=s[l],c=new d3(n[l].attr,u);c.isValid?(s[l]=c,u||(c.tagOrder+=o)):i.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${tt(n[l].attr)}"`)}),s):n}function nX(t,e,i){if(t&&e){let n=0;for(let r=0,s=t.length;r<=s;r++){const a=t[r],o=e[r+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?i(a,o):n--}}}function rX(t,e,i){const n=e.skippedSegments,r=Math.max(t.startSN,e.startSN)-e.startSN,s=(t.fragmentHint?1:0)+(n?e.endSN:Math.min(t.endSN,e.endSN))-e.startSN,a=e.startSN-t.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=t.fragmentHint?t.fragments.concat(t.fragmentHint):t.fragments;for(let u=r;u<=s;u++){const c=l[a+u];let d=o[u];if(n&&!d&&c&&(d=e.fragments[u]=c),c&&d){i(c,d,u,o);const h=c.relurl,f=d.relurl;if(h&&sX(h,f)){e.playlistParsingError=Ew(`media sequence mismatch ${d.sn}:`,t,e,c,d);return}else if(c.cc!==d.cc){e.playlistParsingError=Ew(`discontinuity sequence mismatch (${c.cc}!=${d.cc})`,t,e,c,d);return}}}}function Ew(t,e,i,n,r){return new Error(`${t} ${r.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${i.startSN}
${i.m3u8}`)}function y3(t,e,i=!0){const n=e.startSN+e.skippedSegments-t.startSN,r=t.fragments,s=n>=0;let a=0;if(s&&n<r.length)a=r[n].start;else if(s&&e.startSN===t.endSN+1)a=t.fragmentEnd;else if(s&&i)a=t.fragmentStart+n*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)a=t.fragmentStart;else return;Z1(e,a)}function Z1(t,e){if(e){const i=t.fragments;for(let n=t.skippedSegments;n<i.length;n++)i[n].addStart(e);t.fragmentHint&&t.fragmentHint.addStart(e)}}function E3(t,e=1/0){let i=1e3*t.targetduration;if(t.updated){const n=t.fragments;if(n.length&&i*4>e){const s=n[n.length-1].duration*1e3;s<i&&(i=s)}}else i/=2;return Math.round(i)}function T3(t,e,i){if(!t)return null;let n=t.fragments[e-t.startSN];return n||(n=t.fragmentHint,n&&n.sn===e)?n:e<t.startSN&&i&&i.sn===e?i:null}function Tw(t,e,i){return t?b3(t.partList,e,i):null}function b3(t,e,i){if(t)for(let n=t.length;n--;){const r=t[n];if(r.index===i&&r.fragment.sn===e)return r}return null}function S3(t){t.forEach((e,i)=>{var n;(n=e.details)==null||n.fragments.forEach(r=>{r.level=i,r.initSegment&&(r.initSegment.level=i)})})}function sX(t,e){return t!==e&&e?bw(t)!==bw(e):!1}function bw(t){return t.replace(/\?[^?]*$/,"")}function hh(t,e){for(let n=0,r=t.length;n<r;n++){var i;if(((i=t[n])==null?void 0:i.cc)===e)return t[n]}return null}function aX(t,e){return!!(t&&e.startCC<t.endCC&&e.endCC>t.startCC)}function Sw(t,e){const i=t.start+e;t.startPTS=i,t.setStart(i),t.endPTS=i+t.duration}function _3(t,e){const i=e.fragments;for(let n=0,r=i.length;n<r;n++)Sw(i[n],t);e.fragmentHint&&Sw(e.fragmentHint,t),e.alignedSliding=!0}function oX(t,e){t&&(A3(e,t),e.alignedSliding||D0(e,t),!e.alignedSliding&&!e.skippedSegments&&y3(t,e,!1))}function A3(t,e){if(!aX(e,t))return;const i=Math.min(e.endCC,t.endCC),n=hh(e.fragments,i),r=hh(t.fragments,i);if(!n||!r)return;We.log(`Aligning playlist at start of dicontinuity sequence ${i}`);const s=n.start-r.start;_3(s,t)}function D0(t,e){if(!t.hasProgramDateTime||!e.hasProgramDateTime)return;const i=t.fragments,n=e.fragments;if(!i.length||!n.length)return;let r,s;const a=Math.min(e.endCC,t.endCC);e.startCC<a&&t.startCC<a&&(r=hh(n,a),s=hh(i,a)),(!r||!s)&&(r=n[Math.floor(n.length/2)],s=hh(i,r.cc)||i[Math.floor(i.length/2)]);const o=r.programDateTime,l=s.programDateTime;if(!o||!l)return;const u=(l-o)/1e3-(s.start-r.start);_3(u,t)}function Oi(t,e,i){Wi(t,e,i),t.addEventListener(e,i)}function Wi(t,e,i){t.removeEventListener(e,i)}const lX={toString:function(t){let e="";const i=t.length;for(let n=0;n<i;n++)e+=`[${t.start(n).toFixed(3)}-${t.end(n).toFixed(3)}]`;return e}},j={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class NA extends u3{constructor(e,i,n,r,s){super(r,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=j.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:a,fragCurrent:o,media:l,mediaBuffer:u,state:c}=this,d=l?l.currentTime:0,h=be.bufferInfo(u||l,d,a.maxBufferHole),f=!h.len;if(this.log(`Media seeking to ${te(d)?d.toFixed(3):d}, state: ${c}, ${f?"out of":"in"} buffer`),this.state===j.ENDED)this.resetLoadingState();else if(o){const m=a.maxFragLookUpTolerance,p=o.start-m,y=o.start+o.duration+m;if(f||y<h.start||p>h.end){const g=d>y;(d<p||g)&&(g&&o.loader&&(this.log(`Cancelling fragment load for seek (sn: ${o.sn})`),o.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(l){this.fragmentTracker.removeFragmentsInRange(d,1/0,this.playlistType,!0);const m=this.lastCurrentTime;if(d>m&&(this.lastCurrentTime=d),!this.loadingParts){const p=Math.max(h.end,d),y=this.shouldLoadParts(this.getLevelDetails(),p);y&&(this.log(`LL-Part loading ON after seeking to ${d.toFixed(2)} with buffer @${p.toFixed(2)}`),this.loadingParts=y)}}this.hls.hasEnoughToStart||(this.log(`Setting ${f?"startPosition":"nextLoadPosition"} to ${d} for seek without enough to start`),this.nextLoadPosition=d,f&&(this.startPosition=d)),f&&this.state===j.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=s,this.hls=e,this.fragmentLoader=new NQ(e.config),this.keyLoader=n,this.fragmentTracker=i,this.config=e.config,this.decrypter=new DA(e.config)}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===j.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=j.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:i}=this;return i===-1&&e?e:i}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,i){if(i.live||!this.media)return!1;const n=e.end||0,r=this.config.timelineOffset||0;if(n<=r)return!1;const s=e.buffered;this.config.maxBufferHole&&s&&s.length>1&&(e=be.bufferedInfo(s,e.start,0));const a=e.nextStart;if(a&&a>r&&a<i.edge||this.media.currentTime<e.start)return!1;const l=i.partList;if(l!=null&&l.length){const c=l[l.length-1];return be.isBuffered(this.media,c.start+c.duration/2)}const u=i.fragments[i.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(u)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var i;return((i=this.getLevelDetails())==null?void 0:i.appliedTimelineOffset)||e}return 0}onMediaAttached(e,i){const n=this.media=this.mediaBuffer=i.media;Oi(n,"seeking",this.onMediaSeeking),Oi(n,"ended",this.onMediaEnded);const r=this.config;this.levels&&r.autoStartLoad&&this.state===j.STOPPED&&this.startLoad(r.startPosition)}onMediaDetaching(e,i){const n=!!i.transferMedia,r=this.media;if(r!==null){if(r.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),Wi(r,"seeking",this.onMediaSeeking),Wi(r,"ended",this.onMediaEnded),this.keyLoader&&!n&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,n){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,i){}onManifestLoaded(e,i){this.startTimeOffset=i.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=j.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,i,n){this.startFragRequested=!0,this._loadFragForPlayback(e,i,n)}_loadFragForPlayback(e,i,n){const r=s=>{const a=s.frag;if(this.fragContextChanged(a)){this.warn(`${a.type} sn: ${a.sn}${s.part?" part: "+s.part.index:""} of ${this.fragInfo(a,!1,s.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(a);return}a.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,i,n,r).then(s=>{if(!s)return;const a=this.state,o=s.frag;if(this.fragContextChanged(o)){(a===j.FRAG_LOADING||!this.fragCurrent&&a===j.PARSING)&&(this.fragmentTracker.removeFragment(o),this.state=j.IDLE);return}"payload"in s&&(this.log(`Loaded ${o.type} sn: ${o.sn} of ${this.playlistLabel()} ${o.level}`),this.hls.trigger(S.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===j.STOPPED||this.state===j.ERROR||(this.warn(`Frag error: ${(s==null?void 0:s.message)||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var i;const{fragmentTracker:n}=this;if(n.getState(e)===Jt.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((i=this.mediaBuffer)==null?void 0:i.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===Jt.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const i=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:i,part:null,stats:i.stats,id:i.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const i=e.details;return(i==null?void 0:i.live)&&i.type!=="EVENT"&&(this.levelLastLoaded!==e||i.expired)}flushMainBuffer(e,i,n=null){if(!(e-i))return;const r={startOffset:e,endOffset:i,type:n};this.hls.trigger(S.BUFFER_FLUSHING,r)}_loadInitSegment(e,i){this._doFragLoad(e,i).then(n=>{const r=n==null?void 0:n.frag;if(!r||this.fragContextChanged(r)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:r}=this,{frag:s,payload:a}=n,o=s.decryptdata;if(a&&a.byteLength>0&&o!=null&&o.key&&o.iv&&qu(o.method)){const l=self.performance.now();return this.decrypter.decrypt(new Uint8Array(a),o.key.buffer,o.iv.buffer,OA(o.method)).catch(u=>{throw r.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_DECRYPT_ERROR,fatal:!1,error:u,reason:u.message,frag:s}),u}).then(u=>{const c=self.performance.now();return r.trigger(S.FRAG_DECRYPTED,{frag:s,payload:u,stats:{tstart:l,tdecrypt:c}}),n.payload=u,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===j.STOPPED||this.state===j.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:i}=this;if(!i)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state!==j.STOPPED&&(this.state=j.IDLE),e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,i){var n,r;const s=e.tracks;if(s&&!i.encrypted&&((n=s.audio)!=null&&n.encrypted||(r=s.video)!=null&&r.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const a=this.media,o=new Error(`Encrypted track with no key in ${this.fragInfo(i)} (media ${a?"attached mediaKeys: "+a.mediaKeys:"detached"})`);return this.warn(o.message),!a||a.mediaKeys?!1:(this.hls.trigger(S.ERROR,{type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_NO_KEYS,fatal:!1,error:o,frag:i}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:i}=this;return!e||!i||e.sn!==i.sn||e.level!==i.level}fragBufferedComplete(e,i){const n=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${i?" part: "+i.index:""} of ${this.fragInfo(e,!1,i)} > buffer:${n?lX.toString(be.getBuffered(n)):"(detached)"})`),Mt(e)){var r;if(e.type!==ne.SUBTITLE){const a=e.elementaryStreams;if(!Object.keys(a).some(o=>!!a[o])){this.state=j.IDLE;return}}const s=(r=this.levels)==null?void 0:r[e.level];s!=null&&s.fragmentError&&(this.log(`Resetting level fragment error count of ${s.fragmentError} on frag buffered`),s.fragmentError=0)}this.state=j.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:i}=this;if(!i)return;const{frag:n,part:r,partsLoaded:s}=e,a=!s||s.length===0||s.some(l=>!l),o=new PA(n.level,n.sn,n.stats.chunkCount+1,0,r?r.index:-1,!a);i.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,i,n=null,r){var s;this.fragCurrent=e;const a=i.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)){if(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=j.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(h=>{if(!this.fragContextChanged(h.frag))return this.hls.trigger(S.KEY_LOADED,h),this.state===j.KEY_LOADING&&(this.state=j.IDLE),h}),this.hls.trigger(S.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(o=this.keyLoader.loadClear(e,a.encryptedFragments,this.startFragRequested),o&&this.log("[eme] blocking frag load until media-keys acquired"));const l=this.fragPrevious;if(Mt(e)&&(!l||e.sn!==l.sn)){const h=this.shouldLoadParts(i.details,e.end);h!==this.loadingParts&&(this.log(`LL-Part loading ${h?"ON":"OFF"} loading sn ${l==null?void 0:l.sn}->${e.sn}`),this.loadingParts=h)}if(n=Math.max(e.start,n||0),this.loadingParts&&Mt(e)){const h=a.partList;if(h&&r){n>a.fragmentEnd&&a.fragmentHint&&(e=a.fragmentHint);const f=this.getNextPart(h,e,n);if(f>-1){const m=h[f];e=this.fragCurrent=m.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${m.index} (${f}/${h.length-1}) of ${this.fragInfo(e,!1,m)}) cc: ${e.cc} [${a.startSN}-${a.endSN}], target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=m.start+m.duration,this.state=j.FRAG_LOADING;let p;return o?p=o.then(y=>!y||this.fragContextChanged(y.frag)?null:this.doFragPartsLoad(e,m,i,r)).catch(y=>this.handleFragLoadError(y)):p=this.doFragPartsLoad(e,m,i,r).catch(y=>this.handleFragLoadError(y)),this.hls.trigger(S.FRAG_LOADING,{frag:e,part:m,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):p}else if(!e.url||this.loadedEndOfParts(h,n))return Promise.resolve(null)}}if(Mt(e)&&this.loadingParts){var u;this.log(`LL-Part loading OFF after next part miss @${n.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(u=a.partList)==null?void 0:u.filter(h=>h.loaded).map(h=>`[${h.start}-${h.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+a.startSN+"-"+a.endSN+"]"}, target: ${parseFloat(n.toFixed(3))}`),te(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=j.FRAG_LOADING;const c=this.config.progressive&&e.type!==ne.SUBTITLE;let d;return c&&o?d=o.then(h=>!h||this.fragContextChanged(h.frag)?null:this.fragmentLoader.load(e,r)).catch(h=>this.handleFragLoadError(h)):d=Promise.all([this.fragmentLoader.load(e,c?r:void 0),o]).then(([h])=>(!c&&r&&r(h),h)).catch(h=>this.handleFragLoadError(h)),this.hls.trigger(S.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):d}doFragPartsLoad(e,i,n,r){return new Promise((s,a)=>{var o;const l=[],u=(o=n.details)==null?void 0:o.partList,c=d=>{this.fragmentLoader.loadPart(e,d,r).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(S.FRAG_LOADED,h);const m=Tw(n.details,e.sn,d.index+1)||b3(u,e.sn,d.index+1);if(m)c(m);else return s({frag:e,part:f,partsLoaded:l})}).catch(a)};c(i)})}handleFragLoadError(e){if("data"in e){const i=e.data;i.frag&&i.details===M.INTERNAL_ABORTED?this.handleFragLoadAborted(i.frag,i.part):i.frag&&i.type===le.KEY_SYSTEM_ERROR?(i.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(i.frag)):this.hls.trigger(S.ERROR,i)}else this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const i=this.getCurrentContext(e);if(!i||this.state!==j.PARSING){!this.fragCurrent&&this.state!==j.STOPPED&&this.state!==j.ERROR&&(this.state=j.IDLE);return}const{frag:n,part:r,level:s}=i,a=self.performance.now();n.stats.parsing.end=a,r&&(r.stats.parsing.end=a);const o=this.getLevelDetails(),u=o&&n.sn>o.endSN||this.shouldLoadParts(o,n.end);u!==this.loadingParts&&(this.log(`LL-Part loading ${u?"ON":"OFF"} after parsing segment ending @${n.end.toFixed(2)}`),this.loadingParts=u),this.updateLevelTiming(n,r,s,e.partial)}shouldLoadParts(e,i){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var n;const s=e.partList[0];if(s.fragment.type===ne.SUBTITLE)return!1;const a=s.end+(((n=e.fragmentHint)==null?void 0:n.duration)||0);if(i>=a){var r;if((this.hls.hasEnoughToStart?((r=this.media)==null?void 0:r.currentTime)||this.lastCurrentTime:this.getLoadPosition())>s.start-s.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:i,fragCurrent:n}=this,{level:r,sn:s,part:a}=e;if(!(i!=null&&i[r]))return this.warn(`Levels object was unset while buffering fragment ${s} of ${this.playlistLabel()} ${r}. The current chunk will not be buffered.`),null;const o=i[r],l=o.details,u=a>-1?Tw(l,s,a):null,c=u?u.fragment:T3(l,s,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:u,level:o}):null}bufferFragmentData(e,i,n,r,s){if(this.state!==j.PARSING)return;const{data1:a,data2:o}=e;let l=a;if(o&&(l=Vn(a,o)),!l.length)return;const u=this.initPTS[i.cc],c=u?-u.baseTime/u.timescale:void 0,d={type:e.type,frag:i,part:n,chunkMeta:r,offset:c,parent:i.type,data:l};if(this.hls.trigger(S.BUFFER_APPENDING,d),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(i)}}flushBufferGap(e){const i=this.media;if(!i)return;if(!be.isBuffered(i,i.currentTime)){this.flushMainBuffer(0,e.start);return}const n=i.currentTime,r=be.bufferInfo(i,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,r.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,i){var n;const r=this.getLoadPosition();if(!te(r))return null;const a=this.lastCurrentTime>r||(n=this.media)!=null&&n.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,r,i,a)}getFwdBufferInfoAtPos(e,i,n,r){const s=be.bufferInfo(e,i,r);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(i,n);if(a&&(s.nextStart<=a.end||a.gap)){const o=Math.max(Math.min(s.nextStart,a.end)-i,r);return be.bufferInfo(e,i,o)}}return s}getMaxBufferLength(e){const{config:i}=this;let n;return e?n=Math.max(8*i.maxBufferSize/e,i.maxBufferLength):n=i.maxBufferLength,Math.min(n,i.maxMaxBufferLength)}reduceMaxBufferLength(e,i){const n=this.config,r=Math.max(Math.min(e-i,n.maxBufferLength),i),s=Math.max(e-i*3,n.maxMaxBufferLength/2,r);return s>=r?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,i=ne.MAIN){const n=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,i):null;return n&&"fragment"in n?n.fragment:n}getNextFragment(e,i){const n=i.fragments,r=n.length;if(!r)return null;const{config:s}=this,a=n[0].start,o=s.lowLatencyMode&&!!i.partList;let l=null;if(i.live){const d=s.initialLiveManifestSize;if(r<d)return this.warn(`Not enough fragments to start playback (have: ${r}, need: ${d})`),null;if(!i.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a){var u;o&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),l=this.getInitialLiveFragment(i);const h=this.hls.startPosition,f=this.hls.liveSyncPosition,m=l?(h!==-1&&h>=a?h:f)||l.start:e;this.log(`Setting startPosition to ${m} to match start frag at live edge. mainStart: ${h} liveSyncPosition: ${f} frag.start: ${(u=l)==null?void 0:u.start}`),this.startPosition=this.nextLoadPosition=m}}else e<=a&&(l=n[0]);if(!l){const d=this.loadingParts?i.partEnd:i.fragmentEnd;l=this.getFragmentAtPosition(e,d,i)}let c=this.filterReplacedPrimary(l,i);if(!c&&l){const d=l.sn-i.startSN;c=this.filterReplacedPrimary(n[d+1]||null,i)}return this.mapToInitFragWhenRequired(c)}isLoopLoading(e,i){const n=this.fragmentTracker.getState(e);return(n===Jt.OK||n===Jt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>i}getNextFragmentLoopLoading(e,i,n,r,s){let a=null;if(e.gap&&(a=this.getNextFragment(this.nextLoadPosition,i),a&&!a.gap&&n.nextStart)){const o=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,r,0);if(o!==null&&n.len+o.len>=s){const l=a.sn;return this.loopSn!==l&&(this.log(`buffer full after gaps in "${r}" playlist starting at sn: ${l}`),this.loopSn=l),null}}return this.loopSn=void 0,a}get primaryPrefetch(){if(_w(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,i){if(!e)return e;if(_w(this.config)&&e.type!==ne.SUBTITLE){const n=this.hls.interstitialsManager,r=n==null?void 0:n.bufferingItem;if(r){const a=r.event;if(a){if(a.appendInPlace||Math.abs(e.start-r.start)>1||r.start===0)return null}else if(e.end<=r.start&&(i==null?void 0:i.live)===!1||e.start>r.end&&r.nextEvent&&(r.nextEvent.appendInPlace||e.start-r.end>1))return null}const s=n==null?void 0:n.playerQueue;if(s)for(let a=s.length;a--;){const o=s[a].interstitial;if(o.appendInPlace&&e.start>=o.startTime&&e.end<=o.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,i,n){let r=-1,s=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const u=e[o];if(a=a&&!u.independent,r>-1&&n<u.start)break;const c=u.loaded;c?r=-1:(s||(u.independent||a)&&u.fragment===i)&&(u.fragment!==i&&this.warn(`Need buffer at ${n} but next unloaded part starts at ${u.start}`),r=o),s=c}return r}loadedEndOfParts(e,i){let n;for(let r=e.length;r--;){if(n=e[r],!n.loaded)return!1;if(i>n.start)return!0}return!1}getInitialLiveFragment(e){const i=e.fragments,n=this.fragPrevious;let r=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),r=AQ(i,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!r){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=i[s-e.startSN];n.cc===a.cc&&(r=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${r.sn}`))}r||(r=a3(e,n.cc,n.end),r&&this.log(`Live playlist, switching playlist, load frag with same CC: ${r.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(r=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return r}getFragmentAtPosition(e,i,n){const{config:r}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:u}=r,c=n.partList,d=!!(this.loadingParts&&c!=null&&c.length&&l);d&&!this.bitrateTest&&c[c.length-1].fragment.sn===l.sn&&(a=a.concat(l),o=l.sn);let h;if(e<i){var f;const p=e<this.lastCurrentTime||e>i-u||(f=this.media)!=null&&f.paused||!this.startFragRequested?0:u;h=hl(s,a,e,p)}else h=a[a.length-1];if(h){const m=h.sn-n.startSN,p=this.fragmentTracker.getState(h);if((p===Jt.OK||p===Jt.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||c[0].fragment.sn>h.sn||!n.live)&&h.level===s.level){const g=a[m+1];h.sn<o&&this.fragmentTracker.getState(g)!==Jt.OK?h=g:h=null}}return h}alignPlaylists(e,i,n){const r=e.fragments.length;if(!r)return this.warn("No fragments in live playlist"),0;const s=e.fragmentStart,a=!i,o=e.alignedSliding&&te(s);if(a||!o&&!s){oX(n,e);const l=e.fragmentStart;return this.log(`Live playlist sliding: ${l.toFixed(2)} start-sn: ${i?i.startSN:"na"}->${e.startSN} fragments: ${r}`),l}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,i){let n=this.startPosition;n<i&&(n=-1);const r=this.timelineOffset;if(n===-1){const s=this.startTimeOffset!==null,a=s?this.startTimeOffset:e.startTimeOffset;a!==null&&te(a)?(n=i+a,a<0&&(n+=e.edge),n=Math.min(Math.max(i,n),i+e.totalduration),this.log(`Setting startPosition to ${n} for start time offset ${a} found in ${s?"multivariant":"media"} playlist`),this.startPosition=n):e.live?(n=this.hls.liveSyncPosition||i,this.log(`Setting startPosition to -1 to start at live edge ${n}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=n=0),this.lastCurrentTime=n+r}this.nextLoadPosition=n+r}getLoadPosition(){var e;const{media:i}=this;let n=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&i?n=i.currentTime:this.nextLoadPosition>=0&&(n=this.nextLoadPosition),n}handleFragLoadAborted(e,i){this.transmuxer&&e.type===this.playlistType&&Mt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${i?" part "+i.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==j.FRAG_LOADING_WAITING_RETRY)&&(this.state=j.IDLE)}onFragmentOrKeyLoadError(e,i){var n;if(i.chunkMeta&&!i.frag){const g=this.getCurrentContext(i.chunkMeta);g&&(i.frag=g.frag)}const r=i.frag;if(!r||r.type!==e||!this.levels)return;if(this.fragContextChanged(r)){var s;this.warn(`Frag load error must match current frag to retry ${r.url} > ${(s=this.fragCurrent)==null?void 0:s.url}`);return}const a=i.details===M.FRAG_GAP;a&&this.fragmentTracker.fragBuffered(r,!0);const o=i.errorAction;if(!o){this.state=j.ERROR;return}const{action:l,flags:u,retryCount:c=0,retryConfig:d}=o,h=!!d,f=h&&l===mi.RetryRequest,m=h&&!o.resolved&&u===sn.MoveAllAlternatesMatchingHost,p=(n=this.hls.latestLevelDetails)==null?void 0:n.live;if(!f&&m&&Mt(r)&&!r.endList&&p&&!l3(i))this.resetFragmentErrors(e),this.treatAsGap(r),o.resolved=!0;else if((f||m)&&c<d.maxNumRetry){var y;const g=q1((y=i.response)==null?void 0:y.code),v=CA(d,c);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+v,this.state=j.FRAG_LOADING_WAITING_RETRY,o.resolved=!0,g){this.log("Waiting for connection (offline)"),this.retryDate=1/0,i.reason="offline";return}this.warn(`Fragment ${r.sn} of ${e} ${r.level} errored with ${i.details}, retrying loading ${c+1}/${d.maxNumRetry} in ${v}ms`)}else if(d)if(this.resetFragmentErrors(e),c<d.maxNumRetry)!a&&l!==mi.RemoveAlternatePermanently&&(o.resolved=!0);else{this.warn(`${i.details} reached or exceeded max retry (${c})`);return}else l===mi.SendAlternateToPenaltyBox?this.state=j.WAITING_LEVEL:this.state=j.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),i=this.retryDate,n=i===1/0;(!i||e>=i||n&&!q1(0))&&(n&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=j.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===j.PARSING||this.state===j.PARSED){const i=e.frag,n=e.parent,r=this.getFwdBufferInfo(this.mediaBuffer,n),s=r&&r.len>.5;s&&this.reduceMaxBufferLength(r.len,(i==null?void 0:i.duration)||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${n} buffer`),i&&(this.fragmentTracker.removeFragment(i),this.nextLoadPosition=i.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===ne.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==j.STOPPED&&(this.state=j.IDLE)}afterBufferFlushed(e,i,n){if(!e)return;const r=be.getBuffered(e);this.fragmentTracker.detectEvictedFragments(i,r,n),this.state===j.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==j.STOPPED&&(this.state=j.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,i=e?e.details:null;i!=null&&i.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(i,i.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,i,n,r){const s=n.details;if(!s){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,u)=>{const c=e.elementaryStreams[u];if(c){const d=c.endPTS-c.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${u} duration reliably (${d})`),l||!1;const h=r?0:v3(s,e,c.startPTS,c.endPTS,c.startDTS,c.endDTS,this);return this.hls.trigger(S.LEVEL_PTS_UPDATED,{details:s,level:n,drift:h,type:u,frag:e,start:c.startPTS,end:c.endPTS}),!0}return l},!1)){var o;const l=((o=this.transmuxer)==null?void 0:o.error)===null;if((n.fragmentError===0||l&&(n.fragmentError<2||e.endList))&&this.treatAsGap(e,n),l){const u=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(u.message),this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_PARSING_ERROR,fatal:!1,error:u,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=j.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${i?" part: "+i.index:""} of ${this.fragInfo(e,!1,i)})`),this.hls.trigger(S.FRAG_PARSED,{frag:e,part:i})}playlistLabel(){return this.playlistType===ne.MAIN?"level":"track"}fragInfo(e,i=!0,n){var r,s;return`${this.playlistLabel()} ${e.level} (${n?"part":"frag"}:[${((r=i&&!n?e.startPTS:(n||e).start)!=null?r:NaN).toFixed(3)}-${((s=i&&!n?e.endPTS:(n||e).end)!=null?s:NaN).toFixed(3)}]${n&&e.type==="main"?"INDEPENDENT="+(n.independent?"YES":"NO"):""}`}treatAsGap(e,i){i&&i.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const i=this._state;i!==e&&(this._state=e,this.log(`${i}->${e}`))}get state(){return this._state}}function _w(t){return!!t.interstitialsController&&t.enableInterstitialPlayback!==!1}class x3{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:i}=this;let n;if(e.length)e.length===1?n=e[0]:n=uX(e,i);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function uX(t,e){const i=new Uint8Array(e);let n=0;for(let r=0;r<t.length;r++){const s=t[r];i.set(s,n),n+=s.length}return i}var DE={exports:{}},Aw;function cX(){return Aw||(Aw=1,function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,d,h){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new r(c,d||l,h),m=i?i+u:u;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var u=[],c,d;if(this._eventsCount===0)return u;for(d in c=this._events)e.call(c,d)&&u.push(i?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},o.prototype.listeners=function(u){var c=i?i+u:u,d=this._events[c];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(u){var c=i?i+u:u,d=this._events[c];return d?d.fn?1:d.length:0},o.prototype.emit=function(u,c,d,h,f,m){var p=i?i+u:u;if(!this._events[p])return!1;var y=this._events[p],g=arguments.length,v,E;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,c),!0;case 3:return y.fn.call(y.context,c,d),!0;case 4:return y.fn.call(y.context,c,d,h),!0;case 5:return y.fn.call(y.context,c,d,h,f),!0;case 6:return y.fn.call(y.context,c,d,h,f,m),!0}for(E=1,v=new Array(g-1);E<g;E++)v[E-1]=arguments[E];y.fn.apply(y.context,v)}else{var T=y.length,_;for(E=0;E<T;E++)switch(y[E].once&&this.removeListener(u,y[E].fn,void 0,!0),g){case 1:y[E].fn.call(y[E].context);break;case 2:y[E].fn.call(y[E].context,c);break;case 3:y[E].fn.call(y[E].context,c,d);break;case 4:y[E].fn.call(y[E].context,c,d,h);break;default:if(!v)for(_=1,v=new Array(g-1);_<g;_++)v[_-1]=arguments[_];y[E].fn.apply(y[E].context,v)}}return!0},o.prototype.on=function(u,c,d){return s(this,u,c,d,!1)},o.prototype.once=function(u,c,d){return s(this,u,c,d,!0)},o.prototype.removeListener=function(u,c,d,h){var f=i?i+u:u;if(!this._events[f])return this;if(!c)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===c&&(!h||m.once)&&(!d||m.context===d)&&a(this,f);else{for(var p=0,y=[],g=m.length;p<g;p++)(m[p].fn!==c||h&&!m[p].once||d&&m[p].context!==d)&&y.push(m[p]);y.length?this._events[f]=y.length===1?y[0]:y:a(this,f)}return this},o.prototype.removeAllListeners=function(u){var c;return u?(c=i?i+u:u,this._events[c]&&a(this,c)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,t.exports=o}(DE)),DE.exports}var dX=cX(),$A=Nz(dX);const nf="1.6.15",Ic={};function hX(){return typeof __HLS_WORKER_BUNDLE__=="function"}function fX(){const t=Ic[nf];if(t)return t.clientCount++,t;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),i=self.URL.createObjectURL(e),r={worker:new self.Worker(i),objectURL:i,clientCount:1};return Ic[nf]=r,r}function mX(t){const e=Ic[t];if(e)return e.clientCount++,e;const i=new self.URL(t,self.location.href).href,r={worker:new self.Worker(i),scriptURL:i,clientCount:1};return Ic[t]=r,r}function pX(t){const e=Ic[t||nf];if(e&&e.clientCount--===1){const{worker:n,objectURL:r}=e;delete Ic[t||nf],r&&self.URL.revokeObjectURL(r),n.terminate()}}function k3(t,e){return e+10<=t.length&&t[e]===51&&t[e+1]===68&&t[e+2]===73&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function FA(t,e){return e+10<=t.length&&t[e]===73&&t[e+1]===68&&t[e+2]===51&&t[e+3]<255&&t[e+4]<255&&t[e+6]<128&&t[e+7]<128&&t[e+8]<128&&t[e+9]<128}function Jv(t,e){let i=0;return i=(t[e]&127)<<21,i|=(t[e+1]&127)<<14,i|=(t[e+2]&127)<<7,i|=t[e+3]&127,i}function rf(t,e){const i=e;let n=0;for(;FA(t,e);){n+=10;const r=Jv(t,e+6);n+=r,k3(t,e+10)&&(n+=10),e+=n}if(n>0)return t.subarray(i,i+n)}function gX(t,e,i,n){const r=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],s=e[i+2],a=s>>2&15;if(a>12){const f=new Error(`invalid ADTS sampling index:${a}`);t.emit(S.ERROR,S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_PARSING_ERROR,fatal:!0,error:f,reason:f.message});return}const o=(s>>6&3)+1,l=e[i+3]>>6&3|(s&1)<<2,u="mp4a.40."+o,c=r[a];let d=a;(o===5||o===29)&&(d-=3);const h=[o<<3|(d&14)>>1,(d&1)<<7|l<<3];return We.log(`manifest codec:${n}, parsed codec:${u}, channels:${l}, rate:${c} (ADTS object type:${o} sampling index:${a})`),{config:h,samplerate:c,channelCount:l,codec:u,parsedCodec:u,manifestCodec:n}}function I3(t,e){return t[e]===255&&(t[e+1]&246)===240}function L3(t,e){return t[e+1]&1?7:9}function UA(t,e){return(t[e+3]&3)<<11|t[e+4]<<3|(t[e+5]&224)>>>5}function vX(t,e){return e+5<t.length}function P0(t,e){return e+1<t.length&&I3(t,e)}function yX(t,e){return vX(t,e)&&I3(t,e)&&UA(t,e)<=t.length-e}function EX(t,e){if(P0(t,e)){const i=L3(t,e);if(e+i>=t.length)return!1;const n=UA(t,e);if(n<=i)return!1;const r=e+n;return r===t.length||P0(t,r)}return!1}function R3(t,e,i,n,r){if(!t.samplerate){const s=gX(e,i,n,r);if(!s)return;Qe(t,s)}}function w3(t){return 1024*9e4/t}function TX(t,e){const i=L3(t,e);if(e+i<=t.length){const n=UA(t,e)-i;if(n>0)return{headerLength:i,frameLength:n}}}function C3(t,e,i,n,r){const s=w3(t.samplerate),a=n+r*s,o=TX(e,i);let l;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,m=Math.max(0,i+f-e.length);m?(l=new Uint8Array(f-h),l.set(e.subarray(i+h,e.length),0)):l=e.subarray(i+h,i+f);const p={unit:l,pts:a};return m||t.samples.push(p),{sample:p,length:f,missing:m}}const u=e.length-i;return l=new Uint8Array(u),l.set(e.subarray(i,e.length),0),{sample:{unit:l,pts:a},length:u,missing:-1}}function bX(t,e){return FA(t,e)&&Jv(t,e+6)+10<=t.length-e}function SX(t){return t instanceof ArrayBuffer?t:t.byteOffset==0&&t.byteLength==t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer}function PE(t,e=0,i=1/0){return _X(t,e,i,Uint8Array)}function _X(t,e,i,n){const r=AX(t);let s=1;"BYTES_PER_ELEMENT"in n&&(s=n.BYTES_PER_ELEMENT);const a=xX(t)?t.byteOffset:0,o=(a+t.byteLength)/s,l=(a+e)/s,u=Math.floor(Math.max(0,Math.min(l,o))),c=Math.floor(Math.min(u+Math.max(i,0),o));return new n(r,u,c-u)}function AX(t){return t instanceof ArrayBuffer?t:t.buffer}function xX(t){return t&&t.buffer instanceof ArrayBuffer&&t.byteLength!==void 0&&t.byteOffset!==void 0}function kX(t){const e={key:t.type,description:"",data:"",mimeType:null,pictureType:null},i=3;if(t.size<2)return;if(t.data[0]!==i){console.log("Ignore frame with unrecognized character encoding");return}const n=t.data.subarray(1).indexOf(0);if(n===-1)return;const r=vn(PE(t.data,1,n)),s=t.data[2+n],a=t.data.subarray(3+n).indexOf(0);if(a===-1)return;const o=vn(PE(t.data,3+n,a));let l;return r==="-->"?l=vn(PE(t.data,4+n+a)):l=SX(t.data.subarray(4+n+a)),e.mimeType=r,e.pictureType=s,e.description=o,e.data=l,e}function IX(t){if(t.size<2)return;const e=vn(t.data,!0),i=new Uint8Array(t.data.subarray(e.length+1));return{key:t.type,info:e,data:i.buffer}}function LX(t){if(t.size<2)return;if(t.type==="TXXX"){let i=1;const n=vn(t.data.subarray(i),!0);i+=n.length+1;const r=vn(t.data.subarray(i));return{key:t.type,info:n,data:r}}const e=vn(t.data.subarray(1));return{key:t.type,info:"",data:e}}function RX(t){if(t.type==="WXXX"){if(t.size<2)return;let i=1;const n=vn(t.data.subarray(i),!0);i+=n.length+1;const r=vn(t.data.subarray(i));return{key:t.type,info:n,data:r}}const e=vn(t.data);return{key:t.type,info:"",data:e}}function wX(t){return t.type==="PRIV"?IX(t):t.type[0]==="W"?RX(t):t.type==="APIC"?kX(t):LX(t)}function CX(t){const e=String.fromCharCode(t[0],t[1],t[2],t[3]),i=Jv(t,4),n=10;return{type:e,size:i,data:t.subarray(n,n+i)}}const Tm=10,DX=10;function D3(t){let e=0;const i=[];for(;FA(t,e);){const n=Jv(t,e+6);t[e+5]>>6&1&&(e+=Tm),e+=Tm;const r=e+n;for(;e+DX<r;){const s=CX(t.subarray(e)),a=wX(s);a&&i.push(a),e+=s.size+Tm}k3(t,e)&&(e+=Tm)}return i}function P3(t){return t&&t.key==="PRIV"&&t.info==="com.apple.streaming.transportStreamTimestamp"}function PX(t){if(t.data.byteLength===8){const e=new Uint8Array(t.data),i=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,i&&(n+=4772185884e-2),Math.round(n)}}function BA(t){const e=D3(t);for(let i=0;i<e.length;i++){const n=e[i];if(P3(n))return PX(n)}}let dn=function(t){return t.audioId3="org.id3",t.dateRange="com.apple.quicktime.HLS",t.emsg="https://aomedia.org/emsg/ID3",t.misbklv="urn:misb:KLV:bin:1910.1",t}({});function Ur(t="",e=9e4){return{type:t,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class VA{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,i,n,r){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,i){return!1}appendFrame(e,i,n){}demux(e,i){this.cachedData&&(e=Vn(this.cachedData,e),this.cachedData=null);let n=rf(e,0),r=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,l=n?BA(n):void 0,u=e.length;for((this.basePTS===null||this.frameIndex===0&&te(l))&&(this.basePTS=OX(l,i,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:dn.audioId3,duration:Number.POSITIVE_INFINITY});r<u;){if(this.canParse(e,r)){const c=this.appendFrame(a,e,r);c?(this.frameIndex++,this.lastPTS=c.sample.pts,r+=c.length,s=r):r=u}else bX(e,r)?(n=rf(e,r),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:dn.audioId3,duration:Number.POSITIVE_INFINITY}),r+=n.length,s=r):r++;if(r===u&&s!==u){const c=e.slice(s);this.cachedData?this.cachedData=Vn(this.cachedData,c):this.cachedData=c}}return{audioTrack:a,videoTrack:Ur(),id3Track:o,textTrack:Ur()}}demuxSampleAes(e,i,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const i=this.cachedData;return i&&(this.cachedData=null,this.demux(i,0)),{audioTrack:this._audioTrack,videoTrack:Ur(),id3Track:this._id3Track,textTrack:Ur()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const OX=(t,e,i)=>{if(te(t))return t*90;const n=i?i.baseTime*9e4/i.timescale:0;return e*9e4+n};let bm=null;const MX=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],NX=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],$X=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],FX=[0,1,1,4];function O3(t,e,i,n,r){if(i+24>e.length)return;const s=M3(e,i);if(s&&i+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+r*a,l={unit:e.subarray(i,i+s.frameLength),pts:o,dts:o};return t.config=[],t.channelCount=s.channelCount,t.samplerate=s.sampleRate,t.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function M3(t,e){const i=t[e+1]>>3&3,n=t[e+1]>>1&3,r=t[e+2]>>4&15,s=t[e+2]>>2&3;if(i!==1&&r!==0&&r!==15&&s!==3){const a=t[e+2]>>1&1,o=t[e+3]>>6,l=i===3?3-n:n===3?3:4,u=MX[l*14+r-1]*1e3,d=NX[(i===3?0:i===2?1:2)*3+s],h=o===3?1:2,f=$X[i][n],m=FX[n],p=f*8*m,y=Math.floor(f*u/d+a)*m;if(bm===null){const E=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);bm=E?parseInt(E[1]):0}return!!bm&&bm<=87&&n===2&&u>=224e3&&o===0&&(t[e+3]=t[e+3]|128),{sampleRate:d,channelCount:h,frameLength:y,samplesPerFrame:p}}}function HA(t,e){return t[e]===255&&(t[e+1]&224)===224&&(t[e+1]&6)!==0}function N3(t,e){return e+1<t.length&&HA(t,e)}function UX(t,e){return HA(t,e)&&4<=t.length-e}function $3(t,e){if(e+1<t.length&&HA(t,e)){const n=M3(t,e);let r=4;n!=null&&n.frameLength&&(r=n.frameLength);const s=e+r;return s===t.length||N3(t,s)}return!1}class BX extends VA{constructor(e,i){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=i}resetInitSegment(e,i,n,r){super.resetInitSegment(e,i,n,r),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:i,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e,i){if(!e)return!1;const n=rf(e,0);let r=(n==null?void 0:n.length)||0;if($3(e,r))return!1;for(let s=e.length;r<s;r++)if(EX(e,r))return i.log("ADTS sync word found !"),!0;return!1}canParse(e,i){return yX(e,i)}appendFrame(e,i,n){R3(e,this.observer,i,n,e.manifestCodec);const r=C3(e,i,n,this.basePTS,this.frameIndex);if(r&&r.missing===0)return r}}const F3=(t,e)=>{let i=0,n=5;e+=n;const r=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=t[e];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,r[0]=(a[0]&s[0])>>l,i=i?i<<o|r[0]:r[0],e+=1,n-=o}return i};class VX extends VA{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,i,n,r){super.resetInitSegment(e,i,n,r),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:i,duration:r,inputTimeScale:9e4,dropped:0}}canParse(e,i){return i+64<e.length}appendFrame(e,i,n){const r=U3(e,i,n,this.basePTS,this.frameIndex);if(r!==-1)return{sample:e.samples[e.samples.length-1],length:r,missing:0}}static probe(e){if(!e)return!1;const i=rf(e,0);if(!i)return!1;const n=i.length;return e[n]===11&&e[n+1]===119&&BA(i)!==void 0&&F3(e,n)<16}}function U3(t,e,i,n,r){if(i+8>e.length||e[i]!==11||e[i+1]!==119)return-1;const s=e[i+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],l=e[i+4]&63,c=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(i+c>e.length)return-1;const d=e[i+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[i+6]<<8|e[i+7])>>12-h&1,p=[2,1,2,3,3,4,4,5][d]+f,y=e[i+5]>>3,g=e[i+5]&7,v=new Uint8Array([s<<6|y<<1|g>>2,(g&3)<<6|d<<3|f<<2|l>>4,l<<4&224]),E=1536/o*9e4,T=n+r*E,_=e.subarray(i,i+c);return t.config=v,t.channelCount=p,t.samplerate=o,t.samples.push({unit:_,pts:T}),c}class HX extends VA{resetInitSegment(e,i,n,r){super.resetInitSegment(e,i,n,r),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:i,duration:r,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const i=rf(e,0);let n=(i==null?void 0:i.length)||0;if(i&&e[n]===11&&e[n+1]===119&&BA(i)!==void 0&&F3(e,n)<=16)return!1;for(let r=e.length;n<r;n++)if($3(e,n))return We.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,i){return UX(e,i)}appendFrame(e,i,n){if(this.basePTS!==null)return O3(e,i,n,this.basePTS,this.frameIndex)}}const KX=/\/emsg[-/]ID3/i;class GX{constructor(e,i){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=i}resetTimeStamp(){}resetInitSegment(e,i,n,r){const s=this.videoTrack=Ur("video",1),a=this.audioTrack=Ur("audio",1),o=this.txtTrack=Ur("text",1);if(this.id3Track=Ur("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=zN(e);if(l.video){const{id:u,timescale:c,codec:d,supplemental:h}=l.video;s.id=u,s.timescale=o.timescale=c,s.codec=d,s.supplemental=h}if(l.audio){const{id:u,timescale:c,codec:d}=l.audio;a.id=u,a.timescale=c,a.codec=d}o.id=jN.text,s.sampleDuration=0,s.duration=a.duration=r}resetContiguity(){this.remainderData=null}static probe(e){return Vz(e)}demux(e,i){this.timeOffset=i;let n=e;const r=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Vn(this.remainderData,e));const o=qz(n);this.remainderData=o.remainder,r.samples=o.valid||new Uint8Array}else r.samples=n;const a=this.extractID3Track(r,i);return s.samples=HR(i,r),{videoTrack:r,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,i=this.videoTrack,n=this.txtTrack;i.samples=this.remainderData||new Uint8Array,this.remainderData=null;const r=this.extractID3Track(i,this.timeOffset);return n.samples=HR(e,i),{videoTrack:i,audioTrack:Ur(),id3Track:r,textTrack:Ur()}}extractID3Track(e,i){const n=this.id3Track;if(e.samples.length){const r=xe(e.samples,["emsg"]);r&&r.forEach(s=>{const a=Qz(s);if(KX.test(a.schemeIdUri)){const o=xw(a,i);let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const u=a.payload;n.samples.push({data:u,len:u.byteLength,dts:o,pts:o,type:dn.emsg,duration:l})}else if(this.config.enableEmsgKLVMetadata&&a.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const o=xw(a,i);n.samples.push({data:a.payload,len:a.payload.byteLength,dts:o,pts:o,type:dn.misbklv,duration:Number.POSITIVE_INFINITY})}})}return n}demuxSampleAes(e,i,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function xw(t,e){return te(t.presentationTime)?t.presentationTime/t.timeScale:e+t.presentationTimeDelta/t.timeScale}class WX{constructor(e,i,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new DA(i,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Za.cbc)}decryptAacSample(e,i,n){const r=e[i].unit;if(r.length<=16)return;const s=r.subarray(16,r.length-r.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);r.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,i+1,n)}).catch(n)}decryptAacSamples(e,i,n){for(;;i++){if(i>=e.length){n();return}if(!(e[i].unit.length<32)&&(this.decryptAacSample(e,i,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const i=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(i);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)n.set(e.subarray(s,s+16),r);return n}getAvcDecryptedUnit(e,i){const n=new Uint8Array(i);let r=0;for(let s=32;s<e.length-16;s+=160,r+=16)e.set(n.subarray(r,r+16),s);return e}decryptAvcSample(e,i,n,r,s){const a=ZN(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,i,n+1,r)}).catch(r)}decryptAvcSamples(e,i,n,r){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;i++,n=0){if(i>=e.length){r();return}const s=e[i].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,i,n,r,a),!this.decrypter.isSync()))return}}}}class B3{constructor(){this.VideoSample=null}createVideoSample(e,i,n){return{key:e,frame:!1,pts:i,dts:n,units:[],length:0}}getLastNalUnit(e){var i;let n=this.VideoSample,r;if((!n||n.units.length===0)&&(n=e[e.length-1]),(i=n)!=null&&i.units){const s=n.units;r=s[s.length-1]}return r}pushAccessUnit(e,i){if(e.units.length&&e.frame){if(e.pts===void 0){const n=i.samples,r=n.length;if(r){const s=n[r-1];e.pts=s.pts,e.dts=s.dts}else{i.dropped++;return}}i.samples.push(e)}}parseNALu(e,i,n){const r=i.byteLength;let s=e.naluState||0;const a=s,o=[];let l=0,u,c,d,h=-1,f=0;for(s===-1&&(h=0,f=this.getNALuType(i,0),s=0,l=1);l<r;){if(u=i[l++],!s){s=u?0:1;continue}if(s===1){s=u?0:2;continue}if(!u)s=3;else if(u===1){if(c=l-s-1,h>=0){const m={data:i.subarray(h,c),type:f};o.push(m)}else{const m=this.getLastNalUnit(e.samples);m&&(a&&l<=4-a&&m.state&&(m.data=m.data.subarray(0,m.data.byteLength-a)),c>0&&(m.data=Vn(m.data,i.subarray(0,c)),m.state=0))}l<r?(d=this.getNALuType(i,l),h=l,f=d,s=0):s=-1}else s=0}if(h>=0&&s>=0){const m={data:i.subarray(h,r),type:f,state:s};o.push(m)}if(o.length===0){const m=this.getLastNalUnit(e.samples);m&&(m.data=Vn(m.data,i))}return e.naluState=s,o}}class fh{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,i=this.bytesAvailable,n=e.byteLength-i,r=new Uint8Array(4),s=Math.min(4,i);if(s===0)throw new Error("no bytes available");r.set(e.subarray(n,n+s)),this.word=new DataView(r.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let i;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,i=e>>3,e-=i<<3,this.bytesAvailable-=i,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let i=Math.min(this.bitsAvailable,e);const n=this.word>>>32-i;if(e>32&&We.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=i,this.bitsAvailable>0)this.word<<=i;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return i=e-i,i>0&&this.bitsAvailable?n<<i|this.readBits(i):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class jX extends B3{parsePES(e,i,n,r){const s=this.parseNALu(e,n.data,r);let a=this.VideoSample,o,l=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(u=>{var c,d;switch(u.type){case 1:{let p=!1;o=!0;const y=u.data;if(l&&y.length>4){const g=this.readSliceType(y);(g===2||g===4||g===7||g===9)&&(p=!0)}if(p){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.frame=!0,a.key=p;break}case 5:o=!0,(c=a)!=null&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 6:{o=!0,LA(u.data,1,n.pts,i.samples);break}case 7:{var f,m;o=!0,l=!0;const p=u.data,y=this.readSPS(p);if(!e.sps||e.width!==y.width||e.height!==y.height||((f=e.pixelRatio)==null?void 0:f[0])!==y.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==y.pixelRatio[1]){e.width=y.width,e.height=y.height,e.pixelRatio=y.pixelRatio,e.sps=[p];const g=p.subarray(1,4);let v="avc1.";for(let E=0;E<3;E++){let T=g[E].toString(16);T.length<2&&(T="0"+T),v+=T}e.codec=v}break}case 8:o=!0,e.pps=[u.data];break;case 9:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;case 12:o=!0;break;default:o=!1;break}a&&o&&a.units.push(u)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}getNALuType(e,i){return e[i]&31}readSliceType(e){const i=new fh(e);return i.readUByte(),i.readUEG(),i.readUEG()}skipScalingList(e,i){let n=8,r=8,s;for(let a=0;a<e;a++)r!==0&&(s=i.readEG(),r=(n+s+256)%256),n=r===0?n:r}readSPS(e){const i=new fh(e);let n=0,r=0,s=0,a=0,o,l,u;const c=i.readUByte.bind(i),d=i.readBits.bind(i),h=i.readUEG.bind(i),f=i.readBoolean.bind(i),m=i.skipBits.bind(i),p=i.skipEG.bind(i),y=i.skipUEG.bind(i),g=this.skipScalingList.bind(this);c();const v=c();if(d(5),m(3),c(),y(),v===100||v===110||v===122||v===244||v===44||v===83||v===86||v===118||v===128){const I=h();if(I===3&&m(1),y(),y(),m(1),f())for(l=I!==3?8:12,u=0;u<l;u++)f()&&(u<6?g(16,i):g(64,i))}y();const E=h();if(E===0)h();else if(E===1)for(m(1),p(),p(),o=h(),u=0;u<o;u++)p();y(),m(1);const T=h(),_=h(),x=d(1);x===0&&m(1),m(1),f()&&(n=h(),r=h(),s=h(),a=h());let A=[1,1];if(f()&&f())switch(c()){case 1:A=[1,1];break;case 2:A=[12,11];break;case 3:A=[10,11];break;case 4:A=[16,11];break;case 5:A=[40,33];break;case 6:A=[24,11];break;case 7:A=[20,11];break;case 8:A=[32,11];break;case 9:A=[80,33];break;case 10:A=[18,11];break;case 11:A=[15,11];break;case 12:A=[64,33];break;case 13:A=[160,99];break;case 14:A=[4,3];break;case 15:A=[3,2];break;case 16:A=[2,1];break;case 255:{A=[c()<<8|c(),c()<<8|c()];break}}return{width:Math.ceil((T+1)*16-n*2-r*2),height:(2-x)*(_+1)*16-(x?2:4)*(s+a),pixelRatio:A}}}class YX extends B3{constructor(...e){super(...e),this.initVPS=null}parsePES(e,i,n,r){const s=this.parseNALu(e,n.data,r);let a=this.VideoSample,o,l=!1;n.data=null,a&&s.length&&!e.audFound&&(this.pushAccessUnit(a,e),a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),s.forEach(u=>{var c,d;switch(u.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts)),a.frame=!0,o=!0;break;case 16:case 17:case 18:case 21:if(o=!0,l){var h;(h=a)!=null&&h.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null)}a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 19:case 20:o=!0,(c=a)!=null&&c.frame&&!a.key&&(this.pushAccessUnit(a,e),a=this.VideoSample=null),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0,a.frame=!0;break;case 39:o=!0,LA(u.data,2,n.pts,i.samples);break;case 32:o=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=Qe(e.params,this.readVPS(u.data)),this.initVPS=u.data),e.vps=[u.data];break;case 33:if(o=!0,l=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],u.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const f=this.readSPS(u.data);e.width=f.width,e.height=f.height,e.pixelRatio=f.pixelRatio,e.codec=f.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const m in f.params)e.params[m]=f.params[m]}this.pushParameterSet(e.sps,u.data,e.vps),a||(a=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts)),a.key=!0;break;case 34:if(o=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const f=this.readPPS(u.data);for(const m in f)e.params[m]=f[m]}this.pushParameterSet(e.pps,u.data,e.vps)}break;case 35:o=!0,e.audFound=!0,(d=a)!=null&&d.frame&&(this.pushAccessUnit(a,e),a=null),a||(a=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts));break;default:o=!1;break}a&&o&&a.units.push(u)}),r&&a&&(this.pushAccessUnit(a,e),this.VideoSample=null)}pushParameterSet(e,i,n){(n&&n[0]===this.initVPS||!n&&!e.length)&&e.push(i)}getNALuType(e,i){return(e[i]&126)>>>1}ebsp2rbsp(e){const i=new Uint8Array(e.byteLength);let n=0;for(let r=0;r<e.byteLength;r++)r>=2&&e[r]===3&&e[r-1]===0&&e[r-2]===0||(i[n]=e[r],n++);return new Uint8Array(i.buffer,0,n)}pushAccessUnit(e,i){super.pushAccessUnit(e,i),this.initVPS&&(this.initVPS=null)}readVPS(e){const i=new fh(e);i.readUByte(),i.readUByte(),i.readBits(4),i.skipBits(2),i.readBits(6);const n=i.readBits(3),r=i.readBoolean();return{numTemporalLayers:n+1,temporalIdNested:r}}readSPS(e){const i=new fh(this.ebsp2rbsp(e));i.readUByte(),i.readUByte(),i.readBits(4);const n=i.readBits(3);i.readBoolean();const r=i.readBits(2),s=i.readBoolean(),a=i.readBits(5),o=i.readUByte(),l=i.readUByte(),u=i.readUByte(),c=i.readUByte(),d=i.readUByte(),h=i.readUByte(),f=i.readUByte(),m=i.readUByte(),p=i.readUByte(),y=i.readUByte(),g=i.readUByte(),v=[],E=[];for(let Ce=0;Ce<n;Ce++)v.push(i.readBoolean()),E.push(i.readBoolean());if(n>0)for(let Ce=n;Ce<8;Ce++)i.readBits(2);for(let Ce=0;Ce<n;Ce++)v[Ce]&&(i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte(),i.readUByte()),E[Ce]&&i.readUByte();i.readUEG();const T=i.readUEG();T==3&&i.skipBits(1);const _=i.readUEG(),x=i.readUEG(),A=i.readBoolean();let I=0,L=0,b=0,R=0;A&&(I+=i.readUEG(),L+=i.readUEG(),b+=i.readUEG(),R+=i.readUEG());const P=i.readUEG(),w=i.readUEG(),$=i.readUEG(),B=i.readBoolean();for(let Ce=B?0:n;Ce<=n;Ce++)i.skipUEG(),i.skipUEG(),i.skipUEG();if(i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG(),i.readBoolean()&&i.readBoolean())for(let qt=0;qt<4;qt++)for(let Di=0;Di<(qt===3?2:6);Di++)if(!i.readBoolean())i.readUEG();else{const An=Math.min(64,1<<4+(qt<<1));qt>1&&i.readEG();for(let De=0;De<An;De++)i.readEG()}i.readBoolean(),i.readBoolean(),i.readBoolean()&&(i.readUByte(),i.skipUEG(),i.skipUEG(),i.readBoolean());const C=i.readUEG();let K=0;for(let Ce=0;Ce<C;Ce++){let qt=!1;if(Ce!==0&&(qt=i.readBoolean()),qt){Ce===C&&i.readUEG(),i.readBoolean(),i.readUEG();let Di=0;for(let pr=0;pr<=K;pr++){const An=i.readBoolean();let De=!1;An||(De=i.readBoolean()),(An||De)&&Di++}K=Di}else{const Di=i.readUEG(),pr=i.readUEG();K=Di+pr;for(let An=0;An<Di;An++)i.readUEG(),i.readBoolean();for(let An=0;An<pr;An++)i.readUEG(),i.readBoolean()}}if(i.readBoolean()){const Ce=i.readUEG();for(let qt=0;qt<Ce;qt++){for(let Di=0;Di<$+4;Di++)i.readBits(1);i.readBits(1)}}let H=0,Y=1,oe=1,pe=!0,fe=1,Ee=0;i.readBoolean(),i.readBoolean();let dt=!1;if(i.readBoolean()){if(i.readBoolean()){const Ji=i.readUByte(),Ff=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],Sl=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Ji>0&&Ji<16?(Y=Ff[Ji-1],oe=Sl[Ji-1]):Ji===255&&(Y=i.readBits(16),oe=i.readBits(16))}if(i.readBoolean()&&i.readBoolean(),i.readBoolean()&&(i.readBits(3),i.readBoolean(),i.readBoolean()&&(i.readUByte(),i.readUByte(),i.readUByte())),i.readBoolean()&&(i.readUEG(),i.readUEG()),i.readBoolean(),i.readBoolean(),i.readBoolean(),dt=i.readBoolean(),dt&&(i.skipUEG(),i.skipUEG(),i.skipUEG(),i.skipUEG()),i.readBoolean()&&(fe=i.readBits(32),Ee=i.readBits(32),i.readBoolean()&&i.readUEG(),i.readBoolean())){const Sl=i.readBoolean(),Uf=i.readBoolean();let ao=!1;(Sl||Uf)&&(ao=i.readBoolean(),ao&&(i.readUByte(),i.readBits(5),i.readBoolean(),i.readBits(5)),i.readBits(4),i.readBits(4),ao&&i.readBits(4),i.readBits(5),i.readBits(5),i.readBits(5));for(let Bf=0;Bf<=n;Bf++){pe=i.readBoolean();const xy=pe||i.readBoolean();let Vf=!1;xy?i.readEG():Vf=i.readBoolean();const Ti=Vf?1:i.readUEG()+1;if(Sl)for(let ht=0;ht<Ti;ht++)i.readUEG(),i.readUEG(),ao&&(i.readUEG(),i.readUEG()),i.skipBits(1);if(Uf)for(let ht=0;ht<Ti;ht++)i.readUEG(),i.readUEG(),ao&&(i.readUEG(),i.readUEG()),i.skipBits(1)}}i.readBoolean()&&(i.readBoolean(),i.readBoolean(),i.readBoolean(),H=i.readUEG())}let Ci=_,Zi=x;if(A){let Ce=1,qt=1;T===1?Ce=qt=2:T==2&&(Ce=2),Ci=_-Ce*L-Ce*I,Zi=x-qt*R-qt*b}const Wn=r?["A","B","C"][r]:"",Ws=o<<24|l<<16|u<<8|c;let Tl=0;for(let Ce=0;Ce<32;Ce++)Tl=(Tl|(Ws>>Ce&1)<<31-Ce)>>>0;let bl=Tl.toString(16);return a===1&&bl==="2"&&(bl="6"),{codecString:`hvc1.${Wn}${a}.${bl}.${s?"H":"L"}${g}.B0`,params:{general_tier_flag:s,general_profile_idc:a,general_profile_space:r,general_profile_compatibility_flags:[o,l,u,c],general_constraint_indicator_flags:[d,h,f,m,p,y],general_level_idc:g,bit_depth:P+8,bit_depth_luma_minus8:P,bit_depth_chroma_minus8:w,min_spatial_segmentation_idc:H,chroma_format_idc:T,frame_rate:{fixed:pe,fps:Ee/fe}},width:Ci,height:Zi,pixelRatio:[Y,oe]}}readPPS(e){const i=new fh(this.ebsp2rbsp(e));i.readUByte(),i.readUByte(),i.skipUEG(),i.skipUEG(),i.skipBits(2),i.skipBits(3),i.skipBits(2),i.skipUEG(),i.skipUEG(),i.skipEG(),i.skipBits(2),i.readBoolean()&&i.skipUEG(),i.skipEG(),i.skipEG(),i.skipBits(4);const r=i.readBoolean(),s=i.readBoolean();let a=1;return s&&r?a=0:s?a=3:r&&(a=2),{parallelismType:a}}matchSPS(e,i){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,i).substr(3)}}const ii=188;class da{constructor(e,i,n,r){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=i,this.typeSupported=n,this.logger=r,this.videoParser=null}static probe(e,i){const n=da.syncOffset(e);return n>0&&i.warn(`MPEG2-TS detected but first sync word found @ offset ${n}`),n!==-1}static syncOffset(e){const i=e.length;let n=Math.min(ii*5,i-ii)+1,r=0;for(;r<n;){let s=!1,a=-1,o=0;for(let l=r;l<i;l+=ii)if(e[l]===71&&(i-l===ii||e[l+ii]===71)){if(o++,a===-1&&(a=l,a!==0&&(n=Math.min(a+ii*99,e.length-ii)+1)),s||(s=J1(e,l)===0),s&&o>1&&(a===0&&o>2||l+ii>n))return a}else{if(o)return-1;break}r++}return-1}static createTrack(e,i){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:jN[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?i:void 0}}resetInitSegment(e,i,n,r){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=da.createTrack("video"),this._videoTrack.duration=r,this._audioTrack=da.createTrack("audio",r),this._id3Track=da.createTrack("id3"),this._txtTrack=da.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=i,this.videoCodec=n}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:i,_id3Track:n}=this;e&&(e.pesData=null),i&&(i.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,i,n=!1,r=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,u=this._txtTrack;let c=a.pid,d=a.pesData,h=o.pid,f=l.pid,m=o.pesData,p=l.pesData,y=null,g=this.pmtParsed,v=this._pmtId,E=e.length;if(this.remainderData&&(e=Vn(this.remainderData,e),E=e.length,this.remainderData=null),E<ii&&!r)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};const T=Math.max(0,da.syncOffset(e));E-=(E-T)%ii,E<e.byteLength&&!r&&(this.remainderData=new Uint8Array(e.buffer,E,e.buffer.byteLength-E));let _=0;for(let A=T;A<E;A+=ii)if(e[A]===71){const I=!!(e[A+1]&64),L=J1(e,A),b=(e[A+3]&48)>>4;let R;if(b>1){if(R=A+5+e[A+4],R===A+ii)continue}else R=A+4;switch(L){case c:I&&(d&&(s=Ol(d,this.logger))&&(this.readyVideoParser(a.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(a,u,s,!1)),d={data:[],size:0}),d&&(d.data.push(e.subarray(R,A+ii)),d.size+=A+ii-R);break;case h:if(I){if(m&&(s=Ol(m,this.logger)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(R,A+ii)),m.size+=A+ii-R);break;case f:I&&(p&&(s=Ol(p,this.logger))&&this.parseID3PES(l,s),p={data:[],size:0}),p&&(p.data.push(e.subarray(R,A+ii)),p.size+=A+ii-R);break;case 0:I&&(R+=e[R]+1),v=this._pmtId=qX(e,R);break;case v:{I&&(R+=e[R]+1);const P=zX(e,R,this.typeSupported,n,this.observer,this.logger);c=P.videoPid,c>0&&(a.pid=c,a.segmentCodec=P.segmentVideoCodec),h=P.audioPid,h>0&&(o.pid=h,o.segmentCodec=P.segmentAudioCodec),f=P.id3Pid,f>0&&(l.pid=f),y!==null&&!g&&(this.logger.warn(`MPEG-TS PMT found at ${A} after unknown PID '${y}'. Backtracking to sync byte @${T} to parse all TS packets.`),y=null,A=T-188),g=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=L;break}}else _++;_>0&&eb(this.observer,new Error(`Found ${_} TS packet/s that do not start with 0x47`),void 0,this.logger),a.pesData=d,o.pesData=m,l.pesData=p;const x={audioTrack:o,videoTrack:a,id3Track:l,textTrack:u};return r&&this.extractRemainingSamples(x),x}flush(){const{remainderData:e}=this;this.remainderData=null;let i;return e?i=this.demux(e,-1,!1,!0):i={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(i),this.sampleAes?this.decrypt(i,this.sampleAes):i}extractRemainingSamples(e){const{audioTrack:i,videoTrack:n,id3Track:r,textTrack:s}=e,a=n.pesData,o=i.pesData,l=r.pesData;let u;if(a&&(u=Ol(a,this.logger))?(this.readyVideoParser(n.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(n,s,u,!0),n.pesData=null)):n.pesData=a,o&&(u=Ol(o,this.logger))){switch(i.segmentCodec){case"aac":this.parseAACPES(i,u);break;case"mp3":this.parseMPEGPES(i,u);break;case"ac3":this.parseAC3PES(i,u);break}i.pesData=null}else o!=null&&o.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),i.pesData=o;l&&(u=Ol(l,this.logger))?(this.parseID3PES(r,u),r.pesData=null):r.pesData=l}demuxSampleAes(e,i,n){const r=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new WX(this.observer,this.config,i);return this.decrypt(r,s)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new jX:e==="hevc"&&(this.videoParser=new YX))}decrypt(e,i){return new Promise(n=>{const{audioTrack:r,videoTrack:s}=e;r.samples&&r.segmentCodec==="aac"?i.decryptAacSamples(r.samples,0,()=>{s.samples?i.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&i.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,i){let n=0;const r=this.aacOverFlow;let s=i.data;if(r){this.aacOverFlow=null;const d=r.missing,h=r.sample.unit.byteLength;if(d===-1)s=Vn(r.sample.unit,s);else{const f=h-d;r.sample.unit.set(s.subarray(0,d),f),e.samples.push(r.sample),n=r.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!P0(s,a);a++);if(a!==n){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",eb(this.observer,new Error(d),h,this.logger),!h)return}R3(e,this.observer,s,a,this.audioCodec);let l;if(i.pts!==void 0)l=i.pts;else if(r){const d=w3(e.samplerate);l=r.sample.pts+d}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let u=0,c;for(;a<o;)if(c=C3(e,s,a,l,u),a+=c.length,c.missing){this.aacOverFlow=c;break}else for(u++;a<o-1&&!P0(s,a);a++);}parseMPEGPES(e,i){const n=i.data,r=n.length;let s=0,a=0;const o=i.pts;if(o===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<r;)if(N3(n,a)){const l=O3(e,n,a,o,s);if(l)a+=l.length,s++;else break}else a++}parseAC3PES(e,i){{const n=i.data,r=i.pts;if(r===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,l;for(;o<s&&(l=U3(e,n,o,r,a++))>0;)o+=l}}parseID3PES(e,i){if(i.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=Qe({},i,{type:this._videoTrack?dn.emsg:dn.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function J1(t,e){return((t[e+1]&31)<<8)+t[e+2]}function qX(t,e){return(t[e+10]&31)<<8|t[e+11]}function zX(t,e,i,n,r,s){const a={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},o=(t[e+1]&15)<<8|t[e+2],l=e+3+o-4,u=(t[e+10]&15)<<8|t[e+11];for(e+=12+u;e<l;){const c=J1(t,e),d=(t[e+3]&15)<<8|t[e+4];switch(t[e]){case 207:if(!n){OE("ADTS AAC",s);break}case 15:a.audioPid===-1&&(a.audioPid=c);break;case 21:a.id3Pid===-1&&(a.id3Pid=c);break;case 219:if(!n){OE("H.264",s);break}case 27:a.videoPid===-1&&(a.videoPid=c);break;case 3:case 4:!i.mpeg&&!i.mp3?s.log("MPEG audio found, not supported in this browser"):a.audioPid===-1&&(a.audioPid=c,a.segmentAudioCodec="mp3");break;case 193:if(!n){OE("AC-3",s);break}case 129:i.ac3?a.audioPid===-1&&(a.audioPid=c,a.segmentAudioCodec="ac3"):s.log("AC-3 audio found, not supported in this browser");break;case 6:if(a.audioPid===-1&&d>0){let h=e+5,f=d;for(;f>2;){switch(t[h]){case 106:i.ac3!==!0?s.log("AC-3 audio found, not supported in this browser for now"):(a.audioPid=c,a.segmentAudioCodec="ac3");break}const p=t[h+1]+2;h+=p,f-=p}}break;case 194:case 135:return eb(r,new Error("Unsupported EC-3 in M2TS found"),void 0,s),a;case 36:a.videoPid===-1&&(a.videoPid=c,a.segmentVideoCodec="hevc",s.log("HEVC in M2TS found"));break}e+=d+5}return a}function eb(t,e,i,n){n.warn(`parsing error: ${e.message}`),t.emit(S.ERROR,S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_PARSING_ERROR,fatal:!1,levelRetry:i,error:e,reason:e.message})}function OE(t,e){e.log(`${t} with AES-128-CBC encryption found in unencrypted stream`)}function Ol(t,e){let i=0,n,r,s,a,o;const l=t.data;if(!t||t.size===0)return null;for(;l[0].length<19&&l.length>1;)l[0]=Vn(l[0],l[1]),l.splice(1,1);if(n=l[0],(n[0]<<16)+(n[1]<<8)+n[2]===1){if(r=(n[4]<<8)+n[5],r&&r>t.size-6)return null;const c=n[7];c&192&&(a=(n[9]&14)*536870912+(n[10]&255)*4194304+(n[11]&254)*16384+(n[12]&255)*128+(n[13]&254)/2,c&64?(o=(n[14]&14)*536870912+(n[15]&255)*4194304+(n[16]&254)*16384+(n[17]&255)*128+(n[18]&254)/2,a-o>60*9e4&&(e.warn(`${Math.round((a-o)/9e4)}s delta between PTS and DTS, align them`),a=o)):o=a),s=n[8];let d=s+9;if(t.size<=d)return null;t.size-=d;const h=new Uint8Array(t.size);for(let f=0,m=l.length;f<m;f++){n=l[f];let p=n.byteLength;if(d)if(d>p){d-=p;continue}else n=n.subarray(d),p-=d,d=0;h.set(n,i),i+=p}return r&&(r-=s+3),{data:h,pts:a,dts:o,len:r}}return null}class QX{static getSilentFrame(e,i){switch(e){case"mp4a.40.2":if(i===1)return new Uint8Array([0,200,0,128,35,128]);if(i===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(i===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(i===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(i===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(i===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(i===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(i===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Ys=Math.pow(2,32)-1;class O{static init(){O.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in O.types)O.types.hasOwnProperty(e)&&(O.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const i=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);O.HDLR_TYPES={video:i,audio:n};const r=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);O.STTS=O.STSC=O.STCO=s,O.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),O.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),O.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),O.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);O.FTYP=O.box(O.types.ftyp,a,l,a,o),O.DINF=O.box(O.types.dinf,O.box(O.types.dref,r))}static box(e,...i){let n=8,r=i.length;const s=r;for(;r--;)n+=i[r].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),r=0,n=8;r<s;r++)a.set(i[r],n),n+=i[r].byteLength;return a}static hdlr(e){return O.box(O.types.hdlr,O.HDLR_TYPES[e])}static mdat(e){return O.box(O.types.mdat,e)}static mdhd(e,i){i*=e;const n=Math.floor(i/(Ys+1)),r=Math.floor(i%(Ys+1));return O.box(O.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,85,196,0,0]))}static mdia(e){return O.box(O.types.mdia,O.mdhd(e.timescale||0,e.duration||0),O.hdlr(e.type),O.minf(e))}static mfhd(e){return O.box(O.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?O.box(O.types.minf,O.box(O.types.smhd,O.SMHD),O.DINF,O.stbl(e)):O.box(O.types.minf,O.box(O.types.vmhd,O.VMHD),O.DINF,O.stbl(e))}static moof(e,i,n){return O.box(O.types.moof,O.mfhd(e),O.traf(n,i))}static moov(e){let i=e.length;const n=[];for(;i--;)n[i]=O.trak(e[i]);return O.box.apply(null,[O.types.moov,O.mvhd(e[0].timescale||0,e[0].duration||0)].concat(n).concat(O.mvex(e)))}static mvex(e){let i=e.length;const n=[];for(;i--;)n[i]=O.trex(e[i]);return O.box.apply(null,[O.types.mvex,...n])}static mvhd(e,i){i*=e;const n=Math.floor(i/(Ys+1)),r=Math.floor(i%(Ys+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,r>>24,r>>16&255,r>>8&255,r&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return O.box(O.types.mvhd,s)}static sdtp(e){const i=e.samples||[],n=new Uint8Array(4+i.length);let r,s;for(r=0;r<i.length;r++)s=i[r].flags,n[r+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return O.box(O.types.sdtp,n)}static stbl(e){return O.box(O.types.stbl,O.stsd(e),O.box(O.types.stts,O.STTS),O.box(O.types.stsc,O.STSC),O.box(O.types.stsz,O.STSZ),O.box(O.types.stco,O.STCO))}static avc1(e){let i=[],n=[],r,s,a;for(r=0;r<e.sps.length;r++)s=e.sps[r],a=s.byteLength,i.push(a>>>8&255),i.push(a&255),i=i.concat(Array.prototype.slice.call(s));for(r=0;r<e.pps.length;r++)s=e.pps[r],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=O.box(O.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|e.sps.length].concat(i).concat([e.pps.length]).concat(n))),l=e.width,u=e.height,c=e.pixelRatio[0],d=e.pixelRatio[1];return O.box(O.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,u>>8&255,u&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,c&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const i=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...i,6,1,2])}static audioStsd(e){const i=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,i>>8&255,i&255,0,0])}static mp4a(e){return O.box(O.types.mp4a,O.audioStsd(e),O.box(O.types.esds,O.esds(e)))}static mp3(e){return O.box(O.types[".mp3"],O.audioStsd(e))}static ac3(e){return O.box(O.types["ac-3"],O.audioStsd(e),O.box(O.types.dac3,e.config))}static stsd(e){const{segmentCodec:i}=e;if(e.type==="audio"){if(i==="aac")return O.box(O.types.stsd,O.STSD,O.mp4a(e));if(i==="ac3"&&e.config)return O.box(O.types.stsd,O.STSD,O.ac3(e));if(i==="mp3"&&e.codec==="mp3")return O.box(O.types.stsd,O.STSD,O.mp3(e))}else if(e.pps&&e.sps){if(i==="avc")return O.box(O.types.stsd,O.STSD,O.avc1(e));if(i==="hevc"&&e.vps)return O.box(O.types.stsd,O.STSD,O.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${i}/${e.codec})`)}static tkhd(e){const i=e.id,n=(e.duration||0)*(e.timescale||0),r=e.width||0,s=e.height||0,a=Math.floor(n/(Ys+1)),o=Math.floor(n%(Ys+1));return O.box(O.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,i>>24&255,i>>16&255,i>>8&255,i&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,r>>8&255,r&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,i){const n=O.sdtp(e),r=e.id,s=Math.floor(i/(Ys+1)),a=Math.floor(i%(Ys+1));return O.box(O.types.traf,O.box(O.types.tfhd,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,r&255])),O.box(O.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),O.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,O.box(O.types.trak,O.tkhd(e),O.mdia(e))}static trex(e){const i=e.id;return O.box(O.types.trex,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,i){const n=e.samples||[],r=n.length,s=12+16*r,a=new Uint8Array(s);let o,l,u,c,d,h;for(i+=8+s,a.set([e.type==="video"?1:0,0,15,1,r>>>24&255,r>>>16&255,r>>>8&255,r&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255],0),o=0;o<r;o++)l=n[o],u=l.duration,c=l.size,d=l.flags,h=l.cts,a.set([u>>>24&255,u>>>16&255,u>>>8&255,u&255,c>>>24&255,c>>>16&255,c>>>8&255,c&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return O.box(O.types.trun,a)}static initSegment(e){O.types||O.init();const i=O.moov(e);return Vn(O.FTYP,i)}static hvc1(e){const i=e.params,n=[e.vps,e.sps,e.pps],r=4,s=new Uint8Array([1,i.general_profile_space<<6|(i.general_tier_flag?32:0)|i.general_profile_idc,i.general_profile_compatibility_flags[0],i.general_profile_compatibility_flags[1],i.general_profile_compatibility_flags[2],i.general_profile_compatibility_flags[3],i.general_constraint_indicator_flags[0],i.general_constraint_indicator_flags[1],i.general_constraint_indicator_flags[2],i.general_constraint_indicator_flags[3],i.general_constraint_indicator_flags[4],i.general_constraint_indicator_flags[5],i.general_level_idc,240|i.min_spatial_segmentation_idc>>8,255&i.min_spatial_segmentation_idc,252|i.parallelismType,252|i.chroma_format_idc,248|i.bit_depth_luma_minus8,248|i.bit_depth_chroma_minus8,0,parseInt(i.frame_rate.fps),r-1|i.temporal_id_nested<<2|i.num_temporal_layers<<3|(i.frame_rate.fixed?64:0),n.length]);let a=s.length;for(let m=0;m<n.length;m+=1){a+=3;for(let p=0;p<n[m].length;p+=1)a+=2+n[m][p].length}const o=new Uint8Array(a);o.set(s,0),a=s.length;const l=n.length-1;for(let m=0;m<n.length;m+=1){o.set(new Uint8Array([32+m|(m===l?128:0),0,n[m].length]),a),a+=3;for(let p=0;p<n[m].length;p+=1)o.set(new Uint8Array([n[m][p].length>>8,n[m][p].length&255]),a),a+=2,o.set(n[m][p],a),a+=n[m][p].length}const u=O.box(O.types.hvcC,o),c=e.width,d=e.height,h=e.pixelRatio[0],f=e.pixelRatio[1];return O.box(O.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,c>>8&255,c&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),u,O.box(O.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),O.box(O.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,f>>24,f>>16&255,f>>8&255,f&255])))}}O.types=void 0;O.HDLR_TYPES=void 0;O.STTS=void 0;O.STSC=void 0;O.STCO=void 0;O.STSZ=void 0;O.VMHD=void 0;O.SMHD=void 0;O.STSD=void 0;O.FTYP=void 0;O.DINF=void 0;const V3=9e4;function KA(t,e,i=1,n=!1){const r=t*e*i;return n?Math.round(r):r}function XX(t,e,i=1,n=!1){return KA(t,e,1/i,n)}function od(t,e=!1){return KA(t,1e3,1/V3,e)}function ZX(t,e=1){return KA(t,V3,1/e)}function kw(t){const{baseTime:e,timescale:i,trackId:n}=t;return`${e/i} (${e}/${i}) trackId: ${n}`}const JX=10*1e3,eZ=1024,tZ=1152,iZ=1536;let Ml=null,ME=null;function Iw(t,e,i,n){return{duration:e,size:i,cts:n,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:t?2:1,isNonSync:t?0:1}}}class Tp extends Kn{constructor(e,i,n,r){if(super("mp4-remuxer",r),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=i,this.typeSupported=n,this.ISGenerated=!1,Ml===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ml=a?parseInt(a[1]):0}if(ME===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);ME=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const i=this._initPTS;(!i||!e||e.trackId!==i.trackId||e.baseTime!==i.baseTime||e.timescale!==i.timescale)&&this.log(`Reset initPTS: ${i&&kw(i)} > ${e&&kw(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let i=!1;const n=e[0].pts,r=e.reduce((s,a)=>{let o=a.pts,l=o-s;return l<-4294967296&&(i=!0,o=ln(o,n),l=o-s),l>0?s:o},n);return i&&this.debug("PTS rollover detected"),r}remux(e,i,n,r,s,a,o,l){let u,c,d,h,f,m,p=s,y=s;const g=e.pid>-1,v=i.pid>-1,E=i.samples.length,T=e.samples.length>0,_=o&&E>0||E>1;if((!g||T)&&(!v||_)||this.ISGenerated||o){if(this.ISGenerated){var A,I,L,b;const $=this.videoTrackConfig;($&&(i.width!==$.width||i.height!==$.height||((A=i.pixelRatio)==null?void 0:A[0])!==((I=$.pixelRatio)==null?void 0:I[0])||((L=i.pixelRatio)==null?void 0:L[1])!==((b=$.pixelRatio)==null?void 0:b[1]))||!$&&_||this.nextAudioTs===null&&T)&&this.resetInitSegment()}this.ISGenerated||(d=this.generateIS(e,i,s,a));const R=this.isVideoContiguous;let P=-1,w;if(_&&(P=nZ(i.samples),!R&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,P>0){this.warn(`Dropped ${P} out of ${E} video samples due to a missing keyframe`);const $=this.getVideoStartPts(i.samples);i.samples=i.samples.slice(P),i.dropped+=P,y+=(i.samples[0].pts-$)/i.inputTimeScale,w=y}else P===-1&&(this.warn(`No keyframe found out of ${E} video samples`),m=!1);if(this.ISGenerated){if(T&&_){const $=this.getVideoStartPts(i.samples),U=(ln(e.samples[0].pts,$)-$)/i.inputTimeScale;p+=Math.max(0,U),y+=Math.max(0,-U)}if(T){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),d=this.generateIS(e,i,s,a)),c=this.remuxAudio(e,p,this.isAudioContiguous,a,v||_||l===ne.AUDIO?y:void 0),_){const $=c?c.endPTS-c.startPTS:0;i.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),d=this.generateIS(e,i,s,a)),u=this.remuxVideo(i,y,R,$)}}else _&&(u=this.remuxVideo(i,y,R,0));u&&(u.firstKeyFrame=P,u.independent=P!==-1,u.firstKeyFramePTS=w)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(f=H3(n,s,this._initPTS,this._initDTS)),r.samples.length&&(h=K3(r,s,this._initPTS))),{audio:c,video:u,initSegment:d,independent:m,text:h,id3:f}}computeInitPts(e,i,n,r){const s=Math.round(n*i);let a=ln(e,s);if(a<s+i)for(this.log(`Adjusting PTS for rollover in timeline near ${(s-a)/i} ${r}`);a<s+i;)a+=8589934592;return a-s}generateIS(e,i,n,r){const s=e.samples,a=i.samples,o=this.typeSupported,l={},u=this._initPTS;let c=!u||r,d="audio/mp4",h,f,m,p=-1;if(c&&(h=f=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):O.initSegment([e]),metadata:{channelCount:e.channelCount}},c&&(p=e.id,m=e.inputTimeScale,!u||m!==u.timescale?h=f=this.computeInitPts(s[0].pts,m,n,"audio"):c=!1)}if(i.sps&&i.pps&&a.length){if(i.timescale=i.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:i.codec,initSegment:O.initSegment([i]),metadata:{width:i.width,height:i.height}},c)if(p=i.id,m=i.inputTimeScale,!u||m!==u.timescale){const y=this.getVideoStartPts(a),g=ln(a[0].dts,y),v=this.computeInitPts(g,m,n,"video"),E=this.computeInitPts(y,m,n,"video");f=Math.min(f,v),h=Math.min(h,E)}else c=!1;this.videoTrackConfig={width:i.width,height:i.height,pixelRatio:i.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,c?(u&&this.warn(`Timestamps at playlist time: ${r?"":"~"}${n} ${h/m} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${n} offset: ${h/m} (${h}/${m}) trackId: ${p}`),this._initPTS={baseTime:h,timescale:m,trackId:p},this._initDTS={baseTime:f,timescale:m,trackId:p}):h=m=void 0,{tracks:l,initPTS:h,timescale:m,trackId:p}}remuxVideo(e,i,n,r){const s=e.inputTimeScale,a=e.samples,o=[],l=a.length,u=this._initPTS,c=u.baseTime*s/u.timescale;let d=this.nextVideoTs,h=8,f=this.videoSampleDuration,m,p,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=!1;if(!n||d===null){const H=c+i*s,Y=a[0].pts-ln(a[0].dts,a[0].pts);Ml&&d!==null&&Math.abs(H-Y-(d+c))<15e3?n=!0:d=H-Y-c}const E=d+c;for(let H=0;H<l;H++){const Y=a[H];Y.pts=ln(Y.pts,E),Y.dts=ln(Y.dts,E),Y.dts<a[H>0?H-1:H].dts&&(v=!0)}v&&a.sort(function(H,Y){const oe=H.dts-Y.dts,pe=H.pts-Y.pts;return oe||pe}),m=a[0].dts,p=a[a.length-1].dts;const T=p-m,_=T?Math.round(T/(l-1)):f||e.inputTimeScale/30;if(n){const H=m-E,Y=H>_,oe=H<-1;if((Y||oe)&&(Y?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${od(H,!0)} ms (${H}dts) hole between fragments detected at ${i.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${od(-H,!0)} ms (${H}dts) overlapping between fragments detected at ${i.toFixed(3)}`),!oe||E>=a[0].pts||Ml)){m=E;const pe=a[0].pts-H;if(Y)a[0].dts=m,a[0].pts=pe;else{let fe=!0;for(let Ee=0;Ee<a.length&&!(a[Ee].dts>pe&&fe);Ee++){const dt=a[Ee].pts;if(a[Ee].dts-=H,a[Ee].pts-=H,Ee<a.length-1){const $t=a[Ee+1].pts,Ci=a[Ee].pts,Zi=$t<=Ci,Wn=$t<=dt;fe=Zi==Wn}}}this.log(`Video: Initial PTS/DTS adjusted: ${od(pe,!0)}/${od(m,!0)}, delta: ${od(H,!0)} ms`)}}m=Math.max(0,m);let x=0,A=0,I=m;for(let H=0;H<l;H++){const Y=a[H],oe=Y.units,pe=oe.length;let fe=0;for(let Ee=0;Ee<pe;Ee++)fe+=oe[Ee].data.length;A+=fe,x+=pe,Y.length=fe,Y.dts<I?(Y.dts=I,I+=_/4|0||1):I=Y.dts,y=Math.min(Y.pts,y),g=Math.max(Y.pts,g)}p=a[l-1].dts;const L=A+4*x+8;let b;try{b=new Uint8Array(L)}catch(H){this.observer.emit(S.ERROR,S.ERROR,{type:le.MUX_ERROR,details:M.REMUX_ALLOC_ERROR,fatal:!1,error:H,bytes:L,reason:`fail allocating video mdat ${L}`});return}const R=new DataView(b.buffer);R.setUint32(0,L),b.set(O.types.mdat,4);let P=!1,w=Number.POSITIVE_INFINITY,$=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY,U=Number.NEGATIVE_INFINITY;for(let H=0;H<l;H++){const Y=a[H],oe=Y.units;let pe=0;for(let dt=0,$t=oe.length;dt<$t;dt++){const Ci=oe[dt],Zi=Ci.data,Wn=Ci.data.byteLength;R.setUint32(h,Wn),h+=4,b.set(Zi,h),h+=Wn,pe+=4+Wn}let fe;if(H<l-1)f=a[H+1].dts-Y.dts,fe=a[H+1].pts-Y.pts;else{const dt=this.config,$t=H>0?Y.dts-a[H-1].dts:_;if(fe=H>0?Y.pts-a[H-1].pts:_,dt.stretchShortVideoTrack&&this.nextAudioTs!==null){const Ci=Math.floor(dt.maxBufferHole*s),Zi=(r?y+r*s:this.nextAudioTs+c)-Y.pts;Zi>Ci?(f=Zi-$t,f<0?f=$t:P=!0,this.log(`It is approximately ${Zi/90} ms to the next segment; using duration ${f/90} ms for the last video frame.`)):f=$t}else f=$t}const Ee=Math.round(Y.pts-Y.dts);w=Math.min(w,f),B=Math.max(B,f),$=Math.min($,fe),U=Math.max(U,fe),o.push(Iw(Y.key,f,pe,Ee))}if(o.length){if(Ml){if(Ml<70){const H=o[0].flags;H.dependsOn=2,H.isNonSync=0}}else if(ME&&U-$<B-w&&_/B<.025&&o[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let H=m;for(let Y=0,oe=o.length;Y<oe;Y++){const pe=H+o[Y].duration,fe=H+o[Y].cts;if(Y<oe-1){const Ee=pe+o[Y+1].cts;o[Y].duration=Ee-fe}else o[Y].duration=Y?o[Y-1].duration:_;o[Y].cts=0,H=pe}}}f=P||!f?_:f;const V=p+f;this.nextVideoTs=d=V-c,this.videoSampleDuration=f,this.isVideoContiguous=!0;const z={data1:O.moof(e.sequenceNumber++,m,Qe(e,{samples:o})),data2:b,startPTS:(y-c)/s,endPTS:(g+f-c)/s,startDTS:(m-c)/s,endDTS:d/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,z}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return tZ;case"ac3":return iZ;default:return eZ}}remuxAudio(e,i,n,r,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,u=this.getSamplesPerFrame(e),c=u*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],m=s!==void 0;let p=e.samples,y=h?0:8,g=this.nextAudioTs||-1;const v=d.baseTime*a/d.timescale,E=v+i*a;if(this.isAudioContiguous=n=n||p.length&&g>0&&(r&&Math.abs(E-(g+v))<9e3||Math.abs(ln(p[0].pts,E)-(g+v))<20*c),p.forEach(function(U){U.pts=ln(U.pts,E)}),!n||g<0){const U=p.length;if(p=p.filter(V=>V.pts>=0),U!==p.length&&this.warn(`Removed ${p.length-U} of ${U} samples (initPTS ${v} / ${a})`),!p.length)return;s===0?g=0:r&&!m?g=Math.max(0,E-v):g=p[0].pts-v}if(e.segmentCodec==="aac"){const U=this.config.maxAudioFramesDrift;for(let V=0,C=g+v;V<p.length;V++){const K=p[V],z=K.pts,H=z-C,Y=Math.abs(1e3*H/a);if(H<=-U*c&&m)V===0&&(this.warn(`Audio frame @ ${(z/a).toFixed(3)}s overlaps marker by ${Math.round(1e3*H/a)} ms.`),this.nextAudioTs=g=z-v,C=z);else if(H>=U*c&&Y<JX&&m){let oe=Math.round(H/c);for(C=z-oe*c;C<0&&oe&&c;)oe--,C+=c;V===0&&(this.nextAudioTs=g=C-v),this.warn(`Injecting ${oe} audio frames @ ${((C-v)/a).toFixed(3)}s due to ${Math.round(1e3*H/a)} ms gap.`);for(let pe=0;pe<oe;pe++){let fe=QX.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);fe||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),fe=K.unit.subarray()),p.splice(V,0,{unit:fe,pts:C}),C+=c,V++}}K.pts=C,C+=c}}let T=null,_=null,x,A=0,I=p.length;for(;I--;)A+=p[I].unit.byteLength;for(let U=0,V=p.length;U<V;U++){const C=p[U],K=C.unit;let z=C.pts;if(_!==null){const Y=f[U-1];Y.duration=Math.round((z-_)/l)}else if(n&&e.segmentCodec==="aac"&&(z=g+v),T=z,A>0){A+=y;try{x=new Uint8Array(A)}catch(Y){this.observer.emit(S.ERROR,S.ERROR,{type:le.MUX_ERROR,details:M.REMUX_ALLOC_ERROR,fatal:!1,error:Y,bytes:A,reason:`fail allocating audio mdat ${A}`});return}h||(new DataView(x.buffer).setUint32(0,A),x.set(O.types.mdat,4))}else return;x.set(K,y);const H=K.byteLength;y+=H,f.push(Iw(!0,u,H,0)),_=z}const L=f.length;if(!L)return;const b=f[f.length-1];g=_-v,this.nextAudioTs=g+l*b.duration;const R=h?new Uint8Array(0):O.moof(e.sequenceNumber++,T/l,Qe({},e,{samples:f}));e.samples=[];const P=(T-v)/a,w=this.nextAudioTs/a,B={data1:R,data2:x,startPTS:P,endPTS:w,startDTS:P,endDTS:w,type:"audio",hasAudio:!0,hasVideo:!1,nb:L};return this.isAudioContiguous=!0,B}}function ln(t,e){let i;if(e===null)return t;for(e<t?i=-8589934592:i=8589934592;Math.abs(t-e)>4294967296;)t+=i;return t}function nZ(t){for(let e=0;e<t.length;e++)if(t[e].key)return e;return-1}function H3(t,e,i,n){const r=t.samples.length;if(!r)return;const s=t.inputTimeScale;for(let o=0;o<r;o++){const l=t.samples[o];l.pts=ln(l.pts-i.baseTime*s/i.timescale,e*s)/s,l.dts=ln(l.dts-n.baseTime*s/n.timescale,e*s)/s}const a=t.samples;return t.samples=[],{samples:a}}function K3(t,e,i){const n=t.samples.length;if(!n)return;const r=t.inputTimeScale;for(let a=0;a<n;a++){const o=t.samples[a];o.pts=ln(o.pts-i.baseTime*r/i.timescale,e*r)/r}t.samples.sort((a,o)=>a.pts-o.pts);const s=t.samples;return t.samples=[],{samples:s}}class rZ extends Kn{constructor(e,i,n,r){super("passthrough-remuxer",r),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const i=this.initPTS;i&&e&&i.baseTime===e.baseTime&&i.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,i,n,r){this.audioCodec=i,this.videoCodec=n,this.generateInitSegment(e,r),this.emitInitSegment=!0}generateInitSegment(e,i){let{audioCodec:n,videoCodec:r}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:s,video:a}=this.initData=zN(e);if(i)Wz(e,i);else{const l=s||a;l!=null&&l.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${l.codec}")!`)}s&&(n=Lw(s,et.AUDIO,this)),a&&(r=Lw(a,et.VIDEO,this));const o={};s&&a?o.audiovideo={container:"video/mp4",codec:n+","+r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:s?o.audio={container:"audio/mp4",codec:n,encrypted:s.encrypted,initSegment:e,id:"audio"}:a?o.video={container:"video/mp4",codec:r,supplemental:a.supplemental,encrypted:a.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=o}remux(e,i,n,r,s,a){var o,l;let{initPTS:u,lastEndTime:c}=this;const d={audio:void 0,video:void 0,text:r,id3:n,initSegment:void 0};te(c)||(c=this.lastEndTime=s||0);const h=i.samples;if(!h.length)return d;const f={initPTS:void 0,timescale:void 0,trackId:void 0};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return this.warn("Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const p=Yz(h,m,this),y=m.audio?p[m.audio.id]:null,g=m.video?p[m.video.id]:null,v=Sm(g,1/0),E=Sm(y,1/0),T=Sm(g,0,!0),_=Sm(y,0,!0);let x=s,A=0;const I=y&&(!g||!u&&E<v||u&&u.trackId===m.audio.id),L=I?y:g;if(L){const C=L.timescale,K=L.start-s*C,z=I?m.audio.id:m.video.id;x=L.start/C,A=I?_-E:T-v,(a||!u)&&(sZ(u,x,s,A)||C!==u.timescale)&&(u&&this.warn(`Timestamps at playlist time: ${a?"":"~"}${s} ${K/C} != initPTS: ${u.baseTime/u.timescale} (${u.baseTime}/${u.timescale}) trackId: ${u.trackId}`),this.log(`Found initPTS at playlist time: ${s} offset: ${x-s} (${K}/${C}) trackId: ${z}`),u=null,f.initPTS=K,f.timescale=C,f.trackId=z)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${s}`);u?(f.initPTS=u.baseTime,f.timescale=u.timescale,f.trackId=u.trackId):((!f.timescale||f.trackId===void 0||f.initPTS===void 0)&&(this.warn("Could not set initPTS"),f.initPTS=x,f.timescale=1,f.trackId=-1),this.initPTS=u={baseTime:f.initPTS,timescale:f.timescale,trackId:f.trackId});const b=x-u.baseTime/u.timescale,R=b+A;A>0?this.lastEndTime=R:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const P=!!m.audio,w=!!m.video;let $="";P&&($+="audio"),w&&($+="video");const B=(m.audio?m.audio.encrypted:!1)||(m.video?m.video.encrypted:!1),U={data1:h,startPTS:b,startDTS:b,endPTS:R,endDTS:R,type:$,hasAudio:P,hasVideo:w,nb:1,dropped:0,encrypted:B};d.audio=P&&!w?U:void 0,d.video=w?U:void 0;const V=g==null?void 0:g.sampleCount;if(V){const C=g.keyFrameIndex,K=C!==-1;U.nb=V,U.dropped=C===0||this.isVideoContiguous?0:K?C:V,U.independent=K,U.firstKeyFrame=C,K&&g.keyFrameStart&&(U.firstKeyFramePTS=(g.keyFrameStart-u.baseTime)/u.timescale),this.isVideoContiguous||(d.independent=K),this.isVideoContiguous||(this.isVideoContiguous=K),U.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${C}/${V} dropped: ${U.dropped} start: ${U.firstKeyFramePTS||"NA"}`)}return d.initSegment=f,d.id3=H3(n,s,u,u),r.samples.length&&(d.text=K3(r,s,u)),d}}function Sm(t,e,i=!1){return(t==null?void 0:t.start)!==void 0?(t.start+(i?t.duration:0))/t.timescale:e}function sZ(t,e,i,n){if(t===null)return!0;const r=Math.max(n,1),s=e-t.baseTime/t.timescale;return Math.abs(s-i)>r}function Lw(t,e,i){const n=t.codec;return n&&n.length>4?n:e===et.AUDIO?n==="ec-3"||n==="ac-3"||n==="alac"?n:n==="fLaC"||n==="Opus"?x0(n,!1):(i.warn(`Unhandled audio codec "${n}" in mp4 MAP`),n||"mp4a"):(i.warn(`Unhandled video codec "${n}" in mp4 MAP`),n||"avc1")}let vs;try{vs=self.performance.now.bind(self.performance)}catch{vs=Date.now}const bp=[{demux:GX,remux:rZ},{demux:da,remux:Tp},{demux:BX,remux:Tp},{demux:HX,remux:Tp}];bp.splice(2,0,{demux:VX,remux:Tp});class Rw{constructor(e,i,n,r,s,a){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=i,this.config=n,this.id=s,this.logger=a}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,i,n,r){const s=n.transmuxing;s.executeStart=vs();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;r&&(this.currentTransmuxState=r);const{contiguous:u,discontinuity:c,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:m}=r||o,{audioCodec:p,videoCodec:y,defaultInitPts:g,duration:v,initSegmentData:E}=l,T=aZ(a,i);if(T&&qu(T.method)){const I=this.getDecrypter(),L=OA(T.method);if(I.isSync()){let b=I.softwareDecrypt(a,T.key.buffer,T.iv.buffer,L);if(n.part>-1){const P=I.flush();b=P&&P.buffer}if(!b)return s.executeEnd=vs(),NE(n);a=new Uint8Array(b)}else return this.asyncResult=!0,this.decryptionPromise=I.webCryptoDecrypt(a,T.key.buffer,T.iv.buffer,L).then(b=>{const R=this.push(b,null,n);return this.decryptionPromise=null,R}),this.decryptionPromise}const _=this.needsProbing(c,d);if(_){const I=this.configureTransmuxer(a);if(I)return this.logger.warn(`[transmuxer] ${I.message}`),this.observer.emit(S.ERROR,S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_PARSING_ERROR,fatal:!1,error:I,reason:I.message}),s.executeEnd=vs(),NE(n)}(c||d||m||_)&&this.resetInitSegment(E,p,y,v,i),(c||m||_)&&this.resetInitialTimestamp(g),u||this.resetContiguity();const x=this.transmux(a,T,f,h,n);this.asyncResult=sf(x);const A=this.currentTransmuxState;return A.contiguous=!0,A.discontinuity=!1,A.trackSwitch=!1,s.executeEnd=vs(),x}flush(e){const i=e.transmuxing;i.executeStart=vs();const{decrypter:n,currentTransmuxState:r,decryptionPromise:s}=this;if(s)return this.asyncResult=!0,s.then(()=>this.flush(e));const a=[],{timeOffset:o}=r;if(n){const d=n.flush();d&&a.push(this.push(d.buffer,null,e))}const{demuxer:l,remuxer:u}=this;if(!l||!u){i.executeEnd=vs();const d=[NE(e)];return this.asyncResult?Promise.resolve(d):d}const c=l.flush(o);return sf(c)?(this.asyncResult=!0,c.then(d=>(this.flushRemux(a,d,e),a))):(this.flushRemux(a,c,e),this.asyncResult?Promise.resolve(a):a)}flushRemux(e,i,n){const{audioTrack:r,videoTrack:s,id3Track:a,textTrack:o}=i,{accurateTimeOffset:l,timeOffset:u}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${n.sn}${n.part>-1?" part: "+n.part:""} of ${this.id===ne.MAIN?"level":"track"} ${n.level}`);const c=this.remuxer.remux(r,s,a,o,u,l,!0,this.id);e.push({remuxResult:c,chunkMeta:n}),n.transmuxing.executeEnd=vs()}resetInitialTimestamp(e){const{demuxer:i,remuxer:n}=this;!i||!n||(i.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:i}=this;!e||!i||(e.resetContiguity(),i.resetNextTimestamp())}resetInitSegment(e,i,n,r,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,i,n,r),o.resetInitSegment(e,i,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,i,n,r,s){let a;return i&&i.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,i,n,r,s):a=this.transmuxUnencrypted(e,n,r,s),a}transmuxUnencrypted(e,i,n,r){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,i,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,l,i,n,!1,this.id),chunkMeta:r}}transmuxSampleAes(e,i,n,r,s){return this.demuxer.demuxSampleAes(e,i,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,r,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:i,observer:n,typeSupported:r}=this;let s;for(let d=0,h=bp.length;d<h;d++){var a;if((a=bp[d].demux)!=null&&a.probe(e,this.logger)){s=bp[d];break}}if(!s)return new Error("Failed to find demuxer by probing fragment data");const o=this.demuxer,l=this.remuxer,u=s.remux,c=s.demux;(!l||!(l instanceof u))&&(this.remuxer=new u(n,i,r,this.logger)),(!o||!(o instanceof c))&&(this.demuxer=new c(n,i,r,this.logger),this.probe=c.probe)}needsProbing(e,i){return!this.demuxer||!this.remuxer||e||i}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new DA(this.config)),e}}function aZ(t,e){let i=null;return t.byteLength>0&&(e==null?void 0:e.key)!=null&&e.iv!==null&&e.method!=null&&(i=e),i}const NE=t=>({remuxResult:{},chunkMeta:t});function sf(t){return"then"in t&&t.then instanceof Function}class oZ{constructor(e,i,n,r,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=i,this.initSegmentData=n,this.duration=r,this.defaultInitPts=s||null}}class lZ{constructor(e,i,n,r,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=i,this.accurateTimeOffset=n,this.trackSwitch=r,this.timeOffset=s,this.initSegmentChange=a}}let ww=0;class G3{constructor(e,i,n,r){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=ww++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=l=>{const u=l.data,c=this.hls;if(!(!c||!(u!=null&&u.event)||u.instanceNo!==this.instanceNo))switch(u.event){case"init":{var d;const h=(d=this.workerContext)==null?void 0:d.objectURL;h&&self.URL.revokeObjectURL(h);break}case"transmuxComplete":{this.handleTransmuxComplete(u.data);break}case"flush":{this.onFlush(u.data);break}case"workerLog":{c.logger[u.data.logType]&&c.logger[u.data.logType](u.data.message);break}default:{u.data=u.data||{},u.data.frag=this.frag,u.data.part=this.part,u.data.id=this.id,c.trigger(u.event,u.data);break}}},this.onWorkerError=l=>{if(!this.hls)return;const u=new Error(`${l.message}  (${l.filename}:${l.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:u})};const s=e.config;this.hls=e,this.id=i,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=r;const a=(l,u)=>{u=u||{},u.frag=this.frag||void 0,l===S.ERROR&&(u=u,u.parent=this.id,u.part=this.part,this.error=u.error),this.hls.trigger(l,u)};this.observer=new $A,this.observer.on(S.FRAG_DECRYPTED,a),this.observer.on(S.ERROR,a);const o=WR(s.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const l=this.hls.logger;if(s.workerPath||hX()){try{s.workerPath?(l.log(`loading Web Worker ${s.workerPath} for "${i}"`),this.workerContext=mX(s.workerPath)):(l.log(`injecting Web Worker for "${i}"`),this.workerContext=fX());const{worker:c}=this.workerContext;c.addEventListener("message",this.onWorkerMessage),c.addEventListener("error",this.onWorkerError),c.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:o,id:i,config:tt(s)})}catch(c){l.warn(`Error setting up "${i}" Web Worker, fallback to inline`,c),this.terminateWorker(),this.error=null,this.transmuxer=new Rw(this.observer,o,s,"",i,e.logger)}return}}this.transmuxer=new Rw(this.observer,o,s,"",i,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=ww++;const i=this.hls.config,n=WR(i.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:n,id:this.id,config:tt(i)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),pX(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const i=this.transmuxer;i&&(i.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,i,n,r,s,a,o,l,u,c){var d,h;u.transmuxing.start=self.performance.now();const{instanceNo:f,transmuxer:m}=this,p=a?a.start:s.start,y=s.decryptdata,g=this.frag,v=!(g&&s.cc===g.cc),E=!(g&&u.level===g.level),T=g?u.sn-g.sn:-1,_=this.part?u.part-this.part.index:-1,x=T===0&&u.id>1&&u.id===(g==null?void 0:g.stats.chunkCount),A=!E&&(T===1||T===0&&(_===1||x&&_<=0)),I=self.performance.now();(E||T||s.stats.parsing.start===0)&&(s.stats.parsing.start=I),a&&(_||!A)&&(a.stats.parsing.start=I);const L=!(g&&((d=s.initSegment)==null?void 0:d.url)===((h=g.initSegment)==null?void 0:h.url)),b=new lZ(v,A,l,E,p,L);if(!A||v||L){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${s.type} sn: ${u.sn}${u.part>-1?" part: "+u.part:""} ${this.id===ne.MAIN?"level":"track"}: ${u.level} id: ${u.id}
        discontinuity: ${v}
        trackSwitch: ${E}
        contiguous: ${A}
        accurateTimeOffset: ${l}
        timeOffset: ${p}
        initSegmentChange: ${L}`);const R=new oZ(n,r,i,o,c);this.configureTransmuxer(R)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({instanceNo:f,cmd:"demux",data:e,decryptdata:y,chunkMeta:u,state:b},e instanceof ArrayBuffer?[e]:[]);else if(m){const R=m.push(e,y,u,b);sf(R)?R.then(P=>{this.handleTransmuxComplete(P)}).catch(P=>{this.transmuxerError(P,u,"transmuxer-interface push error")}):this.handleTransmuxComplete(R)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:i,transmuxer:n}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:i,cmd:"flush",chunkMeta:e});else if(n){const r=n.flush(e);sf(r)?r.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")}):this.handleFlushResult(r,e)}}transmuxerError(e,i,n){this.hls&&(this.error=e,this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_PARSING_ERROR,chunkMeta:i,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,i){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(i)}configureTransmuxer(e){const{instanceNo:i,transmuxer:n}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:i,cmd:"configure",config:e}):n&&n.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Cw=100;class uZ extends NA{constructor(e,i,n){super(e,i,n,"audio-stream-controller",ne.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:i,id:n,initPTS:r,timescale:s,trackId:a}){if(n===ne.MAIN){const o=i.cc,l=this.fragCurrent;if(this.initPTS[o]={baseTime:r,timescale:s,trackId:a},this.log(`InitPTS for cc: ${o} found from main: ${r/s} (${r}/${s}) trackId: ${a}`),this.mainAnchor=i,this.state===j.WAITING_INIT_PTS){const u=this.waitingData;(!u&&!this.loadingParts||u&&u.frag.cc!==o)&&this.syncWithAnchor(i,u==null?void 0:u.frag)}else!this.hls.hasEnoughToStart&&l&&l.cc!==o?(l.abortRequests(),this.syncWithAnchor(i,l)):this.state===j.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,i){var n;const r=((n=this.mainFragLoading)==null?void 0:n.frag)||null;if(i&&(r==null?void 0:r.cc)===i.cc)return;const s=(r||e).cc,a=this.getLevelDetails(),o=this.getLoadPosition(),l=a3(a,s,o);l&&(this.log(`Syncing with main frag at ${l.start} cc ${l.cc}`),this.startFragRequested=!1,this.nextLoadPosition=l.start,this.resetLoadingState(),this.state===j.IDLE&&this.doTickIdle())}startLoad(e,i){if(!this.levels){this.startPosition=e,this.state=j.STOPPED;return}const n=this.lastCurrentTime;this.stopLoad(),this.setInterval(Cw),n>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n,this.state=j.IDLE):this.state=j.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}doTick(){switch(this.state){case j.IDLE:this.doTickIdle();break;case j.WAITING_TRACK:{const{levels:e,trackId:i}=this,n=e==null?void 0:e[i],r=n==null?void 0:n.details;if(r&&!this.waitForLive(n)){if(this.waitForCdnTuneIn(r))break;this.state=j.WAITING_INIT_PTS}break}case j.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case j.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:i,part:n,cache:r,complete:s}=e,a=this.mainAnchor;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.state=j.FRAG_LOADING;const o=r.flush().buffer,l={frag:i,part:n,payload:o,networkDetails:null};this._handleFragmentLoadProgress(l),s&&super._handleFragmentLoadComplete(l)}else a&&a.cc!==e.frag.cc&&this.syncWithAnchor(a,e.frag)}else this.state=j.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:i,levels:n,media:r,trackId:s}=this,a=i.config;if(!this.buffering||!r&&!this.primaryPrefetch&&(this.startFragRequested||!a.startFragPrefetch)||!(n!=null&&n[s]))return;const o=n[s],l=o.details;if(!l||this.waitForLive(o)||this.waitForCdnTuneIn(l)){this.state=j.WAITING_TRACK,this.startFragRequested=!1;return}const u=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&u&&(this.bufferFlushed=!1,this.afterBufferFlushed(u,et.AUDIO,ne.AUDIO));const c=this.getFwdBufferInfo(u,ne.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,l)){i.trigger(S.BUFFER_EOS,{type:"audio"}),this.state=j.ENDED;return}const d=c.len,h=i.maxBufferLength,f=l.fragments,m=f[0].start,p=this.getLoadPosition(),y=this.flushing?p:c.end;if(this.switchingTrack&&r){const E=p;l.PTSKnown&&E<m&&(c.end>m||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),r.currentTime=m+.05)}if(d>=h&&!this.switchingTrack&&y<f[f.length-1].start)return;let g=this.getNextFragment(y,l);if(g&&this.isLoopLoading(g,y)&&(g=this.getNextFragmentLoopLoading(g,l,c,ne.MAIN,h)),!g){this.bufferFlushed=!0;return}let v=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&v&&Mt(g)&&!g.endList&&(!l.live||!this.loadingParts&&y<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(v)===Jt.OK&&(this.mainFragLoading=v=null),v&&Mt(v))){if(g.start>v.end){const T=this.fragmentTracker.getFragAtPos(y,ne.MAIN);T&&T.end>v.end&&(v=T,this.mainFragLoading={frag:T,targetBufferTime:null})}if(g.start>v.end)return}this.loadFragment(g,o,y)}onMediaDetaching(e,i){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,i)}onAudioTracksUpdated(e,{audioTracks:i}){this.resetTransmuxer(),this.levels=i.map(n=>new tf(n))}onAudioTrackSwitching(e,i){const n=!!i.url;this.trackId=i.id;const{fragCurrent:r}=this;r&&(r.abortRequests(),this.removeUnbufferedFrags(r.start)),this.resetLoadingState(),n?(this.switchingTrack=i,this.flushAudioIfNeeded(i),this.state!==j.STOPPED&&(this.setInterval(Cw),this.state=j.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=i,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,i){this.mainDetails=i.details;const n=this.cachedTrackLoadedData;n&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(S.AUDIO_TRACK_LOADED,n))}onAudioTrackLoaded(e,i){var n;const{levels:r}=this,{details:s,id:a,groupId:o,track:l}=i;if(!r){this.warn(`Audio tracks reset while loading track ${a} "${l.name}" of "${o}"`);return}const u=this.mainDetails;if(!u||s.endCC>u.endCC||u.expired){this.cachedTrackLoadedData=i,this.state!==j.STOPPED&&(this.state=j.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${a} "${l.name}" of "${o}" loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const c=r[a];let d=0;if(s.live||(n=c.details)!=null&&n.live){if(this.checkLiveUpdate(s),s.deltaUpdateFailed)return;if(c.details){var h;d=this.alignPlaylists(s,c.details,(h=this.levelLastLoaded)==null?void 0:h.details)}s.alignedSliding||(A3(s,u),s.alignedSliding||D0(s,u),d=s.fragmentStart)}c.details=s,this.levelLastLoaded=c,this.startFragRequested||this.setStartPosition(u,d),this.hls.trigger(S.AUDIO_TRACK_UPDATED,{details:s,id:a,groupId:i.groupId}),this.state===j.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=j.IDLE),this.tick()}_handleFragmentLoadProgress(e){var i;const n=e.frag,{part:r,payload:s}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const u=l[o];if(!u){this.warn("Audio track is undefined on fragment load progress");return}const c=u.details;if(!c){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||u.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new G3(this.hls,ne.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[n.cc],m=(i=n.initSegment)==null?void 0:i.data;if(f!==void 0){const y=r?r.index:-1,g=y!==-1,v=new PA(n.level,n.sn,n.stats.chunkCount,s.byteLength,y,g);h.push(s,m,d,"",n,r,c.totalduration,!1,v,f)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${c.startSN} ,${c.endSN}],track ${o}`);const{cache:p}=this.waitingData=this.waitingData||{frag:n,part:r,cache:new x3,complete:!1};p.push(new Uint8Array(s)),this.state!==j.STOPPED&&(this.state=j.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,i){this.bufferFlushed=this.flushing=!1;const n=i.tracks.audio;n&&(this.mediaBuffer=n.buffer||null)}onFragLoading(e,i){!this.audioOnly&&i.frag.type===ne.MAIN&&Mt(i.frag)&&(this.mainFragLoading=i,this.state===j.IDLE&&this.tick())}onFragBuffered(e,i){const{frag:n,part:r}=i;if(n.type!==ne.AUDIO){!this.audioOnly&&n.type===ne.MAIN&&!n.elementaryStreams.video&&!n.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(Mt(n)){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(S.AUDIO_TRACK_SWITCHED,Ge({},s)))}this.fragBufferedComplete(n,r),this.media&&this.tick()}onError(e,i){var n;if(i.fatal){this.state=j.ERROR;return}switch(i.details){case M.FRAG_GAP:case M.FRAG_PARSING_ERROR:case M.FRAG_DECRYPT_ERROR:case M.FRAG_LOAD_ERROR:case M.FRAG_LOAD_TIMEOUT:case M.KEY_LOAD_ERROR:case M.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ne.AUDIO,i);break;case M.AUDIO_TRACK_LOAD_ERROR:case M.AUDIO_TRACK_LOAD_TIMEOUT:case M.LEVEL_PARSING_ERROR:!i.levelRetry&&this.state===j.WAITING_TRACK&&((n=i.context)==null?void 0:n.type)===ke.AUDIO_TRACK&&(this.state=j.IDLE);break;case M.BUFFER_ADD_CODEC_ERROR:case M.BUFFER_APPEND_ERROR:if(i.parent!=="audio")return;this.reduceLengthAndFlushBuffer(i)||this.resetLoadingState();break;case M.BUFFER_FULL_ERROR:if(i.parent!=="audio")return;this.reduceLengthAndFlushBuffer(i)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case M.INTERNAL_EXCEPTION:this.recoverWorkerError(i);break}}onBufferFlushing(e,{type:i}){i!==et.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:i}){if(i!==et.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===j.ENDED&&(this.state=j.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,i,ne.AUDIO),this.tick())}}_handleTransmuxComplete(e){var i;const n="audio",{hls:r}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:u,level:c}=o,{details:d}=c,{audio:h,text:f,id3:m,initSegment:p}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=j.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),p!=null&&p.tracks){const y=l.initSegment||l;if(this.unhandledEncryptionError(p,l))return;this._bufferInitSegment(c,p.tracks,y,a),r.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:n,tracks:p.tracks})}if(h){const{startPTS:y,endPTS:g,startDTS:v,endDTS:E}=h;u&&(u.elementaryStreams[et.AUDIO]={startPTS:y,endPTS:g,startDTS:v,endDTS:E}),l.setElementaryStreamInfo(et.AUDIO,y,g,v,E),this.bufferFragmentData(h,l,u,a)}if(m!=null&&(i=m.samples)!=null&&i.length){const y=Qe({id:n,frag:l,details:d},m);r.trigger(S.FRAG_PARSING_METADATA,y)}if(f){const y=Qe({id:n,frag:l,details:d},f);r.trigger(S.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,i,n,r){if(this.state!==j.PARSING||(i.video&&delete i.video,i.audiovideo&&delete i.audiovideo,!i.audio))return;const s=i.audio;s.id=ne.AUDIO;const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(S.BUFFER_CODECS,i);const o=s.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:r,parent:n.type,data:o};this.hls.trigger(S.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,i,n){const r=this.fragmentTracker.getState(e);if(this.switchingTrack||r===Jt.NOT_LOADED||r===Jt.PARTIAL){var s;if(!Mt(e))this._loadInitSegment(e,i);else if((s=i.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=j.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragmentStart!==i.details.fragmentStart&&D0(i.details,a)}else super.loadFragment(e,i,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:i,lang:n,assocLang:r,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;Xo({name:i,lang:n,assocLang:r,characteristics:s,audioCodec:a,channels:o},e,Eo)||(I0(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:i}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,i.trigger(S.AUDIO_TRACK_SWITCHED,Ge({},e))}}class GA extends Kn{constructor(e,i){super(i,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,i,n){const r=i==null?void 0:i.renditionReports;if(r){let s=-1;for(let a=0;a<r.length;a++){const o=r[a];let l;try{l=new self.URL(o.URI,i.url).href}catch(u){this.warn(`Could not construct new URL for Rendition Report: ${u}`),l=o.URI||""}if(l===e){s=a;break}else l===e.substring(0,l.length)&&(s=a)}if(s!==-1){const a=r[s],o=parseInt(a["LAST-MSN"])||i.lastPartSn;let l=parseInt(a["LAST-PART"])||i.lastPartIndex;if(this.hls.config.lowLatencyMode){const c=Math.min(i.age-i.partTarget,i.targetduration);l>=0&&c>i.partTarget&&(l+=1)}const u=n&&jR(n);return new YR(o,l>=0?l:void 0,u)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,i){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,i){if(i)try{return i.addDirectives(e)}catch(n){this.warn(`Could not construct new URL with HLS Delivery Directives: ${n}`)}return e}playlistLoaded(e,i,n){const{details:r,stats:s}=i,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;r.advancedDateTime=Date.now()-o;const l=this.hls.config.timelineOffset;if(l!==r.appliedTimelineOffset){const c=Math.max(l||0,0);r.appliedTimelineOffset=c,r.fragments.forEach(d=>{d.setStart(d.playlistOffset+c)})}if(r.live||n!=null&&n.live){const c="levelInfo"in i?i.levelInfo:i.track;if(r.reloaded(n),n&&r.fragments.length>0){tX(n,r,this);const v=r.playlistParsingError;if(v){this.warn(v);const E=this.hls;if(!E.config.ignorePlaylistParsingErrors){var u;const{networkDetails:T}=i;E.trigger(S.ERROR,{type:le.NETWORK_ERROR,details:M.LEVEL_PARSING_ERROR,fatal:!1,url:r.url,error:v,reason:v.message,level:i.level||void 0,parent:(u=r.fragments[0])==null?void 0:u.type,networkDetails:T,stats:s});return}r.playlistParsingError=null}}r.requestScheduled===-1&&(r.requestScheduled=s.loading.start);const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(r.edge-h)*1e3,m=E3(r,f);if(r.requestScheduled+m<a?r.requestScheduled=a:r.requestScheduled+=m,this.log(`live playlist ${e} ${r.advanced?"REFRESHED "+r.lastPartSn+"-"+r.lastPartIndex:r.updated?"UPDATED":"MISSED"}`),!this.canLoad||!r.live)return;let p,y,g;if(r.canBlockReload&&r.endSN&&r.advanced){const v=this.hls.config.lowLatencyMode,E=r.lastPartSn,T=r.endSN,_=r.lastPartIndex,x=_!==-1,A=E===T;x?A?(y=T+1,g=v?0:_):(y=E,g=v?_+1:r.maxPartIndex):y=T+1;const I=r.age,L=I+r.ageHeader;let b=Math.min(L-r.partTarget,r.targetduration*1.5);if(b>0){if(L>r.targetduration*3)this.log(`Playlist last advanced ${I.toFixed(2)}s ago. Omitting segment and part directives.`),y=void 0,g=void 0;else if(n!=null&&n.tuneInGoal&&L-r.partTarget>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${b} with playlist age: ${r.age}`),b=0;else{const R=Math.floor(b/r.targetduration);if(y+=R,g!==void 0){const P=Math.round(b%r.targetduration/r.partTarget);g+=P}this.log(`CDN Tune-in age: ${r.ageHeader}s last advanced ${I.toFixed(2)}s goal: ${b} skip sn ${R} to part ${g}`)}r.tuneInGoal=b}if(p=this.getDeliveryDirectives(r,i.deliveryDirectives,y,g),v||!A){r.requestScheduled=a,this.loadingPlaylist(c,p);return}}else(r.canBlockReload||r.canSkipUntil)&&(p=this.getDeliveryDirectives(r,i.deliveryDirectives,y,g));p&&y!==void 0&&r.canBlockReload&&(r.requestScheduled=s.loading.first+Math.max(m-o*2,m/2)),this.scheduleLoading(c,p,r)}else this.clearTimer()}scheduleLoading(e,i,n){const r=n||e.details;if(!r){this.loadingPlaylist(e,i);return}const s=self.performance.now(),a=r.requestScheduled;if(s>=a){this.loadingPlaylist(e,i);return}const o=a-s;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(o)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,i),o)}getDeliveryDirectives(e,i,n,r){let s=jR(e);return i!=null&&i.skip&&e.deltaUpdateFailed&&(n=i.msn,r=i.part,s=yp.No),new YR(n,r,s)}checkRetry(e){const i=e.details,n=L0(e),r=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=r||{},l=!!r&&!!o&&(s===mi.RetryRequest||!r.resolved&&s===mi.SendAlternateToPenaltyBox);if(l){var u;if(a>=o.maxNumRetry)return!1;if(n&&(u=e.context)!=null&&u.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${i}" without delivery-directives`),this.loadPlaylist();else{const c=CA(o,a);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),c),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${i}" in ${c}ms`)}e.levelRetry=!0,r.resolved=!0}return l}}function W3(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!af(t[i].attrs,e[i].attrs))return!1;return!0}function af(t,e,i){const n=t["STABLE-RENDITION-ID"];return n&&!i?n===e["STABLE-RENDITION-ID"]:!(i||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(r=>t[r]!==e[r])}function tb(t,e){return e.label.toLowerCase()===t.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(t.lang||"").toLowerCase())}class cZ extends GA{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(S.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,i){this.tracks=i.audioTracks||[]}onAudioTrackLoaded(e,i){const{id:n,groupId:r,details:s}=i,a=this.tracksInGroup[n];if(!a||a.groupId!==r){this.warn(`Audio track with id:${n} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=i.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,i,o)}onLevelLoading(e,i){this.switchLevel(i.level)}onLevelSwitching(e,i){this.switchLevel(i.level)}switchLevel(e){const i=this.hls.levels[e];if(!i)return;const n=i.audioGroups||null,r=this.groupIds;let s=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(o=>(r==null?void 0:r.indexOf(o))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!s&&l){const h=Wr(l,o,Eo);if(h>-1)s=o[h];else{const f=Wr(l,this.tracks);s=this.tracks[f]}}let u=this.findTrackId(s);u===-1&&s&&(u=this.findTrackId(null));const c={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n==null?void 0:n.join(",")}`),this.hls.trigger(S.AUDIO_TRACKS_UPDATED,c);const d=this.trackId;if(u!==-1&&d===-1)this.setAudioTrack(u);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}}onError(e,i){i.fatal||!i.context||i.context.type===ke.AUDIO_TRACK&&i.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(i.context.groupId)!==-1)&&this.checkRetry(i)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const i=this.hls;if(i.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const r=this.currentTrack;if(r&&Xo(e,r,Eo))return r;const s=Wr(e,this.tracksInGroup,Eo);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(r){let a=i.loadLevel;a===-1&&(a=i.firstAutoLevel);const o=SQ(e,i.levels,n,a,Eo);if(o===-1)return null;i.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=Wr(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const i=this.tracksInGroup;if(e<0||e>=i.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=i[e],s=r.details&&!r.details.live;if(e===this.trackId&&r===n&&s||(this.log(`Switching to audio-track ${e} "${r.name}" lang:${r.lang} group:${r.groupId} channels:${r.channels}`),this.trackId=e,this.currentTrack=r,this.hls.trigger(S.AUDIO_TRACK_SWITCHING,Ge({},r)),s))return;const a=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(a)}findTrackId(e){const i=this.tracksInGroup;for(let n=0;n<i.length;n++){const r=i[n];if(!(this.selectDefaultTrack&&!r.default)&&(!e||Xo(e,r,Eo)))return n}if(e){const{name:n,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:l}=e;for(let u=0;u<i.length;u++){const c=i[u];if(Xo({name:n,lang:r,assocLang:s,characteristics:a,audioCodec:o,channels:l},c,Eo))return u}for(let u=0;u<i.length;u++){const c=i[u];if(af(e.attrs,c.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return u}for(let u=0;u<i.length;u++){const c=i[u];if(af(e.attrs,c.attrs,["LANGUAGE"]))return u}}return-1}loadPlaylist(e){super.loadPlaylist();const i=this.currentTrack;this.shouldLoadPlaylist(i)&&I0(i.url,this.hls)&&this.scheduleLoading(i,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,i),a=e.details,o=a==null?void 0:a.age;this.log(`Loading audio-track ${n} "${e.name}" lang:${e.lang} group:${r}${(i==null?void 0:i.msn)!==void 0?" at sn "+i.msn+" part "+i.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(S.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:r,deliveryDirectives:i||null,track:e})}}class dZ{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,i,n){if(this.queues===null||this.tracks===null)return;const r=this.queues[i];r.push(e),r.length===1&&!n&&this.executeNext(i)}appendBlocker(e){return new Promise(i=>{const n={label:"async-blocker",execute:i,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(n,e)})}prependBlocker(e){return new Promise(i=>{if(this.queues){const n={label:"async-blocker-prepend",execute:i,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(n)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var i;const n=(i=e[0])==null?void 0:i.label;(n==="async-blocker"||n==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const i=this.queues[e];if(i.length){const r=i[0];try{r.execute()}catch(s){var n;if(r.onError(s),this.queues===null||this.tracks===null)return;const a=(n=this.tracks[e])==null?void 0:n.buffer;a!=null&&a.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var i;return((i=this.queues)==null?void 0:i[e][0])||null}toString(){const{queues:e,tracks:i}=this;return e===null||i===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var i,n;return(i=this.queues)!=null&&i[e]||(n=this.tracks)!=null&&n[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var i;const n=(i=this.tracks)==null?void 0:i[e],r=n==null?void 0:n.buffer;return r?`SourceBuffer${r.updating?" updating":""}${n.ended?" ended":""}${n.ending?" ending":""}`:"none"}listOps(e){var i;return((i=this.queues)==null?void 0:i[e].map(n=>n.label).join(", "))||""}}const Dw=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,j3="HlsJsTrackRemovedError";class hZ extends Error{constructor(e){super(e),this.name=j3}}class fZ extends Kn{constructor(e,i){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=n=>{var r;this.hls&&((r=this.mediaSource)==null?void 0:r.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=n=>{const{media:r,mediaSource:s}=this;n&&this.log("Media source opened"),!(!r||!s)&&(s.removeEventListener("sourceopen",this._onMediaSourceOpen),r.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(S.MEDIA_ATTACHED,{media:r,mediaSource:s}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:r}=this;n!==r&&this.error(`Media element src was set while attaching MediaSource (${r} > ${n})`)},this.hls=e,this.fragmentTracker=i,this.appendSource=Mz(Xa(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.BUFFER_RESET,this.onBufferReset,this),e.on(S.BUFFER_APPENDING,this.onBufferAppending,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.BUFFER_EOS,this.onBufferEos,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.FRAG_PARSED,this.onFragParsed,this),e.on(S.FRAG_CHANGED,this.onFragChanged,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.BUFFER_RESET,this.onBufferReset,this),e.off(S.BUFFER_APPENDING,this.onBufferAppending,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.BUFFER_EOS,this.onBufferEos,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.FRAG_PARSED,this.onFragParsed,this),e.off(S.FRAG_CHANGED,this.onFragChanged,this),e.off(S.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:i}=this;if(!e)return null;const n={};if(this.operationQueue){const s=this.isUpdating();s||this.operationQueue.removeBlockers();const a=this.isQueued();(s||a)&&this.warn(`Transfering MediaSource with${a?" operations in queue":""}${s?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const r=this.transferData;return!this.sourceBufferCount&&r&&r.mediaSource===i?Qe(n,r.tracks):this.sourceBuffers.forEach(s=>{const[a]=s;a&&(n[a]=Qe({},this.tracks[a]),this.removeBuffer(a)),s[0]=s[1]=null}),{media:e,mediaSource:i,tracks:n}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,i){var n;let r=2;(i.audio&&!i.video||!i.altAudio)&&(r=1),this.bufferCodecEventsTotal=r,this.log(`${r} bufferCodec event(s) expected.`),(n=this.transferData)!=null&&n.mediaSource&&this.sourceBufferCount&&r&&this.bufferCreated()}onMediaAttaching(e,i){const n=this.media=i.media;this.transferData=this.overrides=void 0;const r=Xa(this.appendSource);if(r){const s=!!i.mediaSource;(s||i.overrides)&&(this.transferData=i,this.overrides=i.overrides);const a=this.mediaSource=i.mediaSource||new r;if(this.assignMediaSource(a),s)this._objectUrl=n.src,this.attachTransferred();else{const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&a instanceof l,Pw(n),mZ(n,o),n.load()}catch{n.src=o}else n.src=o}n.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var i,n;this.log(`${((i=this.transferData)==null?void 0:i.mediaSource)===e?"transferred":"created"} media source: ${(n=e.constructor)==null?void 0:n.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,i=this.transferData;if(!i||!e)return;const n=this.tracks,r=i.tracks,s=r?Object.keys(r):null,a=s?s.length:0,o=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(r&&s&&a){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${tt(n,(l,u)=>l==="initSegment"?void 0:u)};
transfer tracks: ${tt(r,(l,u)=>l==="initSegment"?void 0:u)}}`),!HN(r,n)){i.mediaSource=null,i.tracks=void 0;const l=e.currentTime,u=this.details,c=Math.max(l,(u==null?void 0:u.fragments[0].start)||0);if(c-l>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${l} -> ${c}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(r)}"->"${Object.keys(n)}") start time: ${c} currentTime: ${l}`),this.onMediaDetaching(S.MEDIA_DETACHING,{}),this.onMediaAttaching(S.MEDIA_ATTACHING,i),e.currentTime=c;return}this.transferData=void 0,s.forEach(l=>{const u=l,c=r[u];if(c){const d=c.buffer;if(d){const h=this.fragmentTracker,f=c.id;if(h.hasFragments(f)||h.hasParts(f)){const y=be.getBuffered(d);h.detectEvictedFragments(u,y,f,null,!0)}const m=$E(u),p=[u,d];this.sourceBuffers[m]=p,d.updating&&this.operationQueue&&this.operationQueue.prependBlocker(u),this.trackSourceBuffer(u,c)}}}),o(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),o()}get mediaSourceOpenOrEnded(){var e;const i=(e=this.mediaSource)==null?void 0:e.readyState;return i==="open"||i==="ended"}onMediaDetaching(e,i){const n=!!i.transferMedia;this.transferData=this.overrides=void 0;const{media:r,mediaSource:s,_objectUrl:a}=this;if(s){if(this.log(`media source ${n?"transferring":"detaching"}`),n)this.sourceBuffers.forEach(([o])=>{o&&this.removeBuffer(o)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const o=s.readyState==="open";try{const l=s.sourceBuffers;for(let u=l.length;u--;)o&&l[u].abort(),s.removeSourceBuffer(l[u]);o&&s.endOfStream()}catch(l){this.warn(`onMediaDetaching: ${l.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}s.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("sourceended",this._onMediaSourceEnded),s.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(s.removeEventListener("startstreaming",this._onStartStreaming),s.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}r&&(r.removeEventListener("emptied",this._onMediaEmptied),n||(a&&self.URL.revokeObjectURL(a),this.mediaSrc===a?(r.removeAttribute("src"),this.appendSource&&Pw(r),r.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(S.MEDIA_DETACHED,i)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var i;const n=(i=this.tracks[e])==null?void 0:i.buffer;if(this.removeBuffer(e),n)try{var r;(r=this.mediaSource)!=null&&r.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(n)}catch(s){this.warn(`onBufferReset ${e}`,s)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[$E(e)]=[null,null];const i=this.tracks[e];i&&(i.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new dZ(this.tracks)}onBufferCodecs(e,i){var n;const r=this.tracks,s=Object.keys(i);this.log(`BUFFER_CODECS: "${s}" (current SB count ${this.sourceBufferCount})`);const a="audiovideo"in i&&(r.audio||r.video)||r.audiovideo&&("audio"in i||"video"in i),o=!a&&this.sourceBufferCount&&this.media&&s.some(l=>!r[l]);if(a||o){this.warn(`Unsupported transition between "${Object.keys(r)}" and "${s}" SourceBuffers`);return}s.forEach(l=>{var u,c;const d=i[l],{id:h,codec:f,levelCodec:m,container:p,metadata:y,supplemental:g}=d;let v=r[l];const E=(u=this.transferData)==null||(u=u.tracks)==null?void 0:u[l],T=E!=null&&E.buffer?E:v,_=(T==null?void 0:T.pendingCodec)||(T==null?void 0:T.codec),x=T==null?void 0:T.levelCodec;v||(v=r[l]={buffer:void 0,listeners:[],codec:f,supplemental:g,container:p,levelCodec:m,metadata:y,id:h});const A=vp(_,x),I=A==null?void 0:A.replace(Dw,"$1");let L=vp(f,m);const b=(c=L)==null?void 0:c.replace(Dw,"$1");L&&A&&I!==b&&(l.slice(0,5)==="audio"&&(L=x0(L,this.appendSource)),this.log(`switching codec ${_} to ${L}`),L!==(v.pendingCodec||v.codec)&&(v.pendingCodec=L),v.container=p,this.appendChangeType(l,p,L))}),(this.tracksReady||this.sourceBufferCount)&&(i.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!i.video&&((n=i.audio)==null?void 0:n.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,i)=>{const n=this.tracks[i];return e[i]={id:n.id,container:n.container,codec:n.codec,levelCodec:n.levelCodec},e},{})}appendChangeType(e,i,n){const r=`${i};codecs=${n}`,s={label:`change-type=${r}`,execute:()=>{const a=this.tracks[e];if(a){const o=a.buffer;o!=null&&o.changeType&&(this.log(`changing ${e} sourceBuffer type to ${r}`),o.changeType(r),a.codec=n,a.container=i)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:a=>{this.warn(`Failed to change ${e} SourceBuffer type`,a)}};this.append(s,e,this.isPending(this.tracks[e]))}blockAudio(e){var i;const n=e.start,r=n+e.duration*.05;if(((i=this.fragmentTracker.getAppendedFrag(n,ne.MAIN))==null?void 0:i.gap)===!0)return;const a={label:"block-audio",execute:()=>{var o;const l=this.tracks.video;(this.lastVideoAppendEnd>r||l!=null&&l.buffer&&be.isBuffered(l.buffer,r)||((o=this.fragmentTracker.getAppendedFrag(r,ne.MAIN))==null?void 0:o.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:o=>{this.warn("Error executing block-audio operation",o)}};this.blockedAudioAppend={op:a,frag:e},this.append(a,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:i}=this;e&&i&&(this.blockedAudioAppend=null,i.unblockAudio(e.op))}onBufferAppending(e,i){const{tracks:n}=this,{data:r,type:s,parent:a,frag:o,part:l,chunkMeta:u,offset:c}=i,d=u.buffering[s],{sn:h,cc:f}=o,m=self.performance.now();d.start=m;const p=o.stats.buffering,y=l?l.stats.buffering:null;p.start===0&&(p.start=m),y&&y.start===0&&(y.start=m);const g=n.audio;let v=!1;s==="audio"&&(g==null?void 0:g.container)==="audio/mpeg"&&(v=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const E=n.video,T=E==null?void 0:E.buffer;if(T&&h!=="initSegment"){const A=l||o,I=this.blockedAudioAppend;if(s==="audio"&&a!=="main"&&!this.blockedAudioAppend&&!(E.ending||E.ended)){const b=A.start+A.duration*.05,R=T.buffered,P=this.currentOp("video");!R.length&&!P?this.blockAudio(A):!P&&!be.isBuffered(T,b)&&this.lastVideoAppendEnd<b&&this.blockAudio(A)}else if(s==="video"){const L=A.end;if(I){const b=I.frag.start;(L>b||L<this.lastVideoAppendEnd||be.isBuffered(T,b))&&this.unblockAudio()}this.lastVideoAppendEnd=L}}const _=(l||o).start,x={label:`append-${s}`,execute:()=>{var A;d.executeStart=self.performance.now();const I=(A=this.tracks[s])==null?void 0:A.buffer;I&&(v?this.updateTimestampOffset(I,_,.1,s,h,f):c!==void 0&&te(c)&&this.updateTimestampOffset(I,c,1e-6,s,h,f)),this.appendExecutor(r,s)},onStart:()=>{},onComplete:()=>{const A=self.performance.now();d.executeEnd=d.end=A,p.first===0&&(p.first=A),y&&y.first===0&&(y.first=A);const I={};this.sourceBuffers.forEach(([L,b])=>{L&&(I[L]=be.getBuffered(b))}),this.appendErrors[s]=0,s==="audio"||s==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(S.BUFFER_APPENDED,{type:s,frag:o,part:l,chunkMeta:u,parent:o.type,timeRanges:I})},onError:A=>{var I;const L={type:le.MEDIA_ERROR,parent:o.type,details:M.BUFFER_APPEND_ERROR,sourceBufferName:s,frag:o,part:l,chunkMeta:u,error:A,err:A,fatal:!1},b=(I=this.media)==null?void 0:I.error;if(A.code===DOMException.QUOTA_EXCEEDED_ERR||A.name=="QuotaExceededError"||"quota"in A)L.details=M.BUFFER_FULL_ERROR;else if(A.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!b)L.errorAction=Yu(!0);else if(A.name===j3&&this.sourceBufferCount===0)L.errorAction=Yu(!0);else{const R=++this.appendErrors[s];this.warn(`Failed ${R}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${s}" sourceBuffer (${b||"no media error"})`),(R>=this.hls.config.appendErrorMaxRetry||b)&&(L.fatal=!0)}this.hls.trigger(S.ERROR,L)}};this.log(`queuing "${s}" append sn: ${h}${l?" p: "+l.index:""} of ${o.type===ne.MAIN?"level":"track"} ${o.level} cc: ${f}`),this.append(x,s,this.isPending(this.tracks[s]))}getFlushOp(e,i,n){return this.log(`queuing "${e}" remove ${i}-${n}`),{label:"remove",execute:()=>{this.removeExecutor(e,i,n)},onStart:()=>{},onComplete:()=>{this.hls.trigger(S.BUFFER_FLUSHED,{type:e})},onError:r=>{this.warn(`Failed to remove ${i}-${n} from "${e}" SourceBuffer`,r)}}}onBufferFlushing(e,i){const{type:n,startOffset:r,endOffset:s}=i;n?this.append(this.getFlushOp(n,r,s),n):this.sourceBuffers.forEach(([a])=>{a&&this.append(this.getFlushOp(a,r,s),a)})}onFragParsed(e,i){const{frag:n,part:r}=i,s=[],a=r?r.elementaryStreams:n.elementaryStreams;a[et.AUDIOVIDEO]?s.push("audiovideo"):(a[et.AUDIO]&&s.push("audio"),a[et.VIDEO]&&s.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,r&&(r.stats.buffering.end=l);const u=r?r.stats:n.stats;this.hls.trigger(S.FRAG_BUFFERED,{frag:n,part:r,stats:u,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s).catch(l=>{this.warn(`Fragment buffered callback ${l}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,i){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const i=this.tracks[e];if(i)return!i.ended||i.ending}return!1})}onBufferEos(e,i){var n;this.sourceBuffers.forEach(([a])=>{if(a){const o=this.tracks[a];(!i.type||i.type===a)&&(o.ending=!0,o.ended||(o.ended=!0,this.log(`${a} buffer reached EOS`)))}});const r=((n=this.overrides)==null?void 0:n.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([a])=>{var o;return a&&!((o=this.tracks[a])!=null&&o.ended)})?r?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:a}=this;if(!a||a.readyState!=="open"){a&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${a.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),a.endOfStream(),this.hls.trigger(S.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(S.BUFFERED_TO_END,void 0)):i.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const i=this.tracks[e];i&&(i.ending=!1)}})}onLevelUpdated(e,{details:i}){i.fragments.length&&(this.details=i,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,i){if(i.details===M.BUFFER_APPEND_ERROR&&i.frag){var n;const r=(n=i.errorAction)==null?void 0:n.nextAutoLevel;te(r)&&r!==i.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:i,media:n}=this;if(!n||i===null||!this.sourceBufferCount)return;const r=e.config,s=n.currentTime,a=i.levelTargetDuration,o=i.live&&r.liveBackBufferLength!==null?r.liveBackBufferLength:r.backBufferLength;if(te(o)&&o>=0){const u=Math.max(o,a),c=Math.floor(s/a)*a-u;this.flushBackBuffer(s,a,c)}const l=r.frontBufferFlushThreshold;if(te(l)&&l>0){const u=Math.max(r.maxBufferLength,l),c=Math.max(u,a),d=Math.floor(s/a)*a+c;this.flushFrontBuffer(s,a,d)}}flushBackBuffer(e,i,n){this.sourceBuffers.forEach(([r,s])=>{if(s){const o=be.getBuffered(s);if(o.length>0&&n>o.start(0)){var a;this.hls.trigger(S.BACK_BUFFER_REACHED,{bufferEnd:n});const l=this.tracks[r];if((a=this.details)!=null&&a.live)this.hls.trigger(S.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l!=null&&l.ended){this.log(`Cannot flush ${r} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:r})}}})}flushFrontBuffer(e,i,n){this.sourceBuffers.forEach(([r,s])=>{if(s){const a=be.getBuffered(s),o=a.length;if(o<2)return;const l=a.start(o-1),u=a.end(o-1);if(n>l||e>=l&&e<=u)return;this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:l,endOffset:1/0,type:r})}})}getDurationAndRange(){var e;const{details:i,mediaSource:n}=this;if(!i||!this.media||(n==null?void 0:n.readyState)!=="open")return null;const r=i.edge;if(i.live&&this.hls.config.liveDurationInfinity){if(i.fragments.length&&n.setLiveSeekableRange){const u=Math.max(0,i.fragmentStart),c=Math.max(u,r);return{duration:1/0,start:u,end:c}}return{duration:1/0}}const s=(e=this.overrides)==null?void 0:e.duration;if(s)return te(s)?{duration:s}:null;const a=this.media.duration,o=te(n.duration)?n.duration:0;return r>o&&r>a||!te(a)?{duration:r}:null}updateMediaSource({duration:e,start:i,end:n}){const r=this.mediaSource;!this.media||!r||r.readyState!=="open"||(r.duration!==e&&(te(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),r.duration=e),i!==void 0&&n!==void 0&&(this.log(`MediaSource duration is set to ${r.duration}. Setting seekable range to ${i}-${n}.`),r.setLiveSeekableRange(i,n)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:i,tracks:n}=this;if(this.log(`checkPendingTracks (pending: ${i} codec events expected: ${e}) ${tt(n)}`),this.tracksReady){var r;const s=(r=this.transferData)==null?void 0:r.tracks;s&&Object.keys(s).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([i,n])=>{if(i){const r=this.tracks[i];e[i]={buffer:n,container:r.container,codec:r.codec,supplemental:r.supplemental,levelCodec:r.levelCodec,id:r.id,metadata:r.metadata}}}),this.hls.trigger(S.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([i])=>{this.executeNext(i)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:i,mediaSource:n}=this;if(!n)throw new Error("createSourceBuffers called when mediaSource was null");for(const s in e){const a=s,o=e[a];if(this.isPending(o)){const l=this.getTrackCodec(o,a),u=`${o.container};codecs=${l}`;o.codec=l,this.log(`creating sourceBuffer(${u})${this.currentOp(a)?" Queued":""} ${tt(o)}`);try{const c=n.addSourceBuffer(u),d=$E(a),h=[a,c];i[d]=h,o.buffer=c}catch(c){var r;this.error(`error while trying to add sourceBuffer: ${c.message}`),this.shiftAndExecuteNext(a),(r=this.operationQueue)==null||r.removeBlockers(),delete this.tracks[a],this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:a,mimeType:u,parent:o.id});return}this.trackSourceBuffer(a,o)}}this.bufferCreated()}getTrackCodec(e,i){const n=e.supplemental;let r=e.codec;n&&(i==="video"||i==="audiovideo")&&Jh(n,"video")&&(r=nQ(r,n));const s=vp(r,e.levelCodec);return s?i.slice(0,5)==="audio"?x0(s,this.appendSource):s:""}trackSourceBuffer(e,i){const n=i.buffer;if(!n)return;const r=this.getTrackCodec(i,e);this.tracks[e]={buffer:n,codec:r,container:i.container,levelCodec:i.levelCodec,supplemental:i.supplemental,metadata:i.metadata,id:i.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(s,a)=>{const o=a.removedRanges;o!=null&&o.length&&this.hls.trigger(S.BUFFER_FLUSHED,{type:s})})}get mediaSrc(){var e,i;const n=((e=this.media)==null||(i=e.querySelector)==null?void 0:i.call(e,"source"))||this.media;return n==null?void 0:n.src}onSBUpdateStart(e){const i=this.currentOp(e);i&&i.onStart()}onSBUpdateEnd(e){var i;if(((i=this.mediaSource)==null?void 0:i.readyState)==="closed"){this.resetBuffer(e);return}const n=this.currentOp(e);n&&(n.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,i){var n;const r=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${r}`,i),this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:r,fatal:!1});const s=this.currentOp(e);s&&s.onError(r)}updateTimestampOffset(e,i,n,r,s,a){const o=i-e.timestampOffset;Math.abs(o)>=n&&(this.log(`Updating ${r} SourceBuffer timestampOffset to ${i} (sn: ${s} cc: ${a})`),e.timestampOffset=i)}removeExecutor(e,i,n){const{media:r,mediaSource:s}=this,a=this.tracks[e],o=a==null?void 0:a.buffer;if(!r||!s||!o){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const l=te(r.duration)?r.duration:1/0,u=te(s.duration)?s.duration:1/0,c=Math.max(0,i),d=Math.min(n,l,u);d>c&&(!a.ending||a.ended)?(a.ended=!1,this.log(`Removing [${c},${d}] from the ${e} SourceBuffer`),o.remove(c,d)):this.shiftAndExecuteNext(e)}appendExecutor(e,i){const n=this.tracks[i],r=n==null?void 0:n.buffer;if(!r)throw new hZ(`Attempting to append to the ${i} SourceBuffer, but it does not exist`);n.ending=!1,n.ended=!1,r.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(i=>{this.warn(`SourceBuffer blocked callback ${i}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(i){this.warn(`Callback run without blocking ${this.operationQueue} ${i}`)}}isUpdating(){return this.sourceBuffers.some(([e,i])=>e&&i.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,i=this.sourceBufferTypes){if(!i.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:n}=this,r=i.map(a=>this.appendBlocker(a));return i.length>1&&!!this.blockedAudioAppend&&this.unblockAudio(),Promise.all(r).then(a=>{n===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(i=>{var n;const r=(n=this.tracks[i])==null?void 0:n.buffer;!r||r.updating||this.shiftAndExecuteNext(i)})}append(e,i,n){this.operationQueue&&this.operationQueue.append(e,i,n)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,i)=>e+(this.isPending(this.tracks[i])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[i])=>e+(i?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,i,n){const r=this.tracks[e];if(!r)return;const s=r.buffer;if(!s)return;const a=n.bind(this,e);r.listeners.push({event:i,listener:a}),s.addEventListener(i,a)}removeBufferListeners(e){const i=this.tracks[e];if(!i)return;const n=i.buffer;n&&(i.listeners.forEach(r=>{n.removeEventListener(r.event,r.listener)}),i.listeners.length=0)}}function Pw(t){const e=t.querySelectorAll("source");[].slice.call(e).forEach(i=>{t.removeChild(i)})}function mZ(t,e){const i=self.document.createElement("source");i.type="video/mp4",i.src=e,t.appendChild(i)}function $E(t){return t==="audio"?1:0}class WA{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.BUFFER_CODECS,this.onBufferCodecs,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(S.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,i){const n=this.hls.levels[i.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,i){this.media=i.media instanceof HTMLVideoElement?i.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,i){const n=this.hls;this.restrictedLevels=[],this.firstLevel=i.firstLevel,n.config.capLevelToPlayerSize&&i.video&&this.startCapping()}onLevelsUpdated(e,i){this.timer&&te(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,i){this.hls.config.capLevelToPlayerSize&&i.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const i=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&i.logger.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),i.autoLevelCapping=n,i.autoLevelEnabled&&i.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=i.autoLevelCapping}}}getMaxLevel(e){const i=this.hls.levels;if(!i.length)return-1;const n=i.filter((r,s)=>this.isLevelAllowed(r)&&s<=e);return this.clientRect=null,WA.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,i={width:0,height:0};if(e){const n=e.getBoundingClientRect();i.width=n.width,i.height=n.height,!i.width&&!i.height&&(i.width=n.right-n.left||e.width||0,i.height=n.bottom-n.top||e.height||0)}return this.clientRect=i,i}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,i,n){if(!(e!=null&&e.length))return-1;const r=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let s=e.length-1;const a=Math.max(i,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&r(l,e[o+1])){s=o;break}}return s}}const pZ={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},Ui=pZ,gZ={HLS:"h"},vZ=gZ;class ns{constructor(e,i){Array.isArray(e)&&(e=e.map(n=>n instanceof ns?n:new ns(n))),this.value=e,this.params=i}}const yZ="Dict";function EZ(t){return Array.isArray(t)?JSON.stringify(t):t instanceof Map?"Map{}":t instanceof Set?"Set{}":typeof t=="object"?JSON.stringify(t):String(t)}function TZ(t,e,i,n){return new Error(`failed to ${t} "${EZ(e)}" as ${i}`,{cause:n})}function rs(t,e,i){return TZ("serialize",t,e,i)}class Y3{constructor(e){this.description=e}}const Ow="Bare Item",bZ="Boolean";function SZ(t){if(typeof t!="boolean")throw rs(t,bZ);return t?"?1":"?0"}function _Z(t){return btoa(String.fromCharCode(...t))}const AZ="Byte Sequence";function xZ(t){if(ArrayBuffer.isView(t)===!1)throw rs(t,AZ);return`:${_Z(t)}:`}const kZ="Integer";function IZ(t){return t<-999999999999999||999999999999999<t}function q3(t){if(IZ(t))throw rs(t,kZ);return t.toString()}function LZ(t){return`@${q3(t.getTime()/1e3)}`}function z3(t,e){if(t<0)return-z3(-t,e);const i=Math.pow(10,e);if(Math.abs(t*i%1-.5)<Number.EPSILON){const r=Math.floor(t*i);return(r%2===0?r:r+1)/i}else return Math.round(t*i)/i}const RZ="Decimal";function wZ(t){const e=z3(t,3);if(Math.floor(Math.abs(e)).toString().length>12)throw rs(t,RZ);const i=e.toString();return i.includes(".")?i:`${i}.0`}const CZ="String",DZ=/[\x00-\x1f\x7f]+/;function PZ(t){if(DZ.test(t))throw rs(t,CZ);return`"${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function OZ(t){return t.description||t.toString().slice(7,-1)}const MZ="Token";function Mw(t){const e=OZ(t);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw rs(e,MZ);return e}function ib(t){switch(typeof t){case"number":if(!te(t))throw rs(t,Ow);return Number.isInteger(t)?q3(t):wZ(t);case"string":return PZ(t);case"symbol":return Mw(t);case"boolean":return SZ(t);case"object":if(t instanceof Date)return LZ(t);if(t instanceof Uint8Array)return xZ(t);if(t instanceof Y3)return Mw(t);default:throw rs(t,Ow)}}const NZ="Key";function nb(t){if(/^[a-z*][a-z0-9\-_.*]*$/.test(t)===!1)throw rs(t,NZ);return t}function jA(t){return t==null?"":Object.entries(t).map(([e,i])=>i===!0?`;${nb(e)}`:`;${nb(e)}=${ib(i)}`).join("")}function Q3(t){return t instanceof ns?`${ib(t.value)}${jA(t.params)}`:ib(t)}function $Z(t){return`(${t.value.map(Q3).join(" ")})${jA(t.params)}`}function FZ(t,e={whitespace:!0}){if(typeof t!="object"||t==null)throw rs(t,yZ);const i=t instanceof Map?t.entries():Object.entries(t),n=e!=null&&e.whitespace?" ":"";return Array.from(i).map(([r,s])=>{s instanceof ns||(s=new ns(s));let a=nb(r);return s.value===!0?a+=jA(s.params):(a+="=",Array.isArray(s.value)?a+=$Z(s):a+=Q3(s)),a}).join(`,${n}`)}function X3(t,e){return FZ(t,e)}const Er="CMCD-Object",xt="CMCD-Request",uo="CMCD-Session",qs="CMCD-Status",UZ={br:Er,ab:Er,d:Er,ot:Er,tb:Er,tpb:Er,lb:Er,tab:Er,lab:Er,url:Er,pb:xt,bl:xt,tbl:xt,dl:xt,ltc:xt,mtp:xt,nor:xt,nrr:xt,rc:xt,sn:xt,sta:xt,su:xt,ttfb:xt,ttfbb:xt,ttlb:xt,cmsdd:xt,cmsds:xt,smrt:xt,df:xt,cs:xt,ts:xt,cid:uo,pr:uo,sf:uo,sid:uo,st:uo,v:uo,msd:uo,bs:qs,bsd:qs,cdn:qs,rtp:qs,bg:qs,pt:qs,ec:qs,e:qs},BZ={REQUEST:xt};function VZ(t){return Object.keys(t).reduce((e,i)=>{var n;return(n=t[i])===null||n===void 0||n.forEach(r=>e[r]=i),e},{})}function HZ(t,e){const i={};if(!t)return i;const n=Object.keys(t),r=e?VZ(e):{};return n.reduce((s,a)=>{var o;const l=UZ[a]||r[a]||BZ.REQUEST,u=(o=s[l])!==null&&o!==void 0?o:s[l]={};return u[a]=t[a],s},i)}function KZ(t){return["ot","sf","st","e","sta"].includes(t)}function GZ(t){return typeof t=="number"?te(t):t!=null&&t!==""&&t!==!1}const Z3="event";function WZ(t,e){const i=new URL(t),n=new URL(e);if(i.origin!==n.origin)return t;const r=i.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;r[0]===s[0];)r.shift(),s.shift();for(;s.length;)s.shift(),r.unshift("..");return r.join("/")+i.search+i.hash}const Sp=t=>Math.round(t),rb=(t,e)=>Array.isArray(t)?t.map(i=>rb(i,e)):t instanceof ns&&typeof t.value=="string"?new ns(rb(t.value,e),t.params):(e.baseUrl&&(t=WZ(t,e.baseUrl)),e.version===1?encodeURIComponent(t):t),_m=t=>Sp(t/100)*100,jZ=(t,e)=>{let i=t;return e.version>=2&&(t instanceof ns&&typeof t.value=="string"?i=new ns([t]):typeof t=="string"&&(i=[t])),rb(i,e)},YZ={br:Sp,d:Sp,bl:_m,dl:_m,mtp:_m,nor:jZ,rtp:_m,tb:Sp},J3="request",e$="response",YA=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],qZ=["e"],zZ=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function ey(t){return zZ.test(t)}function QZ(t){return YA.includes(t)||qZ.includes(t)||ey(t)}const t$=["d","dl","nor","ot","rtp","su"];function XZ(t){return YA.includes(t)||t$.includes(t)||ey(t)}const ZZ=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function JZ(t){return YA.includes(t)||t$.includes(t)||ZZ.includes(t)||ey(t)}const eJ=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function tJ(t){return eJ.includes(t)||ey(t)}const iJ={[e$]:JZ,[Z3]:QZ,[J3]:XZ};function i$(t,e={}){const i={};if(t==null||typeof t!="object")return i;const n=e.version||t.v||1,r=e.reportingMode||J3,s=n===1?tJ:iJ[r];let a=Object.keys(t).filter(s);const o=e.filter;typeof o=="function"&&(a=a.filter(o));const l=r===e$||r===Z3;l&&!a.includes("ts")&&a.push("ts"),n>1&&!a.includes("v")&&a.push("v");const u=Qe({},YZ,e.formatters),c={version:n,reportingMode:r,baseUrl:e.baseUrl};return a.sort().forEach(d=>{let h=t[d];const f=u[d];if(typeof f=="function"&&(h=f(h,c)),d==="v"){if(n===1)return;h=n}d=="pr"&&h===1||(l&&d==="ts"&&!te(h)&&(h=Date.now()),GZ(h)&&(KZ(d)&&typeof h=="string"&&(h=new Y3(h)),i[d]=h))}),i}function nJ(t,e={}){const i={};if(!t)return i;const n=i$(t,e),r=HZ(n,e==null?void 0:e.customHeaderMap);return Object.entries(r).reduce((s,[a,o])=>{const l=X3(o,{whitespace:!1});return l&&(s[a]=l),s},i)}function rJ(t,e,i){return Qe(t,nJ(e,i))}const sJ="CMCD";function aJ(t,e={}){return t?X3(i$(t,e),{whitespace:!1}):""}function oJ(t,e={}){if(!t)return"";const i=aJ(t,e);return encodeURIComponent(i)}function lJ(t,e={}){if(!t)return"";const i=oJ(t,e);return`${sJ}=${i}`}const Nw=/CMCD=[^&#]+/;function uJ(t,e,i){const n=lJ(e,i);if(!n)return t;if(Nw.test(t))return t.replace(Nw,n);const r=t.includes("?")?"&":"?";return`${t}${r}${n}`}class cJ{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=r=>{try{this.apply(r,{ot:Ui.MANIFEST,su:!this.initialized})}catch(s){this.hls.logger.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=r=>{try{const{frag:s,part:a}=r,o=this.hls.levels[s.level],l=this.getObjectType(s),u={d:(a||s).duration*1e3,ot:l};(l===Ui.VIDEO||l===Ui.AUDIO||l==Ui.MUXED)&&(u.br=o.bitrate/1e3,u.tb=this.getTopBandwidth(l)/1e3,u.bl=this.getBufferLength(l));const c=a?this.getNextPart(a):this.getNextFrag(s);c!=null&&c.url&&c.url!==s.url&&(u.nor=c.url),this.apply(r,u)}catch(s){this.hls.logger.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const i=this.config=e.config,{cmcd:n}=i;n!=null&&(i.pLoader=this.createPlaylistLoader(),i.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||e.sessionId,this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHED,this.onMediaDetached,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHED,this.onMediaDetached,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,i){this.media=i.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,i){var n,r;this.audioBuffer=(n=i.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(r=i.tracks.video)==null?void 0:r.buffer}createData(){var e;return{v:1,sf:vZ.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,i={}){Qe(i,this.createData());const n=i.ot===Ui.INIT||i.ot===Ui.VIDEO||i.ot===Ui.MUXED;this.starved&&n&&(i.bs=!0,i.su=!0,this.starved=!1),i.su==null&&(i.su=this.buffering);const{includeKeys:r}=this;r&&(i=Object.keys(i).reduce((a,o)=>(r.includes(o)&&(a[o]=i[o]),a),{}));const s={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),rJ(e.headers,i,s)):e.url=uJ(e.url,i,s)}getNextFrag(e){var i;const n=(i=this.hls.levels[e.level])==null?void 0:i.details;if(n){const r=e.sn-n.startSN;return n.fragments[r+1]}}getNextPart(e){var i;const{index:n,fragment:r}=e,s=(i=this.hls.levels[r.level])==null||(i=i.details)==null?void 0:i.partList;if(s){const{sn:a}=r;for(let o=s.length-1;o>=0;o--){const l=s[o];if(l.index===n&&l.fragment.sn===a)return s[o+1]}}}getObjectType(e){const{type:i}=e;if(i==="subtitle")return Ui.TIMED_TEXT;if(e.sn==="initSegment")return Ui.INIT;if(i==="audio")return Ui.AUDIO;if(i==="main")return this.hls.audioTracks.length?Ui.VIDEO:Ui.MUXED}getTopBandwidth(e){let i=0,n;const r=this.hls;if(e===Ui.AUDIO)n=r.audioTracks;else{const s=r.maxAutoLevel,a=s>-1?s+1:r.levels.length;n=r.levels.slice(0,a)}return n.forEach(s=>{s.bitrate>i&&(i=s.bitrate)}),i>0?i:NaN}getBufferLength(e){const i=this.media,n=e===Ui.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!i?NaN:be.bufferInfo(n,i.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,i=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){i(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,i=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){i(s),this.loader.load(s,a,o)}}}}const dJ=3e5;class hJ extends Kn{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,i)=>(e.indexOf(i.pathwayId)===-1&&e.push(i.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const i=this.levels;i&&(this.levels=i.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,i){const{contentSteering:n}=i;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,i){this.audioTracks=i.audioTracks,this.subtitleTracks=i.subtitleTracks}onError(e,i){const{errorAction:n}=i;if((n==null?void 0:n.action)===mi.SendAlternateToPenaltyBox&&n.flags===sn.MoveAllAlternatesMatchingHost){const r=this.levels;let s=this._pathwayPriority,a=this.pathwayId;if(i.context){const{groupId:o,pathwayId:l,type:u}=i.context;o&&r?a=this.getPathwayForGroupId(o,u,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&r&&(s=this.pathways()),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),i.details===M.BUFFER_APPEND_ERROR&&!i.fatal?n.resolved=!0:n.resolved||this.warn(`Could not resolve ${i.details} ("${i.error.message}") with content-steering for Pathway: ${a} levels: ${r&&r.length} priorities: ${tt(s)} penalized: ${tt(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let i=this.getLevelsForPathway(this.pathwayId);if(i.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),i=this.getLevelsForPathway(n),this.pathwayId=n}return i.length!==e.length&&this.log(`Found ${i.length}/${e.length} levels in Pathway "${this.pathwayId}"`),i}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(i=>e===i.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let i;const n=this.penalizedPathways,r=performance.now();Object.keys(n).forEach(s=>{r-n[s]>dJ&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(i=this.getLevelsForPathway(a),i.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,S3(i),this.hls.trigger(S.LEVELS_UPDATED,{levels:i});const u=this.hls.levels[o];l&&u&&this.levels&&(u.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&u.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${u.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,i,n){const r=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<r.length;s++)if(i===ke.AUDIO_TRACK&&r[s].hasAudioGroup(e)||i===ke.SUBTITLE_TRACK&&r[s].hasSubtitleGroup(e))return r[s].pathwayId;return n}clonePathways(e){const i=this.levels;if(!i)return;const n={},r={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=s;if(i.some(c=>c.pathwayId===a))return;const u=this.getLevelsForPathway(o).map(c=>{const d=new Et(c.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(n[d.AUDIO]=h,d.AUDIO=h),f&&(r[d.SUBTITLES]=f,d.SUBTITLES=f);const m=n$(c.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),p=new tf({attrs:d,audioCodec:c.audioCodec,bitrate:c.bitrate,height:c.height,name:c.name,url:m,videoCodec:c.videoCodec,width:c.width});if(c.audioGroups)for(let y=1;y<c.audioGroups.length;y++)p.addGroupId("audio",`${c.audioGroups[y]}_clone_${a}`);if(c.subtitleGroups)for(let y=1;y<c.subtitleGroups.length;y++)p.addGroupId("text",`${c.subtitleGroups[y]}_clone_${a}`);return p});i.push(...u),$w(this.audioTracks,n,l,a),$w(this.subtitleTracks,r,l,a)})}loadSteeringManifest(e){const i=this.hls.config,n=i.loader;this.loader&&this.loader.destroy(),this.loader=new n(i);let r;try{r=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(r.protocol!=="data:"){const c=(this.hls.bandwidthEstimate||i.abrEwmaDefaultEstimate)|0;r.searchParams.set("_HLS_pathway",this.pathwayId),r.searchParams.set("_HLS_throughput",""+c)}const s={responseType:"json",url:r.href},a=i.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},u={onSuccess:(c,d,h,f)=>{this.log(`Loaded steering manifest: "${r}"`);const m=c.data;if((m==null?void 0:m.VERSION)!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":p,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":g}=m;if(p)try{this.uri=new self.URL(p,r).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${p}`);return}this.scheduleRefresh(this.uri||h.url),y&&this.clonePathways(y);const v={steeringManifest:m,url:r.toString()};this.hls.trigger(S.STEERING_MANIFEST_LOADED,v),g&&this.updatePathwayPriority(g)},onError:(c,d,h,f)=>{if(this.log(`Error loading steering manifest: ${c.code} ${c.text} (${d.url})`),this.stopLoad(),c.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let m=this.timeToLoad*1e3;if(c.code===429){const p=this.loader;if(typeof(p==null?void 0:p.getResponseHeader)=="function"){const y=p.getResponseHeader("Retry-After");y&&(m=parseFloat(y)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,m)},onTimeout:(c,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${r}`),this.loader.load(s,l,u)}scheduleRefresh(e,i=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const r=(n=this.hls)==null?void 0:n.media;if(r&&!r.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},i)}}function $w(t,e,i,n){t&&Object.keys(e).forEach(r=>{const s=t.filter(a=>a.groupId===r).map(a=>{const o=Qe({},a);return o.details=void 0,o.attrs=new Et(o.attrs),o.url=o.attrs.URI=n$(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",i),o.groupId=o.attrs["GROUP-ID"]=e[r],o.attrs["PATHWAY-ID"]=n,o});t.push(...s)})}function n$(t,e,i,n){const{HOST:r,PARAMS:s,[i]:a}=n;let o;e&&(o=a==null?void 0:a[e],o&&(t=o));const l=new self.URL(t);return r&&!o&&(l.host=r),s&&Object.keys(s).sort().forEach(u=>{u&&l.searchParams.set(u,s[u])}),l.href}class zu extends Kn{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=zu.CDMCleanupPromise?[zu.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=i=>{const{initDataType:n,initData:r}=i,s=`"${i.type}" event: init data type: "${n}"`;if(this.debug(s),r!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=kd(this.config));const o=a.map(RE).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=Ep(a);if(n!=="sinf"||o!==bt.FAIRPLAY){this.log(`Ignoring "${i.type}" event with init data type: "${n}" for selected key-system ${o}`);return}let l;try{const f=Xt(new Uint8Array(r)),m=MA(JSON.parse(f).sinf),p=XN(m);if(!p)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=new Uint8Array(p.subarray(8,24))}catch(f){this.warn(`${s} Failed to parse sinf: ${f}`);return}const u=pi(l),{keyIdToKeySessionPromise:c,mediaKeySessions:d}=this;let h=c[u];for(let f=0;f<d.length;f++){const m=d[f],p=m.decryptdata;if(!p.keyId)continue;const y=pi(p.keyId);if(w0(l,p.keyId)||p.uri.replace(/-/g,"").indexOf(u)!==-1){if(h=c[y],!h)continue;if(p.pssh)break;delete c[y],p.pssh=new Uint8Array(r),p.keyId=l,h=c[u]=h.then(()=>this.generateRequestWithPreferredKeySession(m,n,r,"encrypted-event-key-match")),h.catch(g=>this.handleError(g));break}}h||this.handleError(new Error(`Key ID ${u} not encountered in playlist. Key-system sessions ${d.length}.`))}).catch(a=>this.handleError(a))}},this.onWaitingForKey=i=>{this.log(`"${i.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(S.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(S.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(S.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(S.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:i,widevineLicenseUrl:n}=this.config,r=i==null?void 0:i[e];if(r)return r.licenseUrl;if(e===bt.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const i=this.getLicenseServerUrl(e);if(i===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return i}getServerCertificateUrl(e){const{drmSystems:i}=this.config,n=i==null?void 0:i[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const i=this.hls.levels,n=(a,o,l)=>!!a&&l.indexOf(a)===o,r=i.map(a=>a.audioCodec).filter(n),s=i.map(a=>a.videoCodec).filter(n);return r.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const l=u=>{const c=u.shift();this.getMediaKeysPromise(c,r,s).then(d=>a({keySystem:c,mediaKeys:d})).catch(d=>{u.length?l(u):d instanceof nn?o(d):o(new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,i){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let r=`Configured requestMediaKeySystemAccess is not a function ${n}`;return m3===null&&self.location.protocol==="http:"&&(r=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(r))}return n(e,i)}getMediaKeysPromise(e,i,n){var r;const s=jQ(e,i,n,this.config.drmSystemOptions||{});let a=this.keySystemAccessPromises[e],o=(r=a)==null?void 0:r.keySystemAccess;if(!o){this.log(`Requesting encrypted media "${e}" key-system access with config: ${tt(s)}`),o=this.requestMediaKeySystemAccess(e,s);const l=a=this.keySystemAccessPromises[e]={keySystemAccess:o};return o.catch(u=>{this.log(`Failed to obtain access to key-system "${e}": ${u}`)}),o.then(u=>{this.log(`Access for key-system "${u.keySystem}" obtained`);const c=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const d=l.mediaKeys=u.createMediaKeys().then(h=>(this.log(`Media-keys created for "${e}"`),l.hasMediaKeys=!0,c.then(f=>f?this.setMediaKeysServerCertificate(h,e,f):h)));return d.catch(h=>{this.error(`Failed to create media-keys for "${e}"}: ${h}`)}),d})}return o.then(()=>a.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:i,mediaKeys:n}){this.log(`Creating key-system session "${i}" keyId: ${pi(e.keyId||[])} keyUri: ${e.uri}`);const r=n.createSession(),s={decryptdata:e,keySystem:i,mediaKeys:n,mediaKeysSession:r,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const i=e.decryptdata;if(i.pssh){const n=this.createMediaKeySessionContext(e),r=Am(i),s="cenc";this.keyIdToKeySessionPromise[r]=this.generateRequestWithPreferredKeySession(n,s,i.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,i){const n=e.mediaKeysSession;return this.log(`Updating key-session "${n.sessionId}" for keyId ${pi(e.decryptdata.keyId||[])}
      } (data length: ${i.byteLength})`),n.update(i)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>RE(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:i,mediaKeys:n})=>this.attemptSetMediaKeys(i,n))}selectKeySystem(e){return new Promise((i,n)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:r})=>{const s=RE(r);s?i(s):n(new Error(`Unable to find format for key-system "${r}"`))}).catch(n)})}selectKeySystemFormat(e){const i=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)),this.keyFormatPromise}getKeyFormatPromise(e){const i=kd(this.config),n=e.map(Ep).filter(r=>!!r&&i.indexOf(r)!==-1);return this.selectKeySystem(n)}getKeyStatus(e){const{mediaKeySessions:i}=this;for(let n=0;n<i.length;n++){const r=fJ(e,i[n]);if(r)return r}}loadKey(e){const i=e.keyInfo.decryptdata,n=Am(i),r=this.bannedKeyIds[n];if(r||this.getKeyStatus(i)==="internal-error"){const o=Fw(r||"internal-error",i);return this.handleError(o,e.frag),Promise.reject(o)}const s=`(keyId: ${n} format: "${i.keyFormat}" method: ${i.method} uri: ${i.uri})`;this.log(`Starting session for key ${s}`);const a=this.keyIdToKeySessionPromise[n];if(!a){const o=this.getKeySystemForKeyPromise(i).then(({keySystem:l,mediaKeys:u})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${s}`),this.attemptSetMediaKeys(l,u).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:l,mediaKeys:u,decryptdata:i}))))).then(l=>{const u="cenc",c=i.pssh?i.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(l,u,c,"playlist-key")});return o.catch(l=>this.handleError(l,e.frag)),this.keyIdToKeySessionPromise[n]=o,o}return a.catch(o=>{if(o instanceof nn){const l=Ge({},o.data);this.getKeyStatus(i)==="internal-error"&&(l.decryptdata=i);const u=new nn(l,o.message);this.handleError(u,e.frag)}}),a}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,i){if(this.hls)if(e instanceof nn){i&&(e.data.frag=i);const n=e.data.decryptdata;this.error(`${e.message}${n?` (${pi(n.keyId||[])})`:""}`),this.hls.trigger(S.ERROR,e.data)}else this.error(e.message),this.hls.trigger(S.ERROR,{type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const i=Am(e),n=this.keyIdToKeySessionPromise[i];if(!n){const r=Ep(e.keyFormat),s=r?[r]:kd(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=kd(this.config)),e.length===0)throw new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${tt({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,i){if(this.mediaResolved=void 0,this.mediaKeys===i)return Promise.resolve();const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const r=Promise.all(n).then(()=>this.media?this.media.setMediaKeys(i):new Promise((s,a)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return a(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=i,this.media.setMediaKeys(i).then(s).catch(a)}}));return this.mediaKeys=i,this.setMediaKeysQueue.push(r),r.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(r),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,i,n,r){var s;const a=(s=this.config.drmSystems)==null||(s=s[e.keySystem])==null?void 0:s.generateRequest;if(a)try{const m=a.call(this.hls,i,n,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");i=m.initDataType,n=m.initData?m.initData:null,e.decryptdata.pssh=n?new Uint8Array(n):null}catch(m){if(this.warn(m.message),this.hls&&this.hls.config.debug)throw m}if(n===null)return this.log(`Skipping key-session request for "${r}" (no initData)`),Promise.resolve(e);const o=Am(e.decryptdata),l=e.decryptdata.uri;this.log(`Generating key-session request for "${r}" keyId: ${o} URI: ${l} (init data type: ${i} length: ${n.byteLength})`);const u=new $A,c=e._onmessage=m=>{const p=e.mediaKeysSession;if(!p){u.emit("error",new Error("invalid state"));return}const{messageType:y,message:g}=m;this.log(`"${y}" message event for session "${p.sessionId}" message size: ${g.byteLength}`),y==="license-request"||y==="license-renewal"?this.renewLicense(e,g).catch(v=>{u.eventNames().length?u.emit("error",v):this.handleError(v)}):y==="license-release"?e.keySystem===bt.FAIRPLAY&&this.updateKeySession(e,Q1("acknowledged")).then(()=>this.removeSession(e)).catch(v=>this.handleError(v)):this.warn(`unhandled media key message type "${y}"`)},d=(m,p)=>{p.keyStatus=m;let y;m.startsWith("usable")?u.emit("resolved"):m==="internal-error"||m==="output-restricted"||m==="output-downscaled"?y=Fw(m,p.decryptdata):m==="expired"?y=new Error(`key expired (keyId: ${o})`):m==="released"?y=new Error("key released"):m==="status-pending"||this.warn(`unhandled key status change "${m}" (keyId: ${o})`),y&&(u.eventNames().length?u.emit("error",y):this.handleError(y))},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}const y=this.getKeyStatuses(e);if(!Object.keys(y).some(T=>y[T]!=="status-pending"))return;if(y[o]==="expired"){this.log(`Expired key ${tt(y)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let v=y[o];if(v)d(v,e);else{var E;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(E=e.keyStatusTimeouts)[o]||(E[o]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const _=this.getKeyStatus(e.decryptdata);if(_&&_!=="status-pending")return this.log(`No status for keyId ${o} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${_} from other session.`),d(_,e);this.log(`key status for ${o} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),v="internal-error",d(v,e)},1e3)),this.log(`No status for keyId ${o} (${tt(y)}).`)}};Oi(e.mediaKeysSession,"message",c),Oi(e.mediaKeysSession,"keystatuseschange",h);const f=new Promise((m,p)=>{u.on("error",p),u.on("resolved",m)});return e.mediaKeysSession.generateRequest(i,n).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${o} URI: ${l}`)}).catch(m=>{throw new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_NO_SESSION,error:m,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>f).catch(m=>(u.removeAllListeners(),this.removeSession(e).then(()=>{throw m}))).then(()=>(u.removeAllListeners(),e))}getKeyStatuses(e){const i={};return e.mediaKeysSession.keyStatuses.forEach((n,r)=>{if(typeof r=="string"&&typeof n=="object"){const o=r;r=n,n=o}const s="buffer"in r?new Uint8Array(r.buffer,r.byteOffset,r.byteLength):new Uint8Array(r);if(e.keySystem===bt.PLAYREADY&&s.length===16){const o=pi(s);i[o]=n,h3(s)}const a=pi(s);n==="internal-error"&&(this.bannedKeyIds[a]=n),this.log(`key status change "${n}" for keyStatuses keyId: ${a} key-session "${e.mediaKeysSession.sessionId}"`),i[a]=n}),i}fetchServerCertificate(e){const i=this.config,n=i.loader,r=new n(i),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:s},u=i.certLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,m,p)=>{a(h.data)},onError:(h,f,m,p)=>{o(new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Ge({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,m)=>{o(new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,f,m)=>{o(new Error("aborted"))}};r.load(l,c,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,i,n){return new Promise((r,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n.byteLength}) on "${i}"`),r(e)}).catch(a=>{s(new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,i){return this.requestLicense(e,new Uint8Array(i)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(r=>{throw new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:r,fatal:!1},r.message)}))}unpackPlayReadyKeyMessage(e,i){const n=String.fromCharCode.apply(null,new Uint16Array(i.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),i;const r=new DOMParser().parseFromString(n,"application/xml"),s=r.querySelectorAll("HttpHeader");if(s.length>0){let c;for(let d=0,h=s.length;d<h;d++){var a,o;c=s[d];const f=(a=c.querySelector("name"))==null?void 0:a.textContent,m=(o=c.querySelector("value"))==null?void 0:o.textContent;f&&m&&e.setRequestHeader(f,m)}}const l=r.querySelector("Challenge"),u=l==null?void 0:l.textContent;if(!u)throw new Error("Cannot find <Challenge> in key message");return Q1(atob(u))}setupLicenseXHR(e,i,n,r){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,i,n,r)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",i,!0),s.call(this.hls,e,i,n,r)}).then(a=>(e.readyState||e.open("POST",i,!0),{xhr:e,licenseChallenge:a||r})):(e.open("POST",i,!0),Promise.resolve({xhr:e,licenseChallenge:r}))}requestLicense(e,i){const n=this.config.keyLoadPolicy.default;return new Promise((r,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const u=this.config.licenseResponseCallback;if(u)try{l=u.call(this.hls,o,a,e)}catch(c){this.error(c)}r(l)}else{const l=n.errorRetry,u=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>u||o.status>=400&&o.status<500)s(new nn({type:le.KEY_SYSTEM_ERROR,details:M.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const c=u-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${c} attempts left`),this.requestLicense(e,i).then(r,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,i).then(({xhr:l,licenseChallenge:u})=>{e.keySystem==bt.PLAYREADY&&(u=this.unpackPlayReadyKeyMessage(l,u)),l.send(u)}).catch(s)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,i){if(!this.config.emeEnabled)return;const n=i.media;this.media=n,Oi(n,"encrypted",this.onMediaEncrypted),Oi(n,"waitingforkey",this.onWaitingForKey);const r=this.mediaResolved;r?r():this.mediaKeys=n.mediaKeys}onMediaDetached(){const e=this.media;e&&(Wi(e,"encrypted",this.onMediaEncrypted),Wi(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const i=this.mediaResolved;if(i&&i(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const n=this.media,r=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,Ka.clearKeyUriToKeyIdMap();const s=r.length;zu.CDMCleanupPromise=Promise.all(r.map(a=>this.removeSession(a)).concat((n==null||(e=n.setMediaKeys(null))==null?void 0:e.catch(a=>{this.log(`Could not clear media keys: ${a}`),this.hls&&this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${a}`)})}))||Promise.resolve())).catch(a=>{this.log(`Could not close sessions and clear media keys: ${a}`),this.hls&&this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${a}`)})}).then(()=>{s&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:i}){if(!(!i||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=i.reduce((r,s)=>(r.indexOf(s.keyFormat)===-1&&r.push(s.keyFormat),r),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:i,licenseXhr:n,decryptdata:r}=e;if(i){this.log(`Remove licenses and keys and close session "${i.sessionId}" keyId: ${pi((r==null?void 0:r.keyId)||[])}`),e._onmessage&&(i.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(i.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const s=this.mediaKeySessions.indexOf(e);s>-1&&this.mediaKeySessions.splice(s,1);const{keyStatusTimeouts:a}=e;a&&Object.keys(a).forEach(u=>self.clearTimeout(a[u]));const{drmSystemOptions:o}=this.config;return(qQ(o)?new Promise((u,c)=>{self.setTimeout(()=>c(new Error("MediaKeySession.remove() timeout")),8e3),i.remove().then(u).catch(c)}):Promise.resolve()).catch(u=>{this.log(`Could not remove session: ${u}`),this.hls&&this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${u}`)})}).then(()=>i.close()).catch(u=>{this.log(`Could not close session: ${u}`),this.hls&&this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${u}`)})})}return Promise.resolve()}}zu.CDMCleanupPromise=void 0;function Am(t){if(!t)throw new Error("Could not read keyId of undefined decryptdata");if(t.keyId===null)throw new Error("keyId is null");return pi(t.keyId)}function fJ(t,e){if(t.keyId&&e.mediaKeysSession.keyStatuses.has(t.keyId))return e.mediaKeysSession.keyStatuses.get(t.keyId);if(t.matches(e.decryptdata))return e.keyStatus}class nn extends Error{constructor(e,i){super(i),this.data=void 0,e.error||(e.error=new Error(i)),this.data=e,e.err=e.error}}function Fw(t,e){const i=t==="output-restricted",n=i?M.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:M.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new nn({type:le.KEY_SYSTEM_ERROR,details:n,fatal:!1,decryptdata:e},i?"HDCP level output restricted":`key status changed to "${t}"`)}class mJ{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(S.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(S.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,i){const n=this.hls.config;if(n.capLevelOnFPSDrop){const r=i.media instanceof self.HTMLVideoElement?i.media:null;this.media=r,r&&typeof r.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,i,n){const r=performance.now();if(i){if(this.lastTime){const s=r-this.lastTime,a=n-this.lastDroppedFrames,o=i-this.lastDecodedFrames,l=1e3*a/s,u=this.hls;if(u.trigger(S.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),l>0&&a>u.config.fpsDroppedMonitoringThreshold*o){let c=u.currentLevel;u.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+c),c>0&&(u.autoLevelCapping===-1||u.autoLevelCapping>=c)&&(c=c-1,u.trigger(S.FPS_DROP_LEVEL_CAPPING,{level:c,droppedLevel:u.currentLevel}),u.autoLevelCapping=c,this.streamController.nextLevelSwitch())}}this.lastTime=r,this.lastDroppedFrames=n,this.lastDecodedFrames=i}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const i=e.getVideoPlaybackQuality();this.checkFPS(e,i.totalVideoFrames,i.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function r$(t,e){let i;try{i=new Event("addtrack")}catch{i=document.createEvent("Event"),i.initEvent("addtrack",!1,!1)}i.track=t,e.dispatchEvent(i)}function s$(t,e){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues&&!t.cues.getCueById(e.id))try{if(t.addCue(e),!t.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){We.debug(`[texttrack-utils]: ${n}`);try{const r=new self.TextTrackCue(e.startTime,e.endTime,e.text);r.id=e.id,t.addCue(r)}catch(r){We.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${r}`)}}i==="disabled"&&(t.mode=i)}function Du(t,e){const i=t.mode;if(i==="disabled"&&(t.mode="hidden"),t.cues)for(let n=t.cues.length;n--;)e&&t.cues[n].removeEventListener("enter",e),t.removeCue(t.cues[n]);i==="disabled"&&(t.mode=i)}function sb(t,e,i,n){const r=t.mode;if(r==="disabled"&&(t.mode="hidden"),t.cues&&t.cues.length>0){const s=gJ(t.cues,e,i);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&t.removeCue(s[a])}r==="disabled"&&(t.mode=r)}function pJ(t,e){if(e<=t[0].startTime)return 0;const i=t.length-1;if(e>t[i].endTime)return-1;let n=0,r=i,s;for(;n<=r;)if(s=Math.floor((r+n)/2),e<t[s].startTime)r=s-1;else if(e>t[s].startTime&&n<i)n=s+1;else return s;return t[n].startTime-e<e-t[r].startTime?n:r}function gJ(t,e,i){const n=[],r=pJ(t,e);if(r>-1)for(let s=r,a=t.length;s<a;s++){const o=t[s];if(o.startTime>=e&&o.endTime<=i)n.push(o);else if(o.startTime>i)return n}return n}function _p(t){const e=[];for(let i=0;i<t.length;i++){const n=t[i];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(t[i])}return e}class vJ extends GA{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let i=null;const n=_p(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")i=n[s];else if(n[s].mode==="showing"){i=n[s];break}const r=this.findTrackForTextTrack(i);this.subtitleTrack!==r&&this.setSubtitleTrack(r)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.ERROR,this.onError,this)}onMediaAttached(e,i){this.media=i.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,i){const n=this.media;if(!n)return;const r=!!i.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||n.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,r)return;_p(n.textTracks).forEach(a=>{Du(a)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,i){this.tracks=i.subtitleTracks}onSubtitleTrackLoaded(e,i){const{id:n,groupId:r,details:s}=i,a=this.tracksInGroup[n];if(!a||a.groupId!==r){this.warn(`Subtitle track with id:${n} and group:${r} not found in active group ${a==null?void 0:a.groupId}`);return}const o=a.details;a.details=i.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${r} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,i,o)}onLevelLoading(e,i){this.switchLevel(i.level)}onLevelSwitching(e,i){this.switchLevel(i.level)}switchLevel(e){const i=this.hls.levels[e];if(!i)return;const n=i.subtitleGroups||null,r=this.groupIds;let s=this.currentTrack;if(!n||(r==null?void 0:r.length)!==(n==null?void 0:n.length)||n!=null&&n.some(a=>(r==null?void 0:r.indexOf(a))===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(c=>!n||n.indexOf(c.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(c=>c.default)&&(this.selectDefaultTrack=!1),a.forEach((c,d)=>{c.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const c=Wr(o,a);if(c>-1)s=a[c];else{const d=Wr(o,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const u={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n==null?void 0:n.join(",")}" group-id`),this.hls.trigger(S.SUBTITLE_TRACKS_UPDATED,u),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}}findTrackId(e){const i=this.tracksInGroup,n=this.selectDefaultTrack;for(let r=0;r<i.length;r++){const s=i[r];if(!(n&&!s.default||!n&&!e)&&(!e||Xo(s,e)))return r}if(e){for(let r=0;r<i.length;r++){const s=i[r];if(af(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return r}for(let r=0;r<i.length;r++){const s=i[r];if(af(e.attrs,s.attrs,["LANGUAGE"]))return r}}return-1}findTrackForTextTrack(e){if(e){const i=this.tracksInGroup;for(let n=0;n<i.length;n++){const r=i[n];if(tb(r,e))return n}}return-1}onError(e,i){i.fatal||!i.context||i.context.type===ke.SUBTITLE_TRACK&&i.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(i.context.groupId)!==-1)&&this.checkRetry(i)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const i=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,i.length){const n=this.currentTrack;if(n&&Xo(e,n))return n;const r=Wr(e,this.tracksInGroup);if(r>-1){const s=this.tracksInGroup[r];return this.setSubtitleTrack(r),s}else{if(n)return null;{const s=Wr(e,i);if(s>-1)return i[s]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=e.id,r=e.groupId,s=this.getUrlWithDirectives(e.url,i),a=e.details,o=a==null?void 0:a.age;this.log(`Loading subtitle ${n} "${e.name}" lang:${e.lang} group:${r}${(i==null?void 0:i.msn)!==void 0?" at sn "+i.msn+" part "+i.part:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${s}`),this.hls.trigger(S.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:r,deliveryDirectives:i||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const i=_p(e.textTracks),n=this.currentTrack;let r;if(n&&(r=i.filter(s=>tb(n,s))[0],r||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(i).forEach(s=>{s.mode!=="disabled"&&s!==r&&(s.mode="disabled")}),r){const s=this.subtitleDisplay?"showing":"hidden";r.mode!==s&&(r.mode=s)}}setSubtitleTrack(e){const i=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=i.length||!te(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const n=this.currentTrack,r=i[e]||null;if(this.trackId=e,this.currentTrack=r,this.toggleTrackModes(),!r){this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!r.details&&!r.details.live;if(e===this.trackId&&r===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(r?` "${r.name}" lang:${r.lang} group:${r.groupId}`:""));const{id:a,groupId:o="",name:l,type:u,url:c}=r;this.hls.trigger(S.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:u,url:c});const d=this.switchParams(r.url,n==null?void 0:n.details,r.details);this.loadPlaylist(d)}}function yJ(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),i=e.toString();return URL.revokeObjectURL(e),i.slice(i.lastIndexOf("/")+1)}catch{let i=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const s=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(r=="x"?s:s&3|8).toString(16)})}}}function mh(t){let e=5381,i=t.length;for(;i;)e=e*33^t.charCodeAt(--i);return(e>>>0).toString()}const Qu=.025;let O0=function(t){return t[t.Point=0]="Point",t[t.Range=1]="Range",t}({});function EJ(t,e,i){return`${t.identifier}-${i+1}-${mh(e)}`}class TJ{constructor(e,i){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=i,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var i;if(e>0&&e>=this.assetList.length)return!0;const n=this.playoutLimit;return e<=0||isNaN(n)?!1:n===0?!0:(((i=this.assetList[e])==null?void 0:i.startOffset)||0)>n}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const i=this.dateRange.tagAnchor;if(i)return FE(e,i)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const i=this.dateRange.startTime,n=FE(i,e);return i-n<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,i=te(e)?e:this.duration;return this.cumulativeDuration+i}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const i=this.resumeAnchor;if(i)return FE(e,i)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<Qu))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let i;return this._duration!==null?i=this._duration:this.dateRange.duration?i=this.dateRange.duration:i=this.dateRange.plannedDuration||0,!isNaN(e)&&e<i&&(i=e),i}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?O0.Range:O0.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return bJ(this)}}function FE(t,e){return t-e.start<e.duration/2&&!(Math.abs(t-(e.start+e.duration))<Qu)?e.start:e.start+e.duration}function a$(t,e,i){const n=new self.URL(t,i);return n.protocol!=="data:"&&n.searchParams.set("_HLS_primary_id",e),n}function UE(t,e){for(;(i=t.assetList[++e])!=null&&i.error;)var i;return e}function bJ(t){return`["${t.identifier}" ${t.cue.pre?"<pre>":t.cue.post?"<post>":""}${t.timelineStart.toFixed(2)}-${t.resumeTime.toFixed(2)}]`}function Gl(t){const e=t.timelineStart,i=t.duration||0;return`["${t.identifier}" ${e.toFixed(2)}-${(e+i).toFixed(2)}]`}class SJ{constructor(e,i,n,r){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(S.PLAYOUT_LIMIT_REACHED,{})};const s=this.hls=new e(i);this.interstitial=n,this.assetItem=r;const a=()=>{this.hasDetails=!0};s.once(S.LEVEL_LOADED,a),s.once(S.AUDIO_TRACK_LOADED,a),s.once(S.SUBTITLE_TRACK_LOADED,a),s.on(S.MEDIA_ATTACHING,(o,{media:l})=>{this.removeMediaListeners(),this.mediaAttached=l,this.interstitial.playoutLimit&&(l.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&s.on(S.BUFFER_APPENDED,()=>{const c=this.bufferedEnd;this.reachedPlayout(c)&&(this._bufferedEosTime=c,s.trigger(S.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let i=this.assetItem.uri;try{i=a$(i,e.config.primarySessionId||"").href}catch{}e.loadSource(i)}}bufferedInPlaceToEnd(e){var i;if(!this.appendInPlace)return!1;if((i=this.hls)!=null&&i.bufferedToEnd)return!0;if(!e)return!1;const n=Math.min(this._bufferedEosTime||1/0,this.duration),r=this.timelineOffset,s=be.bufferInfo(e,r,0);return this.getAssetTime(s.end)>=n-.02}reachedPlayout(e){const n=this.interstitial.playoutLimit;return this.startOffset+e>=n}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const i=be.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(i.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const i=this.interstitial.playoutLimit;if(i){const n=i-this.startOffset;if(n>0&&n<e)return n}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const i=this.timelineOffset;if(e!==i){const n=e-i;if(Math.abs(n)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const i=this.timelineOffset,n=this.duration;return Math.min(Math.max(0,e-i),n)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var i;this.loadSource(),(i=this.hls)==null||i.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const i=n=>delete n.details;e.levels.forEach(i),e.allAudioTracks.forEach(i),e.allSubtitleTracks.forEach(i),this.hasDetails=!1}}on(e,i,n){var r;(r=this.hls)==null||r.on(e,i)}once(e,i,n){var r;(r=this.hls)==null||r.once(e,i)}off(e,i,n){var r;(r=this.hls)==null||r.off(e,i)}toString(){var e;return`HlsAssetPlayer: ${Gl(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const Uw=.033;class _J extends Kn{constructor(e,i){super("interstitials-sched",i),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,i){return this.events?this.events.reduce((n,r)=>e<=r.startOffset&&i>r.startOffset?(delete r.error,n+1):n,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,i){if(e.event)return this.findEventIndex(e.event.identifier);let n=-1;e.nextEvent?n=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(n=this.findEventIndex(e.previousEvent.identifier)+1);const r=this.items;if(r)for(r[n]||(i===void 0&&(i=e.start),n=this.findItemIndexAtTime(i));n>=0&&(s=r[n])!=null&&s.event;){var s;n--}return n}findItemIndexAtTime(e,i){const n=this.items;if(n)for(let r=0;r<n.length;r++){let s=n[r];if(i&&i!=="primary"&&(s=s[i]),e===s.start||e>s.start&&e<s.end)return r}return-1}findJumpRestrictedIndex(e,i){const n=this.items;if(n)for(let r=e;r<=i&&n[r];r++){const s=n[r].event;if(s!=null&&s.restrictions.jump&&!s.appendInPlace)return r}return-1}findEventIndex(e){const i=this.items;if(i)for(let r=i.length;r--;){var n;if(((n=i[r].event)==null?void 0:n.identifier)===e)return r}return-1}findAssetIndex(e,i){const n=e.assetList,r=n.length;if(r>1)for(let s=0;s<r;s++){const a=n[s];if(!a.error){const o=a.timelineStart;if(i===o||i>o&&(i<o+(a.duration||0)||s===r-1))return s}}return 0}get assetIdAtEnd(){var e;const i=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(i){const n=i.assetList,r=n[n.length-1];if(r)return r.identifier}return null}parseInterstitialDateRanges(e,i){const n=e.main.details,{dateRanges:r}=n,s=this.events,a=this.parseDateRanges(r,{url:n.url},i),o=Object.keys(r),l=s?s.filter(u=>!o.includes(u.identifier)):[];a.length&&a.sort((u,c)=>{const d=u.cue.pre,h=u.cue.post,f=c.cue.pre,m=c.cue.post;if(d&&!f)return-1;if(f&&!d||h&&!m)return 1;if(m&&!h)return-1;if(!d&&!f&&!h&&!m){const p=u.startTime,y=c.startTime;if(p!==y)return p-y}return u.dateRange.tagOrder-c.dateRange.tagOrder}),this.events=a,l.forEach(u=>{this.removeEvent(u)}),this.updateSchedule(e,l)}updateSchedule(e,i=[],n=!1){const r=this.events||[];if(r.length||i.length||this.length<2){const s=this.items,a=this.parseSchedule(r,e);(n||i.length||(s==null?void 0:s.length)!==a.length||a.some((l,u)=>Math.abs(l.playout.start-s[u].playout.start)>.005||Math.abs(l.playout.end-s[u].playout.end)>.005))&&(this.items=a,this.onScheduleUpdate(i,s))}}parseDateRanges(e,i,n){const r=[],s=Object.keys(e);for(let a=0;a<s.length;a++){const o=s[a],l=e[o];if(l.isInterstitial){let u=this.eventMap[o];u?u.setDateRange(l):(u=new TJ(l,i),this.eventMap[o]=u,n===!1&&(u.appendInPlace=n)),r.push(u)}}return r}parseSchedule(e,i){const n=[],r=i.main.details,s=r.live?1/0:r.edge;let a=0;if(e=e.filter(l=>!l.error&&!(l.cue.once&&l.hasPlayed)),e.length){this.resolveOffsets(e,i);let l=0,u=0;if(e.forEach((c,d)=>{const h=c.cue.pre,f=c.cue.post,m=e[d-1]||null,p=c.appendInPlace,y=f?s:c.startOffset,g=c.duration,v=c.timelineOccupancy===O0.Range?g:0,E=c.resumptionOffset,T=(m==null?void 0:m.startTime)===y,_=y+c.cumulativeDuration;let x=p?_+g:y+E;if(h||!f&&y<=0){const I=u;u+=v,c.timelineStart=_;const L=a;a+=g,n.push({event:c,start:_,end:x,playout:{start:L,end:a},integrated:{start:I,end:u}})}else if(y<=s){if(!T){const b=y-l;if(b>Uw){const R=l,P=u;u+=b;const w=a;a+=b;const $={previousEvent:e[d-1]||null,nextEvent:c,start:R,end:R+b,playout:{start:w,end:a},integrated:{start:P,end:u}};n.push($)}else b>0&&m&&(m.cumulativeDuration+=b,n[n.length-1].end=y)}f&&(x=_),c.timelineStart=_;const I=u;u+=v;const L=a;a+=g,n.push({event:c,start:_,end:x,playout:{start:L,end:a},integrated:{start:I,end:u}})}else return;const A=c.resumeTime;f||A>s?l=s:l=A}),l<s){var o;const c=l,d=u,h=s-l;u+=h;const f=a;a+=h,n.push({previousEvent:((o=n[n.length-1])==null?void 0:o.event)||null,nextEvent:null,start:l,end:c+h,playout:{start:f,end:a},integrated:{start:d,end:u}})}this.setDurations(s,a,u)}else n.push({previousEvent:null,nextEvent:null,start:0,end:s,playout:{start:0,end:s},integrated:{start:0,end:s}}),this.setDurations(s,s,s);return n}setDurations(e,i,n){this.durations={primary:e,playout:i,integrated:n}}resolveOffsets(e,i){const n=i.main.details,r=n.live?1/0:n.edge;let s=0,a=-1;e.forEach((o,l)=>{const u=o.cue.pre,c=o.cue.post,d=u?0:c?r:o.startTime;this.updateAssetDurations(o),a===d?o.cumulativeDuration=s:(s=0,a=d),!c&&o.snapOptions.in&&(o.resumeAnchor=hl(null,n.fragments,o.startOffset+o.resumptionOffset,0,0)||void 0),o.appendInPlace&&!o.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(o,i)||(o.appendInPlace=!1)),!o.appendInPlace&&l+1<e.length&&e[l+1].startTime-e[l].resumeTime<Uw&&(e[l+1].appendInPlace=!1,e[l+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${o}`));const f=te(o.resumeOffset)?o.resumeOffset:o.duration;s+=f})}primaryCanResumeInPlaceAt(e,i){const n=e.resumeTime,r=e.startTime+e.resumptionOffset;return Math.abs(n-r)>Qu?(this.log(`"${e.identifier}" resumption ${n} not aligned with estimated timeline end ${r}`),!1):!Object.keys(i).some(a=>{const o=i[a].details,l=o.edge;if(n>=l)return this.log(`"${e.identifier}" resumption ${n} past ${a} playlist end ${l}`),!1;const u=hl(null,o.fragments,n);if(!u)return this.log(`"${e.identifier}" resumption ${n} does not align with any fragments in ${a} playlist (${o.fragStart}-${o.fragmentEnd})`),!0;const c=a==="audio"?.175:0;return Math.abs(u.start-n)<Qu+c||Math.abs(u.end-n)<Qu+c?!1:(this.log(`"${e.identifier}" resumption ${n} not aligned with ${a} fragment bounds (${u.start}-${u.end} sn: ${u.sn} cc: ${u.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const i=e.timelineStart;let n=0,r=!1,s=!1;for(let a=0;a<e.assetList.length;a++){const o=e.assetList[a],l=i+n;o.startOffset=n,o.timelineStart=l,r||(r=o.duration===null),s||(s=!!o.error);const u=o.error?0:o.duration||0;n+=u}r&&!s?e.duration=Math.max(n,e.duration):e.duration=n}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function qn(t){return`[${t.event?'"'+t.event.identifier+'"':"primary"}: ${t.start.toFixed(2)}-${t.end.toFixed(2)}]`}class AJ{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,i){const n=e.assetListUrl;let r;try{r=a$(n,this.hls.sessionId,e.baseUrl)}catch(h){const f=this.assignAssetListError(e,M.ASSET_LIST_LOAD_ERROR,h,n);this.hls.trigger(S.ERROR,f);return}i&&r.protocol!=="data:"&&r.searchParams.set("_HLS_start_offset",""+i);const s=this.hls.config,a=s.loader,o=new a(s),l={responseType:"json",url:r.href},u=s.interstitialAssetListLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,m,p)=>{const y=h.data,g=y==null?void 0:y.ASSETS;if(!Array.isArray(g)){const v=this.assignAssetListError(e,M.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),m.url,f,p);this.hls.trigger(S.ERROR,v);return}e.assetListResponse=y,this.hls.trigger(S.ASSET_LIST_LOADED,{event:e,assetListResponse:y,networkDetails:p})},onError:(h,f,m,p)=>{const y=this.assignAssetListError(e,M.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${h.code} ${h.text} (${f.url})`),f.url,p,m);this.hls.trigger(S.ERROR,y)},onTimeout:(h,f,m)=>{const p=this.assignAssetListError(e,M.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${f.url})`),f.url,h,m);this.hls.trigger(S.ERROR,p)}};return o.load(l,c,d),this.hls.trigger(S.ASSET_LIST_LOADING,{event:e}),o}assignAssetListError(e,i,n,r,s,a){return e.error=n,{type:le.NETWORK_ERROR,details:i,fatal:!1,interstitial:e,url:r,error:n,networkDetails:a,stats:s}}}function Bw(t){var e;t==null||(e=t.play())==null||e.catch(()=>{})}function xm(t,e){return`[${t}] Advancing timeline position to ${e}`}class xJ extends Kn{constructor(e,i){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled||!this.schedule)return;const r=n-this.timelinePos;if(Math.abs(r)<1/7056e5)return;const a=r<=-.01;this.timelinePos=n,this.bufferedPos=n;const o=this.playingItem;if(!o){this.checkBuffer();return}if(a&&this.schedule.resetErrorsInRange(n,n-r)&&this.updateSchedule(!0),this.checkBuffer(),a&&n<o.start||n>=o.end){var l;const f=this.findItemIndex(o);let m=this.schedule.findItemIndexAtTime(n);if(m===-1&&(m=f+(a?-1:1),this.log(`seeked ${a?"back ":""}to position not covered by schedule ${n} (resolving from ${f} to ${m})`)),!this.isInterstitial(o)&&(l=this.media)!=null&&l.paused&&(this.shouldPlay=!1),!a&&m>f){const p=this.schedule.findJumpRestrictedIndex(f+1,m);if(p>f){this.setSchedulePosition(p);return}}this.setSchedulePosition(m);return}const u=this.playingAsset;if(!u){if(this.playingLastItem&&this.isInterstitial(o)){const f=o.event.assetList[0];f&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(n,f))}return}const c=u.timelineStart,d=u.duration||0;if(a&&n<c||n>=c+d){var h;(h=o.event)!=null&&h.appendInPlace&&(this.clearAssetPlayers(o.event,o),this.flushFrontBuffer(n)),this.setScheduleToAssetAtTime(n,u)}},this.onTimeupdate=()=>{const n=this.currentTime;if(n===void 0||this.playbackDisabled)return;if(n>this.timelinePos)this.timelinePos=n,n>this.bufferedPos&&this.checkBuffer();else return;const r=this.playingItem;if(!r||this.playingLastItem)return;if(n>=r.end){this.timelinePos=r.end;const o=this.findItemIndex(r);this.setSchedulePosition(o+1)}const s=this.playingAsset;if(!s)return;const a=s.timelineStart+(s.duration||0);n>=a&&this.setScheduleToAssetAtTime(n,s)},this.onScheduleUpdate=(n,r)=>{const s=this.schedule;if(!s)return;const a=this.playingItem,o=s.events||[],l=s.items||[],u=s.durations,c=n.map(p=>p.identifier),d=!!(o.length||c.length);(d||r)&&this.log(`INTERSTITIALS_UPDATED (${o.length}): ${o}
Schedule: ${l.map(p=>qn(p))} pos: ${this.timelinePos}`),c.length&&this.log(`Removed events ${c}`);let h=null,f=null;a&&(h=this.updateItem(a,this.timelinePos),this.itemsMatch(a,h)?this.playingItem=h:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const m=this.bufferingItem;if(m&&(f=this.updateItem(m,this.bufferedPos),this.itemsMatch(m,f)?this.bufferingItem=f:m.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(m.event,null))),n.forEach(p=>{p.assetList.forEach(y=>{this.clearAssetPlayer(y.identifier,null)})}),this.playerQueue.forEach(p=>{if(p.interstitial.appendInPlace){const y=p.assetItem.timelineStart,g=p.timelineOffset-y;if(g)try{p.timelineOffset=y}catch(v){Math.abs(g)>Qu&&this.warn(`${v} ("${p.assetId}" ${p.timelineOffset}->${y})`)}}}),d||r){if(this.hls.trigger(S.INTERSTITIALS_UPDATED,{events:o.slice(0),schedule:l.slice(0),durations:u,removedIds:c}),this.isInterstitial(a)&&c.includes(a.event.identifier)){this.warn(`Interstitial "${a.event.identifier}" removed while playing`),this.primaryFallback(a.event);return}a&&this.trimInPlace(h,a),m&&f!==h&&this.trimInPlace(f,m),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=i,this.assetListLoader=new AJ(e),this.schedule=new _J(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(S.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(S.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(S.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(S.BUFFER_APPENDED,this.onBufferAppended,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(S.MEDIA_ENDED,this.onMediaEnded,this),e.on(S.ERROR,this.onError,this),e.on(S.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(S.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(S.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(S.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(S.BUFFER_CODECS,this.onBufferCodecs,this),e.off(S.BUFFER_APPENDED,this.onBufferAppended,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(S.MEDIA_ENDED,this.onMediaEnded,this),e.off(S.ERROR,this.onError,this),e.off(S.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){Wi(e,"play",this.onPlay),Wi(e,"pause",this.onPause),Wi(e,"seeking",this.onSeeking),Wi(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,i){const n=this.media=i.media;Oi(n,"seeking",this.onSeeking),Oi(n,"timeupdate",this.onTimeupdate),Oi(n,"play",this.onPlay),Oi(n,"pause",this.onPause)}onMediaAttached(e,i){const n=this.effectivePlayingItem,r=this.detachedData;if(this.detachedData=null,n===null)this.checkStart();else if(!r){this.clearScheduleState();const s=this.findItemIndex(n);this.setSchedulePosition(s)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,i){const n=!!i.transferMedia,r=this.media;if(this.media=null,!n&&(r&&this.removeMediaListeners(r),this.detachedData)){const s=this.getBufferingPlayer();s&&(this.log(`Removing schedule state for detachedData and ${s}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,s.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,i=()=>e.bufferingItem||e.waitingItem,n=d=>d&&e.getAssetPlayer(d.identifier),r=(d,h,f,m,p)=>{if(d){let y=d[h].start;const g=d.event;if(g){if(h==="playout"||g.timelineOccupancy!==O0.Point){const v=n(f);(v==null?void 0:v.interstitial)===g&&(y+=v.assetItem.startOffset+v[p])}}else{const v=m==="bufferedPos"?a():e[m];y+=v-d.start}return y}return 0},s=(d,h)=>{var f;if(d!==0&&h!=="primary"&&(f=e.schedule)!=null&&f.length){var m;const p=e.schedule.findItemIndexAtTime(d),y=(m=e.schedule.items)==null?void 0:m[p];if(y){const g=y[h].start-y.start;return d+g}}return d},a=()=>{const d=e.bufferedPos;return d===Number.MAX_VALUE?o("primary"):Math.max(d,0)},o=d=>{var h,f;return(h=e.primaryDetails)!=null&&h.live?e.primaryDetails.edge:((f=e.schedule)==null?void 0:f.durations[d])||0},l=(d,h)=>{var f,m;const p=e.effectivePlayingItem;if(p!=null&&(f=p.event)!=null&&f.restrictions.skip||!e.schedule)return;e.log(`seek to ${d} "${h}"`);const y=e.effectivePlayingItem,g=e.schedule.findItemIndexAtTime(d,h),v=(m=e.schedule.items)==null?void 0:m[g],E=e.getBufferingPlayer(),T=E==null?void 0:E.interstitial,_=T==null?void 0:T.appendInPlace,x=y&&e.itemsMatch(y,v);if(y&&(_||x)){const A=n(e.playingAsset),I=(A==null?void 0:A.media)||e.primaryMedia;if(I){const L=h==="primary"?I.currentTime:r(y,h,e.playingAsset,"timelinePos","currentTime"),b=d-L,R=(_?L:I.currentTime)+b;if(R>=0&&(!A||_||R<=A.duration)){I.currentTime=R;return}}}if(v){let A=d;if(h!=="primary"){const L=v[h].start,b=d-L;A=v.start+b}const I=!e.isInterstitial(v);if((!e.isInterstitial(y)||y.event.appendInPlace)&&(I||v.event.appendInPlace)){const L=e.media||(_?E==null?void 0:E.media:null);L&&(L.currentTime=A)}else if(y){const L=e.findItemIndex(y);if(g>L){const R=e.schedule.findJumpRestrictedIndex(L+1,g);if(R>L){e.setSchedulePosition(R);return}}let b=0;if(I)e.timelinePos=A,e.checkBuffer();else{const R=v.event.assetList,P=d-(v[h]||v).start;for(let w=R.length;w--;){const $=R[w];if($.duration&&P>=$.startOffset&&P<$.startOffset+$.duration){b=w;break}}}e.setSchedulePosition(g,b)}}},u=()=>{const d=e.effectivePlayingItem;if(e.isInterstitial(d))return d;const h=i();return e.isInterstitial(h)?h:null},c={get bufferedEnd(){const d=i(),h=e.bufferingItem;if(h&&h===d){var f;return r(h,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-h.playout.start||((f=e.bufferingAsset)==null?void 0:f.startOffset)||0}return 0},get currentTime(){const d=u(),h=e.effectivePlayingItem;return h&&h===d?r(h,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-h.playout.start:0},set currentTime(d){const h=u(),f=e.effectivePlayingItem;f&&f===h&&l(d+f.playout.start,"playout")},get duration(){const d=u();return d?d.playout.end-d.playout.start:0},get assetPlayers(){var d;const h=(d=u())==null?void 0:d.event.assetList;return h?h.map(f=>e.getAssetPlayer(f.identifier)):[]},get playingIndex(){var d;const h=(d=u())==null?void 0:d.event;return h&&e.effectivePlayingAsset?h.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return u()}};return this.manager={get events(){var d;return((d=e.schedule)==null||(d=d.events)==null?void 0:d.slice(0))||[]},get schedule(){var d;return((d=e.schedule)==null||(d=d.items)==null?void 0:d.slice(0))||[]},get interstitialPlayer(){return u()?c:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return i()},get bufferingIndex(){const d=i();return e.findItemIndex(d)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const d=e.effectivePlayingItem;return e.findItemIndex(d)},primary:{get bufferedEnd(){return a()},get currentTime(){const d=e.timelinePos;return d>0?d:0},set currentTime(d){l(d,"primary")},get duration(){return o("primary")},get seekableStart(){var d;return((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0}},integrated:{get bufferedEnd(){return r(i(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return r(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(d){l(d,"integrated")},get duration(){return o("integrated")},get seekableStart(){var d;return s(((d=e.primaryDetails)==null?void 0:d.fragmentStart)||0,"integrated")}},skip:()=>{const d=e.effectivePlayingItem,h=d==null?void 0:d.event;if(h&&!h.restrictions.skip){const f=e.findItemIndex(d);if(h.appendInPlace){const m=d.playout.start+d.event.duration;l(m+.001,"playout")}else e.advanceAfterAssetEnded(h,f,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const i=this.playingItem,n=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!i||!n?!1:this.findItemIndex(i)===n.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,i;if(this.mediaSelection===null)return;const n=this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&!n.event.appendInPlace)return;let r=this.media;!r&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(r=this.primaryMedia);const s=(i=r)==null?void 0:i.currentTime;if(!(s===void 0||!te(s)))return s}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,i){const n=this.getAssetPlayer(e);n&&this.transferMediaFromPlayer(n,i)}transferMediaFromPlayer(e,i){const n=e.interstitial.appendInPlace,r=e.media;if(n&&r===this.primaryMedia){if(this.bufferingAsset=null,(!i||this.isInterstitial(i)&&!i.event.appendInPlace)&&i&&r){this.detachedData={media:r};return}const s=e.transferMedia();this.log(`transfer MediaSource from ${e} ${tt(s)}`),this.detachedData=s}else i&&r&&(this.shouldPlay||(this.shouldPlay=!r.paused))}transferMediaTo(e,i){var n,r;if(e.media===i)return;let s=null;const a=this.hls,o=e!==a,l=o&&e.interstitial.appendInPlace,u=(n=this.detachedData)==null?void 0:n.mediaSource;let c;if(a.media)l&&(s=a.transferMedia(),this.detachedData=s),c="Primary";else if(u){const m=this.getBufferingPlayer();m?(s=m.transferMedia(),c=`${m}`):c="detached MediaSource"}else c="detached media";if(!s){if(u)s=this.detachedData,this.log(`using detachedData: MediaSource ${tt(s)}`);else if(!this.detachedData||a.media===i){const m=this.playerQueue;m.length>1&&m.forEach(p=>{if(o&&p.interstitial.appendInPlace!==l){const y=p.interstitial;this.clearInterstitial(p.interstitial,null),y.appendInPlace=!1,y.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${y}`)}}),this.hls.detachMedia(),this.detachedData={media:i}}}const d=s&&"mediaSource"in s&&((r=s.mediaSource)==null?void 0:r.readyState)!=="closed",h=d&&s?s:i;this.log(`${d?"transfering MediaSource":"attaching media"} to ${o?e:"Primary"} from ${c} (media.currentTime: ${i.currentTime})`);const f=this.schedule;if(h===s&&f){const m=o&&e.assetId===f.assetIdAtEnd;h.overrides={duration:f.duration,endOfStream:!o||m,cueRemoval:!o}}e.attachMedia(h)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,i=e==null?void 0:e.events;if(!i||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const n=this.timelinePos,r=this.effectivePlayingItem;if(n===-1){const s=this.hls.startPosition;if(this.log(xm("checkStart",s)),this.timelinePos=s,i.length&&i[0].cue.pre){const a=e.findEventIndex(i[0].identifier);this.setSchedulePosition(a)}else if(s>=0||!this.primaryLive){const a=this.timelinePos=s>0?s:0,o=e.findItemIndexAtTime(a);this.setSchedulePosition(o)}}else if(r&&!this.playingItem){const s=e.findItemIndex(r);this.setSchedulePosition(s)}}advanceAssetBuffering(e,i){const n=e.event,r=n.findAssetIndex(i),s=UE(n,r);if(!n.isAssetPastPlayoutLimit(s))this.bufferedToEvent(e,s);else if(this.schedule){var a;const o=(a=this.schedule.items)==null?void 0:a[this.findItemIndex(e)+1];o&&this.bufferedToItem(o)}}advanceAfterAssetEnded(e,i,n){const r=UE(e,n);if(e.isAssetPastPlayoutLimit(r)){if(this.schedule){const s=this.schedule.items;if(s){const a=i+1,o=s.length;if(a>=o){this.setSchedulePosition(-1);return}const l=e.resumeTime;this.timelinePos<l&&(this.log(xm("advanceAfterAssetEnded",l)),this.timelinePos=l,e.appendInPlace&&this.advanceInPlace(l),this.checkBuffer(this.bufferedPos<l)),this.setSchedulePosition(a)}}}else{if(e.appendInPlace){const s=e.assetList[r];s&&this.advanceInPlace(s.timelineStart)}this.setSchedulePosition(i,r)}}setScheduleToAssetAtTime(e,i){const n=this.schedule;if(!n)return;const r=i.parentIdentifier,s=n.getEvent(r);if(s){const a=n.findEventIndex(r),o=n.findAssetIndex(s,e);this.advanceAfterAssetEnded(s,a,o-1)}}setSchedulePosition(e,i){var n;const r=(n=this.schedule)==null?void 0:n.items;if(!r||this.playbackDisabled)return;const s=e>=0?r[e]:null;this.log(`setSchedulePosition ${e}, ${i} (${s&&qn(s)}) pos: ${this.timelinePos}`);const a=this.waitingItem||this.playingItem,o=this.playingLastItem;if(this.isInterstitial(a)){const c=a.event,d=this.playingAsset,h=d==null?void 0:d.identifier,f=h?this.getAssetPlayer(h):null;if(f&&h&&(!this.eventItemsMatch(a,s)||i!==void 0&&h!==c.assetList[i].identifier)){var l;const m=c.findAssetIndex(d);if(this.log(`INTERSTITIAL_ASSET_ENDED ${m+1}/${c.assetList.length} ${Gl(d)}`),this.endedAsset=d,this.playingAsset=null,this.hls.trigger(S.INTERSTITIAL_ASSET_ENDED,{asset:d,assetListIndex:m,event:c,schedule:r.slice(0),scheduleIndex:e,player:f}),a!==this.playingItem){this.itemsMatch(a,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(c,this.findItemIndex(this.playingItem),m);return}this.retreiveMediaSource(h,s),f.media&&!((l=this.detachedData)!=null&&l.mediaSource)&&f.detachMedia()}if(!this.eventItemsMatch(a,s)&&(this.endedItem=a,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${c} ${qn(a)}`),c.hasPlayed=!0,this.hls.trigger(S.INTERSTITIAL_ENDED,{event:c,schedule:r.slice(0),scheduleIndex:e}),c.cue.once)){var u;this.updateSchedule();const m=(u=this.schedule)==null?void 0:u.items;if(s&&m){const p=this.findItemIndex(s);this.advanceSchedule(p,m,i,a,o)}return}}this.advanceSchedule(e,r,i,a,o)}advanceSchedule(e,i,n,r,s){const a=this.schedule;if(!a)return;const o=i[e]||null,l=this.primaryMedia,u=this.playerQueue;if(u.length&&u.forEach(c=>{const d=c.interstitial,h=a.findEventIndex(d.identifier);(h<e||h>e+1)&&this.clearInterstitial(d,o)}),this.isInterstitial(o)){this.timelinePos=Math.min(Math.max(this.timelinePos,o.start),o.end);const c=o.event;if(n===void 0){n=a.findAssetIndex(c,this.timelinePos);const m=UE(c,n-1);if(c.isAssetPastPlayoutLimit(m)||c.appendInPlace&&this.timelinePos===o.end){this.advanceAfterAssetEnded(c,e,n);return}n=m}const d=this.waitingItem;this.assetsBuffered(o,l)||this.setBufferingItem(o);let h=this.preloadAssets(c,n);if(this.eventItemsMatch(o,d||r)||(this.waitingItem=o,this.log(`INTERSTITIAL_STARTED ${qn(o)} ${c.appendInPlace?"append in place":""}`),this.hls.trigger(S.INTERSTITIAL_STARTED,{event:c,schedule:i.slice(0),scheduleIndex:e})),!c.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${c}`);return}if(c.assetListLoader&&(c.assetListLoader.destroy(),c.assetListLoader=void 0),!l){this.log(`Waiting for attachMedia to start Interstitial ${c}`);return}this.waitingItem=this.endedItem=null,this.playingItem=o;const f=c.assetList[n];if(!f){this.advanceAfterAssetEnded(c,e,n||0);return}if(h||(h=this.getAssetPlayer(f.identifier)),h===null||h.destroyed){const m=c.assetList.length;this.warn(`asset ${n+1}/${m} player destroyed ${c}`),h=this.createAssetPlayer(c,f,n),h.loadSource()}if(!this.eventItemsMatch(o,this.bufferingItem)&&c.appendInPlace&&this.isAssetBuffered(f))return;this.startAssetPlayer(h,n,i,e,l),this.shouldPlay&&Bw(h.media)}else o?(this.resumePrimary(o,e,r),this.shouldPlay&&Bw(this.hls.media)):s&&this.isInterstitial(r)&&(this.endedItem=null,this.playingItem=r,r.event.appendInPlace||this.attachPrimary(a.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,i,n){var r,s;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${qn(e)}`),!((r=this.detachedData)!=null&&r.mediaSource)){let o=this.timelinePos;(o<e.start||o>=e.end)&&(o=this.getPrimaryResumption(e,i),this.log(xm("resumePrimary",o)),this.timelinePos=o),this.attachPrimary(o,e)}if(!n)return;const a=(s=this.schedule)==null?void 0:s.items;a&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${qn(e)}`),this.hls.trigger(S.INTERSTITIALS_PRIMARY_RESUMED,{schedule:a.slice(0),scheduleIndex:i}),this.checkBuffer())}getPrimaryResumption(e,i){const n=e.start;if(this.primaryLive){const r=this.primaryDetails;if(i===0)return this.hls.startPosition;if(r&&(n<r.fragmentStart||n>r.edge))return this.hls.liveSyncPosition||-1}return n}isAssetBuffered(e){const i=this.getAssetPlayer(e.identifier);return i!=null&&i.hls?i.hls.bufferedToEnd:be.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,i,n){i?this.setBufferingItem(i):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const r=this.primaryMedia;if(!r)return;const s=this.hls;s.media?this.checkBuffer():(this.transferMediaTo(s,r),n&&this.startLoadingPrimaryAt(e,n)),n||(this.log(xm("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,n))}startLoadingPrimaryAt(e,i){var n;const r=this.hls;!r.loadingEnabled||!r.media||Math.abs((((n=r.mainForwardBufferInfo)==null?void 0:n.start)||r.media.currentTime)-e)>.5?r.startLoad(e,i):r.bufferingEnabled||r.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(S.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(S.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,i){if(i.level===-1||!this.schedule)return;const n=this.hls.levels[i.level];if(!n.details)return;const r=Ge(Ge({},this.mediaSelection||this.altSelection),{},{main:n});this.mediaSelection=r,this.schedule.parseInterstitialDateRanges(r,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,i){const n=this.hls.audioTracks[i.id],r=this.mediaSelection;if(!r){this.altSelection=Ge(Ge({},this.altSelection),{},{audio:n});return}const s=Ge(Ge({},r),{},{audio:n});this.mediaSelection=s}onSubtitleTrackUpdated(e,i){const n=this.hls.subtitleTracks[i.id],r=this.mediaSelection;if(!r){this.altSelection=Ge(Ge({},this.altSelection),{},{subtitles:n});return}const s=Ge(Ge({},r),{},{subtitles:n});this.mediaSelection=s}onAudioTrackSwitching(e,i){const n=zR(i);this.playerQueue.forEach(({hls:r})=>r&&(r.setAudioOption(i)||r.setAudioOption(n)))}onSubtitleTrackSwitch(e,i){const n=zR(i);this.playerQueue.forEach(({hls:r})=>r&&(r.setSubtitleOption(i)||i.id!==-1&&r.setSubtitleOption(n)))}onBufferCodecs(e,i){const n=i.tracks;n&&(this.requiredTracks=n)}onBufferAppended(e,i){this.checkBuffer()}onBufferFlushed(e,i){const n=this.playingItem;if(n&&!this.itemsMatch(n,this.bufferingItem)&&!this.isInterstitial(n)){const r=this.timelinePos;this.bufferedPos=r,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const i=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&i){for(let r=0;r<i.length;r++){const s=i[r];if(s.cue.post){var n;const a=this.schedule.findEventIndex(s.identifier),o=(n=this.schedule.items)==null?void 0:n[a];this.isInterstitial(o)&&this.eventItemsMatch(o,this.bufferingItem)&&this.bufferedToItem(o,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const i=this.playingItem;if(!this.playingLastItem&&i){const n=this.findItemIndex(i);this.setSchedulePosition(n+1)}else this.shouldPlay=!1}updateItem(e,i){var n;const r=(n=this.schedule)==null?void 0:n.items;if(e&&r){const s=this.findItemIndex(e,i);return r[s]||null}return null}trimInPlace(e,i){if(this.isInterstitial(e)&&e.event.appendInPlace&&i.end-e.end>.25){e.event.assetList.forEach((s,a)=>{e.event.isAssetPastPlayoutLimit(a)&&this.clearAssetPlayer(s.identifier,null)});const n=e.end+.25,r=be.bufferInfo(this.primaryMedia,n,0);(r.end>n||(r.nextStart||0)>n)&&(this.log(`trim buffered interstitial ${qn(e)} (was ${qn(i)})`),this.attachPrimary(n,null,!0),this.flushFrontBuffer(n))}}itemsMatch(e,i){return!!i&&(e===i||e.event&&i.event&&this.eventItemsMatch(e,i)||!e.event&&!i.event&&this.findItemIndex(e)===this.findItemIndex(i))}eventItemsMatch(e,i){var n;return!!i&&(e===i||e.event.identifier===((n=i.event)==null?void 0:n.identifier))}findItemIndex(e,i){return e&&this.schedule?this.schedule.findItemIndex(e,i):-1}updateSchedule(e=!1){var i;const n=this.mediaSelection;n&&((i=this.schedule)==null||i.updateSchedule(n,[],e))}checkBuffer(e){var i;const n=(i=this.schedule)==null?void 0:i.items;if(!n)return;const r=be.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=r.len<1),this.updateBufferedPos(r.end,n,e)}updateBufferedPos(e,i,n){const r=this.schedule,s=this.bufferingItem;if(this.bufferedPos>e||!r)return;if(i.length===1&&this.itemsMatch(i[0],s)){this.bufferedPos=e;return}const a=this.playingItem,o=this.findItemIndex(a);let l=r.findItemIndexAtTime(e);if(this.bufferedPos<e){var u;const c=this.findItemIndex(s),d=Math.min(c+1,i.length-1),h=i[d];if((l===-1&&s&&e>=s.end||(u=h.event)!=null&&u.appendInPlace&&e+.01>=h.start)&&(l=d),this.isInterstitial(s)){const f=s.event;if(d-o>1&&f.appendInPlace===!1||f.assetList.length===0&&f.assetListLoader)return}if(this.bufferedPos=e,l>c&&l>o)this.bufferedToItem(h);else{const f=this.primaryDetails;this.primaryLive&&f&&e>f.edge-f.targetduration&&h.start<f.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(h)&&this.preloadAssets(h.event,0)}}else n&&a&&!this.itemsMatch(a,s)&&(l===o?this.bufferedToItem(a):l===o+1&&this.bufferedToItem(i[l]))}assetsBuffered(e,i){return e.event.assetList.length===0?!1:!e.event.assetList.some(r=>{const s=this.getAssetPlayer(r.identifier);return!(s!=null&&s.bufferedInPlaceToEnd(i))})}setBufferingItem(e){const i=this.bufferingItem,n=this.schedule;if(!this.itemsMatch(e,i)&&n){const{items:r,events:s}=n;if(!r||!s)return i;const a=this.isInterstitial(e),o=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const l=o?o.remaining:i?i.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${qn(e)}`+(i?` (${l.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(a){const u=n.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((c,d)=>{const h=this.getAssetPlayer(c.identifier);h&&(d===u&&h.loadSource(),h.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(u=>u.pauseBuffering());this.hls.trigger(S.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:s.slice(0),schedule:r.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return i}bufferedToItem(e,i=0){const n=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,i);else if(n!==null){this.bufferingAsset=null;const r=this.detachedData;r?r.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const i=this.findItemIndex(e),n=this.getPrimaryResumption(e,i);this.startLoadingPrimaryAt(n)}bufferedToEvent(e,i){const n=e.event,r=n.assetList.length===0&&!n.assetListLoader,s=n.cue.once;if(r||!s){const a=this.preloadAssets(n,i);if(a!=null&&a.interstitial.appendInPlace){const o=this.primaryMedia;o&&this.bufferAssetPlayer(a,o)}}}preloadAssets(e,i){const n=e.assetUrl,r=e.assetList.length,s=r===0&&!e.assetListLoader,a=e.cue.once;if(s){const l=e.timelineStart;if(e.appendInPlace){var o;const h=this.playingItem;!this.isInterstitial(h)&&(h==null||(o=h.nextEvent)==null?void 0:o.identifier)===e.identifier&&this.flushFrontBuffer(l+.25)}let u,c=0;if(!this.playingItem&&this.primaryLive&&(c=this.hls.startPosition,c===-1&&(c=this.hls.liveSyncPosition||0)),c&&!(e.cue.pre||e.cue.post)){const h=c-l;h>0&&(u=Math.round(h*1e3)/1e3)}if(this.log(`Load interstitial asset ${i+1}/${n?1:r} ${e}${u?` live-start: ${c} start-offset: ${u}`:""}`),n)return this.createAsset(e,0,0,l,e.duration,n);const d=this.assetListLoader.loadAssetList(e,u);d&&(e.assetListLoader=d)}else if(!a&&r){for(let u=i;u<r;u++){const c=e.assetList[u],d=this.getAssetPlayerQueueIndex(c.identifier);(d===-1||this.playerQueue[d].destroyed)&&!c.error&&this.createAssetPlayer(e,c,u)}const l=e.assetList[i];if(l){const u=this.getAssetPlayer(l.identifier);return u&&u.loadSource(),u}}return null}flushFrontBuffer(e){const i=this.requiredTracks;if(!i)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(i).forEach(r=>{this.hls.trigger(S.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:r})})}getAssetPlayerQueueIndex(e){const i=this.playerQueue;for(let n=0;n<i.length;n++)if(e===i[n].assetId)return n;return-1}getAssetPlayer(e){const i=this.getAssetPlayerQueueIndex(e);return this.playerQueue[i]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:i}=this;if(i){for(let n=0;n<e.length;n++)if(e[n].media===i)return e[n]}return null}createAsset(e,i,n,r,s,a){const o={parentIdentifier:e.identifier,identifier:EJ(e,a,i),duration:s,startOffset:n,timelineStart:r,uri:a};return this.createAssetPlayer(e,o,i)}createAssetPlayer(e,i,n){const r=this.hls,s=r.userConfig;let a=s.videoPreference;const o=r.loadLevelObj||r.levels[r.currentLevel];(a||o)&&(a=Qe({},a),o.videoCodec&&(a.videoCodec=o.videoCodec),o.videoRange&&(a.allowedVideoRanges=[o.videoRange]));const l=r.audioTracks[r.audioTrack],u=r.subtitleTracks[r.subtitleTrack];let c=0;if(this.primaryLive||e.appendInPlace){const T=this.timelinePos-i.timelineStart;if(T>1){const _=i.duration;_&&T<_&&(c=T)}}const d=i.identifier,h=Ge(Ge({},s),{},{maxMaxBufferLength:Math.min(180,r.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:r.sessionId,assetPlayerId:d,abrEwmaDefaultEstimate:r.bandwidthEstimate,interstitialsController:void 0,startPosition:c,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:a,audioPreference:l||s.audioPreference,subtitlePreference:u||s.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,i.timelineStart&&(h.timelineOffset=i.timelineStart));const f=h.cmcd;f!=null&&f.sessionId&&f.contentId&&(h.cmcd=Qe({},f,{contentId:mh(i.uri)})),this.getAssetPlayer(d)&&this.warn(`Duplicate date range identifier ${e} and asset ${d}`);const m=new SJ(this.HlsPlayerClass,h,e,i);this.playerQueue.push(m),e.assetList[n]=i;let p=!0;const y=T=>{if(T.live){var _;const I=new Error(`Interstitials MUST be VOD assets ${e}`),L={fatal:!0,type:le.OTHER_ERROR,details:M.INTERSTITIAL_ASSET_ITEM_ERROR,error:I},b=((_=this.schedule)==null?void 0:_.findEventIndex(e.identifier))||-1;this.handleAssetItemError(L,e,b,n,I.message);return}const x=T.edge-T.fragmentStart,A=i.duration;(p||A===null||x>A)&&(p=!1,this.log(`Interstitial asset "${d}" duration change ${A} > ${x}`),i.duration=x,this.updateSchedule())};m.on(S.LEVEL_UPDATED,(T,{details:_})=>y(_)),m.on(S.LEVEL_PTS_UPDATED,(T,{details:_})=>y(_)),m.on(S.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const g=(T,_)=>{const x=this.getAssetPlayer(d);if(x&&_.tracks){x.off(S.BUFFER_CODECS,g),x.tracks=_.tracks;const A=this.primaryMedia;this.bufferingAsset===x.assetItem&&A&&!x.media&&this.bufferAssetPlayer(x,A)}};m.on(S.BUFFER_CODECS,g);const v=()=>{var T;const _=this.getAssetPlayer(d);if(this.log(`buffered to end of asset ${_}`),!_||!this.schedule)return;const x=this.schedule.findEventIndex(e.identifier),A=(T=this.schedule.items)==null?void 0:T[x];this.isInterstitial(A)&&this.advanceAssetBuffering(A,i)};m.on(S.BUFFERED_TO_END,v);const E=T=>()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;this.shouldPlay=!0;const x=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,x,T)};return m.once(S.MEDIA_ENDED,E(n)),m.once(S.PLAYOUT_LIMIT_REACHED,E(1/0)),m.on(S.ERROR,(T,_)=>{if(!this.schedule)return;const x=this.getAssetPlayer(d);if(_.details===M.BUFFER_STALLED_ERROR){if(x!=null&&x.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(_,e,this.schedule.findEventIndex(e.identifier),n,`Asset player error ${_.error} ${e}`)}),m.on(S.DESTROYING,()=>{if(!this.getAssetPlayer(d)||!this.schedule)return;const _=new Error(`Asset player destroyed unexpectedly ${d}`),x={fatal:!0,type:le.OTHER_ERROR,details:M.INTERSTITIAL_ASSET_ITEM_ERROR,error:_};this.handleAssetItemError(x,e,this.schedule.findEventIndex(e.identifier),n,_.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${Gl(i)}`),this.hls.trigger(S.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:i,assetListIndex:n,event:e,player:m}),m}clearInterstitial(e,i){this.clearAssetPlayers(e,i),e.reset()}clearAssetPlayers(e,i){e.assetList.forEach(n=>{this.clearAssetPlayer(n.identifier,i)})}resetAssetPlayer(e){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){this.log(`reset asset player "${e}" after error`);const n=this.playerQueue[i];this.transferMediaFromPlayer(n,null),n.resetDetails()}}clearAssetPlayer(e,i){const n=this.getAssetPlayerQueueIndex(e);if(n!==-1){const r=this.playerQueue[n];this.log(`clear ${r} toSegment: ${i&&qn(i)}`),this.transferMediaFromPlayer(r,i),this.playerQueue.splice(n,1),r.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,i,n,r,s){const{interstitial:a,assetItem:o,assetId:l}=e,u=a.assetList.length,c=this.playingAsset;this.endedAsset=null,this.playingAsset=o,(!c||c.identifier!==l)&&(c&&(this.clearAssetPlayer(c.identifier,n[r]),delete c.error),this.log(`INTERSTITIAL_ASSET_STARTED ${i+1}/${u} ${Gl(o)}`),this.hls.trigger(S.INTERSTITIAL_ASSET_STARTED,{asset:o,assetListIndex:i,event:a,schedule:n.slice(0),scheduleIndex:r,player:e})),this.bufferAssetPlayer(e,s)}bufferAssetPlayer(e,i){var n,r;if(!this.schedule)return;const{interstitial:s,assetItem:a}=e,o=this.schedule.findEventIndex(s.identifier),l=(n=this.schedule.items)==null?void 0:n[o];if(!l)return;e.loadSource(),this.setBufferingItem(l),this.bufferingAsset=a;const u=this.getBufferingPlayer();if(u===e)return;const c=s.appendInPlace;if(c&&(u==null?void 0:u.interstitial.appendInPlace)===!1)return;const d=(u==null?void 0:u.tracks)||((r=this.detachedData)==null?void 0:r.tracks)||this.requiredTracks;if(c&&a!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(d&&!HN(d,e.tracks)){const h=new Error(`Asset ${Gl(a)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(d)}')`),f={fatal:!0,type:le.OTHER_ERROR,details:M.INTERSTITIAL_ASSET_ITEM_ERROR,error:h},m=s.findAssetIndex(a);this.handleAssetItemError(f,s,o,m,h.message);return}}this.transferMediaTo(e,i)}handleInPlaceStall(e){const i=this.schedule,n=this.primaryMedia;if(!i||!n)return;const r=n.currentTime,s=i.findAssetIndex(e,r),a=e.assetList[s];if(a){const o=this.getAssetPlayer(a.identifier);if(o){const l=o.currentTime||r-a.timelineStart,u=o.duration-l;if(this.warn(`Stalled at ${l} of ${l+u} in ${o} ${e} (media.currentTime: ${r})`),l&&(u/n.playbackRate<.5||o.bufferedInPlaceToEnd(n))&&o.hls){const c=i.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,c,s)}}}}advanceInPlace(e){const i=this.primaryMedia;i&&i.currentTime<e&&(i.currentTime=e)}handleAssetItemError(e,i,n,r,s){if(e.details===M.BUFFER_STALLED_ERROR)return;const a=i.assetList[r]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${a&&Gl(a)} ${e.error}`),!this.schedule)return;const o=(a==null?void 0:a.identifier)||"",l=this.getAssetPlayerQueueIndex(o),u=this.playerQueue[l]||null,c=this.schedule.items,d=Qe({},e,{fatal:!1,errorAction:Yu(!0),asset:a,assetListIndex:r,event:i,schedule:c,scheduleIndex:n,player:u});if(this.hls.trigger(S.INTERSTITIAL_ASSET_ERROR,d),!e.fatal)return;const h=this.playingAsset,f=this.bufferingAsset,m=new Error(s);if(a&&(this.clearAssetPlayer(o,null),a.error=m),!i.assetList.some(p=>!p.error))i.error=m;else for(let p=r;p<i.assetList.length;p++)this.resetAssetPlayer(i.assetList[p].identifier);this.updateSchedule(!0),i.error?this.primaryFallback(i):h&&h.identifier===o?this.advanceAfterAssetEnded(i,n,r):f&&f.identifier===o&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,f)}primaryFallback(e){const i=e.timelineStart,n=this.effectivePlayingItem;let r=this.timelinePos;if(n){this.log(`Fallback to primary from event "${e.identifier}" start: ${i} pos: ${r} playing: ${qn(n)} error: ${e.error}`),r===-1&&(r=this.hls.startPosition);const a=this.updateItem(n,r);this.itemsMatch(n,a)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(i,null),this.flushFrontBuffer(i))}else if(r===-1){this.checkStart();return}if(!this.schedule)return;const s=this.schedule.findItemIndexAtTime(r);this.setSchedulePosition(s)}onAssetListLoaded(e,i){var n,r;const s=i.event,a=s.identifier,o=i.assetListResponse.ASSETS;if(!((n=this.schedule)!=null&&n.hasEvent(a)))return;const l=s.timelineStart,u=s.duration;let c=0;o.forEach((p,y)=>{const g=parseFloat(p.DURATION);this.createAsset(s,y,c,l+c,g,p.URI),c+=g}),s.duration=c,this.log(`Loaded asset-list with duration: ${c} (was: ${u}) ${s}`);const d=this.waitingItem,h=(d==null?void 0:d.event.identifier)===a;this.updateSchedule();const f=(r=this.bufferingItem)==null?void 0:r.event;if(h){var m;const p=this.schedule.findEventIndex(a),y=(m=this.schedule.items)==null?void 0:m[p];if(y){if(!this.playingItem&&this.timelinePos>y.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==p){s.error=new Error(`Interstitial ${o.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${s}`),this.log(s.error.message),this.updateSchedule(!0),this.primaryFallback(s);return}this.setBufferingItem(y)}this.setSchedulePosition(p)}else if((f==null?void 0:f.identifier)===a){const p=s.assetList[0];if(p){const y=this.getAssetPlayer(p.identifier);if(f.appendInPlace){const g=this.primaryMedia;y&&g&&this.bufferAssetPlayer(y,g)}else y&&y.loadSource()}}}onError(e,i){if(this.schedule)switch(i.details){case M.ASSET_LIST_PARSING_ERROR:case M.ASSET_LIST_LOAD_ERROR:case M.ASSET_LIST_LOAD_TIMEOUT:{const n=i.interstitial;n&&(this.updateSchedule(!0),this.primaryFallback(n));break}case M.BUFFER_STALLED_ERROR:{const n=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(n)&&n.event.appendInPlace){this.handleInPlaceStall(n.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const Vw=500;class kJ extends NA{constructor(e,i,n){super(e,i,n,"subtitle-stream-controller",ne.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(S.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(S.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,i){this.stopLoad(),this.state=j.IDLE,this.setInterval(Vw),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,i){this.tracksBuffered=[],super.onMediaDetaching(e,i)}onLevelLoaded(e,i){this.mainDetails=i.details}onSubtitleFragProcessed(e,i){const{frag:n,success:r}=i;if(this.fragContextChanged(n)||(Mt(n)&&(this.fragPrevious=n),this.state=j.IDLE),!r)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let u=0;u<s.length;u++)if(o>=s[u].start&&o<=s[u].end){a=s[u];break}const l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null),this.media&&this.tick()}onBufferFlushing(e,i){const{startOffset:n,endOffset:r}=i;if(n===0&&r!==Number.POSITIVE_INFINITY){const s=r-1;if(s<=0)return;i.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,ne.SUBTITLE)}}onError(e,i){const n=i.frag;(n==null?void 0:n.type)===ne.SUBTITLE&&(i.details===M.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==j.STOPPED&&(this.state=j.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:i}){if(this.levels&&W3(this.levels,i)){this.levels=i.map(n=>new tf(n));return}this.tracksBuffered=[],this.levels=i.map(n=>{const r=new tf(n);return this.tracksBuffered[r.id]=[],r}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ne.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,i){var n;if(this.currentTrackId=i.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const r=this.levels[this.currentTrackId];r!=null&&r.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,r&&this.state!==j.STOPPED&&this.setInterval(Vw)}onSubtitleTrackLoaded(e,i){var n;const{currentTrackId:r,levels:s}=this,{details:a,id:o}=i;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=s[o];if(o>=s.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let u=0;if(a.live||(n=l.details)!=null&&n.live){if(a.deltaUpdateFailed)return;const d=this.mainDetails;if(!d){this.startFragRequested=!1;return}const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(D0(a,d),u=a.fragmentStart):h&&(u=h.start,Z1(a,u));else{var c;u=this.alignPlaylists(a,l.details,(c=this.levelLastLoaded)==null?void 0:c.details),u===0&&h&&(u=h.start,Z1(a,u))}d&&!this.startFragRequested&&this.setStartPosition(d,u)}l.details=a,this.levelLastLoaded=l,o===r&&(this.hls.trigger(S.SUBTITLE_TRACK_UPDATED,{details:a,id:o,groupId:i.groupId}),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===j.IDLE&&(hl(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:i,payload:n}=e,r=i.decryptdata,s=this.hls;if(!this.fragContextChanged(i)&&n&&n.byteLength>0&&r!=null&&r.key&&r.iv&&qu(r.method)){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),r.key.buffer,r.iv.buffer,OA(r.method)).catch(o=>{throw s.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:i}),o}).then(o=>{const l=performance.now();s.trigger(S.FRAG_DECRYPTED,{frag:i,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=j.IDLE})}}doTick(){if(!this.media){this.state=j.IDLE;return}if(this.state===j.IDLE){const{currentTrackId:e,levels:i}=this,n=i==null?void 0:i[e];if(!n||!i.length||!n.details||this.waitForLive(n))return;const{config:r}=this,s=this.getLoadPosition(),a=be.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,r.maxBufferHole),{end:o,len:l}=a,u=n.details,c=this.hls.maxBufferLength+u.levelTargetDuration;if(l>c)return;const d=u.fragments,h=d.length,f=u.edge;let m=null;const p=this.fragPrevious;if(o<f){const v=r.maxFragLookUpTolerance,E=o>f-v?0:v;m=hl(p,d,Math.max(d[0].start,o),E),!m&&p&&p.start<d[0].start&&(m=d[0])}else m=d[h-1];if(m=this.filterReplacedPrimary(m,n.details),!m)return;const y=m.sn-u.startSN,g=d[y-1];if(g&&g.cc===m.cc&&this.fragmentTracker.getState(g)===Jt.NOT_LOADED&&(m=g),this.fragmentTracker.getState(m)===Jt.NOT_LOADED){const v=this.mapToInitFragWhenRequired(m);v&&this.loadFragment(v,n,o)}}}loadFragment(e,i,n){Mt(e)?super.loadFragment(e,i,n):this._loadInitSegment(e,i)}get mediaBufferTimeRanges(){return new IJ(this.tracksBuffered[this.currentTrackId]||[])}}class IJ{constructor(e){this.buffered=void 0;const i=(n,r,s)=>{if(r=r>>>0,r>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${r}) is greater than the maximum bound (${s})`);return e[r][n]};this.buffered={get length(){return e.length},end(n){return i("end",n,e.length)},start(n){return i("start",n,e.length)}}}}const LJ={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},o$=t=>String.fromCharCode(LJ[t]||t),er=15,us=100,RJ={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},wJ={17:2,18:4,21:6,22:8,23:10,19:13,20:15},CJ={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},DJ={25:2,26:4,29:6,30:8,31:10,27:13,28:15},PJ=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class OJ{constructor(){this.time=null,this.verboseLevel=0}log(e,i){if(this.verboseLevel>=e){const n=typeof i=="function"?i():i;We.log(`${this.time} [${e}] ${n}`)}}}const co=function(e){const i=[];for(let n=0;n<e.length;n++)i.push(e[n].toString(16));return i};class l${constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const i=["foreground","underline","italics","background","flash"];for(let n=0;n<i.length;n++){const r=i[n];e.hasOwnProperty(r)&&(this[r]=e[r])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class MJ{constructor(){this.uchar=" ",this.penState=new l$}reset(){this.uchar=" ",this.penState.reset()}setChar(e,i){this.uchar=e,this.penState.copy(i)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class NJ{constructor(e){this.chars=[],this.pos=0,this.currPenState=new l$,this.cueStartTime=null,this.logger=void 0;for(let i=0;i<us;i++)this.chars.push(new MJ);this.logger=e}equals(e){for(let i=0;i<us;i++)if(!this.chars[i].equals(e.chars[i]))return!1;return!0}copy(e){for(let i=0;i<us;i++)this.chars[i].copy(e.chars[i])}isEmpty(){let e=!0;for(let i=0;i<us;i++)if(!this.chars[i].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>us&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=us)}moveCursor(e){const i=this.pos+e;if(e>1)for(let n=this.pos+1;n<i+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(i)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const i=o$(e);if(this.pos>=us){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+i+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1)}clearFromPos(e){let i;for(i=e;i<us;i++)this.chars[i].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let i=!0;for(let n=0;n<us;n++){const r=this.chars[n].uchar;r!==" "&&(i=!1),e.push(r)}return i?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class BE{constructor(e){this.rows=[],this.currRow=er-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let i=0;i<er;i++)this.rows.push(new NJ(e));this.logger=e}reset(){for(let e=0;e<er;e++)this.rows[e].clear();this.currRow=er-1}equals(e){let i=!0;for(let n=0;n<er;n++)if(!this.rows[n].equals(e.rows[n])){i=!1;break}return i}copy(e){for(let i=0;i<er;i++)this.rows[i].copy(e.rows[i])}isEmpty(){let e=!0;for(let i=0;i<er;i++)if(!this.rows[i].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+tt(e));let i=e.row-1;if(this.nrRollUpRows&&i<this.nrRollUpRows-1&&(i=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==i){for(let o=0;o<er;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let u=0;u<this.nrRollUpRows;u++)this.rows[i-this.nrRollUpRows+u+1].copy(a.rows[s+u])}}this.currRow=i;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const r={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(r)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+tt(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,i=this.rows.splice(e,1)[0];i.clear(),this.rows.splice(this.currRow,0,i),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const i=[];let n="",r=-1;for(let s=0;s<er;s++){const a=this.rows[s].getTextString();a&&(r=s+1,e?i.push("Row "+r+": '"+a+"'"):i.push(a.trim()))}return i.length>0&&(e?n="["+i.join(" | ")+"]":n=i.join(`
`)),n}getTextAndFormat(){return this.rows}}class Hw{constructor(e,i,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=i,this.mode=null,this.verbose=0,this.displayedMemory=new BE(n),this.nonDisplayedMemory=new BE(n),this.lastOutputScreen=new BE(n),this.currRollUpRow=this.displayedMemory.rows[er-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[er-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>i+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const i={flash:!1};if(i.underline=e%2===1,i.italics=e>=46,i.italics)i.foreground="white";else{const n=Math.floor(e/2)-16,r=["white","green","blue","cyan","red","yellow","magenta"];i.foreground=r[n]}this.logger.log(2,"MIDROW: "+tt(i)),this.writeScreen.setPen(i)}outputDataUpdate(e=!1){const i=this.logger.time;i!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=i:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,i,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:i),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class Kw{constructor(e,i,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=FJ(),this.logger=void 0;const r=this.logger=new OJ;this.channels=[null,new Hw(e,i,r),new Hw(e+1,n,r)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,i){this.channels[e].setHandler(i)}addData(e,i){this.logger.time=e;for(let n=0;n<i.length;n+=2){const r=i[n]&127,s=i[n+1]&127;let a=!1,o=null;if(r===0&&s===0)continue;this.logger.log(3,()=>"["+co([i[n],i[n+1]])+"] -> ("+co([r,s])+")");const l=this.cmdHistory;if(r>=16&&r<=31){if($J(r,s,l)){km(null,null,l),this.logger.log(3,()=>"Repeated command ("+co([r,s])+") is dropped");continue}km(r,s,this.cmdHistory),a=this.parseCmd(r,s),a||(a=this.parseMidrow(r,s)),a||(a=this.parsePAC(r,s)),a||(a=this.parseBackgroundAttributes(r,s))}else km(null,null,l);if(!a&&(o=this.parseChars(r,s),o)){const c=this.currentChannel;c&&c>0?this.channels[c].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+co([r,s])+" orig: "+co([i[n],i[n+1]]))}}parseCmd(e,i){const n=(e===20||e===28||e===21||e===29)&&i>=32&&i<=47,r=(e===23||e===31)&&i>=33&&i<=35;if(!(n||r))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?i===32?a.ccRCL():i===33?a.ccBS():i===34?a.ccAOF():i===35?a.ccAON():i===36?a.ccDER():i===37?a.ccRU(2):i===38?a.ccRU(3):i===39?a.ccRU(4):i===40?a.ccFON():i===41?a.ccRDC():i===42?a.ccTR():i===43?a.ccRTD():i===44?a.ccEDM():i===45?a.ccCR():i===46?a.ccENM():i===47&&a.ccEOC():a.ccTO(i-32),this.currentChannel=s,!0}parseMidrow(e,i){let n=0;if((e===17||e===25)&&i>=32&&i<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const r=this.channels[n];return r?(r.ccMIDROW(i),this.logger.log(3,()=>"MIDROW ("+co([e,i])+")"),!0):!1}return!1}parsePAC(e,i){let n;const r=(e>=17&&e<=23||e>=25&&e<=31)&&i>=64&&i<=127,s=(e===16||e===24)&&i>=64&&i<=95;if(!(r||s))return!1;const a=e<=23?1:2;i>=64&&i<=95?n=a===1?RJ[e]:CJ[e]:n=a===1?wJ[e]:DJ[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,i)),this.currentChannel=a,!0):!1}interpretPAC(e,i){let n;const r={color:null,italics:!1,indent:null,underline:!1,row:e};return i>95?n=i-96:n=i-64,r.underline=(n&1)===1,n<=13?r.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(r.italics=!0,r.color="white"):r.indent=Math.floor((n-16)/2)*4,r}parseChars(e,i){let n,r=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=i+80:s===18?a=i+112:a=i+144,this.logger.log(2,()=>"Special char '"+o$(a)+"' in channel "+n),r=[a]}else e>=32&&e<=127&&(r=i===0?[e]:[e,i]);return r&&this.logger.log(3,()=>"Char codes =  "+co(r).join(",")),r}parseBackgroundAttributes(e,i){const n=(e===16||e===24)&&i>=32&&i<=47,r=(e===23||e===31)&&i>=45&&i<=47;if(!(n||r))return!1;let s;const a={};e===16||e===24?(s=Math.floor((i-32)/2),a.background=PJ[s],i%2===1&&(a.background=a.background+"_semi")):i===45?a.background="transparent":(a.foreground="black",i===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const i=this.channels[e];i&&i.reset()}km(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let i=0;i<this.channels.length;i++){const n=this.channels[i];n&&n.cueSplitAtTime(e)}}}function km(t,e,i){i.a=t,i.b=e}function $J(t,e,i){return i.a===t&&i.b===e}function FJ(){return{a:null,b:null}}var qA=function(){if(C0!=null&&C0.VTTCue)return self.VTTCue;const t=["","lr","rl"],e=["start","middle","end","left","right"];function i(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const u=l.toLowerCase();return~o.indexOf(u)?u:!1}function n(o){return i(t,o)}function r(o){return i(e,o)}function s(o,...l){let u=1;for(;u<arguments.length;u++){const c=arguments[u];for(const d in c)o[d]=c[d]}return o}function a(o,l,u){const c=this,d={enumerable:!0};c.hasBeenReset=!1;let h="",f=!1,m=o,p=l,y=u,g=null,v="",E=!0,T="auto",_="start",x=50,A="middle",I=50,L="middle";Object.defineProperty(c,"id",s({},d,{get:function(){return h},set:function(b){h=""+b}})),Object.defineProperty(c,"pauseOnExit",s({},d,{get:function(){return f},set:function(b){f=!!b}})),Object.defineProperty(c,"startTime",s({},d,{get:function(){return m},set:function(b){if(typeof b!="number")throw new TypeError("Start time must be set to a number.");m=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"endTime",s({},d,{get:function(){return p},set:function(b){if(typeof b!="number")throw new TypeError("End time must be set to a number.");p=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"text",s({},d,{get:function(){return y},set:function(b){y=""+b,this.hasBeenReset=!0}})),Object.defineProperty(c,"region",s({},d,{get:function(){return g},set:function(b){g=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"vertical",s({},d,{get:function(){return v},set:function(b){const R=n(b);if(R===!1)throw new SyntaxError("An invalid or illegal string was specified.");v=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"snapToLines",s({},d,{get:function(){return E},set:function(b){E=!!b,this.hasBeenReset=!0}})),Object.defineProperty(c,"line",s({},d,{get:function(){return T},set:function(b){if(typeof b!="number"&&b!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");T=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"lineAlign",s({},d,{get:function(){return _},set:function(b){const R=r(b);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");_=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"position",s({},d,{get:function(){return x},set:function(b){if(b<0||b>100)throw new Error("Position must be between 0 and 100.");x=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"positionAlign",s({},d,{get:function(){return A},set:function(b){const R=r(b);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");A=R,this.hasBeenReset=!0}})),Object.defineProperty(c,"size",s({},d,{get:function(){return I},set:function(b){if(b<0||b>100)throw new Error("Size must be between 0 and 100.");I=b,this.hasBeenReset=!0}})),Object.defineProperty(c,"align",s({},d,{get:function(){return L},set:function(b){const R=r(b);if(!R)throw new SyntaxError("An invalid or illegal string was specified.");L=R,this.hasBeenReset=!0}})),c.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class UJ{decode(e,i){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function u$(t){function e(n,r,s,a){return(n|0)*3600+(r|0)*60+(s|0)+parseFloat(a||0)}const i=t.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return i?parseFloat(i[2])>59?e(i[2],i[3],0,i[4]):e(i[1],i[2],i[3],i[4]):null}class BJ{constructor(){this.values=Object.create(null)}set(e,i){!this.get(e)&&i!==""&&(this.values[e]=i)}get(e,i,n){return n?this.has(e)?this.values[e]:i[n]:this.has(e)?this.values[e]:i}has(e){return e in this.values}alt(e,i,n){for(let r=0;r<n.length;++r)if(i===n[r]){this.set(e,i);break}}integer(e,i){/^-?\d+$/.test(i)&&this.set(e,parseInt(i,10))}percent(e,i){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(i)){const n=parseFloat(i);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function c$(t,e,i,n){const r=n?t.split(n):[t];for(const s in r){if(typeof r[s]!="string")continue;const a=r[s].split(i);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const ab=new qA(0,0,""),Im=ab.align==="middle"?"middle":"center";function VJ(t,e,i){const n=t;function r(){const o=u$(t);if(o===null)throw new Error("Malformed timestamp: "+n);return t=t.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){const u=new BJ;c$(o,function(h,f){let m;switch(h){case"region":for(let p=i.length-1;p>=0;p--)if(i[p].id===f){u.set(h,i[p].region);break}break;case"vertical":u.alt(h,f,["rl","lr"]);break;case"line":m=f.split(","),u.integer(h,m[0]),u.percent(h,m[0])&&u.set("snapToLines",!1),u.alt(h,m[0],["auto"]),m.length===2&&u.alt("lineAlign",m[1],["start",Im,"end"]);break;case"position":m=f.split(","),u.percent(h,m[0]),m.length===2&&u.alt("positionAlign",m[1],["start",Im,"end","line-left","line-right","auto"]);break;case"size":u.percent(h,f);break;case"align":u.alt(h,f,["start",Im,"end","left","right"]);break}},/:/,/\s/),l.region=u.get("region",null),l.vertical=u.get("vertical","");let c=u.get("line","auto");c==="auto"&&ab.line===-1&&(c=-1),l.line=c,l.lineAlign=u.get("lineAlign","start"),l.snapToLines=u.get("snapToLines",!0),l.size=u.get("size",100),l.align=u.get("align",Im);let d=u.get("position","auto");d==="auto"&&ab.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){t=t.replace(/^\s+/,"")}if(a(),e.startTime=r(),a(),t.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);t=t.slice(3),a(),e.endTime=r(),a(),s(t,e)}function d$(t){return t.replace(/<br(?: \/)?>/gi,`
`)}class HJ{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new UJ,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const i=this;e&&(i.buffer+=i.decoder.decode(e,{stream:!0}));function n(){let s=i.buffer,a=0;for(s=d$(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,i.buffer=s.slice(a),o}function r(s){c$(s,function(a,o){},/:/)}try{let s="";if(i.state==="INITIAL"){if(!/\r\n|\n/.test(i.buffer))return this;s=n();const o=s.match(/^()?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");i.state="HEADER"}let a=!1;for(;i.buffer;){if(!/\r\n|\n/.test(i.buffer))return this;switch(a?a=!1:s=n(),i.state){case"HEADER":/:/.test(s)?r(s):s||(i.state="ID");continue;case"NOTE":s||(i.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){i.state="NOTE";break}if(!s)continue;if(i.cue=new qA(0,0,""),i.state="CUE",s.indexOf("-->")===-1){i.cue.id=s;continue}case"CUE":if(!i.cue){i.state="BADCUE";continue}try{VJ(s,i.cue,i.regionList)}catch{i.cue=null,i.state="BADCUE";continue}i.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){i.oncue&&i.cue&&i.oncue(i.cue),i.cue=null,i.state="ID";continue}if(i.cue===null)continue;i.cue.text&&(i.cue.text+=`
`),i.cue.text+=s}continue;case"BADCUE":s||(i.state="ID")}}}catch{i.state==="CUETEXT"&&i.cue&&i.oncue&&i.oncue(i.cue),i.cue=null,i.state=i.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(i){e.onparsingerror&&e.onparsingerror(i)}return e.onflush&&e.onflush(),this}}const KJ=/\r\n|\n\r|\n|\r/g,VE=function(e,i,n=0){return e.slice(n,n+i.length)===i},GJ=function(e){let i=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),r=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!te(i)||!te(n)||!te(r)||!te(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return i+=1e3*n,i+=60*1e3*r,i+=60*60*1e3*s,i};function zA(t,e,i){return mh(t.toString())+mh(e.toString())+mh(i)}const WJ=function(e,i,n){let r=e[i],s=e[r.prevCC];if(!s||!s.new&&r.new){e.ccOffset=e.presentationOffset=r.start,r.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=r.start-s.start,r.new=!1,r=s,s=e[r.prevCC]}e.presentationOffset=n};function jJ(t,e,i,n,r,s,a){const o=new HJ,l=vn(new Uint8Array(t)).trim().replace(KJ,`
`).split(`
`),u=[],c=e?ZX(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,m,p=!0;o.oncue=function(y){const g=i[n];let v=i.ccOffset;const E=(h-c)/9e4;if(g!=null&&g.new&&(f!==void 0?v=i.ccOffset=g.start:WJ(i,n,E)),E){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}v=E-i.presentationOffset}const T=y.endTime-y.startTime,_=ln((y.startTime+v-f)*9e4,r*9e4)/9e4;y.startTime=Math.max(_,0),y.endTime=Math.max(_+T,0);const x=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(x)),y.id||(y.id=zA(y.startTime,y.endTime,x)),y.endTime>0&&u.push(y)},o.onparsingerror=function(y){m=y},o.onflush=function(){if(m){a(m);return}s(u)},l.forEach(y=>{if(p)if(VE(y,"X-TIMESTAMP-MAP=")){p=!1,y.slice(16).split(",").forEach(g=>{VE(g,"LOCAL:")?d=g.slice(6):VE(g,"MPEGTS:")&&(h=parseInt(g.slice(7)))});try{f=GJ(d)/1e3}catch(g){m=g}return}else y===""&&(p=!1);o.parse(y+`
`)}),o.flush()}const HE="stpp.ttml.im1t",h$=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,f$=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,YJ={left:"start",center:"center",right:"end",start:"start",end:"end"};function Gw(t,e,i,n){const r=xe(new Uint8Array(t),["mdat"]);if(r.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=r.map(o=>vn(o)),a=XX(e.baseTime,1,e.timescale);try{s.forEach(o=>i(qJ(o,a)))}catch(o){n(o)}}function qJ(t,e){const r=new DOMParser().parseFromString(t,"text/xml").getElementsByTagName("tt")[0];if(!r)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,h)=>(d[h]=r.getAttribute(`ttp:${h}`)||s[h],d),{}),o=r.getAttribute("xml:space")!=="preserve",l=Ww(KE(r,"styling","style")),u=Ww(KE(r,"layout","region")),c=KE(r,"body","[begin]");return[].map.call(c,d=>{const h=m$(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=WE(d.getAttribute("begin"),a),m=WE(d.getAttribute("dur"),a);let p=WE(d.getAttribute("end"),a);if(f===null)throw jw(d);if(p===null){if(m===null)throw jw(d);p=f+m}const y=new qA(f-e,p-e,h);y.id=zA(y.startTime,y.endTime,y.text);const g=u[d.getAttribute("region")],v=l[d.getAttribute("style")],E=zJ(g,v,l),{textAlign:T}=E;if(T){const _=YJ[T];_&&(y.lineAlign=_),y.align=T}return Qe(y,E),y}).filter(d=>d!==null)}function KE(t,e,i){const n=t.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(i)):[]}function Ww(t){return t.reduce((e,i)=>{const n=i.getAttribute("xml:id");return n&&(e[n]=i),e},{})}function m$(t,e){return[].slice.call(t.childNodes).reduce((i,n,r)=>{var s;return n.nodeName==="br"&&r?i+`
`:(s=n.childNodes)!=null&&s.length?m$(n,e):e?i+n.textContent.trim().replace(/\s+/g," "):i+n.textContent},"")}function zJ(t,e,i){const n="http://www.w3.org/ns/ttml#styling";let r=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=t!=null&&t.hasAttribute("style")?t.getAttribute("style"):null;return a&&i.hasOwnProperty(a)&&(r=i[a]),s.reduce((o,l)=>{const u=GE(e,n,l)||GE(t,n,l)||GE(r,n,l);return u&&(o[l]=u),o},{})}function GE(t,e,i){return t&&t.hasAttributeNS(e,i)?t.getAttributeNS(e,i):null}function jw(t){return new Error(`Could not parse ttml timestamp ${t}`)}function WE(t,e){if(!t)return null;let i=u$(t);return i===null&&(h$.test(t)?i=QJ(t,e):f$.test(t)&&(i=XJ(t,e))),i}function QJ(t,e){const i=h$.exec(t),n=(i[4]|0)+(i[5]|0)/e.subFrameRate;return(i[1]|0)*3600+(i[2]|0)*60+(i[3]|0)+n/e.frameRate}function XJ(t,e){const i=f$.exec(t),n=Number(i[1]);switch(i[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class Lm{constructor(e,i){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=i}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,i,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=i,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class ZJ{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=qw(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(S.FRAG_LOADING,this.onFragLoading,this),e.on(S.FRAG_LOADED,this.onFragLoaded,this),e.on(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(S.FRAG_LOADING,this.onFragLoading,this),e.off(S.FRAG_LOADED,this.onFragLoaded,this),e.off(S.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(S.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(S.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(S.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new Lm(this,"textTrack1"),i=new Lm(this,"textTrack2"),n=new Lm(this,"textTrack3"),r=new Lm(this,"textTrack4");this.cea608Parser1=new Kw(1,e,i),this.cea608Parser2=new Kw(3,n,r)}addCues(e,i,n,r,s){let a=!1;for(let o=s.length;o--;){const l=s[o],u=JJ(l[0],l[1],i,n);if(u>=0&&(l[0]=Math.min(l[0],i),l[1]=Math.max(l[1],n),a=!0,u/(n-i)>.5))return}if(a||s.push([i,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,i,n,r)}else{const o=this.Cues.newCue(null,i,n,r);this.hls.trigger(S.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:i,id:n,initPTS:r,timescale:s,trackId:a}){const{unparsedVttFrags:o}=this;n===ne.MAIN&&(this.initPTS[i.cc]={baseTime:r,timescale:s,trackId:a}),o.length&&(this.unparsedVttFrags=[],o.forEach(l=>{this.initPTS[l.frag.cc]?this.onFragLoaded(S.FRAG_LOADED,l):this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:l.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,i){const{media:n}=this;if(n)for(let r=0;r<n.textTracks.length;r++){const s=n.textTracks[r];if(Yw(s,{name:e,lang:i,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:i,captionsTracks:n,media:r}=this,{label:s,languageCode:a}=i[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,Du(n[e]),r$(n[e],r);else{const l=this.createTextTrack("captions",s,a);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const i=this.captionsProperties[e];if(!i)return;const n=i.label,r={_id:e,label:n,kind:"captions",default:i.media?!!i.media.default:!1,closedCaptions:i.media};this.nonNativeCaptionsTracks[e]=r,this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[r]})}createTextTrack(e,i,n){const r=this.media;if(r)return r.addTextTrack(e,i,n)}onMediaAttaching(e,i){this.media=i.media,i.mediaSource||this._cleanTracks()}onMediaDetaching(e,i){const n=!!i.transferMedia;if(this.media=null,n)return;const{captionsTracks:r}=this;Object.keys(r).forEach(s=>{Du(r[s]),delete r[s]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=qw(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const i=e.textTracks;if(i)for(let n=0;n<i.length;n++)Du(i[n])}onSubtitleTracksUpdated(e,i){const n=i.subtitleTracks||[],r=n.some(s=>s.textCodec===HE);if(this.config.enableWebVTT||r&&this.config.enableIMSC1){if(W3(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?_p(a.textTracks):null;if(this.tracks.forEach((l,u)=>{let c;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&Yw(o[h],l)){d=o[h],o[h]=null;break}d&&(c=d)}if(c)Du(c);else{const d=p$(l);c=this.createTextTrack(d,l.name,l.lang),c&&(c.mode="disabled")}c&&this.textTracks.push(c)}),o!=null&&o.length){const l=o.filter(u=>u!==null).map(u=>u.label);l.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(S.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,i){this.config.enableCEA708Captions&&i.captions&&i.captions.forEach(n=>{const r=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!r)return;const s=`textTrack${r[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const i=this.hls.levels[e.level];return i==null?void 0:i.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,i){if(this.enabled&&i.frag.type===ne.MAIN){var n,r;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:u}=i.frag,c=(n=(r=i.part)==null?void 0:r.index)!=null?n:-1;s&&a&&(u!==o+1||u===o&&c!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=l,this.lastSn=u,this.lastPartIndex=c}}onFragLoaded(e,i){const{frag:n,payload:r}=i;if(n.type===ne.SUBTITLE)if(r.byteLength){const s=n.decryptdata,a="stats"in i;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===HE?this._parseIMSC1(n,r):this._parseVTTs(i)}}else this.hls.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,i){const n=this.hls;Gw(i,this.initPTS[e.cc],r=>{this._appendCues(r,e.level),n.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},r=>{n.logger.log(`Failed to parse IMSC1: ${r}`),n.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:r})})}_parseVTTs(e){var i;const{frag:n,payload:r}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const l=this.hls,u=(i=n.initSegment)!=null&&i.data?Vn(n.initSegment.data,new Uint8Array(r)).buffer:r;jJ(u,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,c=>{this._appendCues(c,n.level),l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},c=>{const d=c.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,r),l.logger.log(`Failed to parse VTT cue: ${c}`),!(d&&o>n.cc)&&l.trigger(S.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:c})})}_fallbackToIMSC1(e,i){const n=this.tracks[e.level];n.textCodec||Gw(i,this.initPTS[e.cc],()=>{n.textCodec=HE,this._parseIMSC1(e,i)},()=>{n.textCodec="wvtt"})}_appendCues(e,i){const n=this.hls;if(this.config.renderTextTracksNatively){const r=this.textTracks[i];if(!r||r.mode==="disabled")return;e.forEach(s=>s$(r,s))}else{const r=this.tracks[i];if(!r)return;const s=r.default?"default":"subtitles"+i;n.trigger(S.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,i){const{frag:n}=i;n.type===ne.SUBTITLE&&this.onFragLoaded(S.FRAG_LOADED,i)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,i){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:n,samples:r}=i;if(!(n.type===ne.MAIN&&this.closedCaptionsForLevel(n)==="NONE"))for(let s=0;s<r.length;s++){const a=r[s].bytes;if(a){this.cea608Parser1||this.initCea608Parsers();const o=this.extractCea608Data(a);this.cea608Parser1.addData(r[s].pts,o[0]),this.cea608Parser2.addData(r[s].pts,o[1])}}}onBufferFlushing(e,{startOffset:i,endOffset:n,endOffsetSubtitles:r,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>sb(o[l],i,n))}if(this.config.renderTextTracksNatively&&i===0&&r!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>sb(o[l],i,r))}}}extractCea608Data(e){const i=[[],[]],n=e[0]&31;let r=2;for(let s=0;s<n;s++){const a=e[r++],o=127&e[r++],l=127&e[r++];if(o===0&&l===0)continue;if((4&a)!==0){const c=3&a;(c===0||c===1)&&(i[c].push(o),i[c].push(l))}}return i}}function p$(t){return t.characteristics&&/transcribes-spoken-dialog/gi.test(t.characteristics)&&/describes-music-and-sound/gi.test(t.characteristics)?"captions":"subtitles"}function Yw(t,e){return!!t&&t.kind===p$(e)&&tb(e,t)}function JJ(t,e,i,n){return Math.min(e,n)-Math.max(t,i)}function qw(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const eee=/\s/,tee={newCue(t,e,i,n){const r=[];let s,a,o,l,u;const c=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],o=!0,l=0,u="",!s.isEmpty()){var d;for(let p=0;p<s.chars.length;p++)eee.test(s.chars[p].uchar)&&o?l++:(u+=s.chars[p].uchar,o=!1);s.cueStartTime=e,e===i&&(i+=1e-4),l>=16?l--:l++;const f=d$(u.trim()),m=zA(e,i,f);t!=null&&(d=t.cues)!=null&&d.getCueById(m)||(a=new c(e,i,f),a.id=m,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),r.push(a))}return t&&r.length&&(r.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),r.forEach(h=>s$(t,h))),r}};function iee(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const nee=/(\d+)-(\d+)\/(\d+)/;class zw{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||oee,this.controller=new self.AbortController,this.stats=new IA}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,i,n){const r=this.stats;if(r.loading.start)throw new Error("Loader can only be used once.");r.loading.start=self.performance.now();const s=ree(e,this.controller.signal),a=e.responseType==="arraybuffer",o=a?"byteLength":"length",{maxTimeToFirstByteMs:l,maxLoadTimeMs:u}=i.loadPolicy;this.context=e,this.config=i,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),i.timeout=l&&te(l)?l:u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},i.timeout),(sf(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(d=>{var h;this.response=this.loader=d;const f=Math.max(self.performance.now(),r.loading.start);if(self.clearTimeout(this.requestTimeout),i.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(r,e,this.response))},u-(f-r.loading.start)),!d.ok){const{status:p,statusText:y}=d;throw new lee(y||"fetch, bad network response",p,d)}r.loading.first=f,r.total=aee(d.headers)||r.total;const m=(h=this.callbacks)==null?void 0:h.onProgress;return m&&te(i.highWaterMark)?this.loadProgressively(d,r,e,i.highWaterMark,m):a?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{var h,f;const m=this.response;if(!m)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),r.loading.end=Math.max(self.performance.now(),r.loading.first);const p=d[o];p&&(r.loaded=r.total=p);const y={url:m.url,data:d,code:m.status},g=(h=this.callbacks)==null?void 0:h.onProgress;g&&!te(i.highWaterMark)&&g(r,e,d,m),(f=this.callbacks)==null||f.onSuccess(y,r,e,m)}).catch(d=>{var h;if(self.clearTimeout(this.requestTimeout),r.aborted)return;const f=d&&d.code||0,m=d?d.message:null;(h=this.callbacks)==null||h.onError({code:f,text:m},e,d?d.details:null,r)})}getCacheAge(){let e=null;if(this.response){const i=this.response.headers.get("age");e=i?parseFloat(i):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,i,n,r=0,s){const a=new x3,o=e.body.getReader(),l=()=>o.read().then(u=>{if(u.done)return a.dataLength&&s(i,n,a.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const c=u.value,d=c.length;return i.loaded+=d,d<r||a.dataLength?(a.push(c),a.dataLength>=r&&s(i,n,a.flush().buffer,e)):s(i,n,c.buffer,e),l()}).catch(()=>Promise.reject());return l()}}function ree(t,e){const i={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(Qe({},t.headers))};return t.rangeEnd&&i.headers.set("Range","bytes="+t.rangeStart+"-"+String(t.rangeEnd-1)),i}function see(t){const e=nee.exec(t);if(e)return parseInt(e[2])-parseInt(e[1])+1}function aee(t){const e=t.get("Content-Range");if(e){const n=see(e);if(te(n))return n}const i=t.get("Content-Length");if(i)return parseInt(i)}function oee(t,e){return new self.Request(t.url,e)}class lee extends Error{constructor(e,i,n){super(e),this.code=void 0,this.details=void 0,this.code=i,this.details=n}}const uee=/^age:\s*[\d.]+\s*$/im;class g${constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new IA,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,i,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=i,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:i}=this;if(!e||!i)return;const n=this.loader=new self.XMLHttpRequest,r=this.stats;r.loading.first=0,r.loaded=0,r.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,i.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",i.url,!0),s(n,i.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,i,e)}).catch(a=>{var o;(o=this.callbacks)==null||o.onError({code:n.status,text:a.message},i,n,r)}):this.openAndSendXhr(n,i,e)}openAndSendXhr(e,i,n){e.readyState||e.open("GET",i.url,!0);const r=i.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(r)for(const o in r)e.setRequestHeader(o,r[o]);i.rangeEnd&&e.setRequestHeader("Range","bytes="+i.rangeStart+"-"+(i.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=i.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&te(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:i,stats:n}=this;if(!e||!i)return;const r=i.readyState,s=this.config;if(!n.aborted&&r>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),r===4)){self.clearTimeout(this.requestTimeout),i.onreadystatechange=null,i.onprogress=null;const u=i.status,c=i.responseType==="text"?i.responseText:null;if(u>=200&&u<300){const m=c??i.response;if(m!=null){var a,o;n.loading.end=Math.max(self.performance.now(),n.loading.first);const p=i.responseType==="arraybuffer"?m.byteLength:m.length;n.loaded=n.total=p,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first);const y=(a=this.callbacks)==null?void 0:a.onProgress;y&&y(n,e,m,i);const g={url:i.responseURL,data:m,code:u};(o=this.callbacks)==null||o.onSuccess(g,n,e,i);return}}const d=s.loadPolicy.errorRetry,h=n.retry,f={url:e.url,data:void 0,code:u};if(R0(d,h,!1,f))this.retry(d);else{var l;We.error(`${u} while loading ${e.url}`),(l=this.callbacks)==null||l.onError({code:u,text:i.statusText},e,i,n)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,i=this.stats.retry;if(R0(e,i,!0))this.retry(e);else{var n;We.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const r=this.callbacks;r&&(this.abortInternal(),r.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:i,stats:n}=this;this.retryDelay=CA(e,n.retry),n.retry++,We.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${i==null?void 0:i.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const i=this.stats;i.loaded=e.loaded,e.lengthComputable&&(i.total=e.total)}getCacheAge(){let e=null;if(this.loader&&uee.test(this.loader.getAllResponseHeaders())){const i=this.loader.getResponseHeader("age");e=i?parseFloat(i):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const cee={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},dee=Ge(Ge({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:g$,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:_Q,bufferController:fZ,capLevelController:WA,errorController:LQ,fpsController:mJ,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:m3,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:cee},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},hee()),{},{subtitleStreamController:kJ,subtitleTrackController:vJ,timelineController:ZJ,audioStreamController:uZ,audioTrackController:cZ,emeController:zu,cmcdController:cJ,contentSteeringController:hJ,interstitialsController:xJ});function hee(){return{cueHandler:tee,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function fee(t,e,i){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const n=ob(t),r=["manifest","level","frag"],s=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return r.forEach(a=>{const o=`${a==="level"?"playlist":a}LoadPolicy`,l=e[o]===void 0,u=[];s.forEach(c=>{const d=`${a}Loading${c}`,h=e[d];if(h!==void 0&&l){u.push(d);const f=n[o].default;switch(e[o]={default:f},c){case"TimeOut":f.maxLoadTimeMs=h,f.maxTimeToFirstByteMs=h;break;case"MaxRetry":f.errorRetry.maxNumRetry=h,f.timeoutRetry.maxNumRetry=h;break;case"RetryDelay":f.errorRetry.retryDelayMs=h,f.timeoutRetry.retryDelayMs=h;break;case"MaxRetryTimeout":f.errorRetry.maxRetryDelayMs=h,f.timeoutRetry.maxRetryDelayMs=h;break}}}),u.length&&i.warn(`hls.js config: "${u.join('", "')}" setting(s) are deprecated, use "${o}": ${tt(e[o])}`)}),Ge(Ge({},n),e)}function ob(t){return t&&typeof t=="object"?Array.isArray(t)?t.map(ob):Object.keys(t).reduce((e,i)=>(e[i]=ob(t[i]),e),{}):t}function mee(t,e){const i=t.loader;i!==zw&&i!==g$?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),t.progressive=!1):iee()&&(t.loader=zw,t.progressive=!0,t.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Ap=2,pee=.1,gee=.05,vee=100;class yee extends u3{constructor(e,i){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var n;(n=this.media)!=null&&n.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var n;this.ended=((n=this.media)==null?void 0:n.currentTime)||1,this.hls.trigger(S.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=i,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,i){this.setInterval(vee),this.mediaSource=i.mediaSource;const n=this.media=i.media;Oi(n,"playing",this.onMediaPlaying),Oi(n,"waiting",this.onMediaWaiting),Oi(n,"ended",this.onMediaEnded)}onMediaDetaching(e,i){this.clearInterval();const{media:n}=this;n&&(Wi(n,"playing",this.onMediaPlaying),Wi(n,"waiting",this.onMediaWaiting),Wi(n,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,i){this.buffered=i.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const i=this.media.currentTime;this.poll(i,this.lastCurrentTime),this.lastCurrentTime=i}poll(e,i){var n,r;const s=(n=this.hls)==null?void 0:n.config;if(!s)return;const a=this.media;if(!a)return;const{seeking:o}=a,l=this.seeking&&!o,u=!this.seeking&&o,c=a.paused&&!o||a.ended||a.playbackRate===0;if(this.seeking=o,e!==i){i&&(this.ended=0),this.moved=!0,o||(this.nudgeRetry=0,s.nudgeOnVideoHole&&!c&&e>i&&this.nudgeOnVideoHole(e,i)),this.waiting===0&&this.stallResolved(e);return}if(u||l){l&&this.stallResolved(e);return}if(c){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&a.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(S.MEDIA_ENDED,{stalled:!1}));return}if(!be.getBuffered(a).length){this.nudgeRetry=0;return}const d=be.bufferInfo(a,e,0),h=d.nextStart||0,f=this.fragmentTracker;if(o&&f&&this.hls){const x=Qw(this.hls.inFlightFragments,e),A=d.len>Ap,I=!h||x||h-e>Ap&&!f.getPartialFragment(e);if(A||I)return;this.moved=!1}const m=(r=this.hls)==null?void 0:r.latestLevelDetails;if(!this.moved&&this.stalled!==null&&f){if(!(d.len>0)&&!h)return;const A=Math.max(h,d.start||0)-e,L=!!(m!=null&&m.live)?m.targetduration*2:Ap,b=Rm(e,f);if(A>0&&(A<=L||b)){a.paused||this._trySkipBufferHole(b);return}}const p=s.detectStallWithCurrentTimeMs,y=self.performance.now(),g=this.waiting;let v=this.stalled;if(v===null)if(g>0&&y-g<p)v=this.stalled=g;else{this.stalled=y;return}const E=y-v;if(!o&&(E>=p||g)&&this.hls){var T;if(((T=this.mediaSource)==null?void 0:T.readyState)==="ended"&&!(m!=null&&m.live)&&Math.abs(e-((m==null?void 0:m.edge)||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(S.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(d),!this.media||!this.hls)return}const _=be.bufferInfo(a,e,s.maxBufferHole);this._tryFixBufferStall(_,E,e)}stallResolved(e){const i=this.stalled;if(i&&this.hls&&(this.stalled=null,this.stallReported)){const n=self.performance.now()-i;this.log(`playback not stuck anymore @${e}, after ${Math.round(n)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(S.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,i){var n;const r=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(n=this.buffered.audio)!=null&&n.length&&r&&r.length>1&&e>r.end(0)){const s=be.bufferedInfo(be.timeRangesToArray(this.buffered.audio),e,0);if(s.len>1&&i>=s.start){const a=be.timeRangesToArray(r),o=be.bufferedInfo(a,i,0).bufferedIndex;if(o>-1&&o<a.length-1){const l=be.bufferedInfo(a,e,0).bufferedIndex,u=a[o].end,c=a[o+1].start;if((l===-1||l>o)&&c-u<1&&e-u<2){const d=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${u} -> ${c} buffered index: ${l}`);this.warn(d.message),this.media.currentTime+=1e-6;let h=Rm(e,this.fragmentTracker);h&&"fragment"in h?h=h.fragment:h||(h=void 0);const f=be.bufferInfo(this.media,e,0);this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:d,reason:d.message,frag:h,buffer:f.len,bufferInfo:f})}}}}}_tryFixBufferStall(e,i,n){var r,s;const{fragmentTracker:a,media:o}=this,l=(r=this.hls)==null?void 0:r.config;if(!o||!a||!l)return;const u=(s=this.hls)==null?void 0:s.latestLevelDetails,c=Rm(n,a);if((c||u!=null&&u.live&&n<u.fragmentStart)&&(this._trySkipBufferHole(c)||!this.media))return;const d=e.buffered,h=this.adjacentTraversal(e,n);(d&&d.length>1&&e.len>l.maxBufferHole||e.nextStart&&(e.nextStart-n<l.maxBufferHole||h))&&(i>l.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,i){const n=this.fragmentTracker,r=e.nextStart;if(n&&r){const s=n.getFragAtPos(i,ne.MAIN),a=n.getFragAtPos(r,ne.MAIN);if(s&&a)return a.sn-s.sn<2}return!1}_reportStall(e){const{hls:i,media:n,stallReported:r,stalled:s}=this;if(!r&&s!==null&&n&&i){this.stallReported=!0;const a=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${tt(e)})`);this.warn(a.message),i.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_STALLED_ERROR,fatal:!1,error:a,buffer:e.len,bufferInfo:e,stalled:{start:s}})}}_trySkipBufferHole(e){var i;const{fragmentTracker:n,media:r}=this,s=(i=this.hls)==null?void 0:i.config;if(!r||!n||!s)return 0;const a=r.currentTime,o=be.bufferInfo(r,a,0),l=a<o.start?o.start:o.nextStart;if(l&&this.hls){const c=o.len<=s.maxBufferHole,d=o.len>0&&o.len<1&&r.readyState<3,h=l-a;if(h>0&&(c||d)){if(h>s.maxBufferHole){let m=!1;if(a===0){const p=n.getAppendedFrag(0,ne.MAIN);p&&l<p.end&&(m=!0)}if(!m&&e){var u;if(!((u=this.hls.loadLevelObj)!=null&&u.details)||Qw(this.hls.inFlightFragments,l))return 0;let y=!1,g=e.end;for(;g<l;){const v=Rm(g,n);if(v)g+=v.duration;else{y=!0;break}}if(y)return 0}}const f=Math.max(l+gee,a+pee);if(this.warn(`skipping hole, adjusting currentTime from ${a} to ${f}`),this.moved=!0,r.currentTime=f,!(e!=null&&e.gap)){const m=new Error(`fragment loaded with buffer holes, seeking from ${a} to ${f}`),p={type:le.MEDIA_ERROR,details:M.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:m,reason:m.message,buffer:o.len,bufferInfo:o};e&&("fragment"in e?p.part=e:p.frag=e),this.hls.trigger(S.ERROR,p)}return f}}return 0}_tryNudgeBuffer(e){const{hls:i,media:n,nudgeRetry:r}=this,s=i==null?void 0:i.config;if(!n||!s)return 0;const a=n.currentTime;if(this.nudgeRetry++,r<s.nudgeMaxRetry){const o=a+(r+1)*s.nudgeOffset,l=new Error(`Nudging 'currentTime' from ${a} to ${o}`);this.warn(l.message),n.currentTime=o,i.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_NUDGE_ON_STALL,error:l,fatal:!1,buffer:e.len,bufferInfo:e})}else{const o=new Error(`Playhead still not moving while enough data buffered @${a} after ${s.nudgeMaxRetry} nudges`);this.error(o.message),i.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.BUFFER_STALLED_ERROR,error:o,fatal:!0,buffer:e.len,bufferInfo:e})}}}function Qw(t,e){const i=Xw(t.main);if(i&&i.start<=e)return i;const n=Xw(t.audio);return n&&n.start<=e?n:null}function Xw(t){if(!t)return null;switch(t.state){case j.IDLE:case j.STOPPED:case j.ENDED:case j.ERROR:return null}return t.frag}function Rm(t,e){return e.getAppendedFrag(t,ne.MAIN)||e.getPartialFragment(t)}const Eee=.25;function lb(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function jE(t,e,i,n,r){let s=new t(e,i,"");try{s.value=n,r&&(s.type=r)}catch{s=new t(e,i,tt(r?Ge({type:r},n):n))}return s}const wm=(()=>{const t=lb();try{t&&new t(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class Tee{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(S.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(S.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,i){var n;this.media=i.media,((n=i.overrides)==null?void 0:n.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const i=(e=this.hls)==null?void 0:e.latestLevelDetails;i&&this.updateDateRangeCues(i)}onMediaDetaching(e,i){this.media=null,!i.transferMedia&&(this.id3Track&&(this.removeCues&&Du(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const i=this.getID3Track(e.textTracks);return i.mode="hidden",i}getID3Track(e){if(this.media){for(let i=0;i<e.length;i++){const n=e[i];if(n.kind==="metadata"&&n.label==="id3")return r$(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,i){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:n,enableID3MetadataCues:r}=this.hls.config;if(!n&&!r)return;const{samples:s}=i;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=lb();if(a)for(let o=0;o<s.length;o++){const l=s[o].type;if(l===dn.emsg&&!n||!r)continue;const u=D3(s[o].data),c=s[o].pts;let d=c+s[o].duration;d>wm&&(d=wm),d-c<=0&&(d=c+Eee);for(let f=0;f<u.length;f++){const m=u[f];if(!P3(m)){this.updateId3CueEnds(c,l);const p=jE(a,c,d,m,l);p&&this.id3Track.addCue(p)}}}}updateId3CueEnds(e,i){var n;const r=(n=this.id3Track)==null?void 0:n.cues;if(r)for(let s=r.length;s--;){const a=r[s];a.type===i&&a.startTime<e&&a.endTime===wm&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:i,endOffset:n,type:r}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let u;r==="audio"?u=c=>c.type===dn.audioId3&&l:r==="video"?u=c=>c.type===dn.emsg&&o:u=c=>c.type===dn.audioId3&&l||c.type===dn.emsg&&o,sb(s,i,n,u)}}onLevelUpdated(e,{details:i}){this.updateDateRangeCues(i,!0)}onLevelPtsUpdated(e,i){Math.abs(i.drift)>.01&&this.updateDateRangeCues(i.details)}updateDateRangeCues(e,i){if(!this.hls||!this.media)return;const{assetPlayerId:n,timelineOffset:r,enableDateRangeMetadataCues:s,interstitialsController:a}=this.hls.config;if(!s)return;const o=lb();if(n&&r&&!a){const{fragmentStart:p,fragmentEnd:y}=e;let g=this.assetCue;g?(g.startTime=p,g.endTime=y):o&&(g=this.assetCue=jE(o,p,y,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),g&&(g.id=n,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(g),g.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:l}=this,{dateRanges:u}=e,c=Object.keys(u);let d=this.dateRangeCuesAppended;if(l&&i){var h;if((h=l.cues)!=null&&h.length){const p=Object.keys(d).filter(y=>!c.includes(y));for(let y=p.length;y--;){var f;const g=p[y],v=(f=d[g])==null?void 0:f.cues;delete d[g],v&&Object.keys(v).forEach(E=>{const T=v[E];if(T){T.removeEventListener("enter",this.onEventCueEnter);try{l.removeCue(T)}catch{}}})}}else d=this.dateRangeCuesAppended={}}const m=e.fragments[e.fragments.length-1];if(!(c.length===0||!te(m==null?void 0:m.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let p=0;p<c.length;p++){const y=c[p],g=u[y],v=g.startTime,E=d[y],T=(E==null?void 0:E.cues)||{};let _=(E==null?void 0:E.durationKnown)||!1,x=wm;const{duration:A,endDate:I}=g;if(I&&A!==null)x=v+A,_=!0;else if(g.endOnNext&&!_){const b=c.reduce((R,P)=>{if(P!==g.id){const w=u[P];if(w.class===g.class&&w.startDate>g.startDate&&(!R||g.startDate<R.startDate))return w}return R},null);b&&(x=b.startTime,_=!0)}const L=Object.keys(g.attr);for(let b=0;b<L.length;b++){const R=L[b];if(!VQ(R))continue;const P=T[R];if(P)_&&!(E!=null&&E.durationKnown)?P.endTime=x:Math.abs(P.startTime-v)>.01&&(P.startTime=v,P.endTime=x);else if(o){let w=g.attr[R];HQ(R)&&(w=KN(w));const B=jE(o,v,x,{key:R,data:w},dn.dateRange);B&&(B.id=y,this.id3Track.addCue(B),T[R]=B,a&&(R==="X-ASSET-LIST"||R==="X-ASSET-URL")&&B.addEventListener("enter",this.onEventCueEnter))}}d[y]={cues:T,dateRange:g,durationKnown:_}}}}}class bee{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:i}=this,n=this.levelDetails;if(!i||!n)return;this.currentTime=i.currentTime;const r=this.computeLatency();if(r===null)return;this._latency=r;const{lowLatencyMode:s,maxLiveSyncPlaybackRate:a}=this.config;if(!s||a===1||!n.live)return;const o=this.targetLatency;if(o===null)return;const l=r-o,u=Math.min(this.maxLatency,o+n.targetduration);if(l<u&&l>.05&&this.forwardBufferLength>1){const d=Math.min(2,Math.max(1,a)),h=Math.round(2/(1+Math.exp(-.75*l-this.edgeStalled))*20)/20,f=Math.min(d,Math.max(1,h));this.changeMediaPlaybackRate(i,f)}else i.playbackRate!==1&&i.playbackRate!==0&&this.changeMediaPlaybackRate(i,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const i=this.levelDetails;return i?e.liveMaxLatencyDurationCount*i.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:i,partHoldBack:n,targetduration:r}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let u=o&&n||i;(this._targetLatencyUpdated||l.liveSyncDuration||l.liveSyncDurationCount||u===0)&&(u=s!==void 0?s:a*r);const c=r;return u+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,c)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),i=this.targetLatency;if(e===null||i===null)return null;const n=this.levelDetails;if(n===null)return null;const r=n.edge,s=e-i-this.edgeStalled,a=r-n.totalduration,o=r-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const i=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-i,0)}get forwardBufferLength(){const{media:e}=this,i=this.levelDetails;if(!e||!i)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):i.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(S.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(S.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(S.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(S.ERROR,this.onError,this))}onMediaAttached(e,i){this.media=i.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:i}){i.advanced&&this.onTimeupdate(),!i.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,i){var n;i.details===M.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(n=this.levelDetails)!=null&&n.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,i){var n,r;e.playbackRate!==i&&((n=this.hls)==null||n.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(r=this.targetLatency)==null?void 0:r.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${i}`),e.playbackRate=i)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class See extends GA{constructor(e,i){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=i,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this),e.on(S.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this),e.off(S.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(i=>{i.loadError=0,i.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,i){this.resetLevels()}onManifestLoaded(e,i){const n=this.hls.config.preferManagedMediaSource,r=[],s={},a={};let o=!1,l=!1,u=!1;i.levels.forEach(c=>{const d=c.attrs;let{audioCodec:h,videoCodec:f}=c;h&&(c.audioCodec=h=x0(h,n)||void 0),f&&(f=c.videoCodec=rQ(f));const{width:m,height:p,unknownCodecs:y}=c,g=(y==null?void 0:y.length)||0;if(o||(o=!!(m&&p)),l||(l=!!f),u||(u=!!h),g||h&&!this.isAudioSupported(h)||f&&!this.isVideoSupported(f)){this.log(`Some or all CODECS not supported "${d.CODECS}"`);return}const{CODECS:v,"FRAME-RATE":E,"HDCP-LEVEL":T,"PATHWAY-ID":_,RESOLUTION:x,"VIDEO-RANGE":A}=d,L=`${`${_||"."}-`}${c.bitrate}-${x}-${E}-${v}-${A}-${T}`;if(s[L])if(s[L].uri!==c.url&&!c.attrs["PATHWAY-ID"]){const b=a[L]+=1;c.attrs["PATHWAY-ID"]=new Array(b+1).join(".");const R=this.createLevel(c);s[L]=R,r.push(R)}else s[L].addGroupId("audio",d.AUDIO),s[L].addGroupId("text",d.SUBTITLES);else{const b=this.createLevel(c);s[L]=b,a[L]=1,r.push(b)}}),this.filterAndSortMediaOptions(r,i,o,l,u)}createLevel(e){const i=new tf(e),n=e.supplemental;if(n!=null&&n.videoCodec&&!this.isVideoSupported(n.videoCodec)){const r=new Error(`SUPPLEMENTAL-CODECS not supported "${n.videoCodec}"`);this.log(r.message),i.supportedResult=t3(r,[])}return i}isAudioSupported(e){return Jh(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return Jh(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,i,n,r,s){var a;let o=[],l=[],u=e;const c=((a=i.stats)==null?void 0:a.parsing)||{};if((n||r)&&s&&(u=u.filter(({videoCodec:v,videoRange:E,width:T,height:_})=>(!!v||!!(T&&_))&&mQ(E))),u.length===0){Promise.resolve().then(()=>{if(this.hls){let v="no level with compatible codecs found in manifest",E=v;i.levels.length&&(E=`one or more CODECS in variant not supported: ${tt(i.levels.map(_=>_.attrs.CODECS).filter((_,x,A)=>A.indexOf(_)===x))}`,this.warn(E),v+=` (${E})`);const T=new Error(v);this.hls.trigger(S.ERROR,{type:le.MEDIA_ERROR,details:M.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:i.url,error:T,reason:E})}}),c.end=performance.now();return}i.audioTracks&&(o=i.audioTracks.filter(v=>!v.audioCodec||this.isAudioSupported(v.audioCodec)),Zw(o)),i.subtitles&&(l=i.subtitles,Zw(l));const d=u.slice(0);u.sort((v,E)=>{if(v.attrs["HDCP-LEVEL"]!==E.attrs["HDCP-LEVEL"])return(v.attrs["HDCP-LEVEL"]||"")>(E.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&v.height!==E.height)return v.height-E.height;if(v.frameRate!==E.frameRate)return v.frameRate-E.frameRate;if(v.videoRange!==E.videoRange)return k0.indexOf(v.videoRange)-k0.indexOf(E.videoRange);if(v.videoCodec!==E.videoCodec){const T=KR(v.videoCodec),_=KR(E.videoCodec);if(T!==_)return _-T}if(v.uri===E.uri&&v.codecSet!==E.codecSet){const T=A0(v.codecSet),_=A0(E.codecSet);if(T!==_)return _-T}return v.averageBitrate!==E.averageBitrate?v.averageBitrate-E.averageBitrate:0});let h=d[0];if(this.steering&&(u=this.steering.filterParsedLevels(u),u.length!==d.length)){for(let v=0;v<d.length;v++)if(d[v].pathwayId===u[0].pathwayId){h=d[v];break}}this._levels=u;for(let v=0;v<u.length;v++)if(u[v]===h){var f;this._firstLevel=v;const E=h.bitrate,T=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${u.length} level(s) found, first bitrate: ${E}`),((f=this.hls.userConfig)==null?void 0:f.abrEwmaDefaultEstimate)===void 0){const _=Math.min(E,this.hls.config.abrEwmaDefaultEstimateMax);_>T&&T===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=_)}break}const m=s&&!r,p=this.hls.config,y=!!(p.audioStreamController&&p.audioTrackController),g={levels:u,audioTracks:o,subtitleTracks:l,sessionData:i.sessionData,sessionKeys:i.sessionKeys,firstLevel:this._firstLevel,stats:i.stats,audio:s,video:r,altAudio:y&&!m&&o.some(v=>!!v.url)};c.end=performance.now(),this.hls.trigger(S.MANIFEST_PARSED,g)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const i=this._levels;if(i.length===0)return;if(e<0||e>=i.length){const c=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:c,reason:c.message}),d)return;e=Math.min(e,i.length-1)}const n=this.currentLevelIndex,r=this.currentLevel,s=r?r.attrs["PATHWAY-ID"]:void 0,a=i[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&r&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(S.LEVEL_SWITCHING,l);const u=a.details;if(!u||u.live){const c=this.switchParams(a.uri,r==null?void 0:r.details,u);this.loadPlaylist(c)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const i=this.steering.pathways(),n=e.filter(r=>i.indexOf(r)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${i}`);return}this.steering.pathwayPriority=n}}onError(e,i){i.fatal||!i.context||i.context.type===ke.LEVEL&&i.context.level===this.level&&this.checkRetry(i)}onFragBuffered(e,{frag:i}){if(i!==void 0&&i.type===ne.MAIN){const n=i.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const r=this._levels[i.level];r!=null&&r.loadError&&(this.log(`Resetting level error count of ${r.loadError} on frag buffered`),r.loadError=0)}}onLevelLoaded(e,i){var n;const{level:r,details:s}=i,a=i.levelInfo;if(!a){var o;this.warn(`Invalid level index ${r}`),(o=i.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}if(a===this.currentLevel||i.withoutMultiVariant){a.fragmentError===0&&(a.loadError=0);let l=a.details;l===i.details&&l.advanced&&(l=void 0),this.playlistLoaded(r,i,l)}else(n=i.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,i){super.loadingPlaylist(e,i);const n=this.getUrlWithDirectives(e.uri,i),r=this.currentLevelIndex,s=e.attrs["PATHWAY-ID"],a=e.details,o=a==null?void 0:a.age;this.log(`Loading level index ${r}${(i==null?void 0:i.msn)!==void 0?" at sn "+i.msn+" part "+i.part:""}${s?" Pathway "+s:""}${o&&a.live?" age "+o.toFixed(1)+(a.type&&" "+a.type||""):""} ${n}`),this.hls.trigger(S.LEVEL_LOADING,{url:n,level:r,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:i||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var i;if(this._levels.length===1)return;const n=this._levels.filter((s,a)=>a!==e?!0:(this.steering&&this.steering.removeLevel(s),s===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,s.details&&s.details.fragments.forEach(o=>o.level=-1)),!1));S3(n),this._levels=n,this.currentLevelIndex>-1&&(i=this.currentLevel)!=null&&i.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const r=n.length-1;this._firstLevel=Math.min(this._firstLevel,r),this._startLevel&&(this._startLevel=Math.min(this._startLevel,r)),this.hls.trigger(S.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:i}){this._levels=i}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:i,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==i&&(this._maxAutoLevel=i,this.hls.trigger(S.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:i,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function Zw(t){const e={};t.forEach(i=>{const n=i.groupId||"";i.id=e[n]=e[n]||0,e[n]++})}function v$(){return self.SourceBuffer||self.WebKitSourceBuffer}function y$(){if(!Xa())return!1;const e=v$();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function _ee(){if(!y$())return!1;const t=Xa();return typeof(t==null?void 0:t.isTypeSupported)=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>t.isTypeSupported(ef(e,"video")))||["mp4a.40.2","fLaC"].some(e=>t.isTypeSupported(ef(e,"audio"))))}function Aee(){var t;const e=v$();return typeof(e==null||(t=e.prototype)==null?void 0:t.changeType)=="function"}const xee=100;class kee extends NA{constructor(e,i,n){super(e,i,n,"stream-controller",ne.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const r=this.media,s=r?r.currentTime:null;if(s===null||!te(s)||(this.log(`Media seeked to ${s.toFixed(3)}`),!this.getBufferedFrag(s)))return;const a=this.getFwdBufferInfoAtPos(r,s,ne.MAIN,0);if(a===null||a.len===0){this.warn(`Main forward buffer length at ${s} on "seeked" event ${a?a.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(S.MANIFEST_PARSED,this.onManifestParsed,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.LEVEL_LOADED,this.onLevelLoaded,this),e.on(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(S.BUFFER_CREATED,this.onBufferCreated,this),e.on(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(S.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(S.MANIFEST_PARSED,this.onManifestParsed,this),e.off(S.LEVEL_LOADED,this.onLevelLoaded,this),e.off(S.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(S.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(S.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(S.BUFFER_CREATED,this.onBufferCreated,this),e.off(S.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(S.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,i){if(this.levels){const{lastCurrentTime:n,hls:r}=this;if(this.stopLoad(),this.setInterval(xee),this.level=-1,!this.startFragRequested){let s=r.startLevel;s===-1&&(r.config.testBandwidth&&this.levels.length>1?(s=0,this.bitrateTest=!0):s=r.firstAutoLevel),r.nextLoadLevel=s,this.level=r.loadLevel,this._hasEnoughToStart=!!i}n>0&&e===-1&&!i&&(this.log(`Override startPosition with lastCurrentTime @${n.toFixed(3)}`),e=n),this.state=j.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=i?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=j.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case j.WAITING_LEVEL:{const{levels:e,level:i}=this,n=e==null?void 0:e[i],r=n==null?void 0:n.details;if(r&&(!r.live||this.levelLastLoaded===n&&!this.waitForLive(n))){if(this.waitForCdnTuneIn(r))break;this.state=j.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=j.IDLE;break}break}case j.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===j.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:i,levels:n,media:r}=this;if(i===null||!r&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const p={};this.altAudio===2&&(p.type="video"),this.hls.trigger(S.BUFFER_EOS,p),this.state=j.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const u=a.details;if(!u||this.state===j.WAITING_LEVEL||this.waitForLive(a)){this.level=s,this.state=j.WAITING_LEVEL,this.startFragRequested=!1;return}const c=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(c>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,u);if(this.couldBacktrack&&!this.fragPrevious&&f&&Mt(f)&&this.fragmentTracker.getState(f)!==Jt.OK){var m;const y=((m=this.backtrackFragment)!=null?m:f).sn-u.startSN,g=u.fragments[y-1];g&&f.cc===g.cc&&(f=g,this.fragmentTracker.removeFragment(g))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const y=this.audioOnly&&!this.altAudio?et.AUDIO:et.VIDEO,g=(y===et.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;g&&this.afterBufferFlushed(g,y,ne.MAIN)}f=this.getNextFragmentLoopLoading(f,u,o,ne.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,i,n){const r=this.fragmentTracker.getState(e);r===Jt.NOT_LOADED||r===Jt.PARTIAL?Mt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,i)):super.loadFragment(e,i,n):this._loadInitSegment(e,i):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ne.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:i}=this;if(i!=null&&i.readyState){let n;const r=this.getAppendedFrag(i.currentTime);r&&r.start>1&&this.flushMainBuffer(0,r.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!i.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],u=this.fragLastKbps;u&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*u)+1:n=0}else n=0;const a=this.getBufferedFrag(i.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,u=o.duration,c=Math.max(a.end,l+Math.min(Math.max(u-this.config.maxFragLookUpTolerance,u*(this.couldBacktrack?.5:.125)),u*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(c,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case j.KEY_LOADING:case j.FRAG_LOADING:case j.FRAG_LOADING_WAITING_RETRY:case j.PARSING:case j.PARSED:this.state=j.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,i){super.flushMainBuffer(e,i,this.altAudio===2?"video":null)}onMediaAttached(e,i){super.onMediaAttached(e,i);const n=i.media;Oi(n,"playing",this.onMediaPlaying),Oi(n,"seeked",this.onMediaSeeked)}onMediaDetaching(e,i){const{media:n}=this;n&&(Wi(n,"playing",this.onMediaPlaying),Wi(n,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,i),!i.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(S.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,i){let n=!1,r=!1;for(let s=0;s<i.levels.length;s++){const a=i.levels[s].audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,r=r||a.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=n&&r&&!Aee(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=i.levels,this.startFragRequested=!1}onLevelLoading(e,i){const{levels:n}=this;if(!n||this.state!==j.IDLE)return;const r=i.levelInfo;(!r.details||r.details.live&&(this.levelLastLoaded!==r||r.details.expired)||this.waitForCdnTuneIn(r.details))&&(this.state=j.WAITING_LEVEL)}onLevelLoaded(e,i){var n;const{levels:r,startFragRequested:s}=this,a=i.level,o=i.details,l=o.totalduration;if(!r){this.warn(`Levels were reset while loading level ${a}`);return}this.log(`Level ${a} loaded [${o.startSN},${o.endSN}]${o.lastPartSn?`[part-${o.lastPartSn}-${o.lastPartIndex}]`:""}, cc [${o.startCC}, ${o.endCC}] duration:${l}`);const u=i.levelInfo,c=this.fragCurrent;c&&(this.state===j.FRAG_LOADING||this.state===j.FRAG_LOADING_WAITING_RETRY)&&c.level!==i.level&&c.loader&&this.abortCurrentFrag();let d=0;if(o.live||(n=u.details)!=null&&n.live){var h;if(this.checkLiveUpdate(o),o.deltaUpdateFailed)return;d=this.alignPlaylists(o,u.details,(h=this.levelLastLoaded)==null?void 0:h.details)}if(u.details=o,this.levelLastLoaded=u,s||this.setStartPosition(o,d),this.hls.trigger(S.LEVEL_UPDATED,{details:o,level:a}),this.state===j.WAITING_LEVEL){if(this.waitForCdnTuneIn(o))return;this.state=j.IDLE}s&&o.live&&this.synchronizeToLiveEdge(o),this.tick()}synchronizeToLiveEdge(e){const{config:i,media:n}=this;if(!n)return;const r=this.hls.liveSyncPosition,s=this.getLoadPosition(),a=e.fragmentStart,o=e.edge,l=s>=a-i.maxFragLookUpTolerance&&s<=o;if(r!==null&&n.duration>r&&(s<r||!l)){const c=i.liveMaxLatencyDuration!==void 0?i.liveMaxLatencyDuration:i.liveMaxLatencyDurationCount*e.targetduration;if((!l&&n.readyState<4||s<o-c)&&(this._hasEnoughToStart||(this.nextLoadPosition=r),n.readyState))if(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${r.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var u;const d=be.bufferInfo(n,r,0);if(!((u=d.buffered)!=null&&u.length)){n.currentTime=r;return}if(d.start<=s){n.currentTime=r;return}const{nextStart:f}=be.bufferedInfo(d.buffered,s,0);f&&(n.currentTime=f)}else n.currentTime=r}}_handleFragmentLoadProgress(e){var i;const n=e.frag,{part:r,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level];if(!o){this.warn(`Level ${n.level} not found on progress`);return}const l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const u=o.videoCodec,c=l.PTSKnown||!l.live,d=(i=n.initSegment)==null?void 0:i.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new G3(this.hls,ne.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=r?r.index:-1,p=m!==-1,y=new PA(n.level,n.sn,n.stats.chunkCount,s.byteLength,m,p),g=this.initPTS[n.cc];f.push(s,d,h,u,n,r,l.totalduration,c,y,g)}onAudioTrackSwitching(e,i){const n=this.hls,r=this.altAudio!==0;if(I0(i.url,n))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(r){this.altAudio=0,this.fragmentTracker.removeAllFragments(),n.once(S.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(S.AUDIO_TRACK_SWITCHED,i)}),n.trigger(S.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}n.trigger(S.AUDIO_TRACK_SWITCHED,i)}}onAudioTrackSwitched(e,i){const n=I0(i.url,this.hls);if(n){const r=this.videoBuffer;r&&this.mediaBuffer!==r&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=r)}this.altAudio=n?2:0,this.tick()}onBufferCreated(e,i){const n=i.tracks;let r,s,a=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(s=o,r=l,o==="video"){const u=n[o];u&&(this.videoBuffer=u.buffer)}}else a=!0}a&&r?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=r.buffer):this.mediaBuffer=this.media}onFragBuffered(e,i){const{frag:n,part:r}=i,s=n.type===ne.MAIN;if(s){if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${r?" p: "+r.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===j.PARSED&&(this.state=j.IDLE);return}const o=r?r.stats:n.stats;this.fragLastKbps=Math.round(8*o.total/(o.buffering.end-o.loading.first)),Mt(n)&&(this.fragPrevious=n),this.fragBufferedComplete(n,r)}const a=this.media;a&&(!this._hasEnoughToStart&&be.getBuffered(a).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),s&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,i){var n;if(i.fatal){this.state=j.ERROR;return}switch(i.details){case M.FRAG_GAP:case M.FRAG_PARSING_ERROR:case M.FRAG_DECRYPT_ERROR:case M.FRAG_LOAD_ERROR:case M.FRAG_LOAD_TIMEOUT:case M.KEY_LOAD_ERROR:case M.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ne.MAIN,i);break;case M.LEVEL_LOAD_ERROR:case M.LEVEL_LOAD_TIMEOUT:case M.LEVEL_PARSING_ERROR:!i.levelRetry&&this.state===j.WAITING_LEVEL&&((n=i.context)==null?void 0:n.type)===ke.LEVEL&&(this.state=j.IDLE);break;case M.BUFFER_ADD_CODEC_ERROR:case M.BUFFER_APPEND_ERROR:if(i.parent!=="main")return;this.reduceLengthAndFlushBuffer(i)&&this.resetLoadingState();break;case M.BUFFER_FULL_ERROR:if(i.parent!=="main")return;this.reduceLengthAndFlushBuffer(i)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case M.INTERNAL_EXCEPTION:this.recoverWorkerError(i);break}}onFragLoadEmergencyAborted(){this.state=j.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:i}){if(i!==et.AUDIO||!this.altAudio){const n=(i===et.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;n&&(this.afterBufferFlushed(n,i,ne.MAIN),this.tick())}}onLevelsUpdated(e,i){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=i.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const i=e.currentTime;let n=this.startPosition;if(n>=0&&i<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${i}`);return}const r=this.timelineOffset;r&&n&&(n+=r);const s=this.getLevelDetails(),a=be.getBuffered(e),o=a.length?a.start(0):0,l=o-n,u=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||l>0&&(l<u||this.loadingParts&&l<2*((s==null?void 0:s.partTarget)||0)))&&(this.log(`adjusting start position by ${l} to match buffer start`),n+=l,this.startPosition=n),i<n&&(this.log(`seek to target start position ${n} from current time ${i} buffer start ${o}`),e.currentTime=n)}}_getAudioCodec(e){let i=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&i&&(this.log("Swapping audio codec"),i.indexOf("mp4a.40.5")!==-1?i="mp4a.40.2":i="mp4a.40.5"),i}_loadBitrateTestFrag(e,i){e.bitrateTest=!0,this._doFragLoad(e,i).then(n=>{const{hls:r}=this,s=n==null?void 0:n.frag;if(!s||this.fragContextChanged(s))return;i.fragmentError=0,this.state=j.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const a=s.stats;a.parsing.start=a.parsing.end=a.buffering.start=a.buffering.end=self.performance.now(),r.trigger(S.FRAG_LOADED,n),s.bitrateTest=!1}).catch(n=>{this.state===j.STOPPED||this.state===j.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const i=this.playlistType,{hls:n}=this,{remuxResult:r,chunkMeta:s}=e,a=this.getCurrentContext(s);if(!a){this.resetWhenMissingContext(s);return}const{frag:o,part:l,level:u}=a,{video:c,text:d,id3:h,initSegment:f}=r,{details:m}=u,p=this.altAudio?void 0:r.audio;if(this.fragContextChanged(o)){this.fragmentTracker.removeFragment(o);return}if(this.state=j.PARSING,f){const y=f.tracks;if(y){const T=o.initSegment||o;if(this.unhandledEncryptionError(f,o))return;this._bufferInitSegment(u,y,T,s),n.trigger(S.FRAG_PARSING_INIT_SEGMENT,{frag:T,id:i,tracks:y})}const g=f.initPTS,v=f.timescale,E=this.initPTS[o.cc];if(te(g)&&(!E||E.baseTime!==g||E.timescale!==v)){const T=f.trackId;this.initPTS[o.cc]={baseTime:g,timescale:v,trackId:T},n.trigger(S.INIT_PTS_FOUND,{frag:o,id:i,initPTS:g,timescale:v,trackId:T})}}if(c&&m){p&&c.type==="audiovideo"&&this.logMuxedErr(o);const y=m.fragments[o.sn-1-m.startSN],g=o.sn===m.startSN,v=!y||o.cc>y.cc;if(r.independent!==!1){const{startPTS:E,endPTS:T,startDTS:_,endDTS:x}=c;if(l)l.elementaryStreams[c.type]={startPTS:E,endPTS:T,startDTS:_,endDTS:x};else if(c.firstKeyFrame&&c.independent&&s.id===1&&!v&&(this.couldBacktrack=!0),c.dropped&&c.independent){const A=this.getMainFwdBufferInfo(),I=(A?A.end:this.getLoadPosition())+this.config.maxBufferHole,L=c.firstKeyFramePTS?c.firstKeyFramePTS:E;if(!g&&I<L-this.config.maxBufferHole&&!v){this.backtrack(o);return}else v&&(o.gap=!0);o.setElementaryStreamInfo(c.type,o.start,T,o.start,x,!0)}else g&&E-(m.appliedTimelineOffset||0)>Ap&&(o.gap=!0);o.setElementaryStreamInfo(c.type,E,T,_,x),this.backtrackFragment&&(this.backtrackFragment=o),this.bufferFragmentData(c,o,l,s,g||v)}else if(g||v)o.gap=!0;else{this.backtrack(o);return}}if(p){const{startPTS:y,endPTS:g,startDTS:v,endDTS:E}=p;l&&(l.elementaryStreams[et.AUDIO]={startPTS:y,endPTS:g,startDTS:v,endDTS:E}),o.setElementaryStreamInfo(et.AUDIO,y,g,v,E),this.bufferFragmentData(p,o,l,s)}if(m&&h!=null&&h.samples.length){const y={id:i,frag:o,details:m,samples:h.samples};n.trigger(S.FRAG_PARSING_METADATA,y)}if(m&&d){const y={id:i,frag:o,details:m,samples:d.samples};n.trigger(S.FRAG_PARSING_USERDATA,y)}}logMuxedErr(e){this.warn(`${Mt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,i,n,r){if(this.state!==j.PARSING)return;this.audioOnly=!!i.audio&&!i.video,this.altAudio&&!this.audioOnly&&(delete i.audio,i.audiovideo&&this.logMuxedErr(n));const{audio:s,video:a,audiovideo:o}=i;if(s){const u=e.audioCodec;let c=vp(s.codec,u);c==="mp4a"&&(c="mp4a.40.5");const d=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){c&&(c.indexOf("mp4a.40.5")!==-1?c="mp4a.40.2":c="mp4a.40.5");const h=s.metadata;h&&"channelCount"in h&&(h.channelCount||1)!==1&&d.indexOf("firefox")===-1&&(c="mp4a.40.5")}c&&c.indexOf("mp4a.40.5")!==-1&&d.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(c="mp4a.40.2",this.log(`Android: force audio codec to ${c}`)),u&&u!==c&&this.log(`Swapping manifest audio codec "${u}" for "${c}"`),s.levelCodec=c,s.id=ne.MAIN,this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${c||""}/${u||""}/${s.codec}]`),delete i.audiovideo}if(a){a.levelCodec=e.videoCodec,a.id=ne.MAIN;const u=a.codec;if((u==null?void 0:u.length)===4)switch(u){case"hvc1":case"hev1":a.codec="hvc1.1.6.L120.90";break;case"av01":a.codec="av01.0.04M.08";break;case"avc1":a.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${u}]${a.codec!==u?" parsed-corrected="+a.codec:""}${a.supplemental?" supplemental="+a.supplemental:""}`),delete i.audiovideo}o&&(this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),delete i.video,delete i.audio);const l=Object.keys(i);if(l.length){if(this.hls.trigger(S.BUFFER_CODECS,i),!this.hls)return;l.forEach(u=>{const d=i[u].initSegment;d!=null&&d.byteLength&&this.hls.trigger(S.BUFFER_APPENDING,{type:u,data:d,frag:n,part:null,chunkMeta:r,parent:n.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,ne.MAIN)}get maxBufferLength(){const{levels:e,level:i}=this,n=e==null?void 0:e[i];return n?this.getMaxBufferLength(n.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=j.IDLE}checkFragmentChanged(){const e=this.media;let i=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(be.isBuffered(e,n)?i=this.getAppendedFrag(n):be.isBuffered(e,n+.1)&&(i=this.getAppendedFrag(n+.1)),i){this.backtrackFragment=null;const r=this.fragPlaying,s=i.level;(!r||i.sn!==r.sn||r.level!==s)&&(this.fragPlaying=i,this.hls.trigger(S.FRAG_CHANGED,{frag:i}),(!r||r.level!==s)&&this.hls.trigger(S.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const i=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return te(i)?this.getAppendedFrag(i):null}get currentProgramDateTime(){var e;const i=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(te(i)){const n=this.getLevelDetails(),r=this.currentFrag||(n?hl(null,n.fragments,i):null);if(r){const s=r.programDateTime;if(s!==null){const a=s+(i-r.start)*1e3;return new Date(a)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class Iee extends Kn{constructor(e,i){super("key-loader",i),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyIdToKeyInfo){const r=this.keyIdToKeyInfo[n].loader;if(r){var i;if(e&&e!==((i=r.context)==null?void 0:i.frag.type))return;r.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[e];(i.mediaKeySessionContext||i.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const i=this.keyIdToKeyInfo[e].loader;i&&i.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,i=M.KEY_LOAD_ERROR,n,r,s){return new gs({type:le.NETWORK_ERROR,details:i,fatal:!1,frag:e,response:s,error:n,networkDetails:r})}loadClear(e,i,n){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(i.length)for(let r=0,s=i.length;r<s;r++){const a=i[r];if(e.cc<=a.cc&&(!Mt(e)||!Mt(a)||e.sn<a.sn)||!n&&r==s-1)return this.emeController.selectKeySystemFormat(a).then(o=>{if(!this.emeController)return;a.setKeyFormat(o);const l=Ep(o);if(l)return this.emeController.getKeySystemAccess([l])})}if(this.config.requireKeySystemAccessOnStart){const r=kd(this.config);if(r.length)return this.emeController.getKeySystemAccess(r)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(i=>this.loadInternal(e,i)):this.loadInternal(e)}loadInternal(e,i){var n,r;i&&e.setKeyFormat(i);const s=e.decryptdata;if(!s){const u=new Error(i?`Expected frag.decryptdata to be defined after setting format ${i}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,M.KEY_LOAD_ERROR,u))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,M.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));const o=YE(s);let l=this.keyIdToKeyInfo[o];if((n=l)!=null&&n.decryptdata.key)return s.key=l.decryptdata.key,Promise.resolve({frag:e,keyInfo:l});if(this.emeController&&(r=l)!=null&&r.keyLoadPromise)switch(this.emeController.getKeyStatus(l.decryptdata)){case"usable":case"usable-in-future":return l.keyLoadPromise.then(c=>{const{keyInfo:d}=c;return s.key=d.decryptdata.key,{frag:e,keyInfo:d}})}switch(this.log(`${this.keyIdToKeyInfo[o]?"Rel":"L"}oading${s.keyId?" keyId: "+pi(s.keyId):""} URI: ${s.uri} from ${e.type} ${e.level}`),l=this.keyIdToKeyInfo[o]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(l,e):this.loadKeyEME(l,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(l,e);default:return Promise.reject(this.createKeyLoadError(e,M.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,i){const n={frag:i,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var r;if(!e.decryptdata.keyId&&(r=i.initSegment)!=null&&r.data){const a=jz(i.initSegment.data);if(a.length){let o=a[0];o.some(l=>l!==0)?(this.log(`Using keyId found in init segment ${pi(o)}`),Ka.setKeyIdForUri(e.decryptdata.uri,o)):(o=Ka.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${pi(o)}`)),e.decryptdata.keyId=o}}if(!e.decryptdata.keyId&&!Mt(i))return Promise.resolve(n);const s=this.emeController.loadKey(n);return(e.keyLoadPromise=s.then(a=>(e.mediaKeySessionContext=a,n))).catch(a=>{throw e.keyLoadPromise=null,"data"in a&&(a.data.frag=i),a})}return Promise.resolve(n)}loadKeyHTTP(e,i){const n=this.config,r=n.loader,s=new r(n);return i.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:i,responseType:"arraybuffer",url:e.decryptdata.uri},u=n.keyLoadPolicy.default,c={loadPolicy:u,timeout:u.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,m,p)=>{const{frag:y,keyInfo:g}=m,v=YE(g.decryptdata);if(!y.decryptdata||g!==this.keyIdToKeyInfo[v])return o(this.createKeyLoadError(y,M.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),p));g.decryptdata.key=y.decryptdata.key=new Uint8Array(h.data),y.keyLoader=null,g.loader=null,a({frag:y,keyInfo:g})},onError:(h,f,m,p)=>{this.resetLoader(f),o(this.createKeyLoadError(i,M.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),m,Ge({url:l.url,data:void 0},h)))},onTimeout:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(i,M.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(i,M.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(l,c,d)})}resetLoader(e){const{frag:i,keyInfo:n,url:r}=e,s=n.loader;i.keyLoader===s&&(i.keyLoader=null,n.loader=null);const a=YE(n.decryptdata)||r;delete this.keyIdToKeyInfo[a],s&&s.destroy()}}function YE(t){if(t.keyFormat!==vi.FAIRPLAY){const e=t.keyId;if(e)return pi(e)}return t.uri}function Jw(t){const{type:e}=t;switch(e){case ke.AUDIO_TRACK:return ne.AUDIO;case ke.SUBTITLE_TRACK:return ne.SUBTITLE;default:return ne.MAIN}}function qE(t,e){let i=t.url;return(i===void 0||i.indexOf("data:")===0)&&(i=e.url),i}class Lee{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(S.MANIFEST_LOADING,this.onManifestLoading,this),e.on(S.LEVEL_LOADING,this.onLevelLoading,this),e.on(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(S.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(S.MANIFEST_LOADING,this.onManifestLoading,this),e.off(S.LEVEL_LOADING,this.onLevelLoading,this),e.off(S.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(S.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(S.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const i=this.hls.config,n=i.pLoader,r=i.loader,s=n||r,a=new s(i);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const i=this.loaders[e];i&&i.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,i){const{url:n}=i;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:ke.MANIFEST,url:n,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,i){const{id:n,level:r,pathwayId:s,url:a,deliveryDirectives:o,levelInfo:l}=i;this.load({id:n,level:r,pathwayId:s,responseType:"text",type:ke.LEVEL,url:a,deliveryDirectives:o,levelOrTrack:l})}onAudioTrackLoading(e,i){const{id:n,groupId:r,url:s,deliveryDirectives:a,track:o}=i;this.load({id:n,groupId:r,level:null,responseType:"text",type:ke.AUDIO_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onSubtitleTrackLoading(e,i){const{id:n,groupId:r,url:s,deliveryDirectives:a,track:o}=i;this.load({id:n,groupId:r,level:null,responseType:"text",type:ke.SUBTITLE_TRACK,url:s,deliveryDirectives:a,levelOrTrack:o})}onLevelsUpdated(e,i){const n=this.loaders[ke.LEVEL];if(n){const r=n.context;r&&!i.levels.some(s=>s===r.levelOrTrack)&&(n.abort(),delete this.loaders[ke.LEVEL])}}load(e){var i;const n=this.hls.config;let r=this.getInternalLoader(e);if(r){const u=this.hls.logger,c=r.context;if(c&&c.levelOrTrack===e.levelOrTrack&&(c.url===e.url||c.deliveryDirectives&&!e.deliveryDirectives)){c.url===e.url?u.log(`[playlist-loader]: ignore ${e.url} ongoing request`):u.log(`[playlist-loader]: ignore ${e.url} in favor of ${c.url}`);return}u.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),r.abort()}let s;if(e.type===ke.MANIFEST?s=n.manifestLoadPolicy.default:s=Qe({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),r=this.createInternalLoader(e),te((i=e.deliveryDirectives)==null?void 0:i.part)){let u;if(e.type===ke.LEVEL&&e.level!==null?u=this.hls.levels[e.level].details:e.type===ke.AUDIO_TRACK&&e.id!==null?u=this.hls.audioTracks[e.id].details:e.type===ke.SUBTITLE_TRACK&&e.id!==null&&(u=this.hls.subtitleTracks[e.id].details),u){const c=u.partTarget,d=u.targetduration;if(c&&d){const h=Math.max(c*3,d*.8)*1e3;s=Qe({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(u,c,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const m=u.data;c.parsing.start=performance.now(),jr.isMediaPlaylist(m)||d.type!==ke.MANIFEST?this.handleTrackOrLevelPlaylist(u,c,d,h||null,f):this.handleMasterPlaylist(u,c,d,h)},onError:(u,c,d,h)=>{this.handleNetworkError(c,d,!1,u,h)},onTimeout:(u,c,d)=>{this.handleNetworkError(c,d,!0,void 0,u)}};r.load(e,o,l)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:i},forceStartLoad:n}=this.hls;(e||n)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${i}`),this.hls.startLoad(i))}handleMasterPlaylist(e,i,n,r){const s=this.hls,a=e.data,o=qE(e,n),l=jr.parseMasterPlaylist(a,o);if(l.playlistParsingError){i.parsing.end=performance.now(),this.handleManifestParsingError(e,n,l.playlistParsingError,r,i);return}const{contentSteering:u,levels:c,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:m}=l;this.variableList=m,c.forEach(v=>{const{unknownCodecs:E}=v;if(E){const{preferManagedMediaSource:T}=this.hls.config;let{audioCodec:_,videoCodec:x}=v;for(let A=E.length;A--;){const I=E[A];Jh(I,"audio",T)?(v.audioCodec=_=_?`${_},${I}`:I,kc.audio[_.substring(0,4)]=2,E.splice(A,1)):Jh(I,"video",T)&&(v.videoCodec=x=x?`${x},${I}`:I,kc.video[x.substring(0,4)]=2,E.splice(A,1))}}});const{AUDIO:p=[],SUBTITLES:y,"CLOSED-CAPTIONS":g}=jr.parseMasterPlaylistMedia(a,o,l);p.length&&!p.some(E=>!E.url)&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new Et({}),bitrate:0,url:""})),s.trigger(S.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:y,captions:g,contentSteering:u,url:o,stats:i,networkDetails:r,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:m})}handleTrackOrLevelPlaylist(e,i,n,r,s){const a=this.hls,{id:o,level:l,type:u}=n,c=qE(e,n),d=te(l)?l:te(o)?o:0,h=Jw(n),f=jr.parseLevelPlaylist(e.data,c,d,h,0,this.variableList);if(u===ke.MANIFEST){const m={attrs:new Et({}),bitrate:0,details:f,name:"",url:c};f.requestScheduled=i.loading.start+E3(f,0),a.trigger(S.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:c,stats:i,networkDetails:r,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}i.parsing.end=performance.now(),n.levelDetails=f,this.handlePlaylistLoaded(f,e,i,n,r,s)}handleManifestParsingError(e,i,n,r,s){this.hls.trigger(S.ERROR,{type:le.NETWORK_ERROR,details:M.MANIFEST_PARSING_ERROR,fatal:i.type===ke.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:i,networkDetails:r,stats:s})}handleNetworkError(e,i,n=!1,r,s){let a=`A network ${n?"timeout":"error"+(r?" (status "+r.code+")":"")} occurred while loading ${e.type}`;e.type===ke.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===ke.AUDIO_TRACK||e.type===ke.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);this.hls.logger.warn(`[playlist-loader]: ${a}`);let l=M.UNKNOWN,u=!1;const c=this.getInternalLoader(e);switch(e.type){case ke.MANIFEST:l=n?M.MANIFEST_LOAD_TIMEOUT:M.MANIFEST_LOAD_ERROR,u=!0;break;case ke.LEVEL:l=n?M.LEVEL_LOAD_TIMEOUT:M.LEVEL_LOAD_ERROR,u=!1;break;case ke.AUDIO_TRACK:l=n?M.AUDIO_TRACK_LOAD_TIMEOUT:M.AUDIO_TRACK_LOAD_ERROR,u=!1;break;case ke.SUBTITLE_TRACK:l=n?M.SUBTITLE_TRACK_LOAD_TIMEOUT:M.SUBTITLE_LOAD_ERROR,u=!1;break}c&&this.resetInternalLoader(e.type);const d={type:le.NETWORK_ERROR,details:l,fatal:u,url:e.url,loader:c,context:e,error:o,networkDetails:i,stats:s};if(r){const h=(i==null?void 0:i.url)||e.url;d.response=Ge({url:h,data:void 0},r)}this.hls.trigger(S.ERROR,d)}handlePlaylistLoaded(e,i,n,r,s,a){const o=this.hls,{type:l,level:u,levelOrTrack:c,id:d,groupId:h,deliveryDirectives:f}=r,m=qE(i,r),p=Jw(r);let y=typeof r.level=="number"&&p===ne.MAIN?u:void 0;const g=e.playlistParsingError;if(g){if(this.hls.logger.warn(`${g} ${e.url}`),!o.config.ignorePlaylistParsingErrors){o.trigger(S.ERROR,{type:le.NETWORK_ERROR,details:M.LEVEL_PARSING_ERROR,fatal:!1,url:m,error:g,reason:g.message,response:i,context:r,level:y,parent:p,networkDetails:s,stats:n});return}e.playlistParsingError=null}if(!e.fragments.length){const v=e.playlistParsingError=new Error("No Segments found in Playlist");o.trigger(S.ERROR,{type:le.NETWORK_ERROR,details:M.LEVEL_EMPTY_ERROR,fatal:!1,url:m,error:v,reason:v.message,response:i,context:r,level:y,parent:p,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case ke.MANIFEST:case ke.LEVEL:if(y){if(!c)y=0;else if(c!==o.levels[y]){const v=o.levels.indexOf(c);v>-1&&(y=v)}}o.trigger(S.LEVEL_LOADED,{details:e,levelInfo:c||o.levels[0],level:y||0,id:d||0,stats:n,networkDetails:s,deliveryDirectives:f,withoutMultiVariant:l===ke.MANIFEST});break;case ke.AUDIO_TRACK:o.trigger(S.AUDIO_TRACK_LOADED,{details:e,track:c,id:d||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break;case ke.SUBTITLE_TRACK:o.trigger(S.SUBTITLE_TRACK_LOADED,{details:e,track:c,id:d||0,groupId:h||"",stats:n,networkDetails:s,deliveryDirectives:f});break}}}class pa{static get version(){return nf}static isMSESupported(){return y$()}static isSupported(){return _ee()}static getMediaSource(){return Xa()}static get Events(){return S}static get MetadataSchema(){return dn}static get ErrorTypes(){return le}static get ErrorDetails(){return M}static get DefaultConfig(){return pa.defaultConfig?pa.defaultConfig:dee}static set DefaultConfig(e){pa.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new $A,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const i=this.logger=Oz(e.debug||!1,"Hls instance",e.assetPlayerId),n=this.config=fee(pa.DefaultConfig,e,i);this.userConfig=e,n.progressive&&mee(n,i);const{abrController:r,bufferController:s,capLevelController:a,errorController:o,fpsController:l}=n,u=new o(this),c=this.abrController=new r(this),d=new RQ(this),h=n.interstitialsController,f=h?this.interstitialsController=new h(this,pa):null,m=this.bufferController=new s(this,d),p=this.capLevelController=new a(this),y=new l(this),g=new Lee(this),v=n.contentSteeringController,E=v?new v(this):null,T=this.levelController=new See(this,E),_=new Tee(this),x=new Iee(this.config,this.logger),A=this.streamController=new kee(this,d,x),I=this.gapController=new yee(this,d);p.setStreamController(A),y.setStreamController(A);const L=[g,T,A];f&&L.splice(1,0,f),E&&L.splice(1,0,E),this.networkControllers=L;const b=[c,m,I,p,y,_,d];this.audioTrackController=this.createController(n.audioTrackController,L);const R=n.audioStreamController;R&&L.push(this.audioStreamController=new R(this,d,x)),this.subtitleTrackController=this.createController(n.subtitleTrackController,L);const P=n.subtitleStreamController;P&&L.push(this.subtititleStreamController=new P(this,d,x)),this.createController(n.timelineController,b),x.emeController=this.emeController=this.createController(n.emeController,b),this.cmcdController=this.createController(n.cmcdController,b),this.latencyController=this.createController(bee,b),this.coreComponents=b,L.push(u);const w=u.onErrorOut;typeof w=="function"&&this.on(S.ERROR,w,u),this.on(S.MANIFEST_LOADED,g.onManifestLoaded,g)}createController(e,i){if(e){const n=new e(this);return i&&i.push(n),n}return null}on(e,i,n=this){this._emitter.on(e,i,n)}once(e,i,n=this){this._emitter.once(e,i,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,i,n=this,r){this._emitter.off(e,i,n,r)}listeners(e){return this._emitter.listeners(e)}emit(e,i,n){return this._emitter.emit(e,i,n)}trigger(e,i){if(this.config.debug)return this.emit(e,e,i);try{return this.emit(e,e,i)}catch(n){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const r=e===S.ERROR;this.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.INTERNAL_EXCEPTION,fatal:r,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(S.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(i=>i.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(i=>i.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const s=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(S.ERROR,{type:le.OTHER_ERROR,details:M.ATTACH_MEDIA_ERROR,fatal:!0,error:s});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const i="media"in e,n=i?e.media:e,r=i?e:{media:n};this._media=n,this.trigger(S.MEDIA_ATTACHING,r)}detachMedia(){this.logger.log("detachMedia"),this.trigger(S.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(S.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const i=this.media,n=this._url,r=this._url=kA.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${r}`),i&&n&&(n!==r||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(i)),this.trigger(S.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,i){this.logger.log(`startLoad(${e+(i?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let n=0;n<this.networkControllers.length&&(this.networkControllers[n].startLoad(e,i),!(!this.started||!this.networkControllers));n++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[ne.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[ne.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[ne.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,i=e==null?void 0:e.currentTime;this.detachMedia(),e&&(this.attachMedia(e),i&&this.startLoad(i))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=yJ()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const i=!!e;i!==this.config.capLevelToPlayerSize&&(i?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=i)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){fQ(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:i}}=this;if(!e)return 0;const n=e.length;for(let r=0;r<n;r++)if(e[r].maxBitrate>=i)return r;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:i,maxHdcpLevel:n}=this;let r;if(i===-1&&e!=null&&e.length?r=e.length-1:r=i,n)for(let s=r;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return r}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var i;return((i=this.audioTrackController)==null?void 0:i.setAudioOption(e))||null}setSubtitleOption(e){var i;return((i=this.subtitleTrackController)==null?void 0:i.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const i=this.audioTrackController;i&&(i.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const i=this.subtitleTrackController;i&&(i.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const i=this.subtitleTrackController;i&&(i.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,i=this.allAudioTracks){const n=r3(i);return i3(e,n,navigator.mediaCapabilities)}}pa.defaultConfig=void 0;var Le=pa,nt={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},de={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},ty=t=>t===nt.VIDEO?"playback":t,ea=class Id extends Error{constructor(e,i=Id.MEDIA_ERR_CUSTOM,n,r){var s;super(e),this.name="MediaError",this.code=i,this.context=r,this.fatal=n??(i>=Id.MEDIA_ERR_NETWORK&&i<=Id.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(s=Id.defaultMessages[this.code])!=null?s:"")}};ea.MEDIA_ERR_ABORTED=1,ea.MEDIA_ERR_NETWORK=2,ea.MEDIA_ERR_DECODE=3,ea.MEDIA_ERR_SRC_NOT_SUPPORTED=4,ea.MEDIA_ERR_ENCRYPTED=5,ea.MEDIA_ERR_CUSTOM=100,ea.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var ie=ea,Ree=t=>t==null,QA=(t,e)=>Ree(e)?!1:t in e,ub={ANY:"any",MUTED:"muted"},He={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},Yr={MSE:"mse",NATIVE:"native"},Ld={HEADER:"header",QUERY:"query",NONE:"none"},M0=Object.values(Ld),Ps={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},eC={HLS:Ps.M3U8};[...Object.values(Ps)];var wee="en",cb={code:wee},Vt=(t,e,i,n,r=t)=>{r.addEventListener(e,i,n),t.addEventListener("teardown",()=>{r.removeEventListener(e,i)},{once:!0})};function Cee(t,e,i){e&&i>e&&(i=e);for(let n=0;n<t.length;n++)if(t.start(n)<=i&&t.end(n)>=i)return!0;return!1}var XA=t=>{let e=t.indexOf("?");if(e<0)return[t];let i=t.slice(0,e),n=t.slice(e);return[i,n]},iy=t=>{let{type:e}=t;if(e){let i=e.toUpperCase();return QA(i,eC)?eC[i]:e}return Dee(t)},E$=t=>t==="VOD"?He.ON_DEMAND:He.LIVE,T$=t=>t==="EVENT"?Number.POSITIVE_INFINITY:t==="VOD"?Number.NaN:0,Dee=t=>{let{src:e}=t;if(!e)return"";let i="";try{i=new URL(e).pathname}catch{console.error("invalid url")}let n=i.lastIndexOf(".");if(n<0)return Oee(t)?Ps.M3U8:"";let r=i.slice(n+1).toUpperCase();return QA(r,Ps)?Ps[r]:""},Pee="mux.com",Oee=({src:t,customDomain:e=Pee})=>{let i;try{i=new URL(`${t}`)}catch{return!1}let n=i.protocol==="https:",r=i.hostname===`stream.${e}`.toLowerCase(),s=i.pathname.split("/"),a=s.length===2,o=!(s!=null&&s[1].includes("."));return n&&r&&a&&o},Xu=t=>{let e=(t??"").split(".")[1];if(e)try{let i=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(i).split("").map(function(r){return"%"+("00"+r.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch{return}},Mee=({exp:t},e=Date.now())=>!t||t*1e3<e,Nee=({sub:t},e)=>t!==e,$ee=({aud:t},e)=>!t,Fee=({aud:t},e)=>t!==e,b$="en";function ue(t,e=!0){var i,n;let r=e&&(n=(i=cb)==null?void 0:i[t])!=null?n:t,s=e?cb.code:b$;return new Uee(r,s)}var Uee=class{constructor(e,i=(n=>(n=cb)!=null?n:b$)()){this.message=e,this.locale=i}format(e){return this.message.replace(/\{(\w+)\}/g,(i,n)=>{var r;return(r=e[n])!=null?r:""})}toString(){return this.message}},Bee=Object.values(ub),tC=t=>typeof t=="boolean"||typeof t=="string"&&Bee.includes(t),Vee=(t,e,i)=>{let{autoplay:n}=t,r=!1,s=!1,a=tC(n)?n:!!n,o=()=>{r||Vt(e,"playing",()=>{r=!0},{once:!0})};if(o(),Vt(e,"loadstart",()=>{r=!1,o(),zE(e,a)},{once:!0}),Vt(e,"loadstart",()=>{i||(t.streamType&&t.streamType!==He.UNKNOWN?s=t.streamType===He.LIVE:s=!Number.isFinite(e.duration)),zE(e,a)},{once:!0}),i&&i.once(Le.Events.LEVEL_LOADED,(l,u)=>{var c;t.streamType&&t.streamType!==He.UNKNOWN?s=t.streamType===He.LIVE:s=(c=u.details.live)!=null?c:!1}),!a){let l=()=>{!s||Number.isFinite(t.startTime)||(i!=null&&i.liveSyncPosition?e.currentTime=i.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};i&&Vt(e,"play",()=>{e.preload==="metadata"?i.once(Le.Events.LEVEL_UPDATED,l):l()},{once:!0})}return l=>{r||(a=tC(l)?l:!!l,zE(e,a))}},zE=(t,e)=>{if(!e)return;let i=t.muted,n=()=>t.muted=i;switch(e){case ub.ANY:t.play().catch(()=>{t.muted=!0,t.play().catch(n)});break;case ub.MUTED:t.muted=!0,t.play().catch(n);break;default:t.play().catch(()=>{});break}},Hee=({preload:t,src:e},i,n)=>{let r=d=>{d!=null&&["","none","metadata","auto"].includes(d)?i.setAttribute("preload",d):i.removeAttribute("preload")};if(!n)return r(t),r;let s=!1,a=!1,o=n.config.maxBufferLength,l=n.config.maxBufferSize,u=d=>{r(d);let h=d??i.preload;a||h==="none"||(h==="metadata"?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=o,n.config.maxBufferSize=l),c())},c=()=>{!s&&e&&(s=!0,n.loadSource(e))};return Vt(i,"play",()=>{a=!0,n.config.maxBufferLength=o,n.config.maxBufferSize=l,c()},{once:!0}),u(t),u};function Kee(t,e){var i;if(!("videoTracks"in t))return;let n=new WeakMap;e.on(Le.Events.MANIFEST_PARSED,function(l,u){o();let c=t.addVideoTrack("main");c.selected=!0;for(let[d,h]of u.levels.entries()){let f=c.addRendition(h.url[0],h.width,h.height,h.videoCodec,h.bitrate);n.set(h,`${d}`),f.id=`${d}`}}),e.on(Le.Events.AUDIO_TRACKS_UPDATED,function(l,u){a();for(let c of u.audioTracks){let d=c.default?"main":"alternative",h=t.addAudioTrack(d,c.name,c.lang);h.id=`${c.id}`,c.default&&(h.enabled=!0)}}),t.audioTracks.addEventListener("change",()=>{var l;let u=+((l=[...t.audioTracks].find(d=>d.enabled))==null?void 0:l.id),c=e.audioTracks.map(d=>d.id);u!=e.audioTrack&&c.includes(u)&&(e.audioTrack=u)}),e.on(Le.Events.LEVELS_UPDATED,function(l,u){var c;let d=t.videoTracks[(c=t.videoTracks.selectedIndex)!=null?c:0];if(!d)return;let h=u.levels.map(f=>n.get(f));for(let f of t.videoRenditions)f.id&&!h.includes(f.id)&&d.removeRendition(f)});let r=l=>{let u=l.target.selectedIndex;u!=e.nextLevel&&(e.nextLevel=u)};(i=t.videoRenditions)==null||i.addEventListener("change",r);let s=()=>{for(let l of t.videoTracks)t.removeVideoTrack(l)},a=()=>{for(let l of t.audioTracks)t.removeAudioTrack(l)},o=()=>{s(),a()};e.once(Le.Events.DESTROYING,o)}var QE=t=>"time"in t?t.time:t.startTime;function Gee(t,e){e.on(Le.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(r,{tracks:s})=>{s.forEach(a=>{var o,l;let u=(o=a.subtitleTrack)!=null?o:a.closedCaptions,c=e.subtitleTracks.findIndex(({lang:h,name:f,type:m})=>h==(u==null?void 0:u.lang)&&f===a.label&&m.toLowerCase()===a.kind),d=((l=a._id)!=null?l:a.default)?"default":`${a.kind}${c}`;ZA(t,a.kind,a.label,u==null?void 0:u.lang,d,a.default)})});let i=()=>{if(!e.subtitleTracks.length)return;let r=Array.from(t.textTracks).find(o=>o.id&&o.mode==="showing"&&["subtitles","captions"].includes(o.kind));if(!r)return;let s=e.subtitleTracks[e.subtitleTrack],a=s?s.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||(r==null?void 0:r.id)!==a){let o=e.subtitleTracks.findIndex(({lang:l,name:u,type:c,default:d})=>r.id==="default"&&d||l==r.language&&u===r.label&&c.toLowerCase()===r.kind);e.subtitleTrack=o}(r==null?void 0:r.id)===a&&r.cues&&Array.from(r.cues).forEach(o=>{r.addCue(o)})};t.textTracks.addEventListener("change",i),e.on(Le.Events.CUES_PARSED,(r,{track:s,cues:a})=>{let o=t.textTracks.getTrackById(s);if(!o)return;let l=o.mode==="disabled";l&&(o.mode="hidden"),a.forEach(u=>{var c;(c=o.cues)!=null&&c.getCueById(u.id)||o.addCue(u)}),l&&(o.mode="disabled")}),e.once(Le.Events.DESTROYING,()=>{t.textTracks.removeEventListener("change",i),t.querySelectorAll("track[data-removeondestroy]").forEach(r=>{r.remove()})});let n=()=>{Array.from(t.textTracks).forEach(r=>{var s,a;if(!["subtitles","caption"].includes(r.kind)&&(r.label==="thumbnails"||r.kind==="chapters")){if(!((s=r.cues)!=null&&s.length)){let o="track";r.kind&&(o+=`[kind="${r.kind}"]`),r.label&&(o+=`[label="${r.label}"]`);let l=t.querySelector(o),u=(a=l==null?void 0:l.getAttribute("src"))!=null?a:"";l==null||l.removeAttribute("src"),setTimeout(()=>{l==null||l.setAttribute("src",u)},0)}r.mode!=="hidden"&&(r.mode="hidden")}})};e.once(Le.Events.MANIFEST_LOADED,n),e.once(Le.Events.MEDIA_ATTACHED,n)}function ZA(t,e,i,n,r,s){let a=document.createElement("track");return a.kind=e,a.label=i,n&&(a.srclang=n),r&&(a.id=r),s&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),t.append(a),a.track}function Wee(t,e){let i=Array.prototype.find.call(t.querySelectorAll("track"),n=>n.track===e);i==null||i.remove()}function $f(t,e,i){var n;return(n=Array.from(t.querySelectorAll("track")).find(r=>r.track.label===e&&r.track.kind===i))==null?void 0:n.track}async function S$(t,e,i,n){let r=$f(t,i,n);return r||(r=ZA(t,n,i),r.mode="hidden",await new Promise(s=>setTimeout(()=>s(void 0),0))),r.mode!=="hidden"&&(r.mode="hidden"),[...e].sort((s,a)=>QE(a)-QE(s)).forEach(s=>{var a,o;let l=s.value,u=QE(s);if("endTime"in s&&s.endTime!=null)r==null||r.addCue(new VTTCue(u,s.endTime,n==="chapters"?l:JSON.stringify(l??null)));else{let c=Array.prototype.findIndex.call(r==null?void 0:r.cues,m=>m.startTime>=u),d=(a=r==null?void 0:r.cues)==null?void 0:a[c],h=d?d.startTime:Number.isFinite(t.duration)?t.duration:Number.MAX_SAFE_INTEGER,f=(o=r==null?void 0:r.cues)==null?void 0:o[c-1];f&&(f.endTime=u),r==null||r.addCue(new VTTCue(u,h,n==="chapters"?l:JSON.stringify(l??null)))}}),t.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),r}var JA="cuepoints",_$=Object.freeze({label:JA});async function A$(t,e,i=_$){return S$(t,e,i.label,"metadata")}var db=t=>({time:t.startTime,value:JSON.parse(t.text)});function jee(t,e={label:JA}){let i=$f(t,e.label,"metadata");return i!=null&&i.cues?Array.from(i.cues,n=>db(n)):[]}function x$(t,e={label:JA}){var i,n;let r=$f(t,e.label,"metadata");if(!((i=r==null?void 0:r.activeCues)!=null&&i.length))return;if(r.activeCues.length===1)return db(r.activeCues[0]);let{currentTime:s}=t,a=Array.prototype.find.call((n=r.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return db(a||r.activeCues[0])}async function Yee(t,e=_$){return new Promise(i=>{Vt(t,"loadstart",async()=>{let n=await A$(t,[],e);Vt(t,"cuechange",()=>{let r=x$(t);if(r){let s=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:r});t.dispatchEvent(s)}},{},n),i(n)})})}var ex="chapters",k$=Object.freeze({label:ex}),hb=t=>({startTime:t.startTime,endTime:t.endTime,value:t.text});async function I$(t,e,i=k$){return S$(t,e,i.label,"chapters")}function qee(t,e={label:ex}){var i;let n=$f(t,e.label,"chapters");return(i=n==null?void 0:n.cues)!=null&&i.length?Array.from(n.cues,r=>hb(r)):[]}function L$(t,e={label:ex}){var i,n;let r=$f(t,e.label,"chapters");if(!((i=r==null?void 0:r.activeCues)!=null&&i.length))return;if(r.activeCues.length===1)return hb(r.activeCues[0]);let{currentTime:s}=t,a=Array.prototype.find.call((n=r.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return hb(a||r.activeCues[0])}async function zee(t,e=k$){return new Promise(i=>{Vt(t,"loadstart",async()=>{let n=await I$(t,[],e);Vt(t,"cuechange",()=>{let r=L$(t);if(r){let s=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:r});t.dispatchEvent(s)}},{},n),i(n)})})}function Qee(t,e){if(e){let i=e.playingDate;if(i!=null)return new Date(i.getTime()-t.currentTime*1e3)}return typeof t.getStartDate=="function"?t.getStartDate():new Date(NaN)}function Xee(t,e){if(e&&e.playingDate)return e.playingDate;if(typeof t.getStartDate=="function"){let i=t.getStartDate();return new Date(i.getTime()+t.currentTime*1e3)}return new Date(NaN)}var ph={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},Zee=t=>{if(t===nt.VIDEO)return ph.VIDEO;if(t===nt.DRM)return ph.DRM},Jee=(t,e)=>{var i,n;let r=ty(t),s=`${r}Token`;return(i=e.tokens)!=null&&i[r]?(n=e.tokens)==null?void 0:n[r]:QA(s,e)?e[s]:void 0},N0=(t,e,i,n,r=!1,s=!(a=>(a=globalThis.navigator)==null?void 0:a.onLine)())=>{var a,o;if(s){let g=ue("Your device appears to be offline",r),v,E=ie.MEDIA_ERR_NETWORK,T=new ie(g,E,!1,v);return T.errorCategory=e,T.muxCode=de.NETWORK_OFFLINE,T.data=t,T}let l="status"in t?t.status:t.code,u=Date.now(),c=ie.MEDIA_ERR_NETWORK;if(l===200)return;let d=ty(e),h=Jee(e,i),f=Zee(e),[m]=XA((a=i.playbackId)!=null?a:"");if(!l||!m)return;let p=Xu(h);if(h&&!p){let g=ue("The {tokenNamePrefix}-token provided is invalid or malformed.",r).format({tokenNamePrefix:d}),v=ue("Compact JWT string: {token}",r).format({token:h}),E=new ie(g,c,!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_MALFORMED,E.data=t,E}if(l>=500){let g=new ie("",c,n??!0);return g.errorCategory=e,g.muxCode=de.NETWORK_UNKNOWN_ERROR,g}if(l===403)if(p){if(Mee(p,u)){let g={timeStyle:"medium",dateStyle:"medium"},v=ue("The videos secured {tokenNamePrefix}-token has expired.",r).format({tokenNamePrefix:d}),E=ue("Expired at: {expiredDate}. Current time: {currentDate}.",r).format({expiredDate:new Intl.DateTimeFormat("en",g).format((o=p.exp)!=null?o:0*1e3),currentDate:new Intl.DateTimeFormat("en",g).format(u)}),T=new ie(v,c,!0,E);return T.errorCategory=e,T.muxCode=de.NETWORK_TOKEN_EXPIRED,T.data=t,T}if(Nee(p,m)){let g=ue("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",r).format({tokenNamePrefix:d}),v=ue("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",r).format({tokenNamePrefix:d,playbackId:m,tokenPlaybackId:p.sub}),E=new ie(g,c,!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_SUB_MISMATCH,E.data=t,E}if($ee(p)){let g=ue("The {tokenNamePrefix}-token is formatted with incorrect information.",r).format({tokenNamePrefix:d}),v=ue("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",r).format({tokenNamePrefix:d,expectedAud:f}),E=new ie(g,c,!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_AUD_MISSING,E.data=t,E}if(Fee(p,f)){let g=ue("The {tokenNamePrefix}-token is formatted with incorrect information.",r).format({tokenNamePrefix:d}),v=ue("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",r).format({tokenNamePrefix:d,expectedAud:f,aud:p.aud}),E=new ie(g,c,!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_AUD_MISMATCH,E.data=t,E}}else{let g=ue("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",r).format({tokenNamePrefix:d,category:e}),v=ue("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new ie(g,c,n??!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_TOKEN_MISSING,E.data=t,E}if(l===412){let g=ue("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",r),v=ue("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new ie(g,c,n??!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_NOT_READY,E.streamType=i.streamType===He.LIVE?"live":i.streamType===He.ON_DEMAND?"on-demand":"unknown",E.data=t,E}if(l===404){let g=ue("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",r),v=ue("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new ie(g,c,n??!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_NOT_FOUND,E.data=t,E}if(l===400){let g=ue("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),v=ue("Specified playback ID: {playbackId}",r).format({playbackId:m}),E=new ie(g,c,n??!0,v);return E.errorCategory=e,E.muxCode=de.NETWORK_INVALID_URL,E.data=t,E}let y=new ie("",c,n??!0);return y.errorCategory=e,y.muxCode=de.NETWORK_UNKNOWN_ERROR,y.data=t,y},iC=Le.DefaultConfig.capLevelController,R$=class w$ extends iC{constructor(e){super(e)}get levels(){var e;return(e=this.hls.levels)!=null?e:[]}getValidLevels(e){return this.levels.filter((i,n)=>this.isLevelAllowed(i)&&n<=e)}getMaxLevel(e){let i=super.getMaxLevel(e),n=this.getValidLevels(e);if(!n[i])return i;let r=Math.min(n[i].width,n[i].height),s=w$.minMaxResolution;return r>=s?i:iC.getMaxLevelByMediaSize(n,s*(16/9),s)}};R$.minMaxResolution=720;var ete=R$,tte=ete,xp={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},ite=t=>{if(t.includes("fps"))return xp.FAIRPLAY;if(t.includes("playready"))return xp.PLAYREADY;if(t.includes("widevine"))return xp.WIDEVINE},nte=t=>{let e=t.split(`
`).find((i,n,r)=>n&&r[n-1].startsWith("#EXT-X-STREAM-INF"));return fetch(e).then(i=>i.status!==200?Promise.reject(i):i.text())},rte=t=>{let e=t.split(`
`).filter(n=>n.startsWith("#EXT-X-SESSION-DATA"));if(!e.length)return{};let i={};for(let n of e){let r=ate(n),s=r["DATA-ID"];s&&(i[s]={...r})}return{sessionData:i}},ste=/([A-Z0-9-]+)="?(.*?)"?(?:,|$)/g;function ate(t){let e=[...t.matchAll(ste)];return Object.fromEntries(e.map(([,i,n])=>[i,n]))}var ote=t=>{var e,i,n;let r=t.split(`
`),s=(i=((e=r.find(u=>u.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:i.trim(),a=E$(s),o=T$(s),l;if(a===He.LIVE){let u=r.find(c=>c.startsWith("#EXT-X-PART-INF"));if(u)l=+u.split(":")[1].split("=")[1]*2;else{let c=r.find(h=>h.startsWith("#EXT-X-TARGETDURATION")),d=(n=c==null?void 0:c.split(":"))==null?void 0:n[1];l=+(d??6)*3}}return{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}},lte=async(t,e)=>{if(e===Ps.MP4)return{streamType:He.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0,sessionData:void 0};if(e===Ps.M3U8){let i=await fetch(t);if(!i.ok)return Promise.reject(i);let n=await i.text(),r=await nte(n);return{...rte(n),...ote(r)}}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${t}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0,sessionData:void 0}},ute=async(t,e,i=iy({src:t}))=>{var n,r,s,a;let{streamType:o,targetLiveWindow:l,liveEdgeStartOffset:u,sessionData:c}=await lte(t,i),d=c==null?void 0:c["com.apple.hls.chapters"];(d!=null&&d.URI||d!=null&&d.VALUE.toLocaleLowerCase().startsWith("http"))&&tx((n=d.URI)!=null?n:d.VALUE,e),((r=wt.get(e))!=null?r:{}).liveEdgeStartOffset=u,((s=wt.get(e))!=null?s:{}).targetLiveWindow=l,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((a=wt.get(e))!=null?a:{}).streamType=o,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},tx=async(t,e)=>{var i,n;try{let r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch Mux metadata: ${r.status} ${r.statusText}`);let s=await r.json(),a={};if(!((i=s==null?void 0:s[0])!=null&&i.metadata))return;for(let l of s[0].metadata)l.key&&l.value&&(a[l.key]=l.value);((n=wt.get(e))!=null?n:{}).metadata=a;let o=new CustomEvent("muxmetadata");e.dispatchEvent(o)}catch(r){console.error(r)}},cte=t=>{var e;let i=t.type,n=E$(i),r=T$(i),s,a=!!((e=t.partList)!=null&&e.length);return n===He.LIVE&&(s=a?t.partTarget*2:t.targetduration*3),{streamType:n,targetLiveWindow:r,liveEdgeStartOffset:s,lowLatency:a}},dte=(t,e,i)=>{var n,r,s,a,o,l,u,c;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:m}=cte(t);if(d===He.LIVE){m?(i.config.backBufferLength=(n=i.userConfig.backBufferLength)!=null?n:4,i.config.maxFragLookUpTolerance=(r=i.userConfig.maxFragLookUpTolerance)!=null?r:.001,i.config.abrBandWidthUpFactor=(s=i.userConfig.abrBandWidthUpFactor)!=null?s:i.config.abrBandWidthFactor):i.config.backBufferLength=(a=i.userConfig.backBufferLength)!=null?a:8;let p=Object.freeze({get length(){return e.seekable.length},start(y){return e.seekable.start(y)},end(y){var g;return y>this.length||y<0||Number.isFinite(e.duration)?e.seekable.end(y):(g=i.liveSyncPosition)!=null?g:e.seekable.end(y)}});((o=wt.get(e))!=null?o:{}).seekable=p}((l=wt.get(e))!=null?l:{}).liveEdgeStartOffset=f,((u=wt.get(e))!=null?u:{}).targetLiveWindow=h,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((c=wt.get(e))!=null?c:{}).streamType=d,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},nC,rC,hte=(rC=(nC=globalThis==null?void 0:globalThis.navigator)==null?void 0:nC.userAgent)!=null?rC:"",sC,aC,oC,fte=(oC=(aC=(sC=globalThis==null?void 0:globalThis.navigator)==null?void 0:sC.userAgentData)==null?void 0:aC.platform)!=null?oC:"",lC,uC,cC,mte=(cC=(uC=(lC=globalThis==null?void 0:globalThis.navigator)==null?void 0:lC.userAgentData)==null?void 0:uC.brands)!=null?cC:[],pte=hte.toLowerCase().includes("android")||["x11","android"].some(t=>fte.toLowerCase().includes(t)),dC=mte.find(t=>t.brand==="Google Chrome"),gte=t=>{var e;return dC&&parseInt((e=dC.version)!=null?e:"0")>=141&&!!t.canPlayType("application/vnd.apple.mpegurl")},wt=new WeakMap,Os="mux.com",hC,fC,C$=(fC=(hC=Le).isSupported)==null?void 0:fC.call(hC),vte=t=>pte||gte(t),ix=()=>xA.utils.now(),yte=xA.utils.generateUUID,fb=({playbackId:t,customDomain:e=Os,maxResolution:i,minResolution:n,renditionOrder:r,programStartTime:s,programEndTime:a,assetStartTime:o,assetEndTime:l,playbackToken:u,tokens:{playback:c=u}={},extraSourceParams:d={}}={})=>{if(!t)return;let[h,f=""]=XA(t),m=new URL(`https://stream.${e}/${h}.m3u8${f}`);return c||m.searchParams.has("token")?(m.searchParams.forEach((p,y)=>{y!="token"&&m.searchParams.delete(y)}),c&&m.searchParams.set("token",c)):(i&&m.searchParams.set("max_resolution",i),n&&(m.searchParams.set("min_resolution",n),i&&+i.slice(0,-1)<+n.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",n,"maxResolution",i)),r&&m.searchParams.set("rendition_order",r),s&&m.searchParams.set("program_start_time",`${s}`),a&&m.searchParams.set("program_end_time",`${a}`),o&&m.searchParams.set("asset_start_time",`${o}`),l&&m.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach(([p,y])=>{y!=null&&m.searchParams.set(p,y)})),m.toString()},ny=t=>{if(!t)return;let[e]=t.split("?");return e||void 0},nx=t=>{if(!t||!t.startsWith("https://stream."))return;let[e]=new URL(t).pathname.slice(1).split(/\.m3u8|\//);return e||void 0},Ete=t=>{var e,i,n;return(e=t==null?void 0:t.metadata)!=null&&e.video_id?t.metadata.video_id:U$(t)&&(n=(i=ny(t.playbackId))!=null?i:nx(t.src))!=null?n:t.src},D$=t=>{var e;return(e=wt.get(t))==null?void 0:e.error},Tte=t=>{var e;return(e=wt.get(t))==null?void 0:e.metadata},mb=t=>{var e,i;return(i=(e=wt.get(t))==null?void 0:e.streamType)!=null?i:He.UNKNOWN},bte=t=>{var e,i;return(i=(e=wt.get(t))==null?void 0:e.targetLiveWindow)!=null?i:Number.NaN},rx=t=>{var e,i;return(i=(e=wt.get(t))==null?void 0:e.seekable)!=null?i:t.seekable},Ste=t=>{var e;let i=(e=wt.get(t))==null?void 0:e.liveEdgeStartOffset;if(typeof i!="number")return Number.NaN;let n=rx(t);return n.length?n.end(n.length-1)-i:Number.NaN},sx=.034,_te=(t,e,i=sx)=>Math.abs(t-e)<=i,P$=(t,e,i=sx)=>t>e||_te(t,e,i),Ate=(t,e=sx)=>t.paused&&P$(t.currentTime,t.duration,e),O$=(t,e)=>{var i,n,r;if(!e||!t.buffered.length)return;if(t.readyState>2)return!1;let s=e.currentLevel>=0?(n=(i=e.levels)==null?void 0:i[e.currentLevel])==null?void 0:n.details:(r=e.levels.find(d=>!!d.details))==null?void 0:r.details;if(!s||s.live)return;let{fragments:a}=s;if(!(a!=null&&a.length))return;if(t.currentTime<t.duration-(s.targetduration+.5))return!1;let o=a[a.length-1];if(t.currentTime<=o.start)return!1;let l=o.start+o.duration/2,u=t.buffered.start(t.buffered.length-1),c=t.buffered.end(t.buffered.length-1);return l>u&&l<c},M$=(t,e)=>t.ended||t.loop?t.ended:e&&O$(t,e)?!0:Ate(t),xte=(t,e,i)=>{N$(e,i,t);let{metadata:n={}}=t,{view_session_id:r=yte()}=n,s=Ete(t);n.view_session_id=r,n.video_id=s,t.metadata=n;let a=c=>{var d;(d=e.mux)==null||d.emit("hb",{view_drm_type:c})};t.drmTypeCb=a,wt.set(e,{retryCount:0});let o=kte(t,e),l=Hee(t,e,o);t!=null&&t.muxDataKeepSession&&e!=null&&e.mux&&!e.mux.deleted?o&&e.mux.addHLSJS({hlsjs:o,Hls:o?Le:void 0}):Dte(t,e,o),Pte(t,e,o),Yee(e),zee(e);let u=Vee(t,e,o);return{engine:o,setAutoplay:u,setPreload:l}},N$=(t,e,i)=>{let n=e==null?void 0:e.engine;t!=null&&t.mux&&!t.mux.deleted&&(i!=null&&i.muxDataKeepSession?n&&t.mux.removeHLSJS():(t.mux.destroy(),delete t.mux)),n&&(n.detachMedia(),n.destroy()),t&&(t.hasAttribute("src")&&(t.removeAttribute("src"),t.load()),t.removeEventListener("error",V$),t.removeEventListener("error",pb),t.removeEventListener("durationchange",B$),wt.delete(t),t.dispatchEvent(new Event("teardown")))};function $$(t,e){var i;let n=iy(t);if(n!==Ps.M3U8)return!0;let r=!n||((i=e.canPlayType(n))!=null?i:!0),{preferPlayback:s}=t,a=s===Yr.MSE,o=s===Yr.NATIVE,l=C$&&(a||vte(e));return r&&(o||!l)}var kte=(t,e)=>{let{debug:i,streamType:n,startTime:r=-1,metadata:s,preferCmcd:a,_hlsConfig:o={}}=t,l=iy(t)===Ps.M3U8,u=$$(t,e);if(l&&!u&&C$){let c={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},d=Ite(n),h=Lte(t),f=[Ld.QUERY,Ld.HEADER].includes(a)?{useHeaders:a===Ld.HEADER,sessionId:s==null?void 0:s.view_session_id,contentId:s==null?void 0:s.video_id}:void 0,m=o.capLevelToPlayerSize==null?{capLevelController:tte}:{},p=new Le({debug:i,startPosition:r,cmcd:f,xhrSetup:(y,g)=>{var v,E;if(a&&a!==Ld.QUERY)return;let T=new URL(g);if(!T.searchParams.has("CMCD"))return;let _=((E=(v=T.searchParams.get("CMCD"))==null?void 0:v.split(","))!=null?E:[]).filter(x=>x.startsWith("sid")||x.startsWith("cid")).join(",");T.searchParams.set("CMCD",_),y.open("GET",T)},...m,...c,...d,...h,...o});return p.on(Le.Events.MANIFEST_PARSED,async function(y,g){var v,E;let T=(v=g.sessionData)==null?void 0:v["com.apple.hls.chapters"];(T!=null&&T.URI||T!=null&&T.VALUE.toLocaleLowerCase().startsWith("http"))&&tx((E=T==null?void 0:T.URI)!=null?E:T==null?void 0:T.VALUE,e)}),p}},Ite=t=>t===He.LIVE?{backBufferLength:8}:{},Lte=t=>{let{tokens:{drm:e}={},playbackId:i,drmTypeCb:n}=t,r=ny(i);return!e||!r?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:kp(t,"fairplay"),serverCertificateUrl:F$(t,"fairplay")},"com.widevine.alpha":{licenseUrl:kp(t,"widevine")},"com.microsoft.playready":{licenseUrl:kp(t,"playready")}},requestMediaKeySystemAccessFunc:(s,a)=>(s==="com.widevine.alpha"&&(a=[...a.map(o=>{var l;let u=(l=o.videoCapabilities)==null?void 0:l.map(c=>({...c,robustness:"HW_SECURE_ALL"}));return{...o,videoCapabilities:u}}),...a]),navigator.requestMediaKeySystemAccess(s,a).then(o=>{let l=ite(s);return n==null||n(l),o}))}},Rte=async t=>{let e=await fetch(t);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},wte=async(t,e)=>{let i=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:t});if(i.status!==200)return Promise.reject(i);let n=await i.arrayBuffer();return new Uint8Array(n)},Cte=(t,e)=>{Vt(e,"encrypted",async i=>{try{let n=i.initDataType;if(n!=="skd"){console.error(`Received unexpected initialization data type "${n}"`);return}if(!e.mediaKeys){let l=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[n],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(c=>{var d;return(d=t.drmTypeCb)==null||d.call(t,xp.FAIRPLAY),c}).catch(()=>{let c=ue("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),d=new ie(c,ie.MEDIA_ERR_ENCRYPTED,!0);d.errorCategory=nt.DRM,d.muxCode=de.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,Mn(e,d)});if(!l)return;let u=await l.createMediaKeys();try{let c=await Rte(F$(t,"fairplay")).catch(d=>{if(d instanceof Response){let h=N0(d,nt.DRM,t);return console.error("mediaError",h==null?void 0:h.message,h==null?void 0:h.context),h?Promise.reject(h):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(d)});await u.setServerCertificate(c).catch(()=>{let d=ue("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),h=new ie(d,ie.MEDIA_ERR_ENCRYPTED,!0);return h.errorCategory=nt.DRM,h.muxCode=de.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(h)})}catch(c){Mn(e,c);return}await e.setMediaKeys(u)}let r=i.initData;if(r==null){console.error(`Could not start encrypted playback due to missing initData in ${i.type} event`);return}let s=e.mediaKeys.createSession();s.addEventListener("keystatuseschange",()=>{s.keyStatuses.forEach(l=>{let u;if(l==="internal-error"){let c=ue("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");u=new ie(c,ie.MEDIA_ERR_ENCRYPTED,!0),u.errorCategory=nt.DRM,u.muxCode=de.ENCRYPTED_CDM_ERROR}else if(l==="output-restricted"||l==="output-downscaled"){let c=ue("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");u=new ie(c,ie.MEDIA_ERR_ENCRYPTED,!1),u.errorCategory=nt.DRM,u.muxCode=de.ENCRYPTED_OUTPUT_RESTRICTED}u&&Mn(e,u)})});let a=await Promise.all([s.generateRequest(n,r).catch(()=>{let l=ue("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),u=new ie(l,ie.MEDIA_ERR_ENCRYPTED,!0);u.errorCategory=nt.DRM,u.muxCode=de.ENCRYPTED_GENERATE_REQUEST_FAILED,Mn(e,u)}),new Promise(l=>{s.addEventListener("message",u=>{l(u.message)},{once:!0})})]).then(([,l])=>l),o=await wte(a,kp(t,"fairplay")).catch(l=>{if(l instanceof Response){let u=N0(l,nt.DRM,t);return console.error("mediaError",u==null?void 0:u.message,u==null?void 0:u.context),u?Promise.reject(u):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(l)});await s.update(o).catch(()=>{let l=ue("Failed to update DRM license. This may be an issue with the player or your protected content."),u=new ie(l,ie.MEDIA_ERR_ENCRYPTED,!0);return u.errorCategory=nt.DRM,u.muxCode=de.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(u)})}catch(n){Mn(e,n);return}})},kp=({playbackId:t,tokens:{drm:e}={},customDomain:i=Os},n)=>{let r=ny(t);return`https://license.${i.toLocaleLowerCase().endsWith(Os)?i:Os}/license/${n}/${r}?token=${e}`},F$=({playbackId:t,tokens:{drm:e}={},customDomain:i=Os},n)=>{let r=ny(t);return`https://license.${i.toLocaleLowerCase().endsWith(Os)?i:Os}/appcert/${n}/${r}?token=${e}`},U$=({playbackId:t,src:e,customDomain:i})=>{if(t)return!0;if(typeof e!="string")return!1;let n=window==null?void 0:window.location.href,r=new URL(e,n).hostname.toLocaleLowerCase();return r.includes(Os)||!!i&&r.includes(i.toLocaleLowerCase())},Dte=(t,e,i)=>{var n;let{envKey:r,disableTracking:s,muxDataSDK:a=xA,muxDataSDKOptions:o={}}=t,l=U$(t);if(!s&&(r||l)){let{playerInitTime:u,playerSoftwareName:c,playerSoftwareVersion:d,beaconCollectionDomain:h,debug:f,disableCookies:m}=t,p={...t.metadata,video_title:((n=t==null?void 0:t.metadata)==null?void 0:n.video_title)||void 0},y=g=>typeof g.player_error_code=="string"?!1:typeof t.errorTranslator=="function"?t.errorTranslator(g):g;a.monitor(e,{debug:f,beaconCollectionDomain:h,hlsjs:i,Hls:i?Le:void 0,automaticErrorTracking:!1,errorTranslator:y,disableCookies:m,...o,data:{...r?{env_key:r}:{},player_software_name:c,player_software:c,player_software_version:d,player_init_time:u,...p}})}},Pte=(t,e,i)=>{var n,r;let s=$$(t,e),{src:a,customDomain:o=Os}=t,l=()=>{e.ended||t.disablePseudoEnded||!M$(e,i)||(O$(e,i)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},u,c,d=()=>{let h=rx(e),f,m;h.length>0&&(f=h.start(0),m=h.end(0)),(c!==m||u!==f)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),u=f,c=m};if(Vt(e,"durationchange",d),e&&s){let h=iy(t);if(typeof a=="string"){if(a.endsWith(".mp4")&&a.includes(o)){let p=nx(a),y=new URL(`https://stream.${o}/${p}/metadata.json`);tx(y.toString(),e)}let f=()=>{if(mb(e)!==He.LIVE||Number.isFinite(e.duration))return;let p=setInterval(d,1e3);e.addEventListener("teardown",()=>{clearInterval(p)},{once:!0}),Vt(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(p)})},m=async()=>ute(a,e,h).then(f).catch(p=>{if(p instanceof Response){let y=N0(p,nt.VIDEO,t);if(y){Mn(e,y);return}}});if(e.preload==="none"){let p=()=>{m(),e.removeEventListener("loadedmetadata",y)},y=()=>{m(),e.removeEventListener("play",p)};Vt(e,"play",p,{once:!0}),Vt(e,"loadedmetadata",y,{once:!0})}else m();(n=t.tokens)!=null&&n.drm?Cte(t,e):Vt(e,"encrypted",()=>{let p=ue("Attempting to play DRM-protected content without providing a DRM token."),y=new ie(p,ie.MEDIA_ERR_ENCRYPTED,!0);y.errorCategory=nt.DRM,y.muxCode=de.ENCRYPTED_MISSING_TOKEN,Mn(e,y)},{once:!0}),e.setAttribute("src",a),t.startTime&&(((r=wt.get(e))!=null?r:{}).startTime=t.startTime,e.addEventListener("durationchange",B$,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",V$),e.addEventListener("error",pb),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(f=>{f.remove()})},{once:!0}),Vt(e,"pause",l),Vt(e,"seeked",l),Vt(e,"play",()=>{e.ended||P$(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else i&&a?(i.once(Le.Events.LEVEL_LOADED,(h,f)=>{dte(f.details,e,i),d(),mb(e)===He.LIVE&&!Number.isFinite(e.duration)&&(i.on(Le.Events.LEVEL_UPDATED,d),Vt(e,"durationchange",()=>{Number.isFinite(e.duration)&&i.off(Le.Events.LEVELS_UPDATED,d)}))}),i.on(Le.Events.ERROR,(h,f)=>{var m,p;let y=Ote(f,t);if(y.muxCode===de.NETWORK_NOT_READY){let g=(m=wt.get(e))!=null?m:{},v=(p=g.retryCount)!=null?p:0;if(v<6){let E=v===0?5e3:6e4,T=new ie(`Retrying in ${E/1e3} seconds...`,y.code,y.fatal);Object.assign(T,y),Mn(e,T),setTimeout(()=>{g.retryCount=v+1,f.details==="manifestLoadError"&&f.url&&i.loadSource(f.url)},E);return}else{g.retryCount=0;let E=new ie('Try again later or <a href="#" onclick="window.location.reload(); return false;" style="color: #4a90e2;">click here to retry</a>',y.code,y.fatal);Object.assign(E,y),Mn(e,E);return}}Mn(e,y)}),i.on(Le.Events.MANIFEST_LOADED,()=>{let h=wt.get(e);h&&h.error&&(h.error=null,h.retryCount=0,e.dispatchEvent(new Event("emptied")),e.dispatchEvent(new Event("loadstart")))}),e.addEventListener("error",pb),Vt(e,"waiting",l),Kee(t,i),Gee(e,i),i.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function B$(t){var e;let i=t.target,n=(e=wt.get(i))==null?void 0:e.startTime;if(n&&Cee(i.seekable,i.duration,n)){let r=i.preload==="auto";r&&(i.preload="none"),i.currentTime=n,r&&(i.preload="auto")}}async function V$(t){if(!t.isTrusted)return;t.stopImmediatePropagation();let e=t.target;if(!(e!=null&&e.error))return;let{message:i,code:n}=e.error,r=new ie(i,n);if(e.src&&n===ie.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var s;let a=(s=D$(e))!=null?s:e.error;(a==null?void 0:a.code)===ie.MEDIA_ERR_SRC_NOT_SUPPORTED&&Mn(e,r)},500);return}if(e.src&&(n!==ie.MEDIA_ERR_DECODE||n!==void 0))try{let{status:s}=await fetch(e.src);r.data={response:{code:s}}}catch{}Mn(e,r)}function Mn(t,e){var i;e.fatal&&(((i=wt.get(t))!=null?i:{}).error=e,t.dispatchEvent(new CustomEvent("error",{detail:e})))}function pb(t){var e,i;if(!(t instanceof CustomEvent)||!(t.detail instanceof ie))return;let n=t.target,r=t.detail;!r||!r.fatal||(((e=wt.get(n))!=null?e:{}).error=r,(i=n.mux)==null||i.emit("error",{player_error_code:r.code,player_error_message:r.message,player_error_context:r.context}))}var Ote=(t,e)=>{var i,n,r;t.fatal?console.error("getErrorFromHlsErrorData()",t):e.debug&&console.warn("getErrorFromHlsErrorData() (non-fatal)",t);let s={[Le.ErrorTypes.NETWORK_ERROR]:ie.MEDIA_ERR_NETWORK,[Le.ErrorTypes.MEDIA_ERROR]:ie.MEDIA_ERR_DECODE,[Le.ErrorTypes.KEY_SYSTEM_ERROR]:ie.MEDIA_ERR_ENCRYPTED},a=c=>[Le.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,Le.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(c.details)?ie.MEDIA_ERR_NETWORK:s[c.type],o=c=>{if(c.type===Le.ErrorTypes.KEY_SYSTEM_ERROR)return nt.DRM;if(c.type===Le.ErrorTypes.NETWORK_ERROR)return nt.VIDEO},l,u=a(t);if(u===ie.MEDIA_ERR_NETWORK&&t.response){let c=(i=o(t))!=null?i:nt.VIDEO;l=(n=N0(t.response,c,e,t.fatal))!=null?n:new ie("",u,t.fatal)}else if(u===ie.MEDIA_ERR_ENCRYPTED)if(t.details===Le.ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let c=ue("Attempting to play DRM-protected content without providing a DRM token.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_MISSING_TOKEN}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_NO_ACCESS){let c=ue("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_NO_SESSION){let c=ue("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,!0),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED){let c=ue("Failed to update DRM license. This may be an issue with the player or your protected content.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let c=ue("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let c=ue("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_CDM_ERROR}else if(t.details===Le.ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let c=ue("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");l=new ie(c,ie.MEDIA_ERR_ENCRYPTED,!1),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_OUTPUT_RESTRICTED}else l=new ie(t.error.message,ie.MEDIA_ERR_ENCRYPTED,t.fatal),l.errorCategory=nt.DRM,l.muxCode=de.ENCRYPTED_ERROR;else l=new ie("",u,t.fatal);return l.context||(l.context=`${t.url?`url: ${t.url}
`:""}${t.response&&(t.response.code||t.response.text)?`response: ${t.response.code}, ${t.response.text}
`:""}${t.reason?`failure reason: ${t.reason}
`:""}${t.level?`level: ${t.level}
`:""}${t.parent?`parent stream controller: ${t.parent}
`:""}${t.buffer?`buffer length: ${t.buffer}
`:""}${t.error?`error: ${t.error}
`:""}${t.event?`event: ${t.event}
`:""}${t.err?`error message: ${(r=t.err)==null?void 0:r.message}
`:""}`),l.data=t,l};const Mte=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"],H$=["autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"];function Nte(t){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${q$(t)}></audio>
    </slot>
    <slot></slot>
  `}function $te(t){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${q$(t)}></video>
    </slot>
    <slot></slot>
  `}function Y$(t,{tag:e,is:i}){var s,a,o,l,u,K$,d,h,f,m,p,To,g,gb,E,G$,_,vb,A,W$,L,j$;const n=(a=(s=globalThis.document)==null?void 0:s.createElement)==null?void 0:a.call(s,e,{is:i}),r=n?Fte(n):[];return o=class extends t{constructor(){super(...arguments);he(this,p);he(this,g);he(this,E);he(this,_);he(this,A);he(this,L);he(this,d,!1);he(this,h,null);he(this,f,new Map);he(this,m,void 0);$e(this,"get");$e(this,"set");$e(this,"call")}static get observedAttributes(){var $,B;return it($=o,u,K$).call($),[...((B=n==null?void 0:n.constructor)==null?void 0:B.observedAttributes)??[],...H$]}get nativeEl(){var w;return it(this,p,To).call(this),F(this,h)??this.querySelector(":scope > [slot=media]")??this.querySelector(e)??((w=this.shadowRoot)==null?void 0:w.querySelector(e))??null}set nativeEl(w){Se(this,h,w)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(w){this.toggleAttribute("muted",w)}get src(){return this.getAttribute("src")}set src(w){this.setAttribute("src",`${w}`)}get preload(){var w;return this.getAttribute("preload")??((w=this.nativeEl)==null?void 0:w.preload)}set preload(w){this.setAttribute("preload",`${w}`)}init(){if(!this.shadowRoot){this.attachShadow({mode:"open"});const w=Ute(this.attributes);i&&(w.is=i),e&&(w.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(w)}this.nativeEl.muted=this.hasAttribute("muted");for(const w of r)it(this,A,W$).call(this,w);Se(this,m,new MutationObserver(it(this,E,G$).bind(this))),this.shadowRoot.addEventListener("slotchange",()=>it(this,g,gb).call(this)),it(this,g,gb).call(this);for(const w of this.constructor.Events)this.shadowRoot.addEventListener(w,this,!0)}handleEvent(w){w.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(w.type,{detail:w.detail}))}attributeChangedCallback(w,$,B){it(this,p,To).call(this),it(this,L,j$).call(this,w,$,B)}connectedCallback(){it(this,p,To).call(this)}},l=new WeakMap,u=new WeakSet,K$=function(){if(F(this,l))return;Se(this,l,!0);const w=new Set(this.observedAttributes);w.delete("muted");for(const $ of r)if(!($ in this.prototype))if(typeof n[$]=="function")this.prototype[$]=function(...B){return it(this,p,To).call(this),(()=>{var C;if(this.call)return this.call($,...B);const V=(C=this.nativeEl)==null?void 0:C[$];return V==null?void 0:V.apply(this.nativeEl,B)})()};else{const B={get(){var V,C;it(this,p,To).call(this);const U=$.toLowerCase();if(w.has(U)){const K=this.getAttribute(U);return K===null?!1:K===""?!0:K}return((V=this.get)==null?void 0:V.call(this,$))??((C=this.nativeEl)==null?void 0:C[$])}};$!==$.toUpperCase()&&(B.set=function(U){it(this,p,To).call(this);const V=$.toLowerCase();if(w.has(V)){U===!0||U===!1||U==null?this.toggleAttribute(V,!!U):this.setAttribute(V,U);return}if(this.set){this.set($,U);return}this.nativeEl&&(this.nativeEl[$]=U)}),Object.defineProperty(this.prototype,$,B)}},d=new WeakMap,h=new WeakMap,f=new WeakMap,m=new WeakMap,p=new WeakSet,To=function(){F(this,d)||(Se(this,d,!0),this.init())},g=new WeakSet,gb=function(){var U;const w=new Map(F(this,f)),$=(U=this.shadowRoot)==null?void 0:U.querySelector("slot:not([name])");($==null?void 0:$.assignedElements({flatten:!0}).filter(V=>["track","source"].includes(V.localName))).forEach(V=>{var K,z;w.delete(V);let C=F(this,f).get(V);C||(C=V.cloneNode(),F(this,f).set(V,C),(K=F(this,m))==null||K.observe(V,{attributes:!0})),(z=this.nativeEl)==null||z.append(C),it(this,_,vb).call(this,C)}),w.forEach((V,C)=>{V.remove(),F(this,f).delete(C)})},E=new WeakSet,G$=function(w){for(const $ of w)if($.type==="attributes"){const{target:B,attributeName:U}=$,V=F(this,f).get(B);V&&U&&(V.setAttribute(U,B.getAttribute(U)??""),it(this,_,vb).call(this,V))}},_=new WeakSet,vb=function(w){w&&w.localName==="track"&&w.default&&(w.kind==="chapters"||w.kind==="metadata")&&w.track.mode==="disabled"&&(w.track.mode="hidden")},A=new WeakSet,W$=function(w){if(Object.prototype.hasOwnProperty.call(this,w)){const $=this[w];delete this[w],this[w]=$}},L=new WeakSet,j$=function(w,$,B){var U,V,C;["id","class"].includes(w)||!o.observedAttributes.includes(w)&&this.constructor.observedAttributes.includes(w)||(B===null?(U=this.nativeEl)==null||U.removeAttribute(w):((V=this.nativeEl)==null?void 0:V.getAttribute(w))!==B&&((C=this.nativeEl)==null||C.setAttribute(w,B)))},he(o,u),$e(o,"getTemplateHTML",e.endsWith("audio")?Nte:$te),$e(o,"shadowRootOptions",{mode:"open"}),$e(o,"Events",Mte),he(o,l,!1),o}function Fte(t){const e=[];for(let i=Object.getPrototypeOf(t);i&&i!==HTMLElement.prototype;i=Object.getPrototypeOf(i)){const n=Object.getOwnPropertyNames(i);e.push(...n)}return e}function q$(t){let e="";for(const i in t){if(!H$.includes(i))continue;const n=t[i];n===""?e+=` ${i}`:e+=` ${i}="${n}"`}return e}function Ute(t){const e={};for(const i of t)e[i.name]=i.value;return e}const Cm=Y$(globalThis.HTMLElement??class{},{tag:"video"});Y$(globalThis.HTMLElement??class{},{tag:"audio"});var z$=t=>{throw TypeError(t)},ax=(t,e,i)=>e.has(t)||z$("Cannot "+i),di=(t,e,i)=>(ax(t,e,"read from private field"),i?i.call(t):e.get(t)),zn=(t,e,i)=>e.has(t)?z$("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),Rn=(t,e,i,n)=>(ax(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Dm=(t,e,i)=>(ax(t,e,"access private method"),i),Bte=()=>{try{return"0.28.0"}catch{}return"UNKNOWN"},Vte=Bte(),Hte=()=>Vte,Kte=`
<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" part="logo" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2" viewBox="0 0 1600 500"><g fill="#fff"><path d="M994.287 93.486c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m0-93.486c-34.509 0-62.484 27.976-62.484 62.486v187.511c0 68.943-56.09 125.033-125.032 125.033s-125.03-56.09-125.03-125.033V62.486C681.741 27.976 653.765 0 619.256 0s-62.484 27.976-62.484 62.486v187.511C556.772 387.85 668.921 500 806.771 500c137.851 0 250.001-112.15 250.001-250.003V62.486c0-34.51-27.976-62.486-62.485-62.486M1537.51 468.511c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31m-275.883-218.509-143.33 143.329c-24.402 24.402-24.402 63.966 0 88.368 24.402 24.402 63.967 24.402 88.369 0l143.33-143.329 143.328 143.329c24.402 24.4 63.967 24.402 88.369 0 24.403-24.402 24.403-63.966.001-88.368l-143.33-143.329.001-.004 143.329-143.329c24.402-24.402 24.402-63.965 0-88.367s-63.967-24.402-88.369 0L1349.996 161.63 1206.667 18.302c-24.402-24.401-63.967-24.402-88.369 0s-24.402 63.965 0 88.367l143.329 143.329v.004ZM437.511 468.521c-17.121 0-31-13.879-31-31 0-17.121 13.879-31 31-31 17.121 0 31 13.879 31 31 0 17.121-13.879 31-31 31M461.426 4.759C438.078-4.913 411.2.432 393.33 18.303L249.999 161.632 106.669 18.303C88.798.432 61.922-4.913 38.573 4.759 15.224 14.43-.001 37.214-.001 62.488v375.026c0 34.51 27.977 62.486 62.487 62.486 34.51 0 62.486-27.976 62.486-62.486V213.341l80.843 80.844c24.404 24.402 63.965 24.402 88.369 0l80.843-80.844v224.173c0 34.51 27.976 62.486 62.486 62.486s62.486-27.976 62.486-62.486V62.488c0-25.274-15.224-48.058-38.573-57.729" style="fill-rule:nonzero"/></g></svg>`,N={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PLAYER_INIT_TIME:"player-init-time",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type",LOGO:"logo"},Gte=Object.values(N),mC=Hte(),pC="mux-video",Ar,Rd,Ip,wd,Lp,Rp,wp,Cp,Dp,Cd,Wl,Dd,Wte=class extends Cm{constructor(){super(),zn(this,Wl),zn(this,Ar),zn(this,Rd),zn(this,Ip),zn(this,wd,{}),zn(this,Lp,{}),zn(this,Rp),zn(this,wp),zn(this,Cp),zn(this,Dp),zn(this,Cd,""),Rn(this,Ip,ix()),this.nativeEl.addEventListener("muxmetadata",e=>{var i;let n=Tte(this.nativeEl),r=(i=this.metadata)!=null?i:{};this.metadata={...n,...r},(n==null?void 0:n["com.mux.video.branding"])==="mux-free-plan"&&(Rn(this,Cd,"default"),this.updateLogo())})}static get NAME(){return pC}static get VERSION(){return mC}static get observedAttributes(){var e;return[...Gte,...(e=Cm.observedAttributes)!=null?e:[]]}static getLogoHTML(e){return!e||e==="false"?"":e==="default"?Kte:`<img part="logo" src="${e}" />`}static getTemplateHTML(e={}){var i;return`
      ${Cm.getTemplateHTML(e)}
      <style>
        :host {
          position: relative;
        }
        slot[name="logo"] {
          display: flex;
          justify-content: end;
          position: absolute;
          top: 1rem;
          right: 1rem;
          opacity: 0;
          transition: opacity 0.25s ease-in-out;
          z-index: 1;
        }
        slot[name="logo"]:has([part="logo"]) {
          opacity: 1;
        }
        slot[name="logo"] [part="logo"] {
          width: 5rem;
          pointer-events: none;
          user-select: none;
        }
      </style>
      <slot name="logo">
        ${this.getLogoHTML((i=e[N.LOGO])!=null?i:"")}
      </slot>
    `}get preferCmcd(){var e;return(e=this.getAttribute(N.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?M0.includes(e)?this.setAttribute(N.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${M0.join()}`):this.removeAttribute(N.PREFER_CMCD))}get playerInitTime(){return this.hasAttribute(N.PLAYER_INIT_TIME)?+this.getAttribute(N.PLAYER_INIT_TIME):di(this,Ip)}set playerInitTime(e){e!=this.playerInitTime&&(e==null?this.removeAttribute(N.PLAYER_INIT_TIME):this.setAttribute(N.PLAYER_INIT_TIME,`${+e}`))}get playerSoftwareName(){var e;return(e=di(this,Cp))!=null?e:pC}set playerSoftwareName(e){Rn(this,Cp,e)}get playerSoftwareVersion(){var e;return(e=di(this,wp))!=null?e:mC}set playerSoftwareVersion(e){Rn(this,wp,e)}get _hls(){var e;return(e=di(this,Ar))==null?void 0:e.engine}get mux(){var e;return(e=this.nativeEl)==null?void 0:e.mux}get error(){var e;return(e=D$(this.nativeEl))!=null?e:null}get errorTranslator(){return di(this,Dp)}set errorTranslator(e){Rn(this,Dp,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(N.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(N.TYPE,e):this.removeAttribute(N.TYPE))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(N.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(N.DEBUG,""):this.removeAttribute(N.DEBUG))}get disableTracking(){return this.hasAttribute(N.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(N.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(N.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(N.DISABLE_COOKIES,""):this.removeAttribute(N.DISABLE_COOKIES))}get disablePseudoEnded(){return this.hasAttribute(N.DISABLE_PSEUDO_ENDED)}set disablePseudoEnded(e){e!==this.disablePseudoEnded&&(e?this.setAttribute(N.DISABLE_PSEUDO_ENDED,""):this.removeAttribute(N.DISABLE_PSEUDO_ENDED))}get startTime(){let e=this.getAttribute(N.START_TIME);if(e==null)return;let i=+e;return Number.isNaN(i)?void 0:i}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(N.START_TIME):this.setAttribute(N.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(N.PLAYBACK_ID)?this.getAttribute(N.PLAYBACK_ID):(e=nx(this.src))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(N.PLAYBACK_ID,e):this.removeAttribute(N.PLAYBACK_ID))}get maxResolution(){var e;return(e=this.getAttribute(N.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(N.MAX_RESOLUTION,e):this.removeAttribute(N.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(N.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(N.MIN_RESOLUTION,e):this.removeAttribute(N.MIN_RESOLUTION))}get renditionOrder(){var e;return(e=this.getAttribute(N.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(N.RENDITION_ORDER,e):this.removeAttribute(N.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(N.PROGRAM_START_TIME);if(e==null)return;let i=+e;return Number.isNaN(i)?void 0:i}set programStartTime(e){e==null?this.removeAttribute(N.PROGRAM_START_TIME):this.setAttribute(N.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(N.PROGRAM_END_TIME);if(e==null)return;let i=+e;return Number.isNaN(i)?void 0:i}set programEndTime(e){e==null?this.removeAttribute(N.PROGRAM_END_TIME):this.setAttribute(N.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(N.ASSET_START_TIME);if(e==null)return;let i=+e;return Number.isNaN(i)?void 0:i}set assetStartTime(e){e==null?this.removeAttribute(N.ASSET_START_TIME):this.setAttribute(N.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(N.ASSET_END_TIME);if(e==null)return;let i=+e;return Number.isNaN(i)?void 0:i}set assetEndTime(e){e==null?this.removeAttribute(N.ASSET_END_TIME):this.setAttribute(N.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return(e=this.getAttribute(N.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(N.CUSTOM_DOMAIN,e):this.removeAttribute(N.CUSTOM_DOMAIN))}get drmToken(){var e;return(e=this.getAttribute(N.DRM_TOKEN))!=null?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(N.DRM_TOKEN,e):this.removeAttribute(N.DRM_TOKEN))}get playbackToken(){var e,i,n,r;if(this.hasAttribute(N.PLAYBACK_TOKEN))return(e=this.getAttribute(N.PLAYBACK_TOKEN))!=null?e:void 0;if(this.hasAttribute(N.PLAYBACK_ID)){let[,s]=XA((i=this.playbackId)!=null?i:"");return(n=new URLSearchParams(s).get("token"))!=null?n:void 0}if(this.src)return(r=new URLSearchParams(this.src).get("token"))!=null?r:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(N.PLAYBACK_TOKEN,e):this.removeAttribute(N.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(N.PLAYBACK_TOKEN),i=this.getAttribute(N.DRM_TOKEN);return{...di(this,Lp),...e!=null?{playback:e}:{},...i!=null?{drm:i}:{}}}set tokens(e){Rn(this,Lp,e??{})}get ended(){return M$(this.nativeEl,this._hls)}get envKey(){var e;return(e=this.getAttribute(N.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(N.ENV_KEY,e):this.removeAttribute(N.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(N.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(N.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(N.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(N.STREAM_TYPE))!=null?e:mb(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(N.STREAM_TYPE,e):this.removeAttribute(N.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(N.TARGET_LIVE_WINDOW)?+this.getAttribute(N.TARGET_LIVE_WINDOW):bte(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(N.TARGET_LIVE_WINDOW):this.setAttribute(N.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e,i;if(this.hasAttribute(N.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,r=(e=this.nativeEl.seekable.end(0))!=null?e:0,s=(i=this.nativeEl.seekable.start(0))!=null?i:0;return Math.max(s,r-n)}return Ste(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(N.LIVE_EDGE_OFFSET))return+this.getAttribute(N.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.liveEdgeOffset&&(e==null?this.removeAttribute(N.LIVE_EDGE_OFFSET):this.setAttribute(N.LIVE_EDGE_OFFSET,`${+e}`))}get seekable(){return rx(this.nativeEl)}async addCuePoints(e){return A$(this.nativeEl,e)}get activeCuePoint(){return x$(this.nativeEl)}get cuePoints(){return jee(this.nativeEl)}async addChapters(e){return I$(this.nativeEl,e)}get activeChapter(){return L$(this.nativeEl)}get chapters(){return qee(this.nativeEl)}getStartDate(){return Qee(this.nativeEl,this._hls)}get currentPdt(){return Xee(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(N.PREFER_PLAYBACK);if(e===Yr.MSE||e===Yr.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===Yr.MSE||e===Yr.NATIVE?this.setAttribute(N.PREFER_PLAYBACK,e):this.removeAttribute(N.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![N.METADATA_URL].includes(e)).reduce((e,i)=>{let n=this.getAttribute(i);return n!=null&&(e[i.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e},{}),...di(this,wd)}}set metadata(e){Rn(this,wd,e??{}),this.mux&&this.mux.emit("hb",di(this,wd))}get _hlsConfig(){return di(this,Rp)}set _hlsConfig(e){Rn(this,Rp,e)}get logo(){var e;return(e=this.getAttribute(N.LOGO))!=null?e:di(this,Cd)}set logo(e){e?this.setAttribute(N.LOGO,e):this.removeAttribute(N.LOGO)}load(){Rn(this,Ar,xte(this,this.nativeEl,di(this,Ar)))}unload(){N$(this.nativeEl,di(this,Ar),this),Rn(this,Ar,void 0)}attributeChangedCallback(e,i,n){var r,s;switch(Cm.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,i,n),e){case N.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=n??void 0;break;case N.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=n??void 0;break;case"src":{let a=!!i,o=!!n;!a&&o?Dm(this,Wl,Dd).call(this):a&&!o?this.unload():a&&o&&(this.unload(),Dm(this,Wl,Dd).call(this));break}case"autoplay":if(n===i)break;(r=di(this,Ar))==null||r.setAutoplay(this.autoplay);break;case"preload":if(n===i)break;(s=di(this,Ar))==null||s.setPreload(n);break;case N.PLAYBACK_ID:this.src=fb(this);break;case N.DEBUG:{let a=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=a);break}case N.METADATA_URL:n&&fetch(n).then(a=>a.json()).then(a=>this.metadata=a).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`));break;case N.STREAM_TYPE:(n==null||n!==i)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case N.TARGET_LIVE_WINDOW:(n==null||n!==i)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break;case N.LOGO:(n==null||n!==i)&&this.updateLogo();break;case N.DISABLE_TRACKING:{if(n==null||n!==i){let a=this.currentTime,o=this.paused;this.unload(),Dm(this,Wl,Dd).call(this).then(()=>{this.currentTime=a,o||this.play()})}break}case N.DISABLE_COOKIES:{(n==null||n!==i)&&this.disableCookies&&document.cookie.split(";").forEach(a=>{a.trim().startsWith("muxData")&&(document.cookie=a.replace(/^ +/,"").replace(/=.*/,"=;expires="+new Date().toUTCString()+";path=/"))});break}}}updateLogo(){if(!this.shadowRoot)return;let e=this.shadowRoot.querySelector('slot[name="logo"]');if(!e)return;let i=this.constructor.getLogoHTML(di(this,Cd)||this.logo);e.innerHTML=i}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),this.nativeEl&&this.src&&!di(this,Ar)&&Dm(this,Wl,Dd).call(this)}disconnectedCallback(){this.unload()}handleEvent(e){e.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(e.type,{composed:!0,detail:e.detail}))}};Ar=new WeakMap,Rd=new WeakMap,Ip=new WeakMap,wd=new WeakMap,Lp=new WeakMap,Rp=new WeakMap,wp=new WeakMap,Cp=new WeakMap,Dp=new WeakMap,Cd=new WeakMap,Wl=new WeakSet,Dd=async function(){di(this,Rd)||(await Rn(this,Rd,Promise.resolve()),Rn(this,Rd,null),this.load())};const Zo=new WeakMap;class XE extends Error{}class jte extends Error{}const Yte=["application/x-mpegURL","application/vnd.apple.mpegurl","audio/mpegurl"],qte=globalThis.WeakRef?class extends Set{add(t){super.add(new WeakRef(t))}forEach(t){super.forEach(e=>{const i=e.deref();i&&t(i)})}}:Set;function zte(t){var e,i,n;(i=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&i.isAvailable?(n=globalThis.cast)!=null&&n.framework?t():customElements.whenDefined("google-cast-button").then(t):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(t)}}function Qte(){return globalThis.chrome}function Xte(){var i;const t="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((i=globalThis.chrome)!=null&&i.cast||document.querySelector(`script[src="${t}"]`))return;const e=document.createElement("script");e.src=t,document.head.append(e)}function Pa(){var t,e;return(e=(t=globalThis.cast)==null?void 0:t.framework)==null?void 0:e.CastContext.getInstance()}function ox(){var t;return(t=Pa())==null?void 0:t.getCurrentSession()}function lx(){var t;return(t=ox())==null?void 0:t.getSessionObj().media[0]}function Zte(t){return new Promise((e,i)=>{lx().editTracksInfo(t,e,i)})}function Jte(t){return new Promise((e,i)=>{lx().getStatus(t,e,i)})}function gC(t){return Pa().setOptions({...Q$(),...t})}function Q$(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}function eie(t){if(!t)return;const e=/\.([a-zA-Z0-9]+)(?:\?.*)?$/,i=t.match(e);return i?i[1]:null}function tie(t){const e=t.split(`
`),i=[];for(let n=0;n<e.length;n++)if(e[n].trim().startsWith("#EXT-X-STREAM-INF")){const s=e[n+1]?e[n+1].trim():"";s&&!s.startsWith("#")&&i.push(s)}return i}function iie(t){return t.split(`
`).find(n=>!n.trim().startsWith("#")&&n.trim()!=="")}async function nie(t){try{const i=(await fetch(t,{method:"HEAD"})).headers.get("Content-Type");return Yte.some(n=>i===n)}catch(e){return console.error("Error while trying to get the Content-Type of the manifest",e),!1}}async function rie(t){try{const e=await(await fetch(t)).text();let i=e;const n=tie(e);if(n.length>0){const a=new URL(n[0],t).toString();i=await(await fetch(a)).text()}const r=iie(i);return eie(r)}catch(e){console.error("Error while trying to parse the manifest playlist",e);return}}const Pp=new qte,zs=new WeakSet;let Qt;zte(()=>{var t,e,i,n;if(!((e=(t=globalThis.chrome)==null?void 0:t.cast)!=null&&e.isAvailable)){console.debug("chrome.cast.isAvailable",(n=(i=globalThis.chrome)==null?void 0:i.cast)==null?void 0:n.isAvailable);return}Qt||(Qt=cast.framework,Pa().addEventListener(Qt.CastContextEventType.CAST_STATE_CHANGED,r=>{Pp.forEach(s=>{var a,o;return(o=(a=Zo.get(s)).onCastStateChanged)==null?void 0:o.call(a,r)})}),Pa().addEventListener(Qt.CastContextEventType.SESSION_STATE_CHANGED,r=>{Pp.forEach(s=>{var a,o;return(o=(a=Zo.get(s)).onSessionStateChanged)==null?void 0:o.call(a,r)})}),Pp.forEach(r=>{var s,a;return(a=(s=Zo.get(r)).init)==null?void 0:a.call(s)}))});let vC=0;var Be,bf,on,bs,Go,Wo,ya,uv,Ss,bo,cv,X$,dv,Z$,Sf,yb,hv,J$,_f,Eb,fv,e4,Af,Tb;class sie extends EventTarget{constructor(i){super();he(this,Ss);he(this,cv);he(this,dv);he(this,Sf);he(this,hv);he(this,_f);he(this,fv);he(this,Af);he(this,Be,void 0);he(this,bf,void 0);he(this,on,void 0);he(this,bs,void 0);he(this,Go,"disconnected");he(this,Wo,!1);he(this,ya,new Set);he(this,uv,new WeakMap);Se(this,Be,i),Pp.add(this),Zo.set(this,{init:()=>it(this,_f,Eb).call(this),onCastStateChanged:()=>it(this,Sf,yb).call(this),onSessionStateChanged:()=>it(this,hv,J$).call(this),getCastPlayer:()=>F(this,Ss,bo)}),it(this,_f,Eb).call(this)}get state(){return F(this,Go)}async watchAvailability(i){if(F(this,Be).disableRemotePlayback)throw new XE("disableRemotePlayback attribute is present.");return F(this,uv).set(i,++vC),F(this,ya).add(i),queueMicrotask(()=>i(it(this,dv,Z$).call(this))),vC}async cancelWatchAvailability(i){if(F(this,Be).disableRemotePlayback)throw new XE("disableRemotePlayback attribute is present.");i?F(this,ya).delete(i):F(this,ya).clear()}async prompt(){var n,r,s,a;if(F(this,Be).disableRemotePlayback)throw new XE("disableRemotePlayback attribute is present.");if(!((r=(n=globalThis.chrome)==null?void 0:n.cast)!=null&&r.isAvailable))throw new jte("The RemotePlayback API is disabled on this platform.");const i=zs.has(F(this,Be));zs.add(F(this,Be)),gC(F(this,Be).castOptions),Object.entries(F(this,bs)).forEach(([o,l])=>{F(this,on).controller.addEventListener(o,l)});try{await Pa().requestSession()}catch(o){if(i||zs.delete(F(this,Be)),o==="cancel")return;throw new Error(o)}(a=(s=Zo.get(F(this,Be)))==null?void 0:s.loadOnPrompt)==null||a.call(s)}}Be=new WeakMap,bf=new WeakMap,on=new WeakMap,bs=new WeakMap,Go=new WeakMap,Wo=new WeakMap,ya=new WeakMap,uv=new WeakMap,Ss=new WeakSet,bo=function(){if(zs.has(F(this,Be)))return F(this,on)},cv=new WeakSet,X$=function(){zs.has(F(this,Be))&&(Object.entries(F(this,bs)).forEach(([i,n])=>{F(this,on).controller.removeEventListener(i,n)}),zs.delete(F(this,Be)),F(this,Be).muted=F(this,on).isMuted,F(this,Be).currentTime=F(this,on).savedPlayerState.currentTime,F(this,on).savedPlayerState.isPaused===!1&&F(this,Be).play())},dv=new WeakSet,Z$=function(){var n;const i=(n=Pa())==null?void 0:n.getCastState();return i&&i!=="NO_DEVICES_AVAILABLE"},Sf=new WeakSet,yb=function(){const i=Pa().getCastState();if(zs.has(F(this,Be))&&i==="CONNECTING"&&(Se(this,Go,"connecting"),this.dispatchEvent(new Event("connecting"))),!F(this,Wo)&&(i!=null&&i.includes("CONNECT"))){Se(this,Wo,!0);for(let n of F(this,ya))n(!0)}else if(F(this,Wo)&&(!i||i==="NO_DEVICES_AVAILABLE")){Se(this,Wo,!1);for(let n of F(this,ya))n(!1)}},hv=new WeakSet,J$=async function(){var n;const{SESSION_RESUMED:i}=Qt.SessionState;if(Pa().getSessionState()===i&&F(this,Be).castSrc===((n=lx())==null?void 0:n.media.contentId)){zs.add(F(this,Be)),Object.entries(F(this,bs)).forEach(([r,s])=>{F(this,on).controller.addEventListener(r,s)});try{await Jte(new chrome.cast.media.GetStatusRequest)}catch(r){console.error(r)}F(this,bs)[Qt.RemotePlayerEventType.IS_PAUSED_CHANGED](),F(this,bs)[Qt.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},_f=new WeakSet,Eb=function(){!Qt||F(this,bf)||(Se(this,bf,!0),gC(F(this,Be).castOptions),F(this,Be).textTracks.addEventListener("change",()=>it(this,Af,Tb).call(this)),it(this,Sf,yb).call(this),Se(this,on,new Qt.RemotePlayer),new Qt.RemotePlayerController(F(this,on)),Se(this,bs,{[Qt.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:i})=>{i===!0?(Se(this,Go,"connected"),this.dispatchEvent(new Event("connect"))):(it(this,cv,X$).call(this),Se(this,Go,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[Qt.RemotePlayerEventType.DURATION_CHANGED]:()=>{F(this,Be).dispatchEvent(new Event("durationchange"))},[Qt.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{F(this,Be).dispatchEvent(new Event("volumechange"))},[Qt.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{F(this,Be).dispatchEvent(new Event("volumechange"))},[Qt.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var i;(i=F(this,Ss,bo))!=null&&i.isMediaLoaded&&F(this,Be).dispatchEvent(new Event("timeupdate"))},[Qt.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{F(this,Be).dispatchEvent(new Event("resize"))},[Qt.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{F(this,Be).dispatchEvent(new Event(this.paused?"pause":"play"))},[Qt.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var i,n;((i=F(this,Ss,bo))==null?void 0:i.playerState)!==chrome.cast.media.PlayerState.PAUSED&&F(this,Be).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(n=F(this,Ss,bo))==null?void 0:n.playerState]))},[Qt.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var i;(i=F(this,Ss,bo))!=null&&i.isMediaLoaded&&(await Promise.resolve(),it(this,fv,e4).call(this))}}))},fv=new WeakSet,e4=function(){it(this,Af,Tb).call(this)},Af=new WeakSet,Tb=async function(){var h,f,m;if(!F(this,Ss,bo))return;const n=(((h=F(this,on).mediaInfo)==null?void 0:h.tracks)??[]).filter(({type:p})=>p===chrome.cast.media.TrackType.TEXT),r=[...F(this,Be).textTracks].filter(({kind:p})=>p==="subtitles"||p==="captions"),s=n.map(({language:p,name:y,trackId:g})=>{const{mode:v}=r.find(E=>E.language===p&&E.label===y)??{};return v?{mode:v,trackId:g}:!1}).filter(Boolean),o=s.filter(({mode:p})=>p!=="showing").map(({trackId:p})=>p),l=s.find(({mode:p})=>p==="showing"),u=((m=(f=ox())==null?void 0:f.getSessionObj().media[0])==null?void 0:m.activeTrackIds)??[];let c=u;if(u.length&&(c=c.filter(p=>!o.includes(p))),l!=null&&l.trackId&&(c=[...c,l.trackId]),c=[...new Set(c)],!((p,y)=>p.length===y.length&&p.every(g=>y.includes(g)))(u,c))try{const p=new chrome.cast.media.EditTracksInfoRequest(c);await Zte(p)}catch(p){console.error(p)}};const aie=t=>{var e,i,n,r,s,a,Pe,l,t4;return e=class extends t{constructor(){super(...arguments);he(this,a);he(this,l);he(this,i,{paused:!1});he(this,n,Q$());he(this,r,void 0);he(this,s,void 0)}get remote(){return F(this,s)?F(this,s):Qte()?(this.disableRemotePlayback||Xte(),Zo.set(this,{loadOnPrompt:()=>it(this,l,t4).call(this)}),Se(this,s,new sie(this))):super.remote}attributeChangedCallback(h,f,m){if(super.attributeChangedCallback(h,f,m),h==="cast-receiver"&&m){F(this,n).receiverApplicationId=m;return}if(F(this,a,Pe))switch(h){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var g;if(!F(this,a,Pe))return super.load();const h=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);h.customData=this.castCustomData;const f=[...this.querySelectorAll("track")].filter(({kind:v,src:E})=>E&&(v==="subtitles"||v==="captions")),m=[];let p=0;if(f.length&&(h.tracks=f.map(v=>{const E=++p;m.length===0&&v.track.mode==="showing"&&m.push(E);const T=new chrome.cast.media.Track(E,chrome.cast.media.TrackType.TEXT);return T.trackContentId=v.src,T.trackContentType="text/vtt",T.subtype=v.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,T.name=v.label,T.language=v.srclang,T})),this.castStreamType==="live"?h.streamType=chrome.cast.media.StreamType.LIVE:h.streamType=chrome.cast.media.StreamType.BUFFERED,h.metadata=new chrome.cast.media.GenericMediaMetadata,h.metadata.title=this.title,h.metadata.images=[{url:this.poster}],nie(this.castSrc)){const v=await rie(this.castSrc);(v==null?void 0:v.includes("m4s"))||(v==null?void 0:v.includes("mp4"))?(h.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.FMP4,h.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.FMP4):v!=null&&v.includes("ts")&&(h.hlsSegmentFormat=chrome.cast.media.HlsSegmentFormat.TS,h.hlsVideoSegmentFormat=chrome.cast.media.HlsVideoSegmentFormat.TS)}const y=new chrome.cast.media.LoadRequest(h);y.currentTime=super.currentTime??0,y.autoplay=!F(this,i).paused,y.activeTrackIds=m,await((g=ox())==null?void 0:g.loadMedia(y)),this.dispatchEvent(new Event("volumechange"))}play(){var h;if(F(this,a,Pe)){F(this,a,Pe).isPaused&&((h=F(this,a,Pe).controller)==null||h.playOrPause());return}return super.play()}pause(){var h;if(F(this,a,Pe)){F(this,a,Pe).isPaused||(h=F(this,a,Pe).controller)==null||h.playOrPause();return}super.pause()}get castOptions(){return F(this,n)}get castReceiver(){return this.getAttribute("cast-receiver")??void 0}set castReceiver(h){this.castReceiver!=h&&this.setAttribute("cast-receiver",`${h}`)}get castSrc(){var h;return this.getAttribute("cast-src")??((h=this.querySelector("source"))==null?void 0:h.src)??this.currentSrc}set castSrc(h){this.castSrc!=h&&this.setAttribute("cast-src",`${h}`)}get castContentType(){return this.getAttribute("cast-content-type")??void 0}set castContentType(h){this.setAttribute("cast-content-type",`${h}`)}get castStreamType(){return this.getAttribute("cast-stream-type")??this.streamType??void 0}set castStreamType(h){this.setAttribute("cast-stream-type",`${h}`)}get castCustomData(){return F(this,r)}set castCustomData(h){const f=typeof h;if(!["object","undefined"].includes(f)){console.error(`castCustomData must be nullish or an object but value was of type ${f}`);return}Se(this,r,h)}get readyState(){if(F(this,a,Pe))switch(F(this,a,Pe).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return F(this,a,Pe)?F(this,a,Pe).isPaused:super.paused}get muted(){var h;return F(this,a,Pe)?(h=F(this,a,Pe))==null?void 0:h.isMuted:super.muted}set muted(h){var f;if(F(this,a,Pe)){(h&&!F(this,a,Pe).isMuted||!h&&F(this,a,Pe).isMuted)&&((f=F(this,a,Pe).controller)==null||f.muteOrUnmute());return}super.muted=h}get volume(){var h;return F(this,a,Pe)?((h=F(this,a,Pe))==null?void 0:h.volumeLevel)??1:super.volume}set volume(h){var f;if(F(this,a,Pe)){F(this,a,Pe).volumeLevel=+h,(f=F(this,a,Pe).controller)==null||f.setVolumeLevel();return}super.volume=h}get duration(){var h,f;return F(this,a,Pe)&&((h=F(this,a,Pe))!=null&&h.isMediaLoaded)?((f=F(this,a,Pe))==null?void 0:f.duration)??NaN:super.duration}get currentTime(){var h,f;return F(this,a,Pe)&&((h=F(this,a,Pe))!=null&&h.isMediaLoaded)?((f=F(this,a,Pe))==null?void 0:f.currentTime)??0:super.currentTime}set currentTime(h){var f;if(F(this,a,Pe)){F(this,a,Pe).currentTime=h,(f=F(this,a,Pe).controller)==null||f.seek();return}super.currentTime=h}},i=new WeakMap,n=new WeakMap,r=new WeakMap,s=new WeakMap,a=new WeakSet,Pe=function(){var h,f;return(f=(h=Zo.get(this.remote))==null?void 0:h.getCastPlayer)==null?void 0:f.call(h)},l=new WeakSet,t4=async function(){F(this,i).paused=Kf(e.prototype,this,"paused"),Kf(e.prototype,this,"pause").call(this),this.muted=Kf(e.prototype,this,"muted");try{await this.load()}catch(h){console.error(h)}},$e(e,"observedAttributes",[...t.observedAttributes??[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),e};class ry extends Event{constructor(i,n){super(i);$e(this,"track");this.track=n.track}}const bb=new WeakMap;function re(t){return bb.get(t)??oie(t,{})}function oie(t,e){let i=bb.get(t);return i||bb.set(t,i={}),Object.assign(i,e)}function Sb(t,e){const i=t.videoTracks;re(e).media=t,re(e).renditionSet||(re(e).renditionSet=new Set);const n=re(i).trackSet;n.add(e);const r=n.size-1;r in Ab.prototype||Object.defineProperty(Ab.prototype,r,{get(){return[...re(this).trackSet][r]}}),queueMicrotask(()=>{i.dispatchEvent(new ry("addtrack",{track:e}))})}function _b(t){var n;const e=(n=re(t).media)==null?void 0:n.videoTracks;if(!e)return;re(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new ry("removetrack",{track:t}))})}function lie(t){const e=re(t).media.videoTracks??[];let i=!1;for(const n of e)n!==t&&(n.selected=!1,i=!0);if(i){if(re(e).changeRequested)return;re(e).changeRequested=!0,queueMicrotask(()=>{delete re(e).changeRequested,e.dispatchEvent(new Event("change"))})}}var Ea,Ta,ba,jo,Pd;class Ab extends EventTarget{constructor(){super();he(this,jo);he(this,Ea,void 0);he(this,Ta,void 0);he(this,ba,void 0);re(this).trackSet=new Set}[Symbol.iterator](){return F(this,jo,Pd).values()}get length(){return F(this,jo,Pd).size}getTrackById(i){return[...F(this,jo,Pd)].find(n=>n.id===i)??null}get selectedIndex(){return[...F(this,jo,Pd)].findIndex(i=>i.selected)}get onaddtrack(){return F(this,Ea)}set onaddtrack(i){F(this,Ea)&&(this.removeEventListener("addtrack",F(this,Ea)),Se(this,Ea,void 0)),typeof i=="function"&&(Se(this,Ea,i),this.addEventListener("addtrack",i))}get onremovetrack(){return F(this,Ta)}set onremovetrack(i){F(this,Ta)&&(this.removeEventListener("removetrack",F(this,Ta)),Se(this,Ta,void 0)),typeof i=="function"&&(Se(this,Ta,i),this.addEventListener("removetrack",i))}get onchange(){return F(this,ba)}set onchange(i){F(this,ba)&&(this.removeEventListener("change",F(this,ba)),Se(this,ba,void 0)),typeof i=="function"&&(Se(this,ba,i),this.addEventListener("change",i))}}Ea=new WeakMap,Ta=new WeakMap,ba=new WeakMap,jo=new WeakSet,Pd=function(){return re(this).trackSet};class sy extends Event{constructor(i,n){super(i);$e(this,"rendition");this.rendition=n.rendition}}function uie(t,e){const i=re(t).media.videoRenditions;re(e).media=re(t).media,re(e).track=t;const n=re(t).renditionSet;n.add(e);const r=n.size-1;r in xb.prototype||Object.defineProperty(xb.prototype,r,{get(){return jl(this)[r]}}),queueMicrotask(()=>{t.selected&&i.dispatchEvent(new sy("addrendition",{rendition:e}))})}function cie(t){const e=re(t).media.videoRenditions,i=re(t).track;re(i).renditionSet.delete(t),queueMicrotask(()=>{re(t).track.selected&&e.dispatchEvent(new sy("removerendition",{rendition:t}))})}function die(t){const e=re(t).media.videoRenditions;!e||re(e).changeRequested||(re(e).changeRequested=!0,queueMicrotask(()=>{delete re(e).changeRequested,re(t).track.selected&&e.dispatchEvent(new Event("change"))}))}function jl(t){return[...re(t).media.videoTracks].filter(i=>i.selected).flatMap(i=>[...re(i).renditionSet])}var Sa,_a,Aa;class xb extends EventTarget{constructor(){super(...arguments);he(this,Sa,void 0);he(this,_a,void 0);he(this,Aa,void 0)}[Symbol.iterator](){return jl(this).values()}get length(){return jl(this).length}getRenditionById(i){return jl(this).find(n=>`${n.id}`==`${i}`)??null}get selectedIndex(){return jl(this).findIndex(i=>i.selected)}set selectedIndex(i){for(const[n,r]of jl(this).entries())r.selected=n===i}get onaddrendition(){return F(this,Sa)}set onaddrendition(i){F(this,Sa)&&(this.removeEventListener("addrendition",F(this,Sa)),Se(this,Sa,void 0)),typeof i=="function"&&(Se(this,Sa,i),this.addEventListener("addrendition",i))}get onremoverendition(){return F(this,_a)}set onremoverendition(i){F(this,_a)&&(this.removeEventListener("removerendition",F(this,_a)),Se(this,_a,void 0)),typeof i=="function"&&(Se(this,_a,i),this.addEventListener("removerendition",i))}get onchange(){return F(this,Aa)}set onchange(i){F(this,Aa)&&(this.removeEventListener("change",F(this,Aa)),Se(this,Aa,void 0)),typeof i=="function"&&(Se(this,Aa,i),this.addEventListener("change",i))}}Sa=new WeakMap,_a=new WeakMap,Aa=new WeakMap;var ac;class hie{constructor(){$e(this,"src");$e(this,"id");$e(this,"width");$e(this,"height");$e(this,"bitrate");$e(this,"frameRate");$e(this,"codec");he(this,ac,!1)}get selected(){return F(this,ac)}set selected(e){F(this,ac)!==e&&(Se(this,ac,e),die(this))}}ac=new WeakMap;var oc;class i4{constructor(){$e(this,"id");$e(this,"kind");$e(this,"label","");$e(this,"language","");$e(this,"sourceBuffer");he(this,oc,!1)}addRendition(e,i,n,r,s,a){const o=new hie;return o.src=e,o.width=i,o.height=n,o.frameRate=a,o.bitrate=s,o.codec=r,uie(this,o),o}removeRendition(e){cie(e)}get selected(){return F(this,oc)}set selected(e){F(this,oc)!==e&&(Se(this,oc,e),e===!0&&lie(this))}}oc=new WeakMap;function fie(t,e){const i=re(t).media.audioRenditions;re(e).media=re(t).media,re(e).track=t;const n=re(t).renditionSet;n.add(e);const r=n.size-1;r in kb.prototype||Object.defineProperty(kb.prototype,r,{get(){return Yl(this)[r]}}),queueMicrotask(()=>{t.enabled&&i.dispatchEvent(new sy("addrendition",{rendition:e}))})}function mie(t){const e=re(t).media.audioRenditions,i=re(t).track;re(i).renditionSet.delete(t),queueMicrotask(()=>{re(t).track.enabled&&e.dispatchEvent(new sy("removerendition",{rendition:t}))})}function pie(t){const e=re(t).media.audioRenditions;!e||re(e).changeRequested||(re(e).changeRequested=!0,queueMicrotask(()=>{delete re(e).changeRequested,re(t).track.enabled&&e.dispatchEvent(new Event("change"))}))}function Yl(t){return[...re(t).media.audioTracks].filter(i=>i.enabled).flatMap(i=>[...re(i).renditionSet])}var xa,ka,Ia;class kb extends EventTarget{constructor(){super(...arguments);he(this,xa,void 0);he(this,ka,void 0);he(this,Ia,void 0)}[Symbol.iterator](){return Yl(this).values()}get length(){return Yl(this).length}getRenditionById(i){return Yl(this).find(n=>`${n.id}`==`${i}`)??null}get selectedIndex(){return Yl(this).findIndex(i=>i.selected)}set selectedIndex(i){for(const[n,r]of Yl(this).entries())r.selected=n===i}get onaddrendition(){return F(this,xa)}set onaddrendition(i){F(this,xa)&&(this.removeEventListener("addrendition",F(this,xa)),Se(this,xa,void 0)),typeof i=="function"&&(Se(this,xa,i),this.addEventListener("addrendition",i))}get onremoverendition(){return F(this,ka)}set onremoverendition(i){F(this,ka)&&(this.removeEventListener("removerendition",F(this,ka)),Se(this,ka,void 0)),typeof i=="function"&&(Se(this,ka,i),this.addEventListener("removerendition",i))}get onchange(){return F(this,Ia)}set onchange(i){F(this,Ia)&&(this.removeEventListener("change",F(this,Ia)),Se(this,Ia,void 0)),typeof i=="function"&&(Se(this,Ia,i),this.addEventListener("change",i))}}xa=new WeakMap,ka=new WeakMap,Ia=new WeakMap;var lc;class gie{constructor(){$e(this,"src");$e(this,"id");$e(this,"bitrate");$e(this,"codec");he(this,lc,!1)}get selected(){return F(this,lc)}set selected(e){F(this,lc)!==e&&(Se(this,lc,e),pie(this))}}lc=new WeakMap;function Ib(t,e){const i=t.audioTracks;re(e).media=t,re(e).renditionSet||(re(e).renditionSet=new Set);const n=re(i).trackSet;n.add(e);const r=n.size-1;r in Rb.prototype||Object.defineProperty(Rb.prototype,r,{get(){return[...re(this).trackSet][r]}}),queueMicrotask(()=>{i.dispatchEvent(new ry("addtrack",{track:e}))})}function Lb(t){var n;const e=(n=re(t).media)==null?void 0:n.audioTracks;if(!e)return;re(e).trackSet.delete(t),queueMicrotask(()=>{e.dispatchEvent(new ry("removetrack",{track:t}))})}function vie(t){const e=re(t).media.audioTracks;!e||re(e).changeRequested||(re(e).changeRequested=!0,queueMicrotask(()=>{delete re(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var La,Ra,wa,uc,Op;class Rb extends EventTarget{constructor(){super();he(this,uc);he(this,La,void 0);he(this,Ra,void 0);he(this,wa,void 0);re(this).trackSet=new Set}[Symbol.iterator](){return F(this,uc,Op).values()}get length(){return F(this,uc,Op).size}getTrackById(i){return[...F(this,uc,Op)].find(n=>n.id===i)??null}get onaddtrack(){return F(this,La)}set onaddtrack(i){F(this,La)&&(this.removeEventListener("addtrack",F(this,La)),Se(this,La,void 0)),typeof i=="function"&&(Se(this,La,i),this.addEventListener("addtrack",i))}get onremovetrack(){return F(this,Ra)}set onremovetrack(i){F(this,Ra)&&(this.removeEventListener("removetrack",F(this,Ra)),Se(this,Ra,void 0)),typeof i=="function"&&(Se(this,Ra,i),this.addEventListener("removetrack",i))}get onchange(){return F(this,wa)}set onchange(i){F(this,wa)&&(this.removeEventListener("change",F(this,wa)),Se(this,wa,void 0)),typeof i=="function"&&(Se(this,wa,i),this.addEventListener("change",i))}}La=new WeakMap,Ra=new WeakMap,wa=new WeakMap,uc=new WeakSet,Op=function(){return re(this).trackSet};var cc;class n4{constructor(){$e(this,"id");$e(this,"kind");$e(this,"label","");$e(this,"language","");$e(this,"sourceBuffer");he(this,cc,!1)}addRendition(e,i,n){const r=new gie;return r.src=e,r.codec=i,r.bitrate=n,fie(this,r),r}removeRendition(e){mie(e)}get enabled(){return F(this,cc)}set enabled(e){F(this,cc)!==e&&(Se(this,cc,e),vie(this))}}cc=new WeakMap;const yC=$0(globalThis.HTMLMediaElement,"video"),EC=$0(globalThis.HTMLMediaElement,"audio");function yie(t){if(!(t!=null&&t.prototype))return t;const e=$0(t,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"videoTracks",{get(){return Eie(this)}});const i=$0(t,"audio");(!i||`${i}`.includes("[native code]"))&&Object.defineProperty(t.prototype,"audioTracks",{get(){return Tie(this)}}),"addVideoTrack"in t.prototype||(t.prototype.addVideoTrack=function(s,a="",o=""){const l=new i4;return l.kind=s,l.label=a,l.language=o,Sb(this,l),l}),"removeVideoTrack"in t.prototype||(t.prototype.removeVideoTrack=_b),"addAudioTrack"in t.prototype||(t.prototype.addAudioTrack=function(s,a="",o=""){const l=new n4;return l.kind=s,l.label=a,l.language=o,Ib(this,l),l}),"removeAudioTrack"in t.prototype||(t.prototype.removeAudioTrack=Lb),"videoRenditions"in t.prototype||Object.defineProperty(t.prototype,"videoRenditions",{get(){return n(this)}});const n=s=>{let a=re(s).videoRenditions;return a||(a=new xb,re(a).media=s,re(s).videoRenditions=a),a};"audioRenditions"in t.prototype||Object.defineProperty(t.prototype,"audioRenditions",{get(){return r(this)}});const r=s=>{let a=re(s).audioRenditions;return a||(a=new kb,re(a).media=s,re(s).audioRenditions=a),a};return t}function $0(t,e){var i;if(t!=null&&t.prototype)return(i=Object.getOwnPropertyDescriptor(t.prototype,`${e}Tracks`))==null?void 0:i.get}function Eie(t){let e=re(t).videoTracks;if(!e&&(e=new Ab,re(t).videoTracks=e,yC)){const i=yC.call(t.nativeEl??t);for(const n of i)Sb(t,n);i.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),i.addEventListener("addtrack",n=>{if([...e].some(r=>r instanceof i4)){for(const r of i)_b(r);return}Sb(t,n.track)}),i.addEventListener("removetrack",n=>{_b(n.track)})}return e}function Tie(t){let e=re(t).audioTracks;if(!e&&(e=new Rb,re(t).audioTracks=e,EC)){const i=EC.call(t.nativeEl??t);for(const n of i)Ib(t,n);i.addEventListener("change",()=>{e.dispatchEvent(new Event("change"))}),i.addEventListener("addtrack",n=>{if([...e].some(r=>r instanceof n4)){for(const r of i)Lb(r);return}Ib(t,n.track)}),i.addEventListener("removetrack",n=>{Lb(n.track)})}return e}var r4=t=>{throw TypeError(t)},s4=(t,e,i)=>e.has(t)||r4("Cannot "+i),a4=(t,e,i)=>(s4(t,e,"read from private field"),i?i.call(t):e.get(t)),o4=(t,e,i)=>e.has(t)?r4("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),l4=(t,e,i,n)=>(s4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),ay=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class t extends ay{}globalThis.DocumentFragment=t}var ux=class extends ay{},bie=class extends ay{},Sie={get(t){},define(t,e,i){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(ux)}},Mp,_ie=class{constructor(e,i={}){o4(this,Mp),l4(this,Mp,i==null?void 0:i.detail)}get detail(){return a4(this,Mp)}initCustomEvent(){}};Mp=new WeakMap;function Aie(t,e){return new ux}var xie={document:{createElement:Aie},DocumentFragment,customElements:Sie,CustomEvent:_ie,EventTarget:ay,HTMLElement:ux,HTMLVideoElement:bie},kie=typeof window>"u"||typeof globalThis.customElements>"u",ZE=kie?xie:globalThis,Np,TC=class extends aie(yie(Wte)){constructor(){super(...arguments),o4(this,Np)}get autoplay(){let t=this.getAttribute("autoplay");return t===null?!1:t===""?!0:t}set autoplay(t){let e=this.autoplay;t!==e&&(t?this.setAttribute("autoplay",typeof t=="string"?t:""):this.removeAttribute("autoplay"))}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var t;return(t=a4(this,Np))!=null?t:this.muxCastCustomData}set castCustomData(t){l4(this,Np,t)}};Np=new WeakMap;ZE.customElements.get("mux-video")||(ZE.customElements.define("mux-video",TC),ZE.MuxVideoElement=TC);const ee={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_LOOP_REQUEST:"medialooprequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Ne={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},u4={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_BUFFERED:"mediaBuffered",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_CHAPTERS_CUES:"mediaChaptersCues",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_ENDED:"mediaEnded",MEDIA_ERROR:"mediaError",MEDIA_ERROR_CODE:"mediaErrorCode",MEDIA_ERROR_MESSAGE:"mediaErrorMessage",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_HEIGHT:"mediaHeight",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_IS_PIP:"mediaIsPip",MEDIA_LOADING:"mediaLoading",MEDIA_MUTED:"mediaMuted",MEDIA_LOOP:"mediaLoop",MEDIA_PAUSED:"mediaPaused",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_LANG:"mediaLang",MEDIA_WIDTH:"mediaWidth"},c4=Object.entries(u4),k=c4.reduce((t,[e,i])=>(t[e]=i.toLowerCase(),t),{}),Iie={USER_INACTIVE_CHANGE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},Vs=c4.reduce((t,[e,i])=>(t[e]=i.toLowerCase(),t),{...Iie});Object.entries(Vs).reduce((t,[e,i])=>{const n=k[e];return n&&(t[i]=n),t},{userinactivechange:"userinactive"});const Lie=Object.entries(k).reduce((t,[e,i])=>{const n=Vs[e];return n&&(t[i]=n),t},{userinactive:"userinactivechange"}),ts={SUBTITLES:"subtitles",CAPTIONS:"captions",DESCRIPTIONS:"descriptions",CHAPTERS:"chapters",METADATA:"metadata"},Zu={DISABLED:"disabled",HIDDEN:"hidden",SHOWING:"showing"},JE={MOUSE:"mouse",PEN:"pen",TOUCH:"touch"},en={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},ys={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},Rie={INLINE:"inline",FULLSCREEN:"fullscreen",PICTURE_IN_PICTURE:"picture-in-picture"};function wie(t){return t==null?void 0:t.map(Die).join(" ")}function Cie(t){return t==null?void 0:t.split(/\s+/).map(Pie)}function Die(t){if(t){const{id:e,width:i,height:n}=t;return[e,i,n].filter(r=>r!=null).join(":")}}function Pie(t){if(t){const[e,i,n]=t.split(":");return{id:e,width:+i,height:+n}}}function Oie(t){return t==null?void 0:t.map(Nie).join(" ")}function Mie(t){return t==null?void 0:t.split(/\s+/).map($ie)}function Nie(t){if(t){const{id:e,kind:i,language:n,label:r}=t;return[e,i,n,r].filter(s=>s!=null).join(":")}}function $ie(t){if(t){const[e,i,n,r]=t.split(":");return{id:e,kind:i,language:n,label:r}}}function Fie(t){return t.replace(/[-_]([a-z])/g,(e,i)=>i.toUpperCase())}function cx(t){return typeof t=="number"&&!Number.isNaN(t)&&Number.isFinite(t)}function d4(t){return typeof t!="string"?!1:!isNaN(t)&&!isNaN(parseFloat(t))}const h4=t=>new Promise(e=>setTimeout(e,t)),bC=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],Uie=(t,e)=>{const i=t===1?bC[e].singular:bC[e].plural;return`${t} ${i}`},gh=t=>{if(!cx(t))return"";const e=Math.abs(t),i=e!==t,n=new Date(0,0,0,0,0,e,0);return`${[n.getHours(),n.getMinutes(),n.getSeconds()].map((o,l)=>o&&Uie(o,l)).filter(o=>o).join(", ")}${i?" remaining":""}`};function Ga(t,e){let i=!1;t<0&&(i=!0,t=0-t),t=t<0?0:t;let n=Math.floor(t%60),r=Math.floor(t/60%60),s=Math.floor(t/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(s=r=n="0"),s=s>0||o>0?s+":":"",r=((s||a>=10)&&r<10?"0"+r:r)+":",n=n<10?"0"+n:n,(i?"-":"")+s+r+n}const Bie={"Start airplay":"Start airplay","Stop airplay":"Stop airplay",Audio:"Audio",Captions:"Captions","Enable captions":"Enable captions","Disable captions":"Disable captions","Start casting":"Start casting","Stop casting":"Stop casting","Enter fullscreen mode":"Enter fullscreen mode","Exit fullscreen mode":"Exit fullscreen mode",Mute:"Mute",Unmute:"Unmute",Loop:"Loop","Enter picture in picture mode":"Enter picture in picture mode","Exit picture in picture mode":"Exit picture in picture mode",Play:"Play",Pause:"Pause","Playback rate":"Playback rate","Playback rate {playbackRate}":"Playback rate {playbackRate}",Quality:"Quality","Seek backward":"Seek backward","Seek forward":"Seek forward",Settings:"Settings",Auto:"Auto","audio player":"audio player","video player":"video player",volume:"volume",seek:"seek","closed captions":"closed captions","current playback rate":"current playback rate","playback time":"playback time","media loading":"media loading",settings:"settings","audio tracks":"audio tracks",quality:"quality",play:"play",pause:"pause",mute:"mute",unmute:"unmute","chapter: {chapterName}":"chapter: {chapterName}",live:"live",Off:"Off","start airplay":"start airplay","stop airplay":"stop airplay","start casting":"start casting","stop casting":"stop casting","enter fullscreen mode":"enter fullscreen mode","exit fullscreen mode":"exit fullscreen mode","enter picture in picture mode":"enter picture in picture mode","exit picture in picture mode":"exit picture in picture mode","seek to live":"seek to live","playing live":"playing live","seek back {seekOffset} seconds":"seek back {seekOffset} seconds","seek forward {seekOffset} seconds":"seek forward {seekOffset} seconds","Network Error":"Network Error","Decode Error":"Decode Error","Source Not Supported":"Source Not Supported","Encryption Error":"Encryption Error","A network error caused the media download to fail.":"A network error caused the media download to fail.","A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.":"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.","An unsupported error occurred. The server or network failed, or your browser does not support this format.":"An unsupported error occurred. The server or network failed, or your browser does not support this format.","The media is encrypted and there are no keys to decrypt it.":"The media is encrypted and there are no keys to decrypt it."};var SC;const eT={en:Bie};let wb=((SC=globalThis.navigator)==null?void 0:SC.language)||"en";const Vie=t=>{wb=t},Hie=t=>{var e,i,n;const[r]=wb.split("-");return((e=eT[wb])==null?void 0:e[t])||((i=eT[r])==null?void 0:i[t])||((n=eT.en)==null?void 0:n[t])||t},se=(t,e={})=>Hie(t).replace(/\{(\w+)\}/g,(i,n)=>n in e?String(e[n]):`{${n}}`);let f4=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}};class m4 extends f4{}let _C=class extends m4{constructor(){super(...arguments),this.role=null}};class Kie{observe(){}unobserve(){}disconnect(){}}const p4={createElement:function(){return new of.HTMLElement},createElementNS:function(){return new of.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(t){return!1}},of={ResizeObserver:Kie,document:p4,Node:m4,Element:_C,HTMLElement:class extends _C{constructor(){super(...arguments),this.innerHTML=""}get content(){return new of.DocumentFragment}},DocumentFragment:class extends f4{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(t){return null},setItem(t,e){},removeItem(t){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(t){return{matches:!1,media:t}},DOMParser:class{parseFromString(e,i){return{body:{textContent:e}}}}},g4="global"in globalThis&&(globalThis==null?void 0:globalThis.global)===globalThis||typeof window>"u"||typeof window.customElements>"u",v4=Object.keys(of).every(t=>t in globalThis),D=g4&&!v4?of:globalThis,Yt=g4&&!v4?p4:globalThis.document,AC=new WeakMap,dx=t=>{let e=AC.get(t);return e||AC.set(t,e=new Set),e},y4=new D.ResizeObserver(t=>{for(const e of t)for(const i of dx(e.target))i(e)});function Lc(t,e){dx(t).add(e),y4.observe(t)}function Rc(t,e){const i=dx(t);i.delete(e),i.size||y4.unobserve(t)}function _n(t){const e={};for(const i of t)e[i.name]=i.value;return e}function Qi(t){var e;return(e=Cb(t))!=null?e:Bc(t,"media-controller")}function Cb(t){var e;const{MEDIA_CONTROLLER:i}=Ne,n=t.getAttribute(i);if(n)return(e=oy(t))==null?void 0:e.getElementById(n)}const E4=(t,e,i=".value")=>{const n=t.querySelector(i);n&&(n.textContent=e)},Gie=(t,e)=>{const i=`slot[name="${e}"]`,n=t.shadowRoot.querySelector(i);return n?n.children:[]},T4=(t,e)=>Gie(t,e)[0],Gs=(t,e)=>!t||!e?!1:t!=null&&t.contains(e)?!0:Gs(t,e.getRootNode().host),Bc=(t,e)=>{if(!t)return null;const i=t.closest(e);return i||Bc(t.getRootNode().host,e)};function hx(t=document){var e;const i=t==null?void 0:t.activeElement;return i?(e=hx(i.shadowRoot))!=null?e:i:null}function oy(t){var e;const i=(e=t==null?void 0:t.getRootNode)==null?void 0:e.call(t);return i instanceof ShadowRoot||i instanceof Document?i:null}function b4(t,{depth:e=3,checkOpacity:i=!0,checkVisibilityCSS:n=!0}={}){if(t.checkVisibility)return t.checkVisibility({checkOpacity:i,checkVisibilityCSS:n});let r=t;for(;r&&e>0;){const s=getComputedStyle(r);if(i&&s.opacity==="0"||n&&s.visibility==="hidden"||s.display==="none")return!1;r=r.parentElement,e--}return!0}function Wie(t,e,i,n){const r=n.x-i.x,s=n.y-i.y,a=r*r+s*s;if(a===0)return 0;const o=((t-i.x)*r+(e-i.y)*s)/a;return Math.max(0,Math.min(1,o))}function ei(t,e){const i=jie(t,n=>n===e);return i||fx(t,e)}function jie(t,e){var i,n;let r;for(r of(i=t.querySelectorAll("style:not([media])"))!=null?i:[]){let s;try{s=(n=r.sheet)==null?void 0:n.cssRules}catch{continue}for(const a of s??[])if(e(a.selectorText))return a}}function fx(t,e){var i,n;const r=(i=t.querySelectorAll("style:not([media])"))!=null?i:[],s=r==null?void 0:r[r.length-1];return s!=null&&s.sheet?(s==null||s.sheet.insertRule(`${e}{}`,s.sheet.cssRules.length),(n=s.sheet.cssRules)==null?void 0:n[s.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",t),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function st(t,e,i=Number.NaN){const n=t.getAttribute(e);return n!=null?+n:i}function Ct(t,e,i){const n=+i;if(i==null||Number.isNaN(n)){t.hasAttribute(e)&&t.removeAttribute(e);return}st(t,e,void 0)!==n&&t.setAttribute(e,`${n}`)}function Re(t,e){return t.hasAttribute(e)}function we(t,e,i){if(i==null){t.hasAttribute(e)&&t.removeAttribute(e);return}Re(t,e)!=i&&t.toggleAttribute(e,i)}function at(t,e,i=null){var n;return(n=t.getAttribute(e))!=null?n:i}function ot(t,e,i){if(i==null){t.hasAttribute(e)&&t.removeAttribute(e);return}const n=`${i}`;at(t,e,void 0)!==n&&t.setAttribute(e,n)}var S4=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Qs=(t,e,i)=>(S4(t,e,"read from private field"),i?i.call(t):e.get(t)),Yie=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Pm=(t,e,i,n)=>(S4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Vi;function qie(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
        box-sizing: border-box;
      }
    </style>
  `}class ly extends D.HTMLElement{constructor(){if(super(),Yie(this,Vi,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ne.MEDIA_CONTROLLER,k.MEDIA_PAUSED]}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Ne.MEDIA_CONTROLLER&&(i&&((s=(r=Qs(this,Vi))==null?void 0:r.unassociateElement)==null||s.call(r,this),Pm(this,Vi,null)),n&&this.isConnected&&(Pm(this,Vi,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Qs(this,Vi))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,i,n,r;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),Pm(this,Vi,zie(this)),this.getAttribute(Ne.MEDIA_CONTROLLER)&&((i=(e=Qs(this,Vi))==null?void 0:e.associateElement)==null||i.call(e,this)),(n=Qs(this,Vi))==null||n.addEventListener("pointerdown",this),(r=Qs(this,Vi))==null||r.addEventListener("click",this)}disconnectedCallback(){var e,i,n,r;this.getAttribute(Ne.MEDIA_CONTROLLER)&&((i=(e=Qs(this,Vi))==null?void 0:e.unassociateElement)==null||i.call(e,this)),(n=Qs(this,Vi))==null||n.removeEventListener("pointerdown",this),(r=Qs(this,Vi))==null||r.removeEventListener("click",this),Pm(this,Vi,null)}handleEvent(e){var i;const n=(i=e.composedPath())==null?void 0:i[0];if(["video","media-controller"].includes(n==null?void 0:n.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:s,clientY:a}=e,{left:o,top:l,width:u,height:c}=this.getBoundingClientRect(),d=s-o,h=a-l;if(d<0||h<0||d>u||h>c||u===0&&c===0)return;const f=this._pointerType||"mouse";if(this._pointerType=void 0,f===JE.TOUCH){this.handleTap(e);return}else if(f===JE.MOUSE||f===JE.PEN){this.handleMouseClick(e);return}}}}get mediaPaused(){return Re(this,k.MEDIA_PAUSED)}set mediaPaused(e){we(this,k.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const i=this.mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new D.CustomEvent(i,{composed:!0,bubbles:!0}))}}Vi=new WeakMap;ly.shadowRootOptions={mode:"open"};ly.getTemplateHTML=qie;function zie(t){var e;const i=t.getAttribute(Ne.MEDIA_CONTROLLER);return i?(e=t.getRootNode())==null?void 0:e.getElementById(i):Bc(t,"media-controller")}D.customElements.get("media-gesture-receiver")||D.customElements.define("media-gesture-receiver",ly);var xC=ly,mx=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},un=(t,e,i)=>(mx(t,e,"read from private field"),i?i.call(t):e.get(t)),tn=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},So=(t,e,i,n)=>(mx(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Nn=(t,e,i)=>(mx(t,e,"access private method"),i),F0,ql,lf,Pu,$p,Db,_4,Od,Fp,Pb,A4,Ob,x4,uf,uy,cy,px,wc,cf;const ce={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive",AUTOHIDE_OVER_CONTROLS:"autohideovercontrols"};function Qie(t){return`
    <style>
      
      :host([${k.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
        outline: none;
      }

      :host {
        box-sizing: border-box;
        position: relative;
        display: inline-block;
        line-height: 0;
        background-color: var(--media-background-color, #000);
        overflow: hidden;
      }

      :host(:not([${ce.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
        position: absolute;
        top: 0;
        left: 0;
        bottom: 0;
        right: 0;
        display: flex;
        flex-flow: column nowrap;
        align-items: start;
        pointer-events: none;
        background: none;
      }

      slot[name=media] {
        display: var(--media-slot-display, contents);
      }

      
      :host([${ce.AUDIO}]) slot[name=media] {
        display: var(--media-slot-display, none);
      }

      
      :host([${ce.AUDIO}]) [part~=layer][part~=gesture-layer] {
        height: 0;
        display: block;
      }

      
      :host(:not([${ce.AUDIO}])[${ce.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
          :host(:not([${ce.AUDIO}])[${ce.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
        display: none;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([role=dialog]):not([hidden])) {
        pointer-events: auto;
      }

      :host(:not([${ce.AUDIO}])) *[part~=layer][part~=centered-layer] {
        align-items: center;
        justify-content: center;
      }

      :host(:not([${ce.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
      :host(:not([${ce.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
        align-self: stretch;
        flex-grow: 1;
      }

      slot[name=middle-chrome] {
        display: inline;
        flex-grow: 1;
        pointer-events: none;
        background: none;
      }

      
      ::slotted([slot=media]),
      ::slotted([slot=poster]) {
        width: 100%;
        height: 100%;
      }

      
      :host(:not([${ce.AUDIO}])) .spacer {
        flex-grow: 1;
      }

      
      :host(:-webkit-full-screen) {
        
        width: 100% !important;
        height: 100% !important;
      }

      
      ::slotted(:not([slot=media]):not([slot=poster]):not([${ce.NO_AUTOHIDE}]):not([hidden]):not([role=dialog])) {
        opacity: 1;
        transition: var(--media-control-transition-in, opacity 0.25s);
      }

      
      :host([${ce.USER_INACTIVE}]:not([${k.MEDIA_PAUSED}]):not([${k.MEDIA_IS_AIRPLAYING}]):not([${k.MEDIA_IS_CASTING}]):not([${ce.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${ce.NO_AUTOHIDE}]):not([role=dialog])) {
        opacity: 0;
        transition: var(--media-control-transition-out, opacity 1s);
      }

      :host([${ce.USER_INACTIVE}]:not([${ce.NO_AUTOHIDE}]):not([${k.MEDIA_PAUSED}]):not([${k.MEDIA_IS_CASTING}]):not([${ce.AUDIO}])) ::slotted([slot=media]) {
        cursor: none;
      }

      :host([${ce.USER_INACTIVE}][${ce.AUTOHIDE_OVER_CONTROLS}]:not([${ce.NO_AUTOHIDE}]):not([${k.MEDIA_PAUSED}]):not([${k.MEDIA_IS_CASTING}]):not([${ce.AUDIO}])) * {
        --media-cursor: none;
        cursor: none;
      }


      ::slotted(media-control-bar)  {
        align-self: stretch;
      }

      
      :host(:not([${ce.AUDIO}])[${k.MEDIA_HAS_PLAYED}]) slot[name=poster] {
        display: none;
      }

      ::slotted([role=dialog]) {
        width: 100%;
        height: 100%;
        align-self: center;
      }

      ::slotted([role=menu]) {
        align-self: end;
      }
    </style>

    <slot name="media" part="layer media-layer"></slot>
    <slot name="poster" part="layer poster-layer"></slot>
    <slot name="gestures-chrome" part="layer gesture-layer">
      <media-gesture-receiver slot="gestures-chrome">
        <template shadowrootmode="${xC.shadowRootOptions.mode}">
          ${xC.getTemplateHTML({})}
        </template>
      </media-gesture-receiver>
    </slot>
    <span part="layer vertical-layer">
      <slot name="top-chrome" part="top chrome"></slot>
      <slot name="middle-chrome" part="middle chrome"></slot>
      <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
      
      <slot part="bottom chrome"></slot>
    </span>
    <slot name="dialog" part="layer dialog-layer"></slot>
  `}const Xie=Object.values(k),Zie="sm:384 md:576 lg:768 xl:960";function Jie(t){k4(t.target,t.contentRect.width)}function k4(t,e){var i;if(!t.isConnected)return;const n=(i=t.getAttribute(ce.BREAKPOINTS))!=null?i:Zie,r=ene(n),s=tne(r,e);let a=!1;if(Object.keys(r).forEach(o=>{if(s.includes(o)){t.hasAttribute(`breakpoint${o}`)||(t.setAttribute(`breakpoint${o}`,""),a=!0);return}t.hasAttribute(`breakpoint${o}`)&&(t.removeAttribute(`breakpoint${o}`),a=!0)}),a){const o=new CustomEvent(Vs.BREAKPOINTS_CHANGE,{detail:s});t.dispatchEvent(o)}t.breakpointsComputed||(t.breakpointsComputed=!0,t.dispatchEvent(new CustomEvent(Vs.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))}function ene(t){const e=t.split(/\s+/);return Object.fromEntries(e.map(i=>i.split(":")))}function tne(t,e){return Object.keys(t).filter(i=>e>=parseInt(t[i]))}class dy extends D.HTMLElement{constructor(){if(super(),tn(this,Db),tn(this,Pb),tn(this,Ob),tn(this,uf),tn(this,cy),tn(this,wc),tn(this,F0,0),tn(this,ql,null),tn(this,lf,null),tn(this,Pu,void 0),this.breakpointsComputed=!1,tn(this,$p,new MutationObserver(Nn(this,Db,_4).bind(this))),tn(this,Od,!1),tn(this,Fp,i=>{un(this,Od)||(setTimeout(()=>{Jie(i),So(this,Od,!1)},0),So(this,Od,!0))}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const i=_n(this.attributes),n=this.constructor.getTemplateHTML(i);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(n):this.shadowRoot.innerHTML=n}const e=this.querySelector(":scope > slot[slot=media]");e&&e.addEventListener("slotchange",()=>{if(!e.assignedElements({flatten:!0}).length){un(this,ql)&&this.mediaUnsetCallback(un(this,ql));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[ce.AUTOHIDE,ce.GESTURES_DISABLED].concat(Xie).filter(e=>![k.MEDIA_RENDITION_LIST,k.MEDIA_AUDIO_TRACK_LIST,k.MEDIA_CHAPTERS_CUES,k.MEDIA_WIDTH,k.MEDIA_HEIGHT,k.MEDIA_ERROR,k.MEDIA_ERROR_MESSAGE].includes(e))}attributeChangedCallback(e,i,n){e.toLowerCase()==ce.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return(e==null?void 0:e.nodeName)=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(So(this,ql,e),e.localName.includes("-")&&await D.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;un(this,$p).observe(this,{childList:!0,subtree:!0}),Lc(this,un(this,Fp));const i=this.getAttribute(ce.AUDIO)!=null,n=se(i?"audio player":"video player");this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(ce.USER_INACTIVE,""),k4(this,this.getBoundingClientRect().width),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=D.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;un(this,$p).disconnect(),Rc(this,un(this,Fp)),this.media&&this.mediaUnsetCallback(this.media),(e=D.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){So(this,ql,null)}handleEvent(e){switch(e.type){case"pointerdown":So(this,F0,e.timeStamp);break;case"pointermove":Nn(this,Pb,A4).call(this,e);break;case"pointerup":Nn(this,Ob,x4).call(this,e);break;case"mouseleave":Nn(this,uf,uy).call(this);break;case"mouseup":this.removeAttribute(ce.KEYBOARD_CONTROL);break;case"keyup":Nn(this,wc,cf).call(this),this.setAttribute(ce.KEYBOARD_CONTROL,"");break}}set autohide(e){const i=Number(e);So(this,Pu,isNaN(i)?0:i)}get autohide(){return(un(this,Pu)===void 0?2:un(this,Pu)).toString()}get breakpoints(){return at(this,ce.BREAKPOINTS)}set breakpoints(e){ot(this,ce.BREAKPOINTS,e)}get audio(){return Re(this,ce.AUDIO)}set audio(e){we(this,ce.AUDIO,e)}get gesturesDisabled(){return Re(this,ce.GESTURES_DISABLED)}set gesturesDisabled(e){we(this,ce.GESTURES_DISABLED,e)}get keyboardControl(){return Re(this,ce.KEYBOARD_CONTROL)}set keyboardControl(e){we(this,ce.KEYBOARD_CONTROL,e)}get noAutohide(){return Re(this,ce.NO_AUTOHIDE)}set noAutohide(e){we(this,ce.NO_AUTOHIDE,e)}get autohideOverControls(){return Re(this,ce.AUTOHIDE_OVER_CONTROLS)}set autohideOverControls(e){we(this,ce.AUTOHIDE_OVER_CONTROLS,e)}get userInteractive(){return Re(this,ce.USER_INACTIVE)}set userInteractive(e){we(this,ce.USER_INACTIVE,e)}}F0=new WeakMap;ql=new WeakMap;lf=new WeakMap;Pu=new WeakMap;$p=new WeakMap;Db=new WeakSet;_4=function(t){const e=this.media;for(const i of t){if(i.type!=="childList")continue;const n=i.removedNodes;for(const r of n){if(r.slot!="media"||i.target!=this)continue;let s=i.previousSibling&&i.previousSibling.previousElementSibling;if(!s||!e)this.mediaUnsetCallback(r);else{let a=s.slot!=="media";for(;(s=s.previousSibling)!==null;)s.slot=="media"&&(a=!1);a&&this.mediaUnsetCallback(r)}}if(e)for(const r of i.addedNodes)r===e&&this.handleMediaUpdated(e)}};Od=new WeakMap;Fp=new WeakMap;Pb=new WeakSet;A4=function(t){if(t.pointerType!=="mouse"&&t.timeStamp-un(this,F0)<250)return;Nn(this,cy,px).call(this),clearTimeout(un(this,lf));const e=this.hasAttribute(ce.AUTOHIDE_OVER_CONTROLS);([this,this.media].includes(t.target)||e)&&Nn(this,wc,cf).call(this)};Ob=new WeakSet;x4=function(t){if(t.pointerType==="touch"){const e=!this.hasAttribute(ce.USER_INACTIVE);[this,this.media].includes(t.target)&&e?Nn(this,uf,uy).call(this):Nn(this,wc,cf).call(this)}else t.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e==null?void 0:e.localName))&&Nn(this,wc,cf).call(this)};uf=new WeakSet;uy=function(){if(un(this,Pu)<0||this.hasAttribute(ce.USER_INACTIVE))return;this.setAttribute(ce.USER_INACTIVE,"");const t=new D.CustomEvent(Vs.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(t)};cy=new WeakSet;px=function(){if(!this.hasAttribute(ce.USER_INACTIVE))return;this.removeAttribute(ce.USER_INACTIVE);const t=new D.CustomEvent(Vs.USER_INACTIVE_CHANGE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(t)};wc=new WeakSet;cf=function(){Nn(this,cy,px).call(this),clearTimeout(un(this,lf));const t=parseInt(this.autohide);t<0||So(this,lf,setTimeout(()=>{Nn(this,uf,uy).call(this)},t*1e3))};dy.shadowRootOptions={mode:"open"};dy.getTemplateHTML=Qie;D.customElements.get("media-container")||D.customElements.define("media-container",dy);var I4=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},ri=(t,e,i)=>(I4(t,e,"read from private field"),i?i.call(t):e.get(t)),ld=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Om=(t,e,i,n)=>(I4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),zl,Ql,U0,Fo,hs,ta;class gx{constructor(e,i,{defaultValue:n}={defaultValue:void 0}){ld(this,hs),ld(this,zl,void 0),ld(this,Ql,void 0),ld(this,U0,void 0),ld(this,Fo,new Set),Om(this,zl,e),Om(this,Ql,i),Om(this,U0,new Set(n))}[Symbol.iterator](){return ri(this,hs,ta).values()}get length(){return ri(this,hs,ta).size}get value(){var e;return(e=[...ri(this,hs,ta)].join(" "))!=null?e:""}set value(e){var i;e!==this.value&&(Om(this,Fo,new Set),this.add(...(i=e==null?void 0:e.split(" "))!=null?i:[]))}toString(){return this.value}item(e){return[...ri(this,hs,ta)][e]}values(){return ri(this,hs,ta).values()}forEach(e,i){ri(this,hs,ta).forEach(e,i)}add(...e){var i,n;e.forEach(r=>ri(this,Fo).add(r)),!(this.value===""&&!((i=ri(this,zl))!=null&&i.hasAttribute(`${ri(this,Ql)}`)))&&((n=ri(this,zl))==null||n.setAttribute(`${ri(this,Ql)}`,`${this.value}`))}remove(...e){var i;e.forEach(n=>ri(this,Fo).delete(n)),(i=ri(this,zl))==null||i.setAttribute(`${ri(this,Ql)}`,`${this.value}`)}contains(e){return ri(this,hs,ta).has(e)}toggle(e,i){return typeof i<"u"?i?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,i){return this.remove(e),this.add(i),e===i}}zl=new WeakMap;Ql=new WeakMap;U0=new WeakMap;Fo=new WeakMap;hs=new WeakSet;ta=function(){return ri(this,Fo).size?ri(this,Fo):ri(this,U0)};const ine=(t="")=>t.split(/\s+/),L4=(t="")=>{const[e,i,n]=t.split(":"),r=n?decodeURIComponent(n):void 0;return{kind:e==="cc"?ts.CAPTIONS:ts.SUBTITLES,language:i,label:r}},hy=(t="",e={})=>ine(t).map(i=>{const n=L4(i);return{...e,...n}}),R4=t=>t?Array.isArray(t)?t.map(e=>typeof e=="string"?L4(e):e):typeof t=="string"?hy(t):[t]:[],Mb=({kind:t,label:e,language:i}={kind:"subtitles"})=>e?`${t==="captions"?"cc":"sb"}:${i}:${encodeURIComponent(e)}`:i,df=(t=[])=>Array.prototype.map.call(t,Mb).join(" "),nne=(t,e)=>i=>i[t]===e,w4=t=>{const e=Object.entries(t).map(([i,n])=>nne(i,n));return i=>e.every(n=>n(i))},vh=(t,e=[],i=[])=>{const n=R4(i).map(w4),r=s=>n.some(a=>a(s));Array.from(e).filter(r).forEach(s=>{s.mode=t})},fy=(t,e=()=>!0)=>{if(!(t!=null&&t.textTracks))return[];const i=typeof e=="function"?e:w4(e);return Array.from(t.textTracks).filter(i)},C4=t=>{var e;return!!((e=t.mediaSubtitlesShowing)!=null&&e.length)||t.hasAttribute(k.MEDIA_SUBTITLES_SHOWING)},rne=t=>{var e;const{media:i,fullscreenElement:n}=t;try{const r=n&&"requestFullscreen"in n?"requestFullscreen":n&&"webkitRequestFullScreen"in n?"webkitRequestFullScreen":void 0;if(r){const s=(e=n[r])==null?void 0:e.call(n);if(s instanceof Promise)return s.catch(()=>{})}else i!=null&&i.webkitEnterFullscreen?i.webkitEnterFullscreen():i!=null&&i.requestFullscreen&&i.requestFullscreen()}catch(r){console.error(r)}},kC="exitFullscreen"in Yt?"exitFullscreen":"webkitExitFullscreen"in Yt?"webkitExitFullscreen":"webkitCancelFullScreen"in Yt?"webkitCancelFullScreen":void 0,sne=t=>{var e;const{documentElement:i}=t;if(kC){const n=(e=i==null?void 0:i[kC])==null?void 0:e.call(i);if(n instanceof Promise)return n.catch(()=>{})}},Md="fullscreenElement"in Yt?"fullscreenElement":"webkitFullscreenElement"in Yt?"webkitFullscreenElement":void 0,ane=t=>{const{documentElement:e,media:i}=t,n=e==null?void 0:e[Md];return!n&&"webkitDisplayingFullscreen"in i&&"webkitPresentationMode"in i&&i.webkitDisplayingFullscreen&&i.webkitPresentationMode===Rie.FULLSCREEN?i:n},one=t=>{var e;const{media:i,documentElement:n,fullscreenElement:r=i}=t;if(!i||!n)return!1;const s=ane(t);if(!s)return!1;if(s===r||s===i)return!0;if(s.localName.includes("-")){let a=s.shadowRoot;if(!(Md in a))return Gs(s,r);for(;a!=null&&a[Md];){if(a[Md]===r)return!0;a=(e=a[Md])==null?void 0:e.shadowRoot}}return!1},lne="fullscreenEnabled"in Yt?"fullscreenEnabled":"webkitFullscreenEnabled"in Yt?"webkitFullscreenEnabled":void 0,une=t=>{const{documentElement:e,media:i}=t;return!!(e!=null&&e[lne])||i&&"webkitSupportsFullscreen"in i};let Mm;const vx=()=>{var t,e;return Mm||(Mm=(e=(t=Yt)==null?void 0:t.createElement)==null?void 0:e.call(t,"video"),Mm)},cne=async(t=vx())=>{if(!t)return!1;const e=t.volume;t.volume=e/2+.1;const i=new AbortController,n=await Promise.race([dne(t,i.signal),hne(t,e)]);return i.abort(),n},dne=(t,e)=>new Promise(i=>{t.addEventListener("volumechange",()=>i(!0),{signal:e})}),hne=async(t,e)=>{for(let i=0;i<10;i++){if(t.volume===e)return!1;await h4(10)}return t.volume!==e},fne=/.*Version\/.*Safari\/.*/.test(D.navigator.userAgent),D4=(t=vx())=>D.matchMedia("(display-mode: standalone)").matches&&fne?!1:typeof(t==null?void 0:t.requestPictureInPicture)=="function",P4=(t=vx())=>une({documentElement:Yt,media:t}),mne=P4(),pne=D4(),gne=!!D.WebKitPlaybackTargetAvailabilityEvent,vne=!!D.chrome,B0=t=>fy(t.media,e=>[ts.SUBTITLES,ts.CAPTIONS].includes(e.kind)).sort((e,i)=>e.kind>=i.kind?1:-1),O4=t=>fy(t.media,e=>e.mode===Zu.SHOWING&&[ts.SUBTITLES,ts.CAPTIONS].includes(e.kind)),M4=(t,e)=>{const i=B0(t),n=O4(t),r=!!n.length;if(i.length){if(e===!1||r&&e!==!0)vh(Zu.DISABLED,i,n);else if(e===!0||!r&&e!==!1){let s=i[0];const{options:a}=t;if(!(a!=null&&a.noSubtitlesLangPref)){const c=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),d=c?[c,...globalThis.navigator.languages]:globalThis.navigator.languages,h=i.filter(f=>d.some(m=>f.language.toLowerCase().startsWith(m.split("-")[0]))).sort((f,m)=>{const p=d.findIndex(g=>f.language.toLowerCase().startsWith(g.split("-")[0])),y=d.findIndex(g=>m.language.toLowerCase().startsWith(g.split("-")[0]));return p-y});h[0]&&(s=h[0])}const{language:o,label:l,kind:u}=s;vh(Zu.DISABLED,i,n),vh(Zu.SHOWING,i,[{language:o,label:l,kind:u}])}}},yx=(t,e)=>t===e?!0:t==null||e==null||typeof t!=typeof e?!1:typeof t=="number"&&Number.isNaN(t)&&Number.isNaN(e)?!0:typeof t!="object"?!1:Array.isArray(t)?yne(t,e):Object.entries(t).every(([i,n])=>i in e&&yx(n,e[i])),yne=(t,e)=>{const i=Array.isArray(t),n=Array.isArray(e);return i!==n?!1:i||n?t.length!==e.length?!1:t.every((r,s)=>yx(r,e[s])):!0},Ene=Object.values(ys);let V0;const Tne=cne().then(t=>(V0=t,V0)),bne=async(...t)=>{await Promise.all(t.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof D.HTMLElement))return;const i=e.localName;if(!i.includes("-"))return;const n=D.customElements.get(i);n&&e instanceof n||(await D.customElements.whenDefined(i),D.customElements.upgrade(e))}))},Sne=new D.DOMParser,_ne=t=>t&&(Sne.parseFromString(t,"text/html").body.textContent||t),Nd={mediaError:{get(t,e){const{media:i}=t;if((e==null?void 0:e.type)!=="playing")return i==null?void 0:i.error},mediaEvents:["emptied","error","playing"]},mediaErrorCode:{get(t,e){var i;const{media:n}=t;if((e==null?void 0:e.type)!=="playing")return(i=n==null?void 0:n.error)==null?void 0:i.code},mediaEvents:["emptied","error","playing"]},mediaErrorMessage:{get(t,e){var i,n;const{media:r}=t;if((e==null?void 0:e.type)!=="playing")return(n=(i=r==null?void 0:r.error)==null?void 0:i.message)!=null?n:""},mediaEvents:["emptied","error","playing"]},mediaWidth:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.paused)!=null?e:!0},set(t,e){var i;const{media:n}=e;n&&(t?n.pause():(i=n.play())==null||i.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(t,e){const{media:i}=t;return i?e?e.type==="playing":!i.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.playbackRate)!=null?e:1},set(t,e){const{media:i}=e;i&&Number.isFinite(+t)&&(i.playbackRate=+t)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.muted)!=null?e:!1},set(t,e){const{media:i,options:{noMutedPref:n}={}}=e;if(i){i.muted=t;try{const r=D.localStorage.getItem("media-chrome-pref-muted")!==null,s=i.hasAttribute("muted");if(n){r&&D.localStorage.removeItem("media-chrome-pref-muted");return}if(s&&!r)return;D.localStorage.setItem("media-chrome-pref-muted",t?"true":"false")}catch(r){console.debug("Error setting muted pref",r)}}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noMutedPref:i}}=e,{media:n}=e;if(!(!n||n.muted||i))try{const r=D.localStorage.getItem("media-chrome-pref-muted")==="true";Nd.mediaMuted.set(r,e),t(r)}catch(r){console.debug("Error getting muted pref",r)}}]},mediaLoop:{get(t){const{media:e}=t;return e==null?void 0:e.loop},set(t,e){const{media:i}=e;i&&(i.loop=t)},mediaEvents:["medialooprequest"]},mediaVolume:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.volume)!=null?e:1},set(t,e){const{media:i,options:{noVolumePref:n}={}}=e;if(i){try{t==null?D.localStorage.removeItem("media-chrome-pref-volume"):!i.hasAttribute("muted")&&!n&&D.localStorage.setItem("media-chrome-pref-volume",t.toString())}catch(r){console.debug("Error setting volume pref",r)}Number.isFinite(+t)&&(i.volume=+t)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(t,e)=>{const{options:{noVolumePref:i}}=e;if(!i)try{const{media:n}=e;if(!n)return;const r=D.localStorage.getItem("media-chrome-pref-volume");if(r==null)return;Nd.mediaVolume.set(+r,e),t(+r)}catch(n){console.debug("Error getting volume pref",n)}}]},mediaVolumeLevel:{get(t){const{media:e}=t;return typeof(e==null?void 0:e.volume)>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(t){var e;const{media:i}=t;return(e=i==null?void 0:i.currentTime)!=null?e:0},set(t,e){const{media:i}=e;!i||!cx(t)||(i.currentTime=t)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(t){const{media:e,options:{defaultDuration:i}={}}=t;return i&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?i:Number.isFinite(e==null?void 0:e.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(t){const{media:e}=t;return(e==null?void 0:e.readyState)<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(t){var e;const{media:i}=t;if(!((e=i==null?void 0:i.seekable)!=null&&e.length))return;const n=i.seekable.start(0),r=i.seekable.end(i.seekable.length-1);if(!(!n&&!r))return[Number(n.toFixed(3)),Number(r.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(t){var e;const{media:i}=t,n=(e=i==null?void 0:i.buffered)!=null?e:[];return Array.from(n).map((r,s)=>[Number(n.start(s).toFixed(3)),Number(n.end(s).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(t){const{media:e,options:{defaultStreamType:i}={}}=t,n=[ys.LIVE,ys.ON_DEMAND].includes(i)?i:void 0;if(!e)return n;const{streamType:r}=e;if(Ene.includes(r))return r===ys.UNKNOWN?n:r;const s=e.duration;return s===1/0?ys.LIVE:Number.isFinite(s)?ys.ON_DEMAND:n},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(t){const{media:e}=t;if(!e)return Number.NaN;const{targetLiveWindow:i}=e,n=Nd.mediaStreamType.get(t);return(i==null||Number.isNaN(i))&&n===ys.LIVE?0:i},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(t){const{media:e,options:{liveEdgeOffset:i=10}={}}=t;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(Nd.mediaStreamType.get(t)===ys.LIVE))return!1;const r=e.seekable;if(!r)return!0;if(!r.length)return!1;const s=r.end(r.length-1)-i;return e.currentTime>=s},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(t){return B0(t).map(({kind:e,label:i,language:n})=>({kind:e,label:i,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(t){return O4(t).map(({kind:e,label:i,language:n})=>({kind:e,label:i,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var i,n;const{media:r,options:s}=e;if(!r)return;const a=o=>{var l;!s.defaultSubtitles||o&&![ts.CAPTIONS,ts.SUBTITLES].includes((l=o==null?void 0:o.track)==null?void 0:l.kind)||M4(e,!0)};return r.addEventListener("loadstart",a),(i=r.textTracks)==null||i.addEventListener("addtrack",a),(n=r.textTracks)==null||n.addEventListener("removetrack",a),()=>{var o,l;r.removeEventListener("loadstart",a),(o=r.textTracks)==null||o.removeEventListener("addtrack",a),(l=r.textTracks)==null||l.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(t){var e;const{media:i}=t;if(!i)return[];const[n]=fy(i,{kind:ts.CHAPTERS});return Array.from((e=n==null?void 0:n.cues)!=null?e:[]).map(({text:r,startTime:s,endTime:a})=>({text:_ne(r),startTime:s,endTime:a}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(t,e)=>{var i;const{media:n}=e;if(!n)return;const r=n.querySelector('track[kind="chapters"][default][src]'),s=(i=n.shadowRoot)==null?void 0:i.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return r==null||r.addEventListener("load",t),s==null||s.addEventListener("load",t),()=>{r==null||r.removeEventListener("load",t),s==null||s.removeEventListener("load",t)}}]},mediaIsPip:{get(t){var e,i;const{media:n,documentElement:r}=t;if(!n||!r||!r.pictureInPictureElement)return!1;if(r.pictureInPictureElement===n)return!0;if(r.pictureInPictureElement instanceof HTMLMediaElement)return(e=n.localName)!=null&&e.includes("-")?Gs(n,r.pictureInPictureElement):!1;if(r.pictureInPictureElement.localName.includes("-")){let s=r.pictureInPictureElement.shadowRoot;for(;s!=null&&s.pictureInPictureElement;){if(s.pictureInPictureElement===n)return!0;s=(i=s.pictureInPictureElement)==null?void 0:i.shadowRoot}}return!1},set(t,e){const{media:i}=e;if(i)if(t){if(!Yt.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!i.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const n=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};i.requestPictureInPicture().catch(r=>{if(r.code===11){if(!i.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(i.readyState===0&&i.preload==="none"){const s=()=>{i.removeEventListener("loadedmetadata",a),i.preload="none"},a=()=>{i.requestPictureInPicture().catch(n),s()};i.addEventListener("loadedmetadata",a),i.preload="metadata",setTimeout(()=>{i.readyState===0&&n(),s()},1e3)}else throw r}else throw r})}else Yt.pictureInPictureElement&&Yt.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(t){var e;const{media:i}=t;return[...(e=i==null?void 0:i.videoRenditions)!=null?e:[]].map(n=>({...n}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(t){var e,i,n;const{media:r}=t;return(n=(i=r==null?void 0:r.videoRenditions)==null?void 0:i[(e=r.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:n.id},set(t,e){const{media:i}=e;if(!(i!=null&&i.videoRenditions)){console.warn("MediaController: Rendition selection not supported by this media.");return}const n=t,r=Array.prototype.findIndex.call(i.videoRenditions,s=>s.id==n);i.videoRenditions.selectedIndex!=r&&(i.videoRenditions.selectedIndex=r)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(t){var e;const{media:i}=t;return[...(e=i==null?void 0:i.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(t){var e,i;const{media:n}=t;return(i=[...(e=n==null?void 0:n.audioTracks)!=null?e:[]].find(r=>r.enabled))==null?void 0:i.id},set(t,e){const{media:i}=e;if(!(i!=null&&i.audioTracks)){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const n=t;for(const r of i.audioTracks)r.enabled=n==r.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(t){return one(t)},set(t,e,i){var n;t?(rne(e),i.detail&&((n=e.media)==null||n.focus())):sne(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(t){var e;const{media:i}=t;return!(i!=null&&i.remote)||((e=i.remote)==null?void 0:e.state)==="disconnected"?!1:!!i.remote.state},set(t,e){var i,n;const{media:r}=e;if(r&&!(t&&((i=r.remote)==null?void 0:i.state)!=="disconnected")&&!(!t&&((n=r.remote)==null?void 0:n.state)!=="connected")){if(typeof r.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}r.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(t,e){const{media:i}=e;if(i){if(!(i.webkitShowPlaybackTargetPicker&&D.WebKitPlaybackTargetAvailabilityEvent)){console.error("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}i.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(t){const{media:e}=t;if(!mne||!P4(e))return en.UNSUPPORTED}},mediaPipUnavailable:{get(t){const{media:e}=t;if(!pne||!D4(e))return en.UNSUPPORTED;if(e!=null&&e.disablePictureInPicture)return en.UNAVAILABLE}},mediaVolumeUnavailable:{get(t){const{media:e}=t;if(V0===!1||(e==null?void 0:e.volume)==null)return en.UNSUPPORTED},stateOwnersUpdateHandlers:[t=>{V0==null&&Tne.then(e=>t(e?void 0:en.UNSUPPORTED))}]},mediaCastUnavailable:{get(t,{availability:e="not-available"}={}){var i;const{media:n}=t;if(!vne||!((i=n==null?void 0:n.remote)!=null&&i.state))return en.UNSUPPORTED;if(!(e==null||e==="available"))return en.UNAVAILABLE},stateOwnersUpdateHandlers:[(t,e)=>{var i;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(i=n==null?void 0:n.remote)==null||i.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n==null?void 0:n.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(t,e){if(!gne)return en.UNSUPPORTED;if((e==null?void 0:e.availability)==="not-available")return en.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(t,e)=>{var i;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(i=n==null?void 0:n.remote)==null||i.watchAvailability(s=>{t({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?t({availability:null}):t({availability:"not-available"})}),()=>{var s;(s=n==null?void 0:n.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(t){var e;const{media:i}=t;if(!(i!=null&&i.videoRenditions))return en.UNSUPPORTED;if(!((e=i.videoRenditions)!=null&&e.length))return en.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(t){var e,i;const{media:n}=t;if(!(n!=null&&n.audioTracks))return en.UNSUPPORTED;if(((i=(e=n.audioTracks)==null?void 0:e.length)!=null?i:0)<=1)return en.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaLang:{get(t){const{options:{mediaLang:e}={}}=t;return e??"en"}}},Ane={[ee.MEDIA_PREVIEW_REQUEST](t,e,{detail:i}){var n,r,s;const{media:a}=e,o=i??void 0;let l,u;if(a&&o!=null){const[f]=fy(a,{kind:ts.METADATA,label:"thumbnails"}),m=Array.prototype.find.call((n=f==null?void 0:f.cues)!=null?n:[],(p,y,g)=>y===0?p.endTime>o:y===g.length-1?p.startTime<=o:p.startTime<=o&&p.endTime>o);if(m){const p=/'^(?:[a-z]+:)?\/\//i.test(m.text)||(r=a==null?void 0:a.querySelector('track[label="thumbnails"]'))==null?void 0:r.src,y=new URL(m.text,p);u=new URLSearchParams(y.hash).get("#xywh").split(",").map(v=>+v),l=y.href}}const c=t.mediaDuration.get(e);let h=(s=t.mediaChaptersCues.get(e).find((f,m,p)=>m===p.length-1&&c===f.endTime?f.startTime<=o&&f.endTime>=o:f.startTime<=o&&f.endTime>o))==null?void 0:s.text;return i!=null&&h==null&&(h=""),{mediaPreviewTime:o,mediaPreviewImage:l,mediaPreviewCoords:u,mediaPreviewChapter:h}},[ee.MEDIA_PAUSE_REQUEST](t,e){t["mediaPaused"].set(!0,e)},[ee.MEDIA_PLAY_REQUEST](t,e){var i,n,r,s;const a="mediaPaused",l=t.mediaStreamType.get(e)===ys.LIVE,u=!((i=e.options)!=null&&i.noAutoSeekToLive),c=t.mediaTargetLiveWindow.get(e)>0;if(l&&u&&!c){const d=(n=t.mediaSeekable.get(e))==null?void 0:n[1];if(d){const h=(s=(r=e.options)==null?void 0:r.seekToLiveOffset)!=null?s:0,f=d-h;t.mediaCurrentTime.set(f,e)}}t[a].set(!1,e)},[ee.MEDIA_PLAYBACK_RATE_REQUEST](t,e,{detail:i}){const n="mediaPlaybackRate",r=i;t[n].set(r,e)},[ee.MEDIA_MUTE_REQUEST](t,e){t["mediaMuted"].set(!0,e)},[ee.MEDIA_UNMUTE_REQUEST](t,e){const i="mediaMuted";t.mediaVolume.get(e)||t.mediaVolume.set(.25,e),t[i].set(!1,e)},[ee.MEDIA_LOOP_REQUEST](t,e,{detail:i}){const n="mediaLoop",r=!!i;return t[n].set(r,e),{mediaLoop:r}},[ee.MEDIA_VOLUME_REQUEST](t,e,{detail:i}){const n="mediaVolume",r=i;r&&t.mediaMuted.get(e)&&t.mediaMuted.set(!1,e),t[n].set(r,e)},[ee.MEDIA_SEEK_REQUEST](t,e,{detail:i}){const n="mediaCurrentTime",r=i;t[n].set(r,e)},[ee.MEDIA_SEEK_TO_LIVE_REQUEST](t,e){var i,n,r;const s="mediaCurrentTime",a=(i=t.mediaSeekable.get(e))==null?void 0:i[1];if(Number.isNaN(Number(a)))return;const o=(r=(n=e.options)==null?void 0:n.seekToLiveOffset)!=null?r:0,l=a-o;t[s].set(l,e)},[ee.MEDIA_SHOW_SUBTITLES_REQUEST](t,e,{detail:i}){var n;const{options:r}=e,s=B0(e),a=R4(i),o=(n=a[0])==null?void 0:n.language;o&&!r.noSubtitlesLangPref&&D.localStorage.setItem("media-chrome-pref-subtitles-lang",o),vh(Zu.SHOWING,s,a)},[ee.MEDIA_DISABLE_SUBTITLES_REQUEST](t,e,{detail:i}){const n=B0(e),r=i??[];vh(Zu.DISABLED,n,r)},[ee.MEDIA_TOGGLE_SUBTITLES_REQUEST](t,e,{detail:i}){M4(e,i)},[ee.MEDIA_RENDITION_REQUEST](t,e,{detail:i}){const n="mediaRenditionSelected",r=i;t[n].set(r,e)},[ee.MEDIA_AUDIO_TRACK_REQUEST](t,e,{detail:i}){const n="mediaAudioTrackEnabled",r=i;t[n].set(r,e)},[ee.MEDIA_ENTER_PIP_REQUEST](t,e){const i="mediaIsPip";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[i].set(!0,e)},[ee.MEDIA_EXIT_PIP_REQUEST](t,e){t["mediaIsPip"].set(!1,e)},[ee.MEDIA_ENTER_FULLSCREEN_REQUEST](t,e,i){const n="mediaIsFullscreen";t.mediaIsPip.get(e)&&t.mediaIsPip.set(!1,e),t[n].set(!0,e,i)},[ee.MEDIA_EXIT_FULLSCREEN_REQUEST](t,e){t["mediaIsFullscreen"].set(!1,e)},[ee.MEDIA_ENTER_CAST_REQUEST](t,e){const i="mediaIsCasting";t.mediaIsFullscreen.get(e)&&t.mediaIsFullscreen.set(!1,e),t[i].set(!0,e)},[ee.MEDIA_EXIT_CAST_REQUEST](t,e){t["mediaIsCasting"].set(!1,e)},[ee.MEDIA_AIRPLAY_REQUEST](t,e){t["mediaIsAirplaying"].set(!0,e)}},xne=({media:t,fullscreenElement:e,documentElement:i,stateMediator:n=Nd,requestMap:r=Ane,options:s={},monitorStateOwnersOnlyWithSubscriptions:a=!0})=>{const o=[],l={options:{...s}};let u=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const c=p=>{p!=null&&(yx(p,u)||(u=Object.freeze({...u,...p}),o.forEach(y=>y(u))))},d=()=>{const p=Object.entries(n).reduce((y,[g,{get:v}])=>(y[g]=v(l),y),{});c(p)},h={};let f;const m=async(p,y)=>{var g,v,E,T,_,x,A,I,L,b,R,P,w,$,B,U;const V=!!f;if(f={...l,...f??{},...p},V)return;await bne(...Object.values(p));const C=o.length>0&&y===0&&a,K=l.media!==f.media,z=((g=l.media)==null?void 0:g.textTracks)!==((v=f.media)==null?void 0:v.textTracks),H=((E=l.media)==null?void 0:E.videoRenditions)!==((T=f.media)==null?void 0:T.videoRenditions),Y=((_=l.media)==null?void 0:_.audioTracks)!==((x=f.media)==null?void 0:x.audioTracks),oe=((A=l.media)==null?void 0:A.remote)!==((I=f.media)==null?void 0:I.remote),pe=l.documentElement!==f.documentElement,fe=!!l.media&&(K||C),Ee=!!((L=l.media)!=null&&L.textTracks)&&(z||C),dt=!!((b=l.media)!=null&&b.videoRenditions)&&(H||C),$t=!!((R=l.media)!=null&&R.audioTracks)&&(Y||C),Ci=!!((P=l.media)!=null&&P.remote)&&(oe||C),Zi=!!l.documentElement&&(pe||C),Wn=fe||Ee||dt||$t||Ci||Zi,Ws=o.length===0&&y===1&&a,Tl=!!f.media&&(K||Ws),bl=!!((w=f.media)!=null&&w.textTracks)&&(z||Ws),Ay=!!(($=f.media)!=null&&$.videoRenditions)&&(H||Ws),Ce=!!((B=f.media)!=null&&B.audioTracks)&&(Y||Ws),qt=!!((U=f.media)!=null&&U.remote)&&(oe||Ws),Di=!!f.documentElement&&(pe||Ws),pr=Tl||bl||Ay||Ce||qt||Di;if(!(Wn||pr)){Object.entries(f).forEach(([De,Ji])=>{l[De]=Ji}),d(),f=void 0;return}Object.entries(n).forEach(([De,{get:Ji,mediaEvents:Ff=[],textTracksEvents:Sl=[],videoRenditionsEvents:Uf=[],audioTracksEvents:ao=[],remoteEvents:Bf=[],rootEvents:xy=[],stateOwnersUpdateHandlers:Vf=[]}])=>{h[De]||(h[De]={});const Ti=ft=>{const Ft=Ji(l,ft);c({[De]:Ft})};let ht;ht=h[De].mediaEvents,Ff.forEach(ft=>{ht&&fe&&(l.media.removeEventListener(ft,ht),h[De].mediaEvents=void 0),Tl&&(f.media.addEventListener(ft,Ti),h[De].mediaEvents=Ti)}),ht=h[De].textTracksEvents,Sl.forEach(ft=>{var Ft,jn;ht&&Ee&&((Ft=l.media.textTracks)==null||Ft.removeEventListener(ft,ht),h[De].textTracksEvents=void 0),bl&&((jn=f.media.textTracks)==null||jn.addEventListener(ft,Ti),h[De].textTracksEvents=Ti)}),ht=h[De].videoRenditionsEvents,Uf.forEach(ft=>{var Ft,jn;ht&&dt&&((Ft=l.media.videoRenditions)==null||Ft.removeEventListener(ft,ht),h[De].videoRenditionsEvents=void 0),Ay&&((jn=f.media.videoRenditions)==null||jn.addEventListener(ft,Ti),h[De].videoRenditionsEvents=Ti)}),ht=h[De].audioTracksEvents,ao.forEach(ft=>{var Ft,jn;ht&&$t&&((Ft=l.media.audioTracks)==null||Ft.removeEventListener(ft,ht),h[De].audioTracksEvents=void 0),Ce&&((jn=f.media.audioTracks)==null||jn.addEventListener(ft,Ti),h[De].audioTracksEvents=Ti)}),ht=h[De].remoteEvents,Bf.forEach(ft=>{var Ft,jn;ht&&Ci&&((Ft=l.media.remote)==null||Ft.removeEventListener(ft,ht),h[De].remoteEvents=void 0),qt&&((jn=f.media.remote)==null||jn.addEventListener(ft,Ti),h[De].remoteEvents=Ti)}),ht=h[De].rootEvents,xy.forEach(ft=>{ht&&Zi&&(l.documentElement.removeEventListener(ft,ht),h[De].rootEvents=void 0),Di&&(f.documentElement.addEventListener(ft,Ti),h[De].rootEvents=Ti)});const Hf=h[De].stateOwnersUpdateHandlers;if(Hf&&Wn&&(Array.isArray(Hf)?Hf:[Hf]).forEach(Ft=>{typeof Ft=="function"&&Ft()}),pr){const ft=Vf.map(Ft=>Ft(Ti,f)).filter(Ft=>typeof Ft=="function");h[De].stateOwnersUpdateHandlers=ft.length===1?ft[0]:ft}else Wn&&(h[De].stateOwnersUpdateHandlers=void 0)}),Object.entries(f).forEach(([De,Ji])=>{l[De]=Ji}),d(),f=void 0};return m({media:t,fullscreenElement:e,documentElement:i,options:s}),{dispatch(p){const{type:y,detail:g}=p;if(r[y]&&u.mediaErrorCode==null){c(r[y](n,l,p));return}y==="mediaelementchangerequest"?m({media:g}):y==="fullscreenelementchangerequest"?m({fullscreenElement:g}):y==="documentelementchangerequest"?m({documentElement:g}):y==="optionschangerequest"&&(Object.entries(g??{}).forEach(([v,E])=>{l.options[v]=E}),d())},getState(){return u},subscribe(p){return m({},o.length+1),o.push(p),p(u),()=>{const y=o.indexOf(p);y>=0&&(m({},o.length-1),o.splice(y,1))}}}};var Ex=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},ve=(t,e,i)=>(Ex(t,e,"read from private field"),i?i.call(t):e.get(t)),Qn=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},fs=(t,e,i,n)=>(Ex(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Br=(t,e,i)=>(Ex(t,e,"access private method"),i),ga,$d,Fe,Uo,Fd,xr,Up,Bp,Nb,Jo,Ju,Vp,$b,Fb,N4;const $4=["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Enter"," ","f","m","k","c","l","j",">","<","p"],IC=10,LC=.025,RC=.25,kne=.25,Ine=2,Z={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_DOWN_VOLUME_STEP:"keyboarddownvolumestep",KEYBOARD_UP_VOLUME_STEP:"keyboardupvolumestep",KEYS_USED:"keysused",LANG:"lang",LOOP:"loop",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_AUTO_SEEK_TO_LIVE:"noautoseektolive",NO_DEFAULT_STORE:"nodefaultstore",NO_HOTKEYS:"nohotkeys",NO_MUTED_PREF:"nomutedpref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_VOLUME_PREF:"novolumepref",SEEK_TO_LIVE_OFFSET:"seektoliveoffset"};class F4 extends dy{constructor(){super(),Qn(this,Bp),Qn(this,Jo),Qn(this,Vp),Qn(this,Fb),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,Qn(this,ga,new gx(this,Z.HOTKEYS)),Qn(this,$d,void 0),Qn(this,Fe,void 0),Qn(this,Uo,null),Qn(this,Fd,void 0),Qn(this,xr,void 0),Qn(this,Up,i=>{var n;(n=ve(this,Fe))==null||n.dispatch(i)}),this.associateElement(this);let e={};fs(this,Fd,i=>{Object.entries(i).forEach(([n,r])=>{if(n in e&&e[n]===r)return;this.propagateMediaState(n,r);const s=n.toLowerCase(),a=new D.CustomEvent(Lie[s],{composed:!0,detail:r});this.dispatchEvent(a)}),e=i}),this.hasAttribute(Z.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Z.NO_HOTKEYS,Z.HOTKEYS,Z.DEFAULT_STREAM_TYPE,Z.DEFAULT_SUBTITLES,Z.DEFAULT_DURATION,Z.NO_MUTED_PREF,Z.NO_VOLUME_PREF,Z.LANG,Z.LOOP)}get mediaStore(){return ve(this,Fe)}set mediaStore(e){var i,n;if(ve(this,Fe)&&((i=ve(this,xr))==null||i.call(this),fs(this,xr,void 0)),fs(this,Fe,e),!ve(this,Fe)&&!this.hasAttribute(Z.NO_DEFAULT_STORE)){Br(this,Bp,Nb).call(this);return}fs(this,xr,(n=ve(this,Fe))==null?void 0:n.subscribe(ve(this,Fd)))}get fullscreenElement(){var e;return(e=ve(this,$d))!=null?e:this}set fullscreenElement(e){var i;this.hasAttribute(Z.FULLSCREEN_ELEMENT)&&this.removeAttribute(Z.FULLSCREEN_ELEMENT),fs(this,$d,e),(i=ve(this,Fe))==null||i.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}get defaultSubtitles(){return Re(this,Z.DEFAULT_SUBTITLES)}set defaultSubtitles(e){we(this,Z.DEFAULT_SUBTITLES,e)}get defaultStreamType(){return at(this,Z.DEFAULT_STREAM_TYPE)}set defaultStreamType(e){ot(this,Z.DEFAULT_STREAM_TYPE,e)}get defaultDuration(){return st(this,Z.DEFAULT_DURATION)}set defaultDuration(e){Ct(this,Z.DEFAULT_DURATION,e)}get noHotkeys(){return Re(this,Z.NO_HOTKEYS)}set noHotkeys(e){we(this,Z.NO_HOTKEYS,e)}get keysUsed(){return at(this,Z.KEYS_USED)}set keysUsed(e){ot(this,Z.KEYS_USED,e)}get liveEdgeOffset(){return st(this,Z.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){Ct(this,Z.LIVE_EDGE_OFFSET,e)}get noAutoSeekToLive(){return Re(this,Z.NO_AUTO_SEEK_TO_LIVE)}set noAutoSeekToLive(e){we(this,Z.NO_AUTO_SEEK_TO_LIVE,e)}get noVolumePref(){return Re(this,Z.NO_VOLUME_PREF)}set noVolumePref(e){we(this,Z.NO_VOLUME_PREF,e)}get noMutedPref(){return Re(this,Z.NO_MUTED_PREF)}set noMutedPref(e){we(this,Z.NO_MUTED_PREF,e)}get noSubtitlesLangPref(){return Re(this,Z.NO_SUBTITLES_LANG_PREF)}set noSubtitlesLangPref(e){we(this,Z.NO_SUBTITLES_LANG_PREF,e)}get noDefaultStore(){return Re(this,Z.NO_DEFAULT_STORE)}set noDefaultStore(e){we(this,Z.NO_DEFAULT_STORE,e)}attributeChangedCallback(e,i,n){var r,s,a,o,l,u,c,d,h,f,m,p;if(super.attributeChangedCallback(e,i,n),e===Z.NO_HOTKEYS)n!==i&&n===""?(this.hasAttribute(Z.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==i&&n===null&&this.enableHotkeys();else if(e===Z.HOTKEYS)ve(this,ga).value=n;else if(e===Z.DEFAULT_SUBTITLES&&n!==i)(r=ve(this,Fe))==null||r.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Z.DEFAULT_SUBTITLES)}});else if(e===Z.DEFAULT_STREAM_TYPE)(a=ve(this,Fe))==null||a.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(s=this.getAttribute(Z.DEFAULT_STREAM_TYPE))!=null?s:void 0}});else if(e===Z.LIVE_EDGE_OFFSET)(o=ve(this,Fe))==null||o.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Z.LIVE_EDGE_OFFSET)?+this.getAttribute(Z.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Z.SEEK_TO_LIVE_OFFSET)?void 0:+this.getAttribute(Z.LIVE_EDGE_OFFSET)}});else if(e===Z.SEEK_TO_LIVE_OFFSET)(l=ve(this,Fe))==null||l.dispatch({type:"optionschangerequest",detail:{seekToLiveOffset:this.hasAttribute(Z.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Z.SEEK_TO_LIVE_OFFSET):void 0}});else if(e===Z.NO_AUTO_SEEK_TO_LIVE)(u=ve(this,Fe))==null||u.dispatch({type:"optionschangerequest",detail:{noAutoSeekToLive:this.hasAttribute(Z.NO_AUTO_SEEK_TO_LIVE)}});else if(e===Z.FULLSCREEN_ELEMENT){const y=n?(c=this.getRootNode())==null?void 0:c.getElementById(n):void 0;fs(this,$d,y),(d=ve(this,Fe))==null||d.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}else e===Z.LANG&&n!==i?(Vie(n),(h=ve(this,Fe))==null||h.dispatch({type:"optionschangerequest",detail:{mediaLang:n}})):e===Z.LOOP&&n!==i?(f=ve(this,Fe))==null||f.dispatch({type:ee.MEDIA_LOOP_REQUEST,detail:n!=null}):e===Z.NO_VOLUME_PREF&&n!==i?(m=ve(this,Fe))==null||m.dispatch({type:"optionschangerequest",detail:{noVolumePref:this.hasAttribute(Z.NO_VOLUME_PREF)}}):e===Z.NO_MUTED_PREF&&n!==i&&((p=ve(this,Fe))==null||p.dispatch({type:"optionschangerequest",detail:{noMutedPref:this.hasAttribute(Z.NO_MUTED_PREF)}}))}connectedCallback(){var e,i;!ve(this,Fe)&&!this.hasAttribute(Z.NO_DEFAULT_STORE)&&Br(this,Bp,Nb).call(this),(e=ve(this,Fe))==null||e.dispatch({type:"documentelementchangerequest",detail:Yt}),super.connectedCallback(),ve(this,Fe)&&!ve(this,xr)&&fs(this,xr,(i=ve(this,Fe))==null?void 0:i.subscribe(ve(this,Fd))),this.hasAttribute(Z.NO_HOTKEYS)?this.disableHotkeys():this.enableHotkeys()}disconnectedCallback(){var e,i,n,r;(e=super.disconnectedCallback)==null||e.call(this),ve(this,Fe)&&((i=ve(this,Fe))==null||i.dispatch({type:"documentelementchangerequest",detail:void 0}),(n=ve(this,Fe))==null||n.dispatch({type:ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),ve(this,xr)&&((r=ve(this,xr))==null||r.call(this),fs(this,xr,void 0))}mediaSetCallback(e){var i;super.mediaSetCallback(e),(i=ve(this,Fe))==null||i.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var i;super.mediaUnsetCallback(e),(i=ve(this,Fe))==null||i.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,i){DC(this.mediaStateReceivers,e,i)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:i}=this;if(i.has(e))return;const n=this.registerMediaStateReceiver.bind(this),r=this.unregisterMediaStateReceiver.bind(this),s=Pne(e,n,r);Object.values(ee).forEach(a=>{e.addEventListener(a,ve(this,Up))}),i.set(e,s)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:i}=this;if(!i.has(e))return;i.get(e)(),i.delete(e),Object.values(ee).forEach(r=>{e.removeEventListener(r,ve(this,Up))})}registerMediaStateReceiver(e){if(!e)return;const i=this.mediaStateReceivers;i.indexOf(e)>-1||(i.push(e),ve(this,Fe)&&Object.entries(ve(this,Fe).getState()).forEach(([r,s])=>{DC([e],r,s)}))}unregisterMediaStateReceiver(e){const i=this.mediaStateReceivers,n=i.indexOf(e);n<0||i.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",Br(this,Vp,$b))}disableHotkeys(){this.removeEventListener("keydown",Br(this,Vp,$b)),this.removeEventListener("keyup",Br(this,Jo,Ju))}get hotkeys(){return at(this,Z.HOTKEYS)}set hotkeys(e){ot(this,Z.HOTKEYS,e)}keyboardShortcutHandler(e){var i,n,r,s,a,o,l,u,c;const d=e.target;if(((r=(n=(i=d.getAttribute(Z.KEYS_USED))==null?void 0:i.split(" "))!=null?n:d==null?void 0:d.keysUsed)!=null?r:[]).map(g=>g==="Space"?" ":g).filter(Boolean).includes(e.key))return;let f,m,p;if(!(ve(this,ga).contains(`no${e.key.toLowerCase()}`)||e.key===" "&&ve(this,ga).contains("nospace")||e.shiftKey&&(e.key==="/"||e.key==="?")&&ve(this,ga).contains("noshift+/")))switch(e.key){case" ":case"k":f=ve(this,Fe).getState().mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new D.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"m":f=this.mediaStore.getState().mediaVolumeLevel==="off"?ee.MEDIA_UNMUTE_REQUEST:ee.MEDIA_MUTE_REQUEST,this.dispatchEvent(new D.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"f":f=this.mediaStore.getState().mediaIsFullscreen?ee.MEDIA_EXIT_FULLSCREEN_REQUEST:ee.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new D.CustomEvent(f,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new D.CustomEvent(ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":case"j":{const g=this.hasAttribute(Z.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(Z.KEYBOARD_BACKWARD_SEEK_OFFSET):IC;m=Math.max(((s=this.mediaStore.getState().mediaCurrentTime)!=null?s:0)-g,0),p=new D.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case"ArrowRight":case"l":{const g=this.hasAttribute(Z.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(Z.KEYBOARD_FORWARD_SEEK_OFFSET):IC;m=Math.max(((a=this.mediaStore.getState().mediaCurrentTime)!=null?a:0)+g,0),p=new D.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case"ArrowUp":{const g=this.hasAttribute(Z.KEYBOARD_UP_VOLUME_STEP)?+this.getAttribute(Z.KEYBOARD_UP_VOLUME_STEP):LC;m=Math.min(((o=this.mediaStore.getState().mediaVolume)!=null?o:1)+g,1),p=new D.CustomEvent(ee.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case"ArrowDown":{const g=this.hasAttribute(Z.KEYBOARD_DOWN_VOLUME_STEP)?+this.getAttribute(Z.KEYBOARD_DOWN_VOLUME_STEP):LC;m=Math.max(((l=this.mediaStore.getState().mediaVolume)!=null?l:1)-g,0),p=new D.CustomEvent(ee.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case"<":{const g=(u=this.mediaStore.getState().mediaPlaybackRate)!=null?u:1;m=Math.max(g-RC,kne).toFixed(2),p=new D.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case">":{const g=(c=this.mediaStore.getState().mediaPlaybackRate)!=null?c:1;m=Math.min(g+RC,Ine).toFixed(2),p=new D.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:m}),this.dispatchEvent(p);break}case"/":case"?":{e.shiftKey&&Br(this,Fb,N4).call(this);break}case"p":{f=this.mediaStore.getState().mediaIsPip?ee.MEDIA_EXIT_PIP_REQUEST:ee.MEDIA_ENTER_PIP_REQUEST,p=new D.CustomEvent(f,{composed:!0,bubbles:!0}),this.dispatchEvent(p);break}}}}ga=new WeakMap;$d=new WeakMap;Fe=new WeakMap;Uo=new WeakMap;Fd=new WeakMap;xr=new WeakMap;Up=new WeakMap;Bp=new WeakSet;Nb=function(){var t;this.mediaStore=xne({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Z.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(Z.DEFAULT_DURATION)?+this.getAttribute(Z.DEFAULT_DURATION):void 0,defaultStreamType:(t=this.getAttribute(Z.DEFAULT_STREAM_TYPE))!=null?t:void 0,liveEdgeOffset:this.hasAttribute(Z.LIVE_EDGE_OFFSET)?+this.getAttribute(Z.LIVE_EDGE_OFFSET):void 0,seekToLiveOffset:this.hasAttribute(Z.SEEK_TO_LIVE_OFFSET)?+this.getAttribute(Z.SEEK_TO_LIVE_OFFSET):this.hasAttribute(Z.LIVE_EDGE_OFFSET)?+this.getAttribute(Z.LIVE_EDGE_OFFSET):void 0,noAutoSeekToLive:this.hasAttribute(Z.NO_AUTO_SEEK_TO_LIVE),noVolumePref:this.hasAttribute(Z.NO_VOLUME_PREF),noMutedPref:this.hasAttribute(Z.NO_MUTED_PREF),noSubtitlesLangPref:this.hasAttribute(Z.NO_SUBTITLES_LANG_PREF)}})};Jo=new WeakSet;Ju=function(t){const{key:e,shiftKey:i}=t;if(!(i&&(e==="/"||e==="?")||$4.includes(e))){this.removeEventListener("keyup",Br(this,Jo,Ju));return}this.keyboardShortcutHandler(t)};Vp=new WeakSet;$b=function(t){var e;const{metaKey:i,altKey:n,key:r,shiftKey:s}=t,a=s&&(r==="/"||r==="?");if(a&&((e=ve(this,Uo))!=null&&e.open)){this.removeEventListener("keyup",Br(this,Jo,Ju));return}if(i||n||!a&&!$4.includes(r)){this.removeEventListener("keyup",Br(this,Jo,Ju));return}const o=t.target,l=o instanceof HTMLElement&&(o.tagName.toLowerCase()==="media-volume-range"||o.tagName.toLowerCase()==="media-time-range");[" ","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(r)&&!(ve(this,ga).contains(`no${r.toLowerCase()}`)||r===" "&&ve(this,ga).contains("nospace"))&&!l&&t.preventDefault(),this.addEventListener("keyup",Br(this,Jo,Ju),{once:!0})};Fb=new WeakSet;N4=function(){ve(this,Uo)||(fs(this,Uo,Yt.createElement("media-keyboard-shortcuts-dialog")),this.appendChild(ve(this,Uo))),ve(this,Uo).open=!0};const Lne=Object.values(k),Rne=Object.values(u4),U4=t=>{var e,i,n,r;let{observedAttributes:s}=t.constructor;!s&&((e=t.nodeName)!=null&&e.includes("-"))&&(D.customElements.upgrade(t),{observedAttributes:s}=t.constructor);const a=(r=(n=(i=t==null?void 0:t.getAttribute)==null?void 0:i.call(t,Ne.MEDIA_CHROME_ATTRIBUTES))==null?void 0:n.split)==null?void 0:r.call(n,/\s+/);return Array.isArray(s||a)?(s||a).filter(o=>Lne.includes(o)):[]},wne=t=>{var e,i;return(e=t.nodeName)!=null&&e.includes("-")&&D.customElements.get((i=t.nodeName)==null?void 0:i.toLowerCase())&&!(t instanceof D.customElements.get(t.nodeName.toLowerCase()))&&D.customElements.upgrade(t),Rne.some(n=>n in t)},Ub=t=>wne(t)||!!U4(t).length,wC=t=>{var e;return(e=t==null?void 0:t.join)==null?void 0:e.call(t,":")},CC={[k.MEDIA_SUBTITLES_LIST]:df,[k.MEDIA_SUBTITLES_SHOWING]:df,[k.MEDIA_SEEKABLE]:wC,[k.MEDIA_BUFFERED]:t=>t==null?void 0:t.map(wC).join(" "),[k.MEDIA_PREVIEW_COORDS]:t=>t==null?void 0:t.join(" "),[k.MEDIA_RENDITION_LIST]:wie,[k.MEDIA_AUDIO_TRACK_LIST]:Oie},Cne=async(t,e,i)=>{var n,r;if(t.isConnected||await h4(0),typeof i=="boolean"||i==null)return we(t,e,i);if(typeof i=="number")return Ct(t,e,i);if(typeof i=="string")return ot(t,e,i);if(Array.isArray(i)&&!i.length)return t.removeAttribute(e);const s=(r=(n=CC[e])==null?void 0:n.call(CC,i))!=null?r:i;return t.setAttribute(e,s)},Dne=t=>{var e;return!!((e=t.closest)!=null&&e.call(t,'*[slot="media"]'))},_o=(t,e)=>{if(Dne(t))return;const i=(r,s)=>{var a,o;Ub(r)&&s(r);const{children:l=[]}=r??{},u=(o=(a=r==null?void 0:r.shadowRoot)==null?void 0:a.children)!=null?o:[];[...l,...u].forEach(d=>_o(d,s))},n=t==null?void 0:t.nodeName.toLowerCase();if(n.includes("-")&&!Ub(t)){D.customElements.whenDefined(n).then(()=>{i(t,e)});return}i(t,e)},DC=(t,e,i)=>{t.forEach(n=>{if(e in n){n[e]=i;return}const r=U4(n),s=e.toLowerCase();r.includes(s)&&Cne(n,s,i)})},Pne=(t,e,i)=>{_o(t,e);const n=c=>{var d;const h=(d=c==null?void 0:c.composedPath()[0])!=null?d:c.target;e(h)},r=c=>{var d;const h=(d=c==null?void 0:c.composedPath()[0])!=null?d:c.target;i(h)};t.addEventListener(ee.REGISTER_MEDIA_STATE_RECEIVER,n),t.addEventListener(ee.UNREGISTER_MEDIA_STATE_RECEIVER,r);const s=c=>{c.forEach(d=>{const{addedNodes:h=[],removedNodes:f=[],type:m,target:p,attributeName:y}=d;m==="childList"?(Array.prototype.forEach.call(h,g=>_o(g,e)),Array.prototype.forEach.call(f,g=>_o(g,i))):m==="attributes"&&y===Ne.MEDIA_CHROME_ATTRIBUTES&&(Ub(p)?e(p):i(p))})};let a=[];const o=c=>{const d=c.target;d.name!=="media"&&(a.forEach(h=>_o(h,i)),a=[...d.assignedElements({flatten:!0})],a.forEach(h=>_o(h,e)))};t.addEventListener("slotchange",o);const l=new MutationObserver(s);return l.observe(t,{childList:!0,attributes:!0,subtree:!0}),()=>{_o(t,i),t.removeEventListener("slotchange",o),l.disconnect(),t.removeEventListener(ee.REGISTER_MEDIA_STATE_RECEIVER,n),t.removeEventListener(ee.UNREGISTER_MEDIA_STATE_RECEIVER,r)}};D.customElements.get("media-controller")||D.customElements.define("media-controller",F4);var One=F4;const Nl={PLACEMENT:"placement",BOUNDS:"bounds"};function Mne(t){return`
    <style>
      :host {
        --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
        --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
        --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
        --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
        --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
        position: relative;
        pointer-events: none;
        display: var(--media-tooltip-display, inline-flex);
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        z-index: var(--media-tooltip-z-index, 1);
        background: var(--_tooltip-background);
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        font: var(--media-font,
          var(--media-font-weight, 400)
          var(--media-font-size, 13px) /
          var(--media-text-content-height, var(--media-control-height, 18px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        padding: var(--media-tooltip-padding, .35em .7em);
        border: var(--media-tooltip-border, none);
        border-radius: var(--media-tooltip-border-radius, 5px);
        filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
        white-space: var(--media-tooltip-white-space, nowrap);
      }

      :host([hidden]) {
        display: none;
      }

      img, svg {
        display: inline-block;
      }

      #arrow {
        position: absolute;
        width: 0px;
        height: 0px;
        border-style: solid;
        display: var(--media-tooltip-arrow-display, block);
      }

      :host(:not([placement])),
      :host([placement="top"]) {
        position: absolute;
        bottom: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host(:not([placement])) #arrow,
      :host([placement="top"]) #arrow {
        top: 100%;
        left: 50%;
        border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
        border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="right"]) {
        position: absolute;
        left: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="right"]) #arrow {
        top: 50%;
        right: 100%;
        border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
        border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
        transform: translate(0, -50%);
      }

      :host([placement="bottom"]) {
        position: absolute;
        top: calc(100% + var(--media-tooltip-distance, 12px));
        left: 50%;
        transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
      }
      :host([placement="bottom"]) #arrow {
        bottom: 100%;
        left: 50%;
        border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
        border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
        transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
      }

      :host([placement="left"]) {
        position: absolute;
        right: calc(100% + var(--media-tooltip-distance, 12px));
        top: 50%;
        transform: translate(0, -50%);
      }
      :host([placement="left"]) #arrow {
        top: 50%;
        left: 100%;
        border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
        border-color: transparent transparent transparent var(--_tooltip-arrow-background);
        transform: translate(0, -50%);
      }
      
      :host([placement="none"]) #arrow {
        display: none;
      }
    </style>
    <slot></slot>
    <div id="arrow"></div>
  `}class my extends D.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!b4(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const i=this.placement;if(i==="left"||i==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const n=getComputedStyle(this),r=(e=Bc(this,"#"+this.bounds))!=null?e:Qi(this);if(!r)return;const{x:s,width:a}=r.getBoundingClientRect(),{x:o,width:l}=this.getBoundingClientRect(),u=o+l,c=s+a,d=n.getPropertyValue("--media-tooltip-offset-x"),h=d?parseFloat(d.replace("px","")):0,f=n.getPropertyValue("--media-tooltip-container-margin"),m=f?parseFloat(f.replace("px","")):0,p=o-s+h-m,y=u-c+h+m;if(p<0){this.style.setProperty("--media-tooltip-offset-x",`${p}px`);return}if(y>0){this.style.setProperty("--media-tooltip-offset-x",`${y}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}if(this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[Nl.PLACEMENT,Nl.BOUNDS]}get placement(){return at(this,Nl.PLACEMENT)}set placement(e){ot(this,Nl.PLACEMENT,e)}get bounds(){return at(this,Nl.BOUNDS)}set bounds(e){ot(this,Nl.BOUNDS,e)}}my.shadowRootOptions={mode:"open"};my.getTemplateHTML=Mne;D.customElements.get("media-tooltip")||D.customElements.define("media-tooltip",my);var PC=my,Tx=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Bt=(t,e,i)=>(Tx(t,e,"read from private field"),i?i.call(t):e.get(t)),$l=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Nm=(t,e,i,n)=>(Tx(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Nne=(t,e,i)=>(Tx(t,e,"access private method"),i),kr,Ou,va,Xl,Hp,Bb,B4;const Xs={TOOLTIP_PLACEMENT:"tooltipplacement",DISABLED:"disabled",NO_TOOLTIP:"notooltip"};function $ne(t,e={}){return`
    <style>
      :host {
        position: relative;
        font: var(--media-font,
          var(--media-font-weight, bold)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        padding: var(--media-button-padding, var(--media-control-padding, 10px));
        justify-content: var(--media-button-justify-content, center);
        display: inline-flex;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        transition: background .15s linear;
        pointer-events: auto;
        cursor: var(--media-cursor, pointer);
        -webkit-tap-highlight-color: transparent;
      }

      
      :host(:focus-visible) {
        box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: 0;
      }
      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgba(50 50 70 / .7));
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-button-icon-width);
        height: var(--media-button-icon-height, var(--media-control-height, 24px));
        transform: var(--media-button-icon-transform);
        transition: var(--media-button-icon-transition);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
      }

      media-tooltip {
        
        max-width: 0;
        overflow-x: clip;
        opacity: 0;
        transition: opacity .3s, max-width 0s 9s;
      }

      :host(:hover) media-tooltip,
      :host(:focus-visible) media-tooltip {
        max-width: 100vw;
        opacity: 1;
        transition: opacity .3s;
      }

      :host([notooltip]) slot[name="tooltip"] {
        display: none;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}

    <slot name="tooltip">
      <media-tooltip part="tooltip" aria-hidden="true">
        <template shadowrootmode="${PC.shadowRootOptions.mode}">
          ${PC.getTemplateHTML({})}
        </template>
        <slot name="tooltip-content">
          ${this.getTooltipContentHTML(t)}
        </slot>
      </media-tooltip>
    </slot>
  `}function Fne(t,e){return`
    <slot></slot>
  `}function Une(){return""}class ui extends D.HTMLElement{constructor(){if(super(),$l(this,Bb),$l(this,kr,void 0),this.preventClick=!1,this.tooltipEl=null,$l(this,Ou,e=>{this.preventClick||this.handleClick(e),setTimeout(Bt(this,va),0)}),$l(this,va,()=>{var e,i;(i=(e=this.tooltipEl)==null?void 0:e.updateXOffset)==null||i.call(e)}),$l(this,Xl,e=>{const{key:i}=e;if(!this.keysUsed.includes(i)){this.removeEventListener("keyup",Bt(this,Xl));return}this.preventClick||this.handleClick(e)}),$l(this,Hp,e=>{const{metaKey:i,altKey:n,key:r}=e;if(i||n||!this.keysUsed.includes(r)){this.removeEventListener("keyup",Bt(this,Xl));return}this.addEventListener("keyup",Bt(this,Xl),{once:!0})}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes),i=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(i):this.shadowRoot.innerHTML=i}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",Xs.TOOLTIP_PLACEMENT,Ne.MEDIA_CONTROLLER,k.MEDIA_LANG]}enable(){this.addEventListener("click",Bt(this,Ou)),this.addEventListener("keydown",Bt(this,Hp)),this.tabIndex=0}disable(){this.removeEventListener("click",Bt(this,Ou)),this.removeEventListener("keydown",Bt(this,Hp)),this.removeEventListener("keyup",Bt(this,Xl)),this.tabIndex=-1}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Ne.MEDIA_CONTROLLER?(i&&((s=(r=Bt(this,kr))==null?void 0:r.unassociateElement)==null||s.call(r,this),Nm(this,kr,null)),n&&this.isConnected&&(Nm(this,kr,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Bt(this,kr))==null?void 0:o.associateElement)==null||l.call(o,this))):e==="disabled"&&n!==i?n==null?this.enable():this.disable():e===Xs.TOOLTIP_PLACEMENT&&this.tooltipEl&&n!==i?this.tooltipEl.placement=n:e===k.MEDIA_LANG&&(this.shadowRoot.querySelector('slot[name="tooltip-content"]').innerHTML=this.constructor.getTooltipContentHTML()),Bt(this,va).call(this)}connectedCallback(){var e,i,n;const{style:r}=ei(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")?this.disable():this.enable(),this.setAttribute("role","button");const s=this.getAttribute(Ne.MEDIA_CONTROLLER);s&&(Nm(this,kr,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(i=Bt(this,kr))==null?void 0:i.associateElement)==null||n.call(i,this)),D.customElements.whenDefined("media-tooltip").then(()=>Nne(this,Bb,B4).call(this))}disconnectedCallback(){var e,i;this.disable(),(i=(e=Bt(this,kr))==null?void 0:e.unassociateElement)==null||i.call(e,this),Nm(this,kr,null),this.removeEventListener("mouseenter",Bt(this,va)),this.removeEventListener("focus",Bt(this,va)),this.removeEventListener("click",Bt(this,Ou))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return at(this,Xs.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){ot(this,Xs.TOOLTIP_PLACEMENT,e)}get mediaController(){return at(this,Ne.MEDIA_CONTROLLER)}set mediaController(e){ot(this,Ne.MEDIA_CONTROLLER,e)}get disabled(){return Re(this,Xs.DISABLED)}set disabled(e){we(this,Xs.DISABLED,e)}get noTooltip(){return Re(this,Xs.NO_TOOLTIP)}set noTooltip(e){we(this,Xs.NO_TOOLTIP,e)}handleClick(e){}}kr=new WeakMap;Ou=new WeakMap;va=new WeakMap;Xl=new WeakMap;Hp=new WeakMap;Bb=new WeakSet;B4=function(){this.addEventListener("mouseenter",Bt(this,va)),this.addEventListener("focus",Bt(this,va)),this.addEventListener("click",Bt(this,Ou));const t=this.tooltipPlacement;t&&this.tooltipEl&&(this.tooltipEl.placement=t)};ui.shadowRootOptions={mode:"open"};ui.getTemplateHTML=$ne;ui.getSlotTemplateHTML=Fne;ui.getTooltipContentHTML=Une;D.customElements.get("media-chrome-button")||D.customElements.define("media-chrome-button",ui);const OC=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`;function Bne(t){return`
    <style>
      :host([${k.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${k.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${k.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
      :host(:not([${k.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${OC}</slot>
      <slot name="exit">${OC}</slot>
    </slot>
  `}function Vne(){return`
    <slot name="tooltip-enter">${se("start airplay")}</slot>
    <slot name="tooltip-exit">${se("stop airplay")}</slot>
  `}const MC=t=>{const e=t.mediaIsAirplaying?se("stop airplay"):se("start airplay");t.setAttribute("aria-label",e)};class bx extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_IS_AIRPLAYING,k.MEDIA_AIRPLAY_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),MC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_IS_AIRPLAYING&&MC(this)}get mediaIsAirplaying(){return Re(this,k.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){we(this,k.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return at(this,k.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){ot(this,k.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new D.CustomEvent(ee.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}bx.getSlotTemplateHTML=Bne;bx.getTooltipContentHTML=Vne;D.customElements.get("media-airplay-button")||D.customElements.define("media-airplay-button",bx);const Hne=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,Kne=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function Gne(t){return`
    <style>
      :host([aria-checked="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([aria-checked="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-checked="true"]) slot[name=tooltip-enable],
      :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${Hne}</slot>
      <slot name="off">${Kne}</slot>
    </slot>
  `}function Wne(){return`
    <slot name="tooltip-enable">${se("Enable captions")}</slot>
    <slot name="tooltip-disable">${se("Disable captions")}</slot>
  `}const NC=t=>{t.setAttribute("aria-checked",C4(t).toString())};class Sx extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_SUBTITLES_LIST,k.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",se("closed captions")),NC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_SUBTITLES_SHOWING&&NC(this)}get mediaSubtitlesList(){return $C(this,k.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){FC(this,k.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return $C(this,k.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){FC(this,k.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new D.CustomEvent(ee.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}Sx.getSlotTemplateHTML=Gne;Sx.getTooltipContentHTML=Wne;const $C=(t,e)=>{const i=t.getAttribute(e);return i?hy(i):[]},FC=(t,e,i)=>{if(!(i!=null&&i.length)){t.removeAttribute(e);return}const n=df(i);t.getAttribute(e)!==n&&t.setAttribute(e,n)};D.customElements.get("media-captions-button")||D.customElements.define("media-captions-button",Sx);const jne='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',Yne='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>';function qne(t){return`
    <style>
      :host([${k.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${k.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${k.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
      :host(:not([${k.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${jne}</slot>
      <slot name="exit">${Yne}</slot>
    </slot>
  `}function zne(){return`
    <slot name="tooltip-enter">${se("Start casting")}</slot>
    <slot name="tooltip-exit">${se("Stop casting")}</slot>
  `}const UC=t=>{const e=t.mediaIsCasting?se("stop casting"):se("start casting");t.setAttribute("aria-label",e)};class _x extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_IS_CASTING,k.MEDIA_CAST_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),UC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_IS_CASTING&&UC(this)}get mediaIsCasting(){return Re(this,k.MEDIA_IS_CASTING)}set mediaIsCasting(e){we(this,k.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return at(this,k.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){ot(this,k.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?ee.MEDIA_EXIT_CAST_REQUEST:ee.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new D.CustomEvent(e,{composed:!0,bubbles:!0}))}}_x.getSlotTemplateHTML=qne;_x.getTooltipContentHTML=zne;D.customElements.get("media-cast-button")||D.customElements.define("media-cast-button",_x);var Ax=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},el=(t,e,i)=>(Ax(t,e,"read from private field"),i?i.call(t):e.get(t)),cs=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},xx=(t,e,i,n)=>(Ax(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),ho=(t,e,i)=>(Ax(t,e,"access private method"),i),H0,hf,fl,Kp,Vb,Hb,V4,Kb,H4,Gb,K4,Wb,G4,jb,W4;function Qne(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        display: var(--media-dialog-display, inline-flex);
        justify-content: center;
        align-items: center;
        
        transition-behavior: allow-discrete;
        visibility: hidden;
        opacity: 0;
        transform: translateY(2px) scale(.99);
        pointer-events: none;
      }

      :host([open]) {
        transition: display .2s, visibility 0s, opacity .2s ease-out, transform .15s ease-out;
        visibility: visible;
        opacity: 1;
        transform: translateY(0) scale(1);
        pointer-events: auto;
      }

      #content {
        display: flex;
        position: relative;
        box-sizing: border-box;
        width: min(320px, 100%);
        word-wrap: break-word;
        max-height: 100%;
        overflow: auto;
        text-align: center;
        line-height: 1.4;
      }
    </style>
    ${this.getSlotTemplateHTML(t)}
  `}function Xne(t){return`
    <slot id="content"></slot>
  `}const ud={OPEN:"open",ANCHOR:"anchor"};class Vc extends D.HTMLElement{constructor(){super(),cs(this,Kp),cs(this,Hb),cs(this,Kb),cs(this,Gb),cs(this,Wb),cs(this,jb),cs(this,H0,!1),cs(this,hf,null),cs(this,fl,null),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[ud.OPEN,ud.ANCHOR]}get open(){return Re(this,ud.OPEN)}set open(e){we(this,ud.OPEN,e)}handleEvent(e){switch(e.type){case"invoke":ho(this,Gb,K4).call(this,e);break;case"focusout":ho(this,Wb,G4).call(this,e);break;case"keydown":ho(this,jb,W4).call(this,e);break}}connectedCallback(){ho(this,Kp,Vb).call(this),this.role||(this.role="dialog")}attributeChangedCallback(e,i,n){ho(this,Kp,Vb).call(this),e===ud.OPEN&&n!==i&&(this.open?ho(this,Hb,V4).call(this):ho(this,Kb,H4).call(this))}focus(){xx(this,hf,hx());const e=!this.dispatchEvent(new Event("focus",{composed:!0,cancelable:!0})),i=!this.dispatchEvent(new Event("focusin",{composed:!0,bubbles:!0,cancelable:!0}));if(e||i)return;const n=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');n==null||n.focus()}get keysUsed(){return["Escape","Tab"]}}H0=new WeakMap;hf=new WeakMap;fl=new WeakMap;Kp=new WeakSet;Vb=function(){if(!el(this,H0)&&(xx(this,H0,!0),!this.shadowRoot)){this.attachShadow(this.constructor.shadowRootOptions);const t=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(t),queueMicrotask(()=>{const{style:e}=ei(this.shadowRoot,":host");e.setProperty("transition","display .15s, visibility .15s, opacity .15s ease-in, transform .15s ease-in")})}};Hb=new WeakSet;V4=function(){var t;(t=el(this,fl))==null||t.setAttribute("aria-expanded","true"),this.dispatchEvent(new Event("open",{composed:!0,bubbles:!0})),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};Kb=new WeakSet;H4=function(){var t;(t=el(this,fl))==null||t.setAttribute("aria-expanded","false"),this.dispatchEvent(new Event("close",{composed:!0,bubbles:!0}))};Gb=new WeakSet;K4=function(t){xx(this,fl,t.relatedTarget),Gs(this,t.relatedTarget)||(this.open=!this.open)};Wb=new WeakSet;G4=function(t){var e;Gs(this,t.relatedTarget)||((e=el(this,hf))==null||e.focus(),el(this,fl)&&el(this,fl)!==t.relatedTarget&&this.open&&(this.open=!1))};jb=new WeakSet;W4=function(t){var e,i,n,r,s;const{key:a,ctrlKey:o,altKey:l,metaKey:u}=t;o||l||u||this.keysUsed.includes(a)&&(t.preventDefault(),t.stopPropagation(),a==="Tab"?(t.shiftKey?(i=(e=this.previousElementSibling)==null?void 0:e.focus)==null||i.call(e):(r=(n=this.nextElementSibling)==null?void 0:n.focus)==null||r.call(n),this.blur()):a==="Escape"&&((s=el(this,hf))==null||s.focus(),this.open=!1))};Vc.shadowRootOptions={mode:"open"};Vc.getTemplateHTML=Qne;Vc.getSlotTemplateHTML=Xne;D.customElements.get("media-chrome-dialog")||D.customElements.define("media-chrome-dialog",Vc);var kx=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},yt=(t,e,i)=>(kx(t,e,"read from private field"),i?i.call(t):e.get(t)),ci=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},ia=(t,e,i,n)=>(kx(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),tr=(t,e,i)=>(kx(t,e,"access private method"),i),Ir,py,Gp,Wp,nr,K0,jp,Yp,qp,Ix,j4,zp,Yb,Qp,qb,G0,Lx,zb,Y4,Qb,q4,Xb,z4,Zb,Q4;function Zne(t){return`
    <style>
      :host {
        --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

        box-shadow: var(--_focus-visible-box-shadow, none);
        background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
        display: inline-flex;
        align-items: center;
        
        vertical-align: middle;
        box-sizing: border-box;
        position: relative;
        width: 100px;
        transition: background .15s linear;
        cursor: var(--media-cursor, pointer);
        pointer-events: auto;
        touch-action: none; 
      }

      
      input[type=range]:focus {
        outline: 0;
      }
      input[type=range]:focus::-webkit-slider-runnable-track {
        outline: 0;
      }

      :host(:hover) {
        background: var(--media-control-hover-background, rgb(50 50 70 / .7));
      }

      #leftgap {
        padding-left: var(--media-range-padding-left, var(--_media-range-padding));
      }

      #rightgap {
        padding-right: var(--media-range-padding-right, var(--_media-range-padding));
      }

      #startpoint,
      #endpoint {
        position: absolute;
      }

      #endpoint {
        right: 0;
      }

      #container {
        
        width: var(--media-range-track-width, 100%);
        transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
        position: relative;
        height: 100%;
        display: flex;
        align-items: center;
        min-width: 40px;
      }

      #range {
        
        display: var(--media-time-range-hover-display, block);
        bottom: var(--media-time-range-hover-bottom, -7px);
        height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
        width: 100%;
        position: absolute;
        cursor: var(--media-cursor, pointer);

        -webkit-appearance: none; 
        -webkit-tap-highlight-color: transparent;
        background: transparent; 
        margin: 0;
        z-index: 1;
      }

      @media (hover: hover) {
        #range {
          bottom: var(--media-time-range-hover-bottom, -5px);
          height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
        }
      }

      
      
      #range::-webkit-slider-thumb {
        -webkit-appearance: none;
        background: transparent;
        width: .1px;
        height: .1px;
      }

      
      #range::-moz-range-thumb {
        background: transparent;
        border: transparent;
        width: .1px;
        height: .1px;
      }

      #appearance {
        height: var(--media-range-track-height, 4px);
        display: flex;
        flex-direction: column;
        justify-content: center;
        width: 100%;
        position: absolute;
        
        will-change: transform;
      }

      #track {
        background: var(--media-range-track-background, rgb(255 255 255 / .2));
        border-radius: var(--media-range-track-border-radius, 1px);
        border: var(--media-range-track-border, none);
        outline: var(--media-range-track-outline);
        outline-offset: var(--media-range-track-outline-offset);
        backdrop-filter: var(--media-range-track-backdrop-filter);
        -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
        box-shadow: var(--media-range-track-box-shadow, none);
        position: absolute;
        width: 100%;
        height: 100%;
        overflow: hidden;
      }

      #progress,
      #pointer {
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #progress {
        background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
        transition: var(--media-range-track-transition);
      }

      #pointer {
        background: var(--media-range-track-pointer-background);
        border-right: var(--media-range-track-pointer-border-right);
        transition: visibility .25s, opacity .25s;
        visibility: hidden;
        opacity: 0;
      }

      @media (hover: hover) {
        :host(:hover) #pointer {
          transition: visibility .5s, opacity .5s;
          visibility: visible;
          opacity: 1;
        }
      }

      #thumb,
      ::slotted([slot=thumb]) {
        width: var(--media-range-thumb-width, 10px);
        height: var(--media-range-thumb-height, 10px);
        transition: var(--media-range-thumb-transition);
        transform: var(--media-range-thumb-transform, none);
        opacity: var(--media-range-thumb-opacity, 1);
        translate: -50%;
        position: absolute;
        left: 0;
        cursor: var(--media-cursor, pointer);
      }

      #thumb {
        border-radius: var(--media-range-thumb-border-radius, 10px);
        background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
        box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
        border: var(--media-range-thumb-border, none);
      }

      :host([disabled]) #thumb {
        background-color: #777;
      }

      .segments #appearance {
        height: var(--media-range-segment-hover-height, 7px);
      }

      #track {
        clip-path: url(#segments-clipping);
      }

      #segments {
        --segments-gap: var(--media-range-segments-gap, 2px);
        position: absolute;
        width: 100%;
        height: 100%;
      }

      #segments-clipping {
        transform: translateX(calc(var(--segments-gap) / 2));
      }

      #segments-clipping:empty {
        display: none;
      }

      #segments-clipping rect {
        height: var(--media-range-track-height, 4px);
        y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
        transition: var(--media-range-segment-transition, transform .1s ease-in-out);
        transform: var(--media-range-segment-transform, scaleY(1));
        transform-origin: center;
      }
    </style>
    <div id="leftgap"></div>
    <div id="container">
      <div id="startpoint"></div>
      <div id="endpoint"></div>
      <div id="appearance">
        <div id="track" part="track">
          <div id="pointer"></div>
          <div id="progress" part="progress"></div>
        </div>
        <slot name="thumb">
          <div id="thumb" part="thumb"></div>
        </slot>
        <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
      </div>
      <input id="range" type="range" min="0" max="1" step="any" value="0">
    </div>
    <div id="rightgap"></div>
  `}class Hc extends D.HTMLElement{constructor(){if(super(),ci(this,Ix),ci(this,zp),ci(this,Qp),ci(this,G0),ci(this,zb),ci(this,Qb),ci(this,Xb),ci(this,Zb),ci(this,Ir,void 0),ci(this,py,void 0),ci(this,Gp,void 0),ci(this,Wp,void 0),ci(this,nr,{}),ci(this,K0,[]),ci(this,jp,()=>{if(this.range.matches(":focus-visible")){const{style:e}=ei(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),ci(this,Yp,()=>{const{style:e}=ei(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),ci(this,qp,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes),i=this.constructor.getTemplateHTML(e);this.shadowRoot.setHTMLUnsafe?this.shadowRoot.setHTMLUnsafe(i):this.shadowRoot.innerHTML=i}this.container=this.shadowRoot.querySelector("#container"),ia(this,Gp,this.shadowRoot.querySelector("#startpoint")),ia(this,Wp,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Ne.MEDIA_CONTROLLER]}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Ne.MEDIA_CONTROLLER?(i&&((s=(r=yt(this,Ir))==null?void 0:r.unassociateElement)==null||s.call(r,this),ia(this,Ir,null)),n&&this.isConnected&&(ia(this,Ir,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=yt(this,Ir))==null?void 0:o.associateElement)==null||l.call(o,this))):(e==="disabled"||e==="aria-disabled"&&i!==n)&&(n==null?(this.range.removeAttribute(e),tr(this,zp,Yb).call(this)):(this.range.setAttribute(e,n),tr(this,Qp,qb).call(this)))}connectedCallback(){var e,i,n;const{style:r}=ei(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),yt(this,nr).pointer=ei(this.shadowRoot,"#pointer"),yt(this,nr).progress=ei(this.shadowRoot,"#progress"),yt(this,nr).thumb=ei(this.shadowRoot,'#thumb, ::slotted([slot="thumb"])'),yt(this,nr).activeSegment=ei(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const s=this.getAttribute(Ne.MEDIA_CONTROLLER);s&&(ia(this,Ir,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(i=yt(this,Ir))==null?void 0:i.associateElement)==null||n.call(i,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",yt(this,jp)),this.shadowRoot.addEventListener("focusout",yt(this,Yp)),tr(this,zp,Yb).call(this),Lc(this.container,yt(this,qp))}disconnectedCallback(){var e,i;tr(this,Qp,qb).call(this),(i=(e=yt(this,Ir))==null?void 0:e.unassociateElement)==null||i.call(e,this),ia(this,Ir,null),this.shadowRoot.removeEventListener("focusin",yt(this,jp)),this.shadowRoot.removeEventListener("focusout",yt(this,Yp)),Rc(this.container,yt(this,qp))}updatePointerBar(e){var i;(i=yt(this,nr).pointer)==null||i.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,i;const n=this.range.valueAsNumber*100;(e=yt(this,nr).progress)==null||e.style.setProperty("width",`${n}%`),(i=yt(this,nr).thumb)==null||i.style.setProperty("left",`${n}%`)}updateSegments(e){const i=this.shadowRoot.querySelector("#segments-clipping");if(i.textContent="",this.container.classList.toggle("segments",!!(e!=null&&e.length)),!(e!=null&&e.length))return;const n=[...new Set([+this.range.min,...e.flatMap(s=>[s.start,s.end]),+this.range.max])];ia(this,K0,[...n]);const r=n.pop();for(const[s,a]of n.entries()){const[o,l]=[s===0,s===n.length-1],u=o?"calc(var(--segments-gap) / -1)":`${a*100}%`,d=`calc(${((l?r:n[s+1])-a)*100}%${o||l?"":" - var(--segments-gap)"})`,h=Yt.createElementNS("http://www.w3.org/2000/svg","rect"),f=fx(this.shadowRoot,`#segments-clipping rect:nth-child(${s+1})`);f.style.setProperty("x",u),f.style.setProperty("width",d),i.append(h)}}getPointerRatio(e){return Wie(e.clientX,e.clientY,yt(this,Gp).getBoundingClientRect(),yt(this,Wp).getBoundingClientRect())}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":tr(this,Zb,Q4).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":tr(this,zb,Y4).call(this,e);break;case"pointerdown":tr(this,G0,Lx).call(this,e);break;case"pointerup":tr(this,Qb,q4).call(this);break;case"pointerleave":tr(this,Xb,z4).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Ir=new WeakMap;py=new WeakMap;Gp=new WeakMap;Wp=new WeakMap;nr=new WeakMap;K0=new WeakMap;jp=new WeakMap;Yp=new WeakMap;qp=new WeakMap;Ix=new WeakSet;j4=function(t){const e=yt(this,nr).activeSegment;if(!e)return;const i=this.getPointerRatio(t),r=`#segments-clipping rect:nth-child(${yt(this,K0).findIndex((s,a,o)=>{const l=o[a+1];return l!=null&&i>=s&&i<=l})+1})`;(e.selectorText!=r||!e.style.transform)&&(e.selectorText=r,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};zp=new WeakSet;Yb=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};Qp=new WeakSet;qb=function(){var t,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(t=D.window)==null||t.removeEventListener("pointerup",this),(e=D.window)==null||e.removeEventListener("pointermove",this)};G0=new WeakSet;Lx=function(t){var e;ia(this,py,t.composedPath().includes(this.range)),(e=D.window)==null||e.addEventListener("pointerup",this)};zb=new WeakSet;Y4=function(t){var e;t.pointerType!=="mouse"&&tr(this,G0,Lx).call(this,t),this.addEventListener("pointerleave",this),(e=D.window)==null||e.addEventListener("pointermove",this)};Qb=new WeakSet;q4=function(){var t;(t=D.window)==null||t.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};Xb=new WeakSet;z4=function(){var t,e;this.removeEventListener("pointerleave",this),(t=D.window)==null||t.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=yt(this,nr).activeSegment)==null||e.style.removeProperty("transform")};Zb=new WeakSet;Q4=function(t){t.pointerType==="pen"&&t.buttons===0||(this.toggleAttribute("dragging",t.buttons===1||t.pointerType!=="mouse"),this.updatePointerBar(t),tr(this,Ix,j4).call(this,t),this.dragging&&(t.pointerType!=="mouse"||!yt(this,py))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(t),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0}))))};Hc.shadowRootOptions={mode:"open"};Hc.getTemplateHTML=Zne;D.customElements.get("media-chrome-range")||D.customElements.define("media-chrome-range",Hc);var X4=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},$m=(t,e,i)=>(X4(t,e,"read from private field"),i?i.call(t):e.get(t)),Jne=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Fm=(t,e,i,n)=>(X4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Lr;function ere(t){return`
    <style>
      :host {
        
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --media-loading-indicator-icon-height: 44px;
      }

      ::slotted(media-time-range),
      ::slotted(media-volume-range) {
        min-height: 100%;
      }

      ::slotted(media-time-range),
      ::slotted(media-clip-selector) {
        flex-grow: 1;
      }

      ::slotted([role="menu"]) {
        position: absolute;
      }
    </style>

    <slot></slot>
  `}class Rx extends D.HTMLElement{constructor(){if(super(),Jne(this,Lr,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ne.MEDIA_CONTROLLER]}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Ne.MEDIA_CONTROLLER&&(i&&((s=(r=$m(this,Lr))==null?void 0:r.unassociateElement)==null||s.call(r,this),Fm(this,Lr,null)),n&&this.isConnected&&(Fm(this,Lr,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=$m(this,Lr))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,i,n;const r=this.getAttribute(Ne.MEDIA_CONTROLLER);r&&(Fm(this,Lr,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(n=(i=$m(this,Lr))==null?void 0:i.associateElement)==null||n.call(i,this))}disconnectedCallback(){var e,i;(i=(e=$m(this,Lr))==null?void 0:e.unassociateElement)==null||i.call(e,this),Fm(this,Lr,null)}}Lr=new WeakMap;Rx.shadowRootOptions={mode:"open"};Rx.getTemplateHTML=ere;D.customElements.get("media-control-bar")||D.customElements.define("media-control-bar",Rx);var Z4=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Um=(t,e,i)=>(Z4(t,e,"read from private field"),i?i.call(t):e.get(t)),tre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Bm=(t,e,i,n)=>(Z4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Rr;function ire(t,e={}){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
        padding: var(--media-control-padding, 10px);
        display: inline-flex;
        justify-content: center;
        align-items: center;
        vertical-align: middle;
        box-sizing: border-box;
        text-align: center;
        pointer-events: auto;
      }

      
      :host(:focus-visible) {
        box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
        outline: 0;
      }

      
      :host(:where(:focus)) {
        box-shadow: none;
        outline: 0;
      }
    </style>

    ${this.getSlotTemplateHTML(t,e)}
  `}function nre(t,e){return`
    <slot></slot>
  `}class ro extends D.HTMLElement{constructor(){if(super(),tre(this,Rr,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ne.MEDIA_CONTROLLER]}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Ne.MEDIA_CONTROLLER&&(i&&((s=(r=Um(this,Rr))==null?void 0:r.unassociateElement)==null||s.call(r,this),Bm(this,Rr,null)),n&&this.isConnected&&(Bm(this,Rr,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Um(this,Rr))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,i,n;const{style:r}=ei(this.shadowRoot,":host");r.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const s=this.getAttribute(Ne.MEDIA_CONTROLLER);s&&(Bm(this,Rr,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(i=Um(this,Rr))==null?void 0:i.associateElement)==null||n.call(i,this))}disconnectedCallback(){var e,i;(i=(e=Um(this,Rr))==null?void 0:e.unassociateElement)==null||i.call(e,this),Bm(this,Rr,null)}}Rr=new WeakMap;ro.shadowRootOptions={mode:"open"};ro.getTemplateHTML=ire;ro.getSlotTemplateHTML=nre;D.customElements.get("media-text-display")||D.customElements.define("media-text-display",ro);var J4=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},BC=(t,e,i)=>(J4(t,e,"read from private field"),i?i.call(t):e.get(t)),rre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},sre=(t,e,i,n)=>(J4(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Ud;function are(t,e){return`
    <slot>${Ga(e.mediaDuration)}</slot>
  `}class eF extends ro{constructor(){var e;super(),rre(this,Ud,void 0),sre(this,Ud,this.shadowRoot.querySelector("slot")),BC(this,Ud).textContent=Ga((e=this.mediaDuration)!=null?e:0)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_DURATION]}attributeChangedCallback(e,i,n){e===k.MEDIA_DURATION&&(BC(this,Ud).textContent=Ga(+n)),super.attributeChangedCallback(e,i,n)}get mediaDuration(){return st(this,k.MEDIA_DURATION)}set mediaDuration(e){Ct(this,k.MEDIA_DURATION,e)}}Ud=new WeakMap;eF.getSlotTemplateHTML=are;D.customElements.get("media-duration-display")||D.customElements.define("media-duration-display",eF);const ore={2:se("Network Error"),3:se("Decode Error"),4:se("Source Not Supported"),5:se("Encryption Error")},lre={2:se("A network error caused the media download to fail."),3:se("A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format."),4:se("An unsupported error occurred. The server or network failed, or your browser does not support this format."),5:se("The media is encrypted and there are no keys to decrypt it.")},tF=t=>{var e,i;return t.code===1?null:{title:(e=ore[t.code])!=null?e:`Error ${t.code}`,message:(i=lre[t.code])!=null?i:t.message}};var iF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},ure=(t,e,i)=>(iF(t,e,"read from private field"),i?i.call(t):e.get(t)),cre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},dre=(t,e,i,n)=>(iF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Xp;function hre(t){return`
    <style>
      :host {
        background: rgb(20 20 30 / .8);
      }

      #content {
        display: block;
        padding: 1.2em 1.5em;
      }

      h3,
      p {
        margin-block: 0 .3em;
      }
    </style>
    <slot name="error-${t.mediaerrorcode}" id="content">
      ${nF({code:+t.mediaerrorcode,message:t.mediaerrormessage})}
    </slot>
  `}function fre(t){return t.code&&tF(t)!==null}function nF(t){var e;const{title:i,message:n}=(e=tF(t))!=null?e:{};let r="";return i&&(r+=`<slot name="error-${t.code}-title"><h3>${i}</h3></slot>`),n&&(r+=`<slot name="error-${t.code}-message"><p>${n}</p></slot>`),r}const VC=[k.MEDIA_ERROR_CODE,k.MEDIA_ERROR_MESSAGE];class gy extends Vc{constructor(){super(...arguments),cre(this,Xp,null)}static get observedAttributes(){return[...super.observedAttributes,...VC]}formatErrorMessage(e){return this.constructor.formatErrorMessage(e)}attributeChangedCallback(e,i,n){var r;if(super.attributeChangedCallback(e,i,n),!VC.includes(e))return;const s=(r=this.mediaError)!=null?r:{code:this.mediaErrorCode,message:this.mediaErrorMessage};this.open=fre(s),this.open&&(this.shadowRoot.querySelector("slot").name=`error-${this.mediaErrorCode}`,this.shadowRoot.querySelector("#content").innerHTML=this.formatErrorMessage(s))}get mediaError(){return ure(this,Xp)}set mediaError(e){dre(this,Xp,e)}get mediaErrorCode(){return st(this,"mediaerrorcode")}set mediaErrorCode(e){Ct(this,"mediaerrorcode",e)}get mediaErrorMessage(){return at(this,"mediaerrormessage")}set mediaErrorMessage(e){ot(this,"mediaerrormessage",e)}}Xp=new WeakMap;gy.getSlotTemplateHTML=hre;gy.formatErrorMessage=nF;D.customElements.get("media-error-dialog")||D.customElements.define("media-error-dialog",gy);var rF=gy,mre=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Zs=(t,e,i)=>(mre(t,e,"read from private field"),i?i.call(t):e.get(t)),HC=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Zl,Jl;function pre(t){return`
    <style>
      :host {
        position: fixed;
        top: 0;
        left: 0;
        z-index: 9999;
        background: rgb(20 20 30 / .8);
        backdrop-filter: blur(10px);
      }

      #content {
        display: block;
        width: clamp(400px, 40vw, 700px);
        max-width: 90vw;
        text-align: left;
      }

      h2 {
        margin: 0 0 1.5rem 0;
        font-size: 1.5rem;
        font-weight: 500;
        text-align: center;
      }

      .shortcuts-table {
        width: 100%;
        border-collapse: collapse;
      }

      .shortcuts-table tr {
        border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      }

      .shortcuts-table tr:last-child {
        border-bottom: none;
      }

      .shortcuts-table td {
        padding: 0.75rem 0.5rem;
      }

      .shortcuts-table td:first-child {
        text-align: right;
        padding-right: 1rem;
        width: 40%;
        min-width: 120px;
      }

      .shortcuts-table td:last-child {
        padding-left: 1rem;
      }

      .key {
        display: inline-block;
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 4px;
        padding: 0.25rem 0.5rem;
        font-family: 'Courier New', monospace;
        font-size: 0.9rem;
        font-weight: 500;
        min-width: 1.5rem;
        text-align: center;
        margin: 0 0.2rem;
      }

      .description {
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.95rem;
      }

      .key-combo {
        display: flex;
        align-items: center;
        justify-content: flex-end;
        gap: 0.3rem;
      }

      .key-separator {
        color: rgba(255, 255, 255, 0.5);
        font-size: 0.9rem;
      }
    </style>
    <slot id="content">
      ${gre()}
    </slot>
  `}function gre(){return`
    <h2>Keyboard Shortcuts</h2>
    <table class="shortcuts-table">${[{keys:["Space","k"],description:"Toggle Playback"},{keys:["m"],description:"Toggle mute"},{keys:["f"],description:"Toggle fullscreen"},{keys:["c"],description:"Toggle captions or subtitles, if available"},{keys:["p"],description:"Toggle Picture in Picture"},{keys:["","j"],description:"Seek back 10s"},{keys:["","l"],description:"Seek forward 10s"},{keys:[""],description:"Turn volume up"},{keys:[""],description:"Turn volume down"},{keys:["< (SHIFT+,)"],description:"Decrease playback rate"},{keys:["> (SHIFT+.)"],description:"Increase playback rate"}].map(({keys:i,description:n})=>`
      <tr>
        <td>
          <div class="key-combo">${i.map((s,a)=>a>0?`<span class="key-separator">or</span><span class="key">${s}</span>`:`<span class="key">${s}</span>`).join("")}</div>
        </td>
        <td class="description">${n}</td>
      </tr>
    `).join("")}</table>
  `}class sF extends Vc{constructor(){super(...arguments),HC(this,Zl,e=>{var i;if(!this.open)return;const n=(i=this.shadowRoot)==null?void 0:i.querySelector("#content");if(!n)return;const r=e.composedPath(),s=r[0]===this||r.includes(this),a=r.includes(n);s&&!a&&(this.open=!1)}),HC(this,Jl,e=>{if(!this.open)return;const i=e.shiftKey&&(e.key==="/"||e.key==="?");(e.key==="Escape"||i)&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&(this.open=!1,e.preventDefault(),e.stopPropagation())})}connectedCallback(){super.connectedCallback(),this.open&&(this.addEventListener("click",Zs(this,Zl)),document.addEventListener("keydown",Zs(this,Jl)))}disconnectedCallback(){this.removeEventListener("click",Zs(this,Zl)),document.removeEventListener("keydown",Zs(this,Jl))}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e==="open"&&(this.open?(this.addEventListener("click",Zs(this,Zl)),document.addEventListener("keydown",Zs(this,Jl))):(this.removeEventListener("click",Zs(this,Zl)),document.removeEventListener("keydown",Zs(this,Jl))))}}Zl=new WeakMap;Jl=new WeakMap;sF.getSlotTemplateHTML=pre;D.customElements.get("media-keyboard-shortcuts-dialog")||D.customElements.define("media-keyboard-shortcuts-dialog",sF);var aF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},vre=(t,e,i)=>(aF(t,e,"read from private field"),i?i.call(t):e.get(t)),yre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Ere=(t,e,i,n)=>(aF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Zp;const Tre=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,bre=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`;function Sre(t){return`
    <style>
      :host([${k.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      
      :host(:not([${k.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${k.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
      :host(:not([${k.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${Tre}</slot>
      <slot name="exit">${bre}</slot>
    </slot>
  `}function _re(){return`
    <slot name="tooltip-enter">${se("Enter fullscreen mode")}</slot>
    <slot name="tooltip-exit">${se("Exit fullscreen mode")}</slot>
  `}const KC=t=>{const e=t.mediaIsFullscreen?se("exit fullscreen mode"):se("enter fullscreen mode");t.setAttribute("aria-label",e)};class wx extends ui{constructor(){super(...arguments),yre(this,Zp,null)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_IS_FULLSCREEN,k.MEDIA_FULLSCREEN_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),KC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_IS_FULLSCREEN&&KC(this)}get mediaFullscreenUnavailable(){return at(this,k.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){ot(this,k.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return Re(this,k.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){we(this,k.MEDIA_IS_FULLSCREEN,e)}handleClick(e){Ere(this,Zp,e);const i=vre(this,Zp)instanceof PointerEvent,n=this.mediaIsFullscreen?new D.CustomEvent(ee.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0}):new D.CustomEvent(ee.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(n)}}Zp=new WeakMap;wx.getSlotTemplateHTML=Sre;wx.getTooltipContentHTML=_re;D.customElements.get("media-fullscreen-button")||D.customElements.define("media-fullscreen-button",wx);const{MEDIA_TIME_IS_LIVE:Jp,MEDIA_PAUSED:yh}=k,{MEDIA_SEEK_TO_LIVE_REQUEST:Are,MEDIA_PLAY_REQUEST:xre}=ee,kre='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>';function Ire(t){return`
    <style>
      :host { --media-tooltip-display: none; }
      
      slot[name=indicator] > *,
      :host ::slotted([slot=indicator]) {
        
        min-width: auto;
        fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
        color: var(--media-live-button-icon-color, rgb(140, 140, 140));
      }

      :host([${Jp}]:not([${yh}])) slot[name=indicator] > *,
      :host([${Jp}]:not([${yh}])) ::slotted([slot=indicator]) {
        fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
        color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
      }

      :host([${Jp}]:not([${yh}])) {
        cursor: var(--media-cursor, not-allowed);
      }

      slot[name=text]{
        text-transform: uppercase;
      }

    </style>

    <slot name="indicator">${kre}</slot>
    
    <slot name="spacer">&nbsp;</slot><slot name="text">${se("live")}</slot>
  `}const GC=t=>{var e;const i=t.mediaPaused||!t.mediaTimeIsLive,n=se(i?"seek to live":"playing live");t.setAttribute("aria-label",n);const r=(e=t.shadowRoot)==null?void 0:e.querySelector('slot[name="text"]');r&&(r.textContent=se("live")),i?t.removeAttribute("aria-disabled"):t.setAttribute("aria-disabled","true")};class oF extends ui{static get observedAttributes(){return[...super.observedAttributes,Jp,yh]}connectedCallback(){super.connectedCallback(),GC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),GC(this)}get mediaPaused(){return Re(this,k.MEDIA_PAUSED)}set mediaPaused(e){we(this,k.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return Re(this,k.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){we(this,k.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new D.CustomEvent(Are,{composed:!0,bubbles:!0})),this.hasAttribute(yh)&&this.dispatchEvent(new D.CustomEvent(xre,{composed:!0,bubbles:!0})))}}oF.getSlotTemplateHTML=Ire;D.customElements.get("media-live-button")||D.customElements.define("media-live-button",oF);var lF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},cd=(t,e,i)=>(lF(t,e,"read from private field"),i?i.call(t):e.get(t)),WC=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},dd=(t,e,i,n)=>(lF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),wr,eg;const Vm={LOADING_DELAY:"loadingdelay",NO_AUTOHIDE:"noautohide"},uF=500,Lre=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;function Rre(t){return`
    <style>
      :host {
        display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
        vertical-align: middle;
        box-sizing: border-box;
        --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${uF}ms);
      }

      #status {
        color: rgba(0,0,0,0);
        width: 0px;
        height: 0px;
      }

      :host slot[name=icon] > *,
      :host ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 0);
        transition: opacity 0.15s;
      }

      :host([${k.MEDIA_LOADING}]:not([${k.MEDIA_PAUSED}])) slot[name=icon] > *,
      :host([${k.MEDIA_LOADING}]:not([${k.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
        opacity: var(--media-loading-indicator-opacity, 1);
        transition: opacity 0.15s var(--_loading-indicator-delay);
      }

      :host #status {
        visibility: var(--media-loading-indicator-opacity, hidden);
        transition: visibility 0.15s;
      }

      :host([${k.MEDIA_LOADING}]:not([${k.MEDIA_PAUSED}])) #status {
        visibility: var(--media-loading-indicator-opacity, visible);
        transition: visibility 0.15s var(--_loading-indicator-delay);
      }

      svg, img, ::slotted(svg), ::slotted(img) {
        width: var(--media-loading-indicator-icon-width);
        height: var(--media-loading-indicator-icon-height, 100px);
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        vertical-align: middle;
      }
    </style>

    <slot name="icon">${Lre}</slot>
    <div id="status" role="status" aria-live="polite">${se("media loading")}</div>
  `}class Cx extends D.HTMLElement{constructor(){if(super(),WC(this,wr,void 0),WC(this,eg,uF),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ne.MEDIA_CONTROLLER,k.MEDIA_PAUSED,k.MEDIA_LOADING,Vm.LOADING_DELAY]}attributeChangedCallback(e,i,n){var r,s,a,o,l;e===Vm.LOADING_DELAY&&i!==n?this.loadingDelay=Number(n):e===Ne.MEDIA_CONTROLLER&&(i&&((s=(r=cd(this,wr))==null?void 0:r.unassociateElement)==null||s.call(r,this),dd(this,wr,null)),n&&this.isConnected&&(dd(this,wr,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=cd(this,wr))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,i,n;const r=this.getAttribute(Ne.MEDIA_CONTROLLER);r&&(dd(this,wr,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(n=(i=cd(this,wr))==null?void 0:i.associateElement)==null||n.call(i,this))}disconnectedCallback(){var e,i;(i=(e=cd(this,wr))==null?void 0:e.unassociateElement)==null||i.call(e,this),dd(this,wr,null)}get loadingDelay(){return cd(this,eg)}set loadingDelay(e){dd(this,eg,e);const{style:i}=ei(this.shadowRoot,":host");i.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return Re(this,k.MEDIA_PAUSED)}set mediaPaused(e){we(this,k.MEDIA_PAUSED,e)}get mediaLoading(){return Re(this,k.MEDIA_LOADING)}set mediaLoading(e){we(this,k.MEDIA_LOADING,e)}get mediaController(){return at(this,Ne.MEDIA_CONTROLLER)}set mediaController(e){ot(this,Ne.MEDIA_CONTROLLER,e)}get noAutohide(){return Re(this,Vm.NO_AUTOHIDE)}set noAutohide(e){we(this,Vm.NO_AUTOHIDE,e)}}wr=new WeakMap;eg=new WeakMap;Cx.shadowRootOptions={mode:"open"};Cx.getTemplateHTML=Rre;D.customElements.get("media-loading-indicator")||D.customElements.define("media-loading-indicator",Cx);const wre=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,jC=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,Cre=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`;function Dre(t){return`
    <style>
      :host(:not([${k.MEDIA_VOLUME_LEVEL}])) slot[name=icon] slot:not([name=high]),
      :host([${k.MEDIA_VOLUME_LEVEL}=high]) slot[name=icon] slot:not([name=high]) {
        display: none !important;
      }

      :host([${k.MEDIA_VOLUME_LEVEL}=off]) slot[name=icon] slot:not([name=off]) {
        display: none !important;
      }

      :host([${k.MEDIA_VOLUME_LEVEL}=low]) slot[name=icon] slot:not([name=low]) {
        display: none !important;
      }

      :host([${k.MEDIA_VOLUME_LEVEL}=medium]) slot[name=icon] slot:not([name=medium]) {
        display: none !important;
      }

      :host(:not([${k.MEDIA_VOLUME_LEVEL}=off])) slot[name=tooltip-unmute],
      :host([${k.MEDIA_VOLUME_LEVEL}=off]) slot[name=tooltip-mute] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="off">${wre}</slot>
      <slot name="low">${jC}</slot>
      <slot name="medium">${jC}</slot>
      <slot name="high">${Cre}</slot>
    </slot>
  `}function Pre(){return`
    <slot name="tooltip-mute">${se("Mute")}</slot>
    <slot name="tooltip-unmute">${se("Unmute")}</slot>
  `}const YC=t=>{const e=t.mediaVolumeLevel==="off",i=se(e?"unmute":"mute");t.setAttribute("aria-label",i)};class Dx extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_VOLUME_LEVEL]}connectedCallback(){super.connectedCallback(),YC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_VOLUME_LEVEL&&YC(this)}get mediaVolumeLevel(){return at(this,k.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){ot(this,k.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?ee.MEDIA_UNMUTE_REQUEST:ee.MEDIA_MUTE_REQUEST;this.dispatchEvent(new D.CustomEvent(e,{composed:!0,bubbles:!0}))}}Dx.getSlotTemplateHTML=Dre;Dx.getTooltipContentHTML=Pre;D.customElements.get("media-mute-button")||D.customElements.define("media-mute-button",Dx);const qC=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`;function Ore(t){return`
    <style>
      :host([${k.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
        display: none !important;
      }

      :host(:not([${k.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
        display: none !important;
      }

      :host([${k.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
      :host(:not([${k.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="enter">${qC}</slot>
      <slot name="exit">${qC}</slot>
    </slot>
  `}function Mre(){return`
    <slot name="tooltip-enter">${se("Enter picture in picture mode")}</slot>
    <slot name="tooltip-exit">${se("Exit picture in picture mode")}</slot>
  `}const zC=t=>{const e=t.mediaIsPip?se("exit picture in picture mode"):se("enter picture in picture mode");t.setAttribute("aria-label",e)};class Px extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_IS_PIP,k.MEDIA_PIP_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),zC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_IS_PIP&&zC(this)}get mediaPipUnavailable(){return at(this,k.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){ot(this,k.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return Re(this,k.MEDIA_IS_PIP)}set mediaIsPip(e){we(this,k.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?ee.MEDIA_EXIT_PIP_REQUEST:ee.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new D.CustomEvent(e,{composed:!0,bubbles:!0}))}}Px.getSlotTemplateHTML=Ore;Px.getTooltipContentHTML=Mre;D.customElements.get("media-pip-button")||D.customElements.define("media-pip-button",Px);var Nre=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Fl=(t,e,i)=>(Nre(t,e,"read from private field"),i?i.call(t):e.get(t)),$re=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},na;const tT={RATES:"rates"},cF=[1,1.2,1.5,1.7,2],Mu=1;function Fre(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||Mu}x</slot>
  `}function Ure(){return se("Playback rate")}class Ox extends ui{constructor(){var e;super(),$re(this,na,new gx(this,tT.RATES,{defaultValue:cF})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:Mu}x`}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PLAYBACK_RATE,tT.RATES]}attributeChangedCallback(e,i,n){if(super.attributeChangedCallback(e,i,n),e===tT.RATES&&(Fl(this,na).value=n),e===k.MEDIA_PLAYBACK_RATE){const r=n?+n:Number.NaN,s=Number.isNaN(r)?Mu:r;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",se("Playback rate {playbackRate}",{playbackRate:s}))}}get rates(){return Fl(this,na)}set rates(e){e?Array.isArray(e)?Fl(this,na).value=e.join(" "):typeof e=="string"&&(Fl(this,na).value=e):Fl(this,na).value=""}get mediaPlaybackRate(){return st(this,k.MEDIA_PLAYBACK_RATE,Mu)}set mediaPlaybackRate(e){Ct(this,k.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,i;const n=Array.from(Fl(this,na).values(),a=>+a).sort((a,o)=>a-o),r=(i=(e=n.find(a=>a>this.mediaPlaybackRate))!=null?e:n[0])!=null?i:Mu,s=new D.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:r});this.dispatchEvent(s)}}na=new WeakMap;Ox.getSlotTemplateHTML=Fre;Ox.getTooltipContentHTML=Ure;D.customElements.get("media-playback-rate-button")||D.customElements.define("media-playback-rate-button",Ox);const Bre=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,Vre=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`;function Hre(t){return`
    <style>
      :host([${k.MEDIA_PAUSED}]) slot[name=pause],
      :host(:not([${k.MEDIA_PAUSED}])) slot[name=play] {
        display: none !important;
      }

      :host([${k.MEDIA_PAUSED}]) slot[name=tooltip-pause],
      :host(:not([${k.MEDIA_PAUSED}])) slot[name=tooltip-play] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="play">${Bre}</slot>
      <slot name="pause">${Vre}</slot>
    </slot>
  `}function Kre(){return`
    <slot name="tooltip-play">${se("Play")}</slot>
    <slot name="tooltip-pause">${se("Pause")}</slot>
  `}const QC=t=>{const e=t.mediaPaused?se("play"):se("pause");t.setAttribute("aria-label",e)};class Mx extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PAUSED,k.MEDIA_ENDED]}connectedCallback(){super.connectedCallback(),QC(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),(e===k.MEDIA_PAUSED||e===k.MEDIA_LANG)&&QC(this)}get mediaPaused(){return Re(this,k.MEDIA_PAUSED)}set mediaPaused(e){we(this,k.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?ee.MEDIA_PLAY_REQUEST:ee.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new D.CustomEvent(e,{composed:!0,bubbles:!0}))}}Mx.getSlotTemplateHTML=Hre;Mx.getTooltipContentHTML=Kre;D.customElements.get("media-play-button")||D.customElements.define("media-play-button",Mx);const Tr={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"};function Gre(t){return`
    <style>
      :host {
        pointer-events: none;
        display: var(--media-poster-image-display, inline-block);
        box-sizing: border-box;
      }

      img {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        background-repeat: no-repeat;
        background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
        background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, center);
      }
    </style>

    <img part="poster img" aria-hidden="true" id="image"/>
  `}const Wre=t=>{t.style.removeProperty("background-image")},jre=(t,e)=>{t.style["background-image"]=`url('${e}')`};class Nx extends D.HTMLElement{static get observedAttributes(){return[Tr.PLACEHOLDER_SRC,Tr.SRC]}constructor(){if(super(),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,i,n){e===Tr.SRC&&(n==null?this.image.removeAttribute(Tr.SRC):this.image.setAttribute(Tr.SRC,n)),e===Tr.PLACEHOLDER_SRC&&(n==null?Wre(this.image):jre(this.image,n))}get placeholderSrc(){return at(this,Tr.PLACEHOLDER_SRC)}set placeholderSrc(e){ot(this,Tr.SRC,e)}get src(){return at(this,Tr.SRC)}set src(e){ot(this,Tr.SRC,e)}}Nx.shadowRootOptions={mode:"open"};Nx.getTemplateHTML=Gre;D.customElements.get("media-poster-image")||D.customElements.define("media-poster-image",Nx);var dF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Yre=(t,e,i)=>(dF(t,e,"read from private field"),i?i.call(t):e.get(t)),qre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},zre=(t,e,i,n)=>(dF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),tg;class Qre extends ro{constructor(){super(),qre(this,tg,void 0),zre(this,tg,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PREVIEW_CHAPTER,k.MEDIA_LANG]}attributeChangedCallback(e,i,n){if(super.attributeChangedCallback(e,i,n),(e===k.MEDIA_PREVIEW_CHAPTER||e===k.MEDIA_LANG)&&n!==i&&n!=null)if(Yre(this,tg).textContent=n,n!==""){const r=se("chapter: {chapterName}",{chapterName:n});this.setAttribute("aria-valuetext",r)}else this.removeAttribute("aria-valuetext")}get mediaPreviewChapter(){return at(this,k.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){ot(this,k.MEDIA_PREVIEW_CHAPTER,e)}}tg=new WeakMap;D.customElements.get("media-preview-chapter-display")||D.customElements.define("media-preview-chapter-display",Qre);var hF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Hm=(t,e,i)=>(hF(t,e,"read from private field"),i?i.call(t):e.get(t)),Xre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Km=(t,e,i,n)=>(hF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Cr;function Zre(t){return`
    <style>
      :host {
        box-sizing: border-box;
        display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
        overflow: hidden;
      }

      img {
        display: none;
        position: relative;
      }
    </style>
    <img crossorigin loading="eager" decoding="async">
  `}class vy extends D.HTMLElement{constructor(){if(super(),Xre(this,Cr,void 0),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}}static get observedAttributes(){return[Ne.MEDIA_CONTROLLER,k.MEDIA_PREVIEW_IMAGE,k.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,i,n;const r=this.getAttribute(Ne.MEDIA_CONTROLLER);r&&(Km(this,Cr,(e=this.getRootNode())==null?void 0:e.getElementById(r)),(n=(i=Hm(this,Cr))==null?void 0:i.associateElement)==null||n.call(i,this))}disconnectedCallback(){var e,i;(i=(e=Hm(this,Cr))==null?void 0:e.unassociateElement)==null||i.call(e,this),Km(this,Cr,null)}attributeChangedCallback(e,i,n){var r,s,a,o,l;[k.MEDIA_PREVIEW_IMAGE,k.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Ne.MEDIA_CONTROLLER&&(i&&((s=(r=Hm(this,Cr))==null?void 0:r.unassociateElement)==null||s.call(r,this),Km(this,Cr,null)),n&&this.isConnected&&(Km(this,Cr,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Hm(this,Cr))==null?void 0:o.associateElement)==null||l.call(o,this)))}get mediaPreviewImage(){return at(this,k.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){ot(this,k.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(k.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(i=>+i)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(k.MEDIA_PREVIEW_COORDS);return}this.setAttribute(k.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,i=this.mediaPreviewImage;if(!(e&&i))return;const[n,r,s,a]=e,o=i.split("#")[0],l=getComputedStyle(this),{maxWidth:u,maxHeight:c,minWidth:d,minHeight:h}=l,f=Math.min(parseInt(u)/s,parseInt(c)/a),m=Math.max(parseInt(d)/s,parseInt(h)/a),p=f<1,y=p?f:m>1?m:1,{style:g}=ei(this.shadowRoot,":host"),v=ei(this.shadowRoot,"img").style,E=this.shadowRoot.querySelector("img"),T=p?"min":"max";g.setProperty(`${T}-width`,"initial","important"),g.setProperty(`${T}-height`,"initial","important"),g.width=`${s*y}px`,g.height=`${a*y}px`;const _=()=>{v.width=`${this.imgWidth*y}px`,v.height=`${this.imgHeight*y}px`,v.display="block"};E.src!==o&&(E.onload=()=>{this.imgWidth=E.naturalWidth,this.imgHeight=E.naturalHeight,_()},E.src=o,_()),_(),v.transform=`translate(-${n*y}px, -${r*y}px)`}}Cr=new WeakMap;vy.shadowRootOptions={mode:"open"};vy.getTemplateHTML=Zre;D.customElements.get("media-preview-thumbnail")||D.customElements.define("media-preview-thumbnail",vy);var XC=vy,fF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},ZC=(t,e,i)=>(fF(t,e,"read from private field"),i?i.call(t):e.get(t)),Jre=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},ese=(t,e,i,n)=>(fF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Bd;class tse extends ro{constructor(){super(),Jre(this,Bd,void 0),ese(this,Bd,this.shadowRoot.querySelector("slot")),ZC(this,Bd).textContent=Ga(0)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_PREVIEW_TIME&&n!=null&&(ZC(this,Bd).textContent=Ga(parseFloat(n)))}get mediaPreviewTime(){return st(this,k.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Ct(this,k.MEDIA_PREVIEW_TIME,e)}}Bd=new WeakMap;D.customElements.get("media-preview-time-display")||D.customElements.define("media-preview-time-display",tse);const Ul={SEEK_OFFSET:"seekoffset"},iT=30,ise=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(2.18 19.87)">${t}</text>
    <path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/>
  </svg>`;function nse(t,e){return`
    <slot name="icon">${ise(e.seekOffset)}</slot>
  `}function rse(){return se("Seek backward")}const sse=0;class $x extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_CURRENT_TIME,Ul.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=st(this,Ul.SEEK_OFFSET,iT)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===Ul.SEEK_OFFSET&&(this.seekOffset=st(this,Ul.SEEK_OFFSET,iT))}get seekOffset(){return st(this,Ul.SEEK_OFFSET,iT)}set seekOffset(e){Ct(this,Ul.SEEK_OFFSET,e),this.setAttribute("aria-label",se("seek back {seekOffset} seconds",{seekOffset:this.seekOffset})),E4(T4(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return st(this,k.MEDIA_CURRENT_TIME,sse)}set mediaCurrentTime(e){Ct(this,k.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),i=new D.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(i)}}$x.getSlotTemplateHTML=nse;$x.getTooltipContentHTML=rse;D.customElements.get("media-seek-backward-button")||D.customElements.define("media-seek-backward-button",$x);const Bl={SEEK_OFFSET:"seekoffset"},nT=30,ase=t=>`
  <svg aria-hidden="true" viewBox="0 0 20 24">
    <defs>
      <style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style>
    </defs>
    <text class="text value" transform="translate(8.9 19.87)">${t}</text>
    <path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/>
  </svg>`;function ose(t,e){return`
    <slot name="icon">${ase(e.seekOffset)}</slot>
  `}function lse(){return se("Seek forward")}const use=0;class Fx extends ui{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_CURRENT_TIME,Bl.SEEK_OFFSET]}connectedCallback(){super.connectedCallback(),this.seekOffset=st(this,Bl.SEEK_OFFSET,nT)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===Bl.SEEK_OFFSET&&(this.seekOffset=st(this,Bl.SEEK_OFFSET,nT))}get seekOffset(){return st(this,Bl.SEEK_OFFSET,nT)}set seekOffset(e){Ct(this,Bl.SEEK_OFFSET,e),this.setAttribute("aria-label",se("seek forward {seekOffset} seconds",{seekOffset:this.seekOffset})),E4(T4(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return st(this,k.MEDIA_CURRENT_TIME,use)}set mediaCurrentTime(e){Ct(this,k.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,i=new D.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(i)}}Fx.getSlotTemplateHTML=ose;Fx.getTooltipContentHTML=lse;D.customElements.get("media-seek-forward-button")||D.customElements.define("media-seek-forward-button",Fx);var mF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},rT=(t,e,i)=>(mF(t,e,"read from private field"),i?i.call(t):e.get(t)),cse=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},dse=(t,e,i,n)=>(mF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),eu;const Ao={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},JC=[...Object.values(Ao),k.MEDIA_CURRENT_TIME,k.MEDIA_DURATION,k.MEDIA_SEEKABLE],eD=["Enter"," "],hse="&nbsp;/&nbsp;",Jb=(t,{timesSep:e=hse}={})=>{var i,n;const r=(i=t.mediaCurrentTime)!=null?i:0,[,s]=(n=t.mediaSeekable)!=null?n:[];let a=0;Number.isFinite(t.mediaDuration)?a=t.mediaDuration:Number.isFinite(s)&&(a=s);const o=t.remaining?Ga(0-(a-r)):Ga(r);return t.showDuration?`${o}${e}${Ga(a)}`:o},fse="video not loaded, unknown time.",mse=t=>{var e;const i=t.mediaCurrentTime,[,n]=(e=t.mediaSeekable)!=null?e:[];let r=null;if(Number.isFinite(t.mediaDuration)?r=t.mediaDuration:Number.isFinite(n)&&(r=n),i==null||r===null){t.setAttribute("aria-valuetext",fse);return}const s=t.remaining?gh(0-(r-i)):gh(i);if(!t.showDuration){t.setAttribute("aria-valuetext",s);return}const a=gh(r),o=`${s} of ${a}`;t.setAttribute("aria-valuetext",o)};function pse(t,e){return`
    <slot>${Jb(e)}</slot>
  `}class pF extends ro{constructor(){super(),cse(this,eu,void 0),dse(this,eu,this.shadowRoot.querySelector("slot")),rT(this,eu).innerHTML=`${Jb(this)}`}static get observedAttributes(){return[...super.observedAttributes,...JC,"disabled"]}connectedCallback(){const{style:e}=ei(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","var(--media-cursor, pointer)"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",se("playback time"));const i=n=>{const{key:r}=n;if(!eD.includes(r)){this.removeEventListener("keyup",i);return}this.toggleTimeDisplay()};this.addEventListener("keydown",n=>{const{metaKey:r,altKey:s,key:a}=n;if(r||s||!eD.includes(a)){this.removeEventListener("keyup",i);return}this.addEventListener("keyup",i)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,i,n){JC.includes(e)?this.update():e==="disabled"&&n!==i&&(n==null?this.enable():this.disable()),super.attributeChangedCallback(e,i,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return Re(this,Ao.REMAINING)}set remaining(e){we(this,Ao.REMAINING,e)}get showDuration(){return Re(this,Ao.SHOW_DURATION)}set showDuration(e){we(this,Ao.SHOW_DURATION,e)}get noToggle(){return Re(this,Ao.NO_TOGGLE)}set noToggle(e){we(this,Ao.NO_TOGGLE,e)}get mediaDuration(){return st(this,k.MEDIA_DURATION)}set mediaDuration(e){Ct(this,k.MEDIA_DURATION,e)}get mediaCurrentTime(){return st(this,k.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Ct(this,k.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(k.MEDIA_SEEKABLE);if(e)return e.split(":").map(i=>+i)}set mediaSeekable(e){if(e==null){this.removeAttribute(k.MEDIA_SEEKABLE);return}this.setAttribute(k.MEDIA_SEEKABLE,e.join(":"))}update(){const e=Jb(this);mse(this),e!==rT(this,eu).innerHTML&&(rT(this,eu).innerHTML=e)}}eu=new WeakMap;pF.getSlotTemplateHTML=pse;D.customElements.get("media-time-display")||D.customElements.define("media-time-display",pF);var gF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},ni=(t,e,i)=>(gF(t,e,"read from private field"),i?i.call(t):e.get(t)),br=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},rn=(t,e,i,n)=>(gF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),gse=(t,e,i,n)=>({set _(r){rn(t,e,r,i)},get _(){return ni(t,e,n)}}),tu,ig,iu,Vd,ng,rg,sg,nu,xo,ag;class vse{constructor(e,i,n){br(this,tu,void 0),br(this,ig,void 0),br(this,iu,void 0),br(this,Vd,void 0),br(this,ng,void 0),br(this,rg,void 0),br(this,sg,void 0),br(this,nu,void 0),br(this,xo,0),br(this,ag,(r=performance.now())=>{rn(this,xo,requestAnimationFrame(ni(this,ag))),rn(this,Vd,performance.now()-ni(this,iu));const s=1e3/this.fps;if(ni(this,Vd)>s){rn(this,iu,r-ni(this,Vd)%s);const a=1e3/((r-ni(this,ig))/++gse(this,ng)._),o=(r-ni(this,rg))/1e3/this.duration;let l=ni(this,sg)+o*this.playbackRate;l-ni(this,tu).valueAsNumber>0?rn(this,nu,this.playbackRate/this.duration/a):(rn(this,nu,.995*ni(this,nu)),l=ni(this,tu).valueAsNumber+ni(this,nu)),this.callback(l)}}),rn(this,tu,e),this.callback=i,this.fps=n}start(){ni(this,xo)===0&&(rn(this,iu,performance.now()),rn(this,ig,ni(this,iu)),rn(this,ng,0),ni(this,ag).call(this))}stop(){ni(this,xo)!==0&&(cancelAnimationFrame(ni(this,xo)),rn(this,xo,0))}update({start:e,duration:i,playbackRate:n}){const r=e-ni(this,tu).valueAsNumber,s=Math.abs(i-this.duration);(r>0||r<-.03||s>=.5)&&this.callback(e),rn(this,sg,e),rn(this,rg,performance.now()),this.duration=i,this.playbackRate=n}}tu=new WeakMap;ig=new WeakMap;iu=new WeakMap;Vd=new WeakMap;ng=new WeakMap;rg=new WeakMap;sg=new WeakMap;nu=new WeakMap;xo=new WeakMap;ag=new WeakMap;var Ux=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Pt=(t,e,i)=>(Ux(t,e,"read from private field"),i?i.call(t):e.get(t)),zt=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},In=(t,e,i,n)=>(Ux(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),ki=(t,e,i)=>(Ux(t,e,"access private method"),i),ru,tl,W0,Eh,j0,og,ff,mf,su,au,ou,Hd,Bx,vF,eS,Y0,Vx,q0,Hx,z0,Kx,tS,yF,pf,Q0,iS,EF;const yse="video not loaded, unknown time.",Ese=t=>{const e=t.range,i=gh(+TF(t)),n=gh(+t.mediaSeekableEnd),r=i&&n?`${i} of ${n}`:yse;e.setAttribute("aria-valuetext",r)};function Tse(t){return`
    ${Hc.getTemplateHTML(t)}
    <style>
      :host {
        --media-box-border-radius: 4px;
        --media-box-padding-left: 10px;
        --media-box-padding-right: 10px;
        --media-preview-border-radius: var(--media-box-border-radius);
        --media-box-arrow-offset: var(--media-box-border-radius);
        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
        --_preview-background: var(--media-preview-background, var(--_control-background));

        
        contain: layout;
      }

      #buffered {
        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
        position: absolute;
        height: 100%;
        will-change: width;
      }

      #preview-rail,
      #current-rail {
        width: 100%;
        position: absolute;
        left: 0;
        bottom: 100%;
        pointer-events: none;
        will-change: transform;
      }

      [part~="box"] {
        width: min-content;
        
        position: absolute;
        bottom: 100%;
        flex-direction: column;
        align-items: center;
        transform: translateX(-50%);
      }

      [part~="current-box"] {
        display: var(--media-current-box-display, var(--media-box-display, flex));
        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
        visibility: hidden;
      }

      [part~="preview-box"] {
        display: var(--media-preview-box-display, var(--media-box-display, flex));
        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
        transition-property: var(--media-preview-transition-property, visibility, opacity);
        transition-duration: var(--media-preview-transition-duration-out, .25s);
        transition-delay: var(--media-preview-transition-delay-out, 0s);
        visibility: hidden;
        opacity: 0;
      }

      :host(:is([${k.MEDIA_PREVIEW_IMAGE}], [${k.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }

      @media (hover: hover) {
        :host(:is([${k.MEDIA_PREVIEW_IMAGE}], [${k.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
          transition-duration: var(--media-preview-transition-duration-in, .5s);
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
          opacity: 1;
        }
      }

      media-preview-thumbnail,
      ::slotted(media-preview-thumbnail) {
        visibility: hidden;
        
        transition: visibility 0s .25s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-thumbnail-background, var(--_preview-background));
        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
        max-width: var(--media-preview-thumbnail-max-width, 180px);
        max-height: var(--media-preview-thumbnail-max-height, 160px);
        min-width: var(--media-preview-thumbnail-min-width, 120px);
        min-height: var(--media-preview-thumbnail-min-height, 80px);
        border: var(--media-preview-thumbnail-border);
        border-radius: var(--media-preview-thumbnail-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
      }

      :host([${k.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
      :host([${k.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      @media (hover: hover) {
        :host([${k.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
        :host([${k.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
          transition-delay: var(--media-preview-transition-delay-in, .25s);
          visibility: visible;
        }

        :host([${k.MEDIA_PREVIEW_TIME}]:hover) {
          --media-time-range-hover-display: block;
        }
      }

      media-preview-chapter-display,
      ::slotted(media-preview-chapter-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        visibility: hidden;
        
        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-chapter-background, var(--_preview-background));
        border-radius: var(--media-preview-chapter-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-chapter-padding, 3.5px 9px);
        margin: var(--media-preview-chapter-margin, 0 0 5px);
        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      }

      :host([${k.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
      :host([${k.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-chapter-border-radius, 0);
        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
        margin: var(--media-preview-chapter-margin, 0);
        min-width: 100%;
      }

      media-preview-chapter-display[${k.MEDIA_PREVIEW_CHAPTER}],
      ::slotted(media-preview-chapter-display[${k.MEDIA_PREVIEW_CHAPTER}]) {
        visibility: visible;
      }

      media-preview-chapter-display:not([aria-valuetext]),
      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
        display: none;
      }

      media-preview-time-display,
      ::slotted(media-preview-time-display),
      media-time-display,
      ::slotted(media-time-display) {
        font-size: var(--media-font-size, 13px);
        line-height: 17px;
        min-width: 0;
        
        transition: min-width 0s, border-radius 0s;
        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
        background: var(--media-preview-time-background, var(--_preview-background));
        border-radius: var(--media-preview-time-border-radius,
          var(--media-preview-border-radius) var(--media-preview-border-radius)
          var(--media-preview-border-radius) var(--media-preview-border-radius));
        padding: var(--media-preview-time-padding, 3.5px 9px);
        margin: var(--media-preview-time-margin, 0);
        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50%)
        ));
      }

      :host([${k.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
      :host([${k.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        border-radius: var(--media-preview-time-border-radius,
          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
        min-width: 100%;
      }

      :host([${k.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }

      [part~="arrow"],
      ::slotted([part~="arrow"]) {
        display: var(--media-box-arrow-display, inline-block);
        transform: translateX(min(
          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
          calc(var(--_box-shift, 0))),
          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
        ));
        
        border-color: transparent;
        border-top-color: var(--media-box-arrow-background, var(--_control-background));
        border-width: var(--media-box-arrow-border-width,
          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
        border-style: solid;
        justify-content: center;
        height: 0;
      }
    </style>
    <div id="preview-rail">
      <slot name="preview" part="box preview-box">
        <media-preview-thumbnail>
          <template shadowrootmode="${XC.shadowRootOptions.mode}">
            ${XC.getTemplateHTML({})}
          </template>
        </media-preview-thumbnail>
        <media-preview-chapter-display></media-preview-chapter-display>
        <media-preview-time-display></media-preview-time-display>
        <slot name="preview-arrow"><div part="arrow"></div></slot>
      </slot>
    </div>
    <div id="current-rail">
      <slot name="current" part="box current-box">
        
      </slot>
    </div>
  `}const Gm=(t,e=t.mediaCurrentTime)=>{const i=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;if(Number.isNaN(n))return 0;const r=(e-i)/(n-i);return Math.max(0,Math.min(r,1))},TF=(t,e=t.range.valueAsNumber)=>{const i=Number.isFinite(t.mediaSeekableStart)?t.mediaSeekableStart:0,n=Number.isFinite(t.mediaDuration)?t.mediaDuration:t.mediaSeekableEnd;return Number.isNaN(n)?0:e*(n-i)+i};class Gx extends Hc{constructor(){super(),zt(this,ou),zt(this,Bx),zt(this,Y0),zt(this,q0),zt(this,z0),zt(this,tS),zt(this,pf),zt(this,iS),zt(this,ru,void 0),zt(this,tl,void 0),zt(this,W0,void 0),zt(this,Eh,void 0),zt(this,j0,void 0),zt(this,og,void 0),zt(this,ff,void 0),zt(this,mf,void 0),zt(this,su,void 0),zt(this,au,void 0),zt(this,eS,n=>{this.dragging||(cx(n)&&(this.range.valueAsNumber=n),Pt(this,au)||this.updateBar())}),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),In(this,W0,this.shadowRoot.querySelectorAll('[part~="box"]')),In(this,j0,this.shadowRoot.querySelector('[part~="preview-box"]')),In(this,og,this.shadowRoot.querySelector('[part~="current-box"]'));const i=getComputedStyle(this);In(this,ff,parseInt(i.getPropertyValue("--media-box-padding-left"))),In(this,mf,parseInt(i.getPropertyValue("--media-box-padding-right"))),In(this,tl,new vse(this.range,Pt(this,eS),60))}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PAUSED,k.MEDIA_DURATION,k.MEDIA_SEEKABLE,k.MEDIA_CURRENT_TIME,k.MEDIA_PREVIEW_IMAGE,k.MEDIA_PREVIEW_TIME,k.MEDIA_PREVIEW_CHAPTER,k.MEDIA_BUFFERED,k.MEDIA_PLAYBACK_RATE,k.MEDIA_LOADING,k.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",se("seek")),ki(this,ou,Hd).call(this),In(this,ru,this.getRootNode()),(e=Pt(this,ru))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),ki(this,ou,Hd).call(this),(e=Pt(this,ru))==null||e.removeEventListener("transitionstart",this),In(this,ru,null)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),i!=n&&(e===k.MEDIA_CURRENT_TIME||e===k.MEDIA_PAUSED||e===k.MEDIA_ENDED||e===k.MEDIA_LOADING||e===k.MEDIA_DURATION||e===k.MEDIA_SEEKABLE?(Pt(this,tl).update({start:Gm(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),ki(this,ou,Hd).call(this),Ese(this)):e===k.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===k.MEDIA_DURATION||e===k.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=Pt(this,su),this.updateBar()))}get mediaChaptersCues(){return Pt(this,su)}set mediaChaptersCues(e){var i;In(this,su,e),this.updateSegments((i=Pt(this,su))==null?void 0:i.map(n=>({start:Gm(this,n.startTime),end:Gm(this,n.endTime)})))}get mediaPaused(){return Re(this,k.MEDIA_PAUSED)}set mediaPaused(e){we(this,k.MEDIA_PAUSED,e)}get mediaLoading(){return Re(this,k.MEDIA_LOADING)}set mediaLoading(e){we(this,k.MEDIA_LOADING,e)}get mediaDuration(){return st(this,k.MEDIA_DURATION)}set mediaDuration(e){Ct(this,k.MEDIA_DURATION,e)}get mediaCurrentTime(){return st(this,k.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){Ct(this,k.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return st(this,k.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){Ct(this,k.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(k.MEDIA_BUFFERED);return e?e.split(" ").map(i=>i.split(":").map(n=>+n)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(k.MEDIA_BUFFERED);return}const i=e.map(n=>n.join(":")).join(" ");this.setAttribute(k.MEDIA_BUFFERED,i)}get mediaSeekable(){const e=this.getAttribute(k.MEDIA_SEEKABLE);if(e)return e.split(":").map(i=>+i)}set mediaSeekable(e){if(e==null){this.removeAttribute(k.MEDIA_SEEKABLE);return}this.setAttribute(k.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,i=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return i}get mediaSeekableStart(){var e;const[i=0]=(e=this.mediaSeekable)!=null?e:[];return i}get mediaPreviewImage(){return at(this,k.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){ot(this,k.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return st(this,k.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){Ct(this,k.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return Re(this,k.MEDIA_ENDED)}set mediaEnded(e){we(this,k.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const i=this.mediaBuffered;if(!i.length)return;let n;if(this.mediaEnded)n=1;else{const s=this.mediaCurrentTime,[,a=this.mediaSeekableStart]=(e=i.find(([o,l])=>o<=s&&s<=l))!=null?e:[];n=Gm(this,a)}const{style:r}=ei(this.shadowRoot,"#buffered");r.setProperty("width",`${n*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const i=ei(this.shadowRoot,"#current-rail"),n=ei(this.shadowRoot,'[part~="current-box"]'),r=ki(this,Y0,Vx).call(this,Pt(this,og)),s=ki(this,q0,Hx).call(this,r,this.range.valueAsNumber),a=ki(this,z0,Kx).call(this,r,this.range.valueAsNumber);i.style.transform=`translateX(${s})`,i.style.setProperty("--_range-width",`${r.range.width}`),n.style.setProperty("--_box-shift",`${a}`),n.style.setProperty("--_box-width",`${r.box.width}px`),n.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":ki(this,iS,EF).call(this);break;case"pointermove":ki(this,tS,yF).call(this,e);break;case"pointerup":Pt(this,au)&&In(this,au,!1);break;case"pointerdown":In(this,au,!0);break;case"pointerleave":ki(this,pf,Q0).call(this,null);break;case"transitionstart":Gs(e.target,this)&&setTimeout(()=>ki(this,ou,Hd).call(this),0);break}}}ru=new WeakMap;tl=new WeakMap;W0=new WeakMap;Eh=new WeakMap;j0=new WeakMap;og=new WeakMap;ff=new WeakMap;mf=new WeakMap;su=new WeakMap;au=new WeakMap;ou=new WeakSet;Hd=function(){ki(this,Bx,vF).call(this)?Pt(this,tl).start():Pt(this,tl).stop()};Bx=new WeakSet;vF=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&b4(this)};eS=new WeakMap;Y0=new WeakSet;Vx=function(t){var e;const n=((e=this.getAttribute("bounds")?Bc(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),r=this.range.getBoundingClientRect(),s=t.offsetWidth,a=-(r.left-n.left-s/2),o=n.right-r.left-s/2;return{box:{width:s,min:a,max:o},bounds:n,range:r}};q0=new WeakSet;Hx=function(t,e){let i=`${e*100}%`;const{width:n,min:r,max:s}=t.box;if(!n)return i;if(Number.isNaN(r)||(i=`max(${`calc(1 / var(--_range-width) * 100 * ${r}% + var(--media-box-padding-left))`}, ${i})`),!Number.isNaN(s)){const o=`calc(1 / var(--_range-width) * 100 * ${s}% - var(--media-box-padding-right))`;i=`min(${i}, ${o})`}return i};z0=new WeakSet;Kx=function(t,e){const{width:i,min:n,max:r}=t.box,s=e*t.range.width;if(s<n+Pt(this,ff)){const a=t.range.left-t.bounds.left-Pt(this,ff);return`${s-i/2+a}px`}if(s>r-Pt(this,mf)){const a=t.bounds.right-t.range.right-Pt(this,mf);return`${s+i/2-a-t.range.width}px`}return 0};tS=new WeakSet;yF=function(t){const e=[...Pt(this,W0)].some(c=>t.composedPath().includes(c));if(!this.dragging&&(e||!t.composedPath().includes(this))){ki(this,pf,Q0).call(this,null);return}const i=this.mediaSeekableEnd;if(!i)return;const n=ei(this.shadowRoot,"#preview-rail"),r=ei(this.shadowRoot,'[part~="preview-box"]'),s=ki(this,Y0,Vx).call(this,Pt(this,j0));let a=(t.clientX-s.range.left)/s.range.width;a=Math.max(0,Math.min(1,a));const o=ki(this,q0,Hx).call(this,s,a),l=ki(this,z0,Kx).call(this,s,a);n.style.transform=`translateX(${o})`,n.style.setProperty("--_range-width",`${s.range.width}`),r.style.setProperty("--_box-shift",`${l}`),r.style.setProperty("--_box-width",`${s.box.width}px`);const u=Math.round(Pt(this,Eh))-Math.round(a*i);Math.abs(u)<1&&a>.01&&a<.99||(In(this,Eh,a*i),ki(this,pf,Q0).call(this,Pt(this,Eh)))};pf=new WeakSet;Q0=function(t){this.dispatchEvent(new D.CustomEvent(ee.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:t}))};iS=new WeakSet;EF=function(){Pt(this,tl).stop();const t=TF(this);this.dispatchEvent(new D.CustomEvent(ee.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:t}))};Gx.shadowRootOptions={mode:"open"};Gx.getTemplateHTML=Tse;D.customElements.get("media-time-range")||D.customElements.define("media-time-range",Gx);const bse=1,Sse=t=>t.mediaMuted?0:t.mediaVolume,_se=t=>`${Math.round(t*100)}%`;class Ase extends Hc{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_VOLUME,k.MEDIA_MUTED,k.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,i=new D.CustomEvent(ee.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(i)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",se("volume"))}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),(e===k.MEDIA_VOLUME||e===k.MEDIA_MUTED)&&(this.range.valueAsNumber=Sse(this),this.range.setAttribute("aria-valuetext",_se(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return st(this,k.MEDIA_VOLUME,bse)}set mediaVolume(e){Ct(this,k.MEDIA_VOLUME,e)}get mediaMuted(){return Re(this,k.MEDIA_MUTED)}set mediaMuted(e){we(this,k.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return at(this,k.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){ot(this,k.MEDIA_VOLUME_UNAVAILABLE,e)}}D.customElements.get("media-volume-range")||D.customElements.define("media-volume-range",Ase);function xse(t){return`
      <style>
        :host {
          min-width: 4ch;
          padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
          width: 100%;
          display: grid;
          grid-template-columns: 1fr auto;
          gap: 1rem;
          font-weight: var(--media-button-font-weight, normal);
        }

        #checked-indicator {
          display: none;
        }

        :host([${k.MEDIA_LOOP}]) #checked-indicator {
          display: block;
        }
      </style>
      
      <span id="icon">
     </span>

      <div id="checked-indicator">
        <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
          <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
        </svg>
      </div>
    `}function kse(){return se("Loop")}class Wx extends ui{constructor(){super(...arguments),this.container=null}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_LOOP]}connectedCallback(){var e;super.connectedCallback(),this.container=((e=this.shadowRoot)==null?void 0:e.querySelector("#icon"))||null,this.container&&(this.container.textContent=se("Loop"))}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_LOOP&&this.container&&this.setAttribute("aria-checked",this.mediaLoop?"true":"false")}get mediaLoop(){return Re(this,k.MEDIA_LOOP)}set mediaLoop(e){we(this,k.MEDIA_LOOP,e)}handleClick(){const e=!this.mediaLoop,i=new D.CustomEvent(ee.MEDIA_LOOP_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(i)}}Wx.getSlotTemplateHTML=xse;Wx.getTooltipContentHTML=kse;D.customElements.get("media-loop-button")||D.customElements.define("media-loop-button",Wx);var bF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Ae=(t,e,i)=>(bF(t,e,"read from private field"),i?i.call(t):e.get(t)),Hr=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Is=(t,e,i,n)=>(bF(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),lu,lg,ko,Kd,ra,sa,aa,Io,uu,ug,Jn;const tD=1,iD=0,Ise=1,Lse={processCallback(t,e,i){if(i){for(const[n,r]of e)if(n in i){const s=i[n];typeof s=="boolean"&&r instanceof hr&&typeof r.element[r.attributeName]=="boolean"?r.booleanValue=s:typeof s=="function"&&r instanceof hr?r.element[r.attributeName]=s:r.value=s}}}};class yy extends D.DocumentFragment{constructor(e,i,n=Lse){var r;super(),Hr(this,lu,void 0),Hr(this,lg,void 0),this.append(e.content.cloneNode(!0)),Is(this,lu,SF(this)),Is(this,lg,n),(r=n.createCallback)==null||r.call(n,this,Ae(this,lu),i),n.processCallback(this,Ae(this,lu),i)}update(e){Ae(this,lg).processCallback(this,Ae(this,lu),e)}}lu=new WeakMap;lg=new WeakMap;const SF=(t,e=[])=>{let i,n;for(const r of t.attributes||[])if(r.value.includes("{{")){const s=new wse;for([i,n]of rD(r.value))if(!i)s.append(n);else{const a=new hr(t,r.name,r.namespaceURI);s.append(a),e.push([n,a])}r.value=s.toString()}for(const r of t.childNodes)if(r.nodeType===tD&&!(r instanceof HTMLTemplateElement))SF(r,e);else{const s=r.data;if(r.nodeType===tD||s.includes("{{")){const a=[];if(s)for([i,n]of rD(s))if(!i)a.push(new Text(n));else{const o=new Kc(t);a.push(o),e.push([n,o])}else if(r instanceof HTMLTemplateElement){const o=new xF(t,r);a.push(o),e.push([o.expression,o])}r.replaceWith(...a.flatMap(o=>o.replacementNodes||[o]))}}return e},nD={},rD=t=>{let e="",i=0,n=nD[t],r=0,s;if(n)return n;for(n=[];s=t[r];r++)s==="{"&&t[r+1]==="{"&&t[r-1]!=="\\"&&t[r+2]&&++i==1?(e&&n.push([iD,e]),e="",r++):s==="}"&&t[r+1]==="}"&&t[r-1]!=="\\"&&!--i?(n.push([Ise,e.trim()]),e="",r++):e+=s||"";return e&&n.push([iD,(i>0?"{{":"")+e]),nD[t]=n},Rse=11;class _F{get value(){return""}set value(e){}toString(){return this.value}}const AF=new WeakMap;class wse{constructor(){Hr(this,ko,[])}[Symbol.iterator](){return Ae(this,ko).values()}get length(){return Ae(this,ko).length}item(e){return Ae(this,ko)[e]}append(...e){for(const i of e)i instanceof hr&&AF.set(i,this),Ae(this,ko).push(i)}toString(){return Ae(this,ko).join("")}}ko=new WeakMap;class hr extends _F{constructor(e,i,n){super(),Hr(this,Io),Hr(this,Kd,""),Hr(this,ra,void 0),Hr(this,sa,void 0),Hr(this,aa,void 0),Is(this,ra,e),Is(this,sa,i),Is(this,aa,n)}get attributeName(){return Ae(this,sa)}get attributeNamespace(){return Ae(this,aa)}get element(){return Ae(this,ra)}get value(){return Ae(this,Kd)}set value(e){Ae(this,Kd)!==e&&(Is(this,Kd,e),!Ae(this,Io,uu)||Ae(this,Io,uu).length===1?e==null?Ae(this,ra).removeAttributeNS(Ae(this,aa),Ae(this,sa)):Ae(this,ra).setAttributeNS(Ae(this,aa),Ae(this,sa),e):Ae(this,ra).setAttributeNS(Ae(this,aa),Ae(this,sa),Ae(this,Io,uu).toString()))}get booleanValue(){return Ae(this,ra).hasAttributeNS(Ae(this,aa),Ae(this,sa))}set booleanValue(e){if(!Ae(this,Io,uu)||Ae(this,Io,uu).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}Kd=new WeakMap;ra=new WeakMap;sa=new WeakMap;aa=new WeakMap;Io=new WeakSet;uu=function(){return AF.get(this)};class Kc extends _F{constructor(e,i){super(),Hr(this,ug,void 0),Hr(this,Jn,void 0),Is(this,ug,e),Is(this,Jn,i?[...i]:[new Text])}get replacementNodes(){return Ae(this,Jn)}get parentNode(){return Ae(this,ug)}get nextSibling(){return Ae(this,Jn)[Ae(this,Jn).length-1].nextSibling}get previousSibling(){return Ae(this,Jn)[0].previousSibling}get value(){return Ae(this,Jn).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const i=e.flat().flatMap(n=>n==null?[new Text]:n.forEach?[...n]:n.nodeType===Rse?[...n.childNodes]:n.nodeType?[n]:[new Text(n)]);i.length||i.push(new Text),Is(this,Jn,Cse(Ae(this,Jn)[0].parentNode,Ae(this,Jn),i,this.nextSibling))}}ug=new WeakMap;Jn=new WeakMap;class xF extends Kc{constructor(e,i){const n=i.getAttribute("directive")||i.getAttribute("type");let r=i.getAttribute("expression")||i.getAttribute(n)||"";r.startsWith("{{")&&(r=r.trim().slice(2,-2).trim()),super(e),this.expression=r,this.template=i,this.directive=n}}function Cse(t,e,i,n=null){let r=0,s,a,o,l=i.length,u=e.length;for(;r<l&&r<u&&e[r]==i[r];)r++;for(;r<l&&r<u&&i[l-1]==e[u-1];)n=i[--u,--l];if(r==u)for(;r<l;)t.insertBefore(i[r++],n);if(r==l)for(;r<u;)t.removeChild(e[r++]);else{for(s=e[r];r<l;)o=i[r++],a=s?s.nextSibling:n,s==o?s=a:r<l&&i[r]==a?(t.replaceChild(o,s),s=a):t.insertBefore(o,s);for(;s!=n;)a=s.nextSibling,t.removeChild(s),s=a}return i}const sD={string:t=>String(t)};class kF{constructor(e){this.template=e,this.state=void 0}}const Bo=new WeakMap,Vo=new WeakMap,nS={partial:(t,e)=>{e[t.expression]=new kF(t.template)},if:(t,e)=>{var i;if(IF(t.expression,e))if(Bo.get(t)!==t.template){Bo.set(t,t.template);const n=new yy(t.template,e,jx);t.replace(n),Vo.set(t,n)}else(i=Vo.get(t))==null||i.update(e);else t.replace(""),Bo.delete(t),Vo.delete(t)}},Dse=Object.keys(nS),jx={processCallback(t,e,i){var n,r;if(i)for(const[s,a]of e){if(a instanceof xF){if(!a.directive){const l=Dse.find(u=>a.template.hasAttribute(u));l&&(a.directive=l,a.expression=a.template.getAttribute(l))}(n=nS[a.directive])==null||n.call(nS,a,i);continue}let o=IF(s,i);if(o instanceof kF){Bo.get(a)!==o.template?(Bo.set(a,o.template),o=new yy(o.template,o.state,jx),a.value=o,Vo.set(a,o)):(r=Vo.get(a))==null||r.update(o.state);continue}o?(a instanceof hr&&a.attributeName.startsWith("aria-")&&(o=String(o)),a instanceof hr?typeof o=="boolean"?a.booleanValue=o:typeof o=="function"?a.element[a.attributeName]=o:a.value=o:(a.value=o,Bo.delete(a),Vo.delete(a))):a instanceof hr?a.value=void 0:(a.value=void 0,Bo.delete(a),Vo.delete(a))}}},aD={"!":t=>!t,"!!":t=>!!t,"==":(t,e)=>t==e,"!=":(t,e)=>t!=e,">":(t,e)=>t>e,">=":(t,e)=>t>=e,"<":(t,e)=>t<e,"<=":(t,e)=>t<=e,"??":(t,e)=>t??e,"|":(t,e)=>{var i;return(i=sD[e])==null?void 0:i.call(sD,t)}};function Pse(t){return Ose(t,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function IF(t,e={}){var i,n,r,s,a,o,l;const u=Pse(t);if(u.length===0||u.some(({type:c})=>!c))return hd(t);if(((i=u[0])==null?void 0:i.token)===">"){const c=e[(n=u[1])==null?void 0:n.token];if(!c)return hd(t);const d={...e};c.state=d;const h=u.slice(2);for(let f=0;f<h.length;f+=3){const m=(r=h[f])==null?void 0:r.token,p=(s=h[f+1])==null?void 0:s.token,y=(a=h[f+2])==null?void 0:a.token;m&&p==="="&&(d[m]=fd(y,e))}return c}if(u.length===1)return Wm(u[0])?fd(u[0].token,e):hd(t);if(u.length===2){const c=(o=u[0])==null?void 0:o.token,d=aD[c];if(!d||!Wm(u[1]))return hd(t);const h=fd(u[1].token,e);return d(h)}if(u.length===3){const c=(l=u[1])==null?void 0:l.token,d=aD[c];if(!d||!Wm(u[0])||!Wm(u[2]))return hd(t);const h=fd(u[0].token,e);if(c==="|")return d(h,u[2].token);const f=fd(u[2].token,e);return d(h,f)}}function hd(t){return console.warn(`Warning: invalid expression \`${t}\``),!1}function Wm({type:t}){return["number","boolean","string","param"].includes(t)}function fd(t,e){const i=t[0],n=t.slice(-1);return t==="true"||t==="false"?t==="true":i===n&&["'",'"'].includes(i)?t.slice(1,-1):d4(t)?parseFloat(t):e[t]}function Ose(t,e){let i,n,r;const s=[];for(;t;){r=null,i=t.length;for(const a in e)n=e[a].exec(t),n&&n.index<i&&(r={token:n[0],type:a,matches:n.slice(1)},i=n.index);i&&s.push({token:t.substr(0,i),type:void 0}),r&&s.push(r),t=t.substr(i+(r?r.token.length:0))}return s}var Yx=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},rS=(t,e,i)=>(Yx(t,e,"read from private field"),i?i.call(t):e.get(t)),md=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Ho=(t,e,i,n)=>(Yx(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),sT=(t,e,i)=>(Yx(t,e,"access private method"),i),ec,cg,tc,sS,LF,dg,aS;const aT={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},RF=Yt.createElement("template");RF.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class Ey extends D.HTMLElement{constructor(){super(),md(this,sS),md(this,dg),md(this,ec,void 0),md(this,cg,void 0),md(this,tc,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(i=>{var n;this.mediaController&&!((n=this.mediaController)!=null&&n.breakpointsComputed)||i.some(r=>{const s=r.target;return s===this?!0:s.localName!=="media-controller"?!1:!!(aT[r.attributeName]||r.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(Vs.BREAKPOINTS_COMPUTED,this.render),sT(this,sS,LF).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=rS(this,ec))!=null?e:this.constructor.template}set template(e){if(e===null){this.removeAttribute("template");return}typeof e=="string"?this.setAttribute("template",e):e instanceof HTMLTemplateElement&&(Ho(this,ec,e),Ho(this,tc,null),this.createRenderer())}get props(){var e,i,n;const r=[...Array.from((i=(e=this.mediaController)==null?void 0:e.attributes)!=null?i:[]).filter(({name:a})=>aT[a]||a.startsWith("breakpoint")),...Array.from(this.attributes)],s={};for(const a of r){const o=(n=aT[a.name])!=null?n:Fie(a.name);let{value:l}=a;l!=null?(d4(l)&&(l=parseFloat(l)),s[o]=l===""?!0:l):s[o]=!1}return s}attributeChangedCallback(e,i,n){e==="template"&&i!=n&&sT(this,dg,aS).call(this)}connectedCallback(){sT(this,dg,aS).call(this)}createRenderer(){this.template instanceof HTMLTemplateElement&&this.template!==rS(this,cg)&&(Ho(this,cg,this.template),this.renderer=new yy(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(RF.content.cloneNode(!0),this.renderer))}render(){var e;(e=this.renderer)==null||e.update(this.props)}}ec=new WeakMap;cg=new WeakMap;tc=new WeakMap;sS=new WeakSet;LF=function(t){if(Object.prototype.hasOwnProperty.call(this,t)){const e=this[t];delete this[t],this[t]=e}};dg=new WeakSet;aS=function(){var t;const e=this.getAttribute("template");if(!e||e===rS(this,tc))return;const i=this.getRootNode(),n=(t=i==null?void 0:i.getElementById)==null?void 0:t.call(i,e);if(n){Ho(this,tc,e),Ho(this,ec,n),this.createRenderer();return}Mse(e)&&(Ho(this,tc,e),Nse(e).then(r=>{const s=Yt.createElement("template");s.innerHTML=r,Ho(this,ec,s),this.createRenderer()}).catch(console.error))};Ey.observedAttributes=["template"];Ey.processor=jx;function Mse(t){if(!/^(\/|\.\/|https?:\/\/)/.test(t))return!1;const e=/^https?:\/\//.test(t)?void 0:location.origin;try{new URL(t,e)}catch{return!1}return!0}async function Nse(t){const e=await fetch(t);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}D.customElements.get("media-theme")||D.customElements.define("media-theme",Ey);function $se({anchor:t,floating:e,placement:i}){const n=Fse({anchor:t,floating:e}),{x:r,y:s}=Bse(n,i);return{x:r,y:s}}function Fse({anchor:t,floating:e}){return{anchor:Use(t,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function Use(t,e){var i;const n=t.getBoundingClientRect(),r=(i=e==null?void 0:e.getBoundingClientRect())!=null?i:{x:0,y:0};return{x:n.x-r.x,y:n.y-r.y,width:n.width,height:n.height}}function Bse({anchor:t,floating:e},i){const n=Vse(i)==="x"?"y":"x",r=n==="y"?"height":"width",s=wF(i),a=t.x+t.width/2-e.width/2,o=t.y+t.height/2-e.height/2,l=t[r]/2-e[r]/2;let u;switch(s){case"top":u={x:a,y:t.y-e.height};break;case"bottom":u={x:a,y:t.y+t.height};break;case"right":u={x:t.x+t.width,y:o};break;case"left":u={x:t.x-e.width,y:o};break;default:u={x:t.x,y:t.y}}switch(i.split("-")[1]){case"start":u[n]-=l;break;case"end":u[n]+=l;break}return u}function wF(t){return t.split("-")[0]}function Vse(t){return["top","bottom"].includes(wF(t))?"y":"x"}class qx extends Event{constructor({action:e="auto",relatedTarget:i,...n}){super("invoke",n),this.action=e,this.relatedTarget=i}}class Hse extends Event{constructor({newState:e,oldState:i,...n}){super("toggle",n),this.newState=e,this.oldState=i}}var zx=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Me=(t,e,i)=>(zx(t,e,"read from private field"),i?i.call(t):e.get(t)),Ye=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Dr=(t,e,i,n)=>(zx(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),qe=(t,e,i)=>(zx(t,e,"access private method"),i),Pr,il,Ja,hg,fg,nl,gf,oS,CF,X0,Qx,Z0,mg,lS,uS,DF,cS,PF,dS,OF,ic,nc,rc,vf,J0,Xx,hS,MF,Zx,NF,fS,$F,Jx,FF,mS,UF,pS,BF,Th,ev,gS,VF,bh,tv,pg,vS;function Cc({type:t,text:e,value:i,checked:n}){const r=Yt.createElement("media-chrome-menu-item");r.type=t??"",r.part.add("menu-item"),t&&r.part.add(t),r.value=i,r.checked=n;const s=Yt.createElement("span");return s.textContent=e,r.append(s),r}function rl(t,e){let i=t.querySelector(`:scope > [slot="${e}"]`);if((i==null?void 0:i.nodeName)=="SLOT"&&(i=i.assignedElements({flatten:!0})[0]),i)return i=i.cloneNode(!0),i;const n=t.shadowRoot.querySelector(`[name="${e}"] > svg`);return n?n.cloneNode(!0):""}function Kse(t){return`
    <style>
      :host {
        font: var(--media-font,
          var(--media-font-weight, normal)
          var(--media-font-size, 14px) /
          var(--media-text-content-height, var(--media-control-height, 24px))
          var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
        color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, var(--_menu-bg))));
        border-radius: var(--media-menu-border-radius);
        border: var(--media-menu-border, none);
        display: var(--media-menu-display, inline-flex) !important;
        
        transition: var(--media-menu-transition-in,
          visibility 0s,
          opacity .2s ease-out,
          transform .15s ease-out,
          left .2s ease-in-out,
          min-width .2s ease-in-out,
          min-height .2s ease-in-out
        ) !important;
        
        visibility: var(--media-menu-visibility, visible);
        opacity: var(--media-menu-opacity, 1);
        max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
        transform: var(--media-menu-transform-in, translateY(0) scale(1));
        flex-direction: column;
        
        min-height: 0;
        position: relative;
        bottom: var(--_menu-bottom);
        box-sizing: border-box;
      } 

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([hidden]) {
        transition: var(--media-menu-transition-out,
          visibility .15s ease-in,
          opacity .15s ease-in,
          transform .15s ease-in
        ) !important;
        visibility: var(--media-menu-hidden-visibility, hidden);
        opacity: var(--media-menu-hidden-opacity, 0);
        max-height: var(--media-menu-hidden-max-height,
          var(--media-menu-max-height, var(--_menu-max-height, 300px)));
        transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
        pointer-events: none;
      }

      :host([slot="submenu"]) {
        background: none;
        width: 100%;
        min-height: 100%;
        position: absolute;
        bottom: 0;
        right: -100%;
      }

      #container {
        display: flex;
        flex-direction: column;
        min-height: 0;
        transition: transform .2s ease-out;
        transform: translate(0, 0);
      }

      #container.has-expanded {
        transition: transform .2s ease-in;
        transform: translate(-100%, 0);
      }

      button {
        background: none;
        color: inherit;
        border: none;
        padding: 0;
        font: inherit;
        outline: inherit;
        display: inline-flex;
        align-items: center;
      }

      slot[name="header"][hidden] {
        display: none;
      }

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .7em;
        border-bottom: 1px solid rgb(255 255 255 / .25);
        cursor: var(--media-cursor, default);
      }

      slot[name="header"] > button[part~="back"],
      slot[name="header"]::slotted(button[part~="back"]) {
        cursor: var(--media-cursor, pointer);
      }

      svg[part~="back"] {
        height: var(--media-menu-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
        margin-right: .5ch;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap);
        flex-direction: var(--media-menu-flex-direction, column);
        overflow: var(--media-menu-overflow, hidden auto);
        display: flex;
        min-height: 0;
      }

      :host([role="menu"]) slot:not([name]) {
        padding-block: .4em;
      }

      slot:not([name])::slotted([role="menu"]) {
        background: none;
      }

      media-chrome-menu-item > span {
        margin-right: .5ch;
        max-width: var(--media-menu-item-max-width);
        text-overflow: ellipsis;
        overflow: hidden;
      }
    </style>
    <style id="layout-row" media="width:0">

      slot[name="header"] > *,
      slot[name="header"]::slotted(*) {
        padding: .4em .5em;
      }

      slot:not([name]) {
        gap: var(--media-menu-gap, .25em);
        flex-direction: var(--media-menu-flex-direction, row);
        padding-inline: .5em;
      }

      media-chrome-menu-item {
        padding: .3em .5em;
      }

      media-chrome-menu-item[aria-checked="true"] {
        background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
      }

      
      media-chrome-menu-item::part(checked-indicator) {
        display: var(--media-menu-item-checked-indicator-display, none);
      }
    </style>
    <div id="container" part="container">
      <slot name="header" hidden>
        <button part="back button" aria-label="Back to previous menu">
          <slot name="back-icon">
            <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
              <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
            </svg>
          </slot>
          <slot name="title"></slot>
        </button>
      </slot>
      <slot></slot>
    </div>
    <slot name="checked-indicator" hidden></slot>
  `}const fo={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class Gn extends D.HTMLElement{constructor(){if(super(),Ye(this,oS),Ye(this,X0),Ye(this,mg),Ye(this,uS),Ye(this,cS),Ye(this,dS),Ye(this,rc),Ye(this,J0),Ye(this,hS),Ye(this,Zx),Ye(this,fS),Ye(this,Jx),Ye(this,mS),Ye(this,pS),Ye(this,Th),Ye(this,gS),Ye(this,bh),Ye(this,pg),Ye(this,Pr,null),Ye(this,il,null),Ye(this,Ja,null),Ye(this,hg,new Set),Ye(this,fg,void 0),Ye(this,nl,!1),Ye(this,gf,null),Ye(this,Z0,()=>{const e=Me(this,hg),i=new Set(this.items);for(const n of e)i.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of i)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));Dr(this,hg,i)}),Ye(this,ic,()=>{qe(this,rc,vf).call(this),qe(this,J0,Xx).call(this,!1)}),Ye(this,nc,()=>{qe(this,rc,vf).call(this)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Dr(this,fg,new MutationObserver(Me(this,Z0))),Me(this,fg).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[fo.DISABLED,fo.HIDDEN,fo.STYLE,fo.ANCHOR,Ne.MEDIA_CONTROLLER]}static formatMenuItemText(e,i){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":qe(this,oS,CF).call(this,e);break;case"invoke":qe(this,uS,DF).call(this,e);break;case"click":qe(this,hS,MF).call(this,e);break;case"toggle":qe(this,fS,$F).call(this,e);break;case"focusout":qe(this,mS,UF).call(this,e);break;case"keydown":qe(this,pS,BF).call(this,e);break}}connectedCallback(){var e,i;Dr(this,gf,fx(this.shadowRoot,":host")),qe(this,mg,lS).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Dr(this,Pr,Cb(this)),(i=(e=Me(this,Pr))==null?void 0:e.associateElement)==null||i.call(e,this),this.hidden||(Lc(yf(this),Me(this,ic)),Lc(this,Me(this,nc))),qe(this,X0,Qx).call(this)}disconnectedCallback(){var e,i;Rc(yf(this),Me(this,ic)),Rc(this,Me(this,nc)),this.disable(),(i=(e=Me(this,Pr))==null?void 0:e.unassociateElement)==null||i.call(e,this),Dr(this,Pr,null)}attributeChangedCallback(e,i,n){var r,s,a,o;e===fo.HIDDEN&&n!==i?(Me(this,nl)||Dr(this,nl,!0),this.hidden?qe(this,dS,OF).call(this):qe(this,cS,PF).call(this),this.dispatchEvent(new Hse({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Ne.MEDIA_CONTROLLER?(i&&((s=(r=Me(this,Pr))==null?void 0:r.unassociateElement)==null||s.call(r,this),Dr(this,Pr,null)),n&&this.isConnected&&(Dr(this,Pr,Cb(this)),(o=(a=Me(this,Pr))==null?void 0:a.associateElement)==null||o.call(a,this))):e===fo.DISABLED&&n!==i?n==null?this.enable():this.disable():e===fo.STYLE&&n!==i&&qe(this,mg,lS).call(this)}formatMenuItemText(e,i){return this.constructor.formatMenuItemText(e,i)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=oy(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Gse)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,i;return(i=(e=this.checkedItems[0])==null?void 0:e.value)!=null?i:""}set value(e){const i=this.items.find(n=>n.value===e);i&&qe(this,pg,vS).call(this,i)}focus(){if(Dr(this,il,hx()),this.items.length){qe(this,bh,tv).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e==null||e.focus()}handleSelect(e){var i;const n=qe(this,Th,ev).call(this,e);n&&(qe(this,pg,vS).call(this,n,n.type==="checkbox"),Me(this,Ja)&&!this.hidden&&((i=Me(this,il))==null||i.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var i,n;const{key:r}=e,s=this.items,a=(n=(i=qe(this,Th,ev).call(this,e))!=null?i:qe(this,gS,VF).call(this))!=null?n:s[0],o=s.indexOf(a);let l=Math.max(0,o);r==="ArrowDown"?l++:r==="ArrowUp"?l--:e.key==="Home"?l=0:e.key==="End"&&(l=s.length-1),l<0&&(l=s.length-1),l>s.length-1&&(l=0),qe(this,bh,tv).call(this,s[l]),s[l].focus()}}Pr=new WeakMap;il=new WeakMap;Ja=new WeakMap;hg=new WeakMap;fg=new WeakMap;nl=new WeakMap;gf=new WeakMap;oS=new WeakSet;CF=function(t){const e=t.target;for(const i of e.assignedNodes({flatten:!0}))i.nodeType===3&&i.textContent.trim()===""&&i.remove();["header","title"].includes(e.name)&&qe(this,X0,Qx).call(this),e.name||Me(this,Z0).call(this)};X0=new WeakSet;Qx=function(){const t=this.shadowRoot.querySelector('slot[name="header"]'),e=this.shadowRoot.querySelector('slot[name="title"]');t.hidden=e.assignedNodes().length===0&&t.assignedNodes().length===0};Z0=new WeakMap;mg=new WeakSet;lS=function(){var t;const e=this.shadowRoot.querySelector("#layout-row"),i=(t=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:t.trim();e.setAttribute("media",i==="row"?"":"width:0")};uS=new WeakSet;DF=function(t){Dr(this,Ja,t.relatedTarget),Gs(this,t.relatedTarget)||(this.hidden=!this.hidden)};cS=new WeakSet;PF=function(){var t;(t=Me(this,Ja))==null||t.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),Lc(yf(this),Me(this,ic)),Lc(this,Me(this,nc))};dS=new WeakSet;OF=function(){var t;(t=Me(this,Ja))==null||t.setAttribute("aria-expanded","false"),Rc(yf(this),Me(this,ic)),Rc(this,Me(this,nc))};ic=new WeakMap;nc=new WeakMap;rc=new WeakSet;vf=function(t){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:i}=$se({anchor:this.anchorElement,floating:this,placement:"top-start"});t??(t=this.offsetWidth);const r=yf(this).getBoundingClientRect(),s=r.width-e-t,a=r.height-i-this.offsetHeight,{style:o}=Me(this,gf);o.setProperty("position","absolute"),o.setProperty("right",`${Math.max(0,s)}px`),o.setProperty("--_menu-bottom",`${a}px`);const l=getComputedStyle(this),c=o.getPropertyValue("--_menu-bottom")===l.bottom?a:parseFloat(l.bottom),d=r.height-c-parseFloat(l.marginBottom);this.style.setProperty("--_menu-max-height",`${d}px`)};J0=new WeakSet;Xx=function(t){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),i=e==null?void 0:e.querySelector('[role="menu"]'),{style:n}=Me(this,gf);if(t||n.setProperty("--media-menu-transition-in","none"),i){const r=i.offsetHeight,s=Math.max(i.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${s}px`),this.style.setProperty("min-height",`${r}px`),qe(this,rc,vf).call(this,s)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),qe(this,rc,vf).call(this);n.removeProperty("--media-menu-transition-in")};hS=new WeakSet;MF=function(t){var e;if(t.stopPropagation(),t.composedPath().includes(Me(this,Zx,NF))){(e=Me(this,il))==null||e.focus(),this.hidden=!0;return}const i=qe(this,Th,ev).call(this,t);!i||i.hasAttribute("disabled")||(qe(this,bh,tv).call(this,i),this.handleSelect(t))};Zx=new WeakSet;NF=function(){var t;return(t=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:t.find(i=>i.matches('button[part~="back"]'))};fS=new WeakSet;$F=function(t){if(t.target===this)return;qe(this,Jx,FF).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const i of e)i.invokeTargetElement!=t.target&&t.newState=="open"&&i.getAttribute("aria-expanded")=="true"&&!i.invokeTargetElement.hidden&&i.invokeTargetElement.dispatchEvent(new qx({relatedTarget:i}));for(const i of e)i.setAttribute("aria-expanded",`${!i.submenuElement.hidden}`);qe(this,J0,Xx).call(this,!0)};Jx=new WeakSet;FF=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};mS=new WeakSet;UF=function(t){var e;Gs(this,t.relatedTarget)||(Me(this,nl)&&((e=Me(this,il))==null||e.focus()),Me(this,Ja)&&Me(this,Ja)!==t.relatedTarget&&!this.hidden&&(this.hidden=!0))};pS=new WeakSet;BF=function(t){var e,i,n,r,s;const{key:a,ctrlKey:o,altKey:l,metaKey:u}=t;if(!(o||l||u)&&this.keysUsed.includes(a))if(t.preventDefault(),t.stopPropagation(),a==="Tab"){if(Me(this,nl)){this.hidden=!0;return}t.shiftKey?(i=(e=this.previousElementSibling)==null?void 0:e.focus)==null||i.call(e):(r=(n=this.nextElementSibling)==null?void 0:n.focus)==null||r.call(n),this.blur()}else a==="Escape"?((s=Me(this,il))==null||s.focus(),Me(this,nl)&&(this.hidden=!0)):a==="Enter"||a===" "?this.handleSelect(t):this.handleMove(t)};Th=new WeakSet;ev=function(t){return t.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};gS=new WeakSet;VF=function(){return this.items.find(t=>t.tabIndex===0)};bh=new WeakSet;tv=function(t){for(const e of this.items)e.tabIndex=e===t?0:-1};pg=new WeakSet;vS=function(t,e){const i=[...this.checkedItems];t.type==="radio"&&this.radioGroupItems.forEach(n=>n.checked=!1),e?t.checked=!t.checked:t.checked=!0,this.checkedItems.some((n,r)=>n!=i[r])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};Gn.shadowRootOptions={mode:"open"};Gn.getTemplateHTML=Kse;function Gse(t){return["menuitem","menuitemradio","menuitemcheckbox"].includes(t==null?void 0:t.role)}function yf(t){var e;return(e=t.getAttribute("bounds")?Bc(t,`#${t.getAttribute("bounds")}`):Qi(t)||t.parentElement)!=null?e:t}D.customElements.get("media-chrome-menu")||D.customElements.define("media-chrome-menu",Gn);var ek=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},qr=(t,e,i)=>(ek(t,e,"read from private field"),i?i.call(t):e.get(t)),ds=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},oT=(t,e,i,n)=>(ek(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),lr=(t,e,i)=>(ek(t,e,"access private method"),i),gg,Sh,yS,HF,iv,tk,ik,KF,zr,Dc,Ef,ES,GF,vg,TS;function Wse(t){return`
    <style>
      :host {
        transition: var(--media-menu-item-transition,
          background .15s linear,
          opacity .2s ease-in-out
        );
        outline: var(--media-menu-item-outline, 0);
        outline-offset: var(--media-menu-item-outline-offset, -1px);
        cursor: var(--media-cursor, pointer);
        display: flex;
        align-items: center;
        align-self: stretch;
        justify-self: stretch;
        white-space: nowrap;
        white-space-collapse: collapse;
        text-wrap: nowrap;
        padding: .4em .8em .4em 1em;
      }

      :host(:focus-visible) {
        box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
        outline: var(--media-menu-item-hover-outline, 0);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host(:hover) {
        cursor: var(--media-cursor, pointer);
        background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
        outline: var(--media-menu-item-hover-outline);
        outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
      }

      :host([aria-checked="true"]) {
        background: var(--media-menu-item-checked-background);
      }

      :host([hidden]) {
        display: none;
      }

      :host([disabled]) {
        pointer-events: none;
        color: rgba(255, 255, 255, .3);
      }

      slot:not([name]) {
        width: 100%;
      }

      slot:not([name="submenu"]) {
        display: inline-flex;
        align-items: center;
        transition: inherit;
        opacity: var(--media-menu-item-opacity, 1);
      }

      slot[name="description"] {
        justify-content: end;
      }

      slot[name="description"] > span {
        display: inline-block;
        margin-inline: 1em .2em;
        max-width: var(--media-menu-item-description-max-width, 100px);
        text-overflow: ellipsis;
        overflow: hidden;
        font-size: .8em;
        font-weight: 400;
        text-align: right;
        position: relative;
        top: .04em;
      }

      slot[name="checked-indicator"] {
        display: none;
      }

      :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
        display: var(--media-menu-item-checked-indicator-display, inline-block);
      }

      
      svg, img, ::slotted(svg), ::slotted(img) {
        height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
        fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
        display: block;
      }

      
      [part~="indicator"],
      ::slotted([part~="indicator"]) {
        fill: var(--media-menu-item-indicator-fill,
          var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
        height: var(--media-menu-item-indicator-height, 1.25em);
        margin-right: .5ch;
      }

      [part~="checked-indicator"] {
        visibility: hidden;
      }

      :host([aria-checked="true"]) [part~="checked-indicator"] {
        visibility: visible;
      }
    </style>
    <slot name="checked-indicator">
      <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
        <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
      </svg>
    </slot>
    <slot name="prefix"></slot>
    <slot></slot>
    <slot name="description"></slot>
    <slot name="suffix">
      ${this.getSuffixSlotInnerHTML(t)}
    </slot>
    <slot name="submenu"></slot>
  `}function jse(t){return""}const kn={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class so extends D.HTMLElement{constructor(){if(super(),ds(this,yS),ds(this,iv),ds(this,ik),ds(this,Dc),ds(this,ES),ds(this,vg),ds(this,gg,!1),ds(this,Sh,void 0),ds(this,zr,()=>{var e,i;this.submenuElement.items&&this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),r=(e=this.submenuElement.checkedItems)==null?void 0:e[0],s=(i=r==null?void 0:r.dataset.description)!=null?i:r==null?void 0:r.text,a=Yt.createElement("span");a.textContent=s??"",n.replaceChildren(a)}),!this.shadowRoot){this.attachShadow(this.constructor.shadowRootOptions);const e=_n(this.attributes);this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(e)}this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[kn.TYPE,kn.DISABLED,kn.CHECKED,kn.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),pd(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":lr(this,yS,HF).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":lr(this,ES,GF).call(this,e);break;case"keyup":lr(this,Dc,Ef).call(this,e);break}}attributeChangedCallback(e,i,n){e===kn.CHECKED&&pd(this)&&!qr(this,gg)?this.setAttribute("aria-checked",n!=null?"true":"false"):e===kn.TYPE&&n!==i?this.role="menuitem"+n:e===kn.DISABLED&&n!==i&&(n==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(kn.DISABLED)||this.enable(),this.role="menuitem"+this.type,oT(this,Sh,bS(this,this.parentNode)),lr(this,vg,TS).call(this),this.submenuElement&&lr(this,iv,tk).call(this)}disconnectedCallback(){this.disable(),lr(this,vg,TS).call(this),oT(this,Sh,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=oy(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(kn.TYPE))!=null?e:""}set type(e){this.setAttribute(kn.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(kn.VALUE))!=null?e:this.text}set value(e){this.setAttribute(kn.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(pd(this))return this.getAttribute("aria-checked")==="true"}set checked(e){pd(this)&&(oT(this,gg,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){pd(this)||this.invokeTargetElement&&Gs(this,e.target)&&this.invokeTargetElement.dispatchEvent(new qx({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}gg=new WeakMap;Sh=new WeakMap;yS=new WeakSet;HF=function(t){const e=t.target;if(!(e!=null&&e.name))for(const n of e.assignedNodes({flatten:!0}))n instanceof Text&&n.textContent.trim()===""&&n.remove();e.name==="submenu"&&(this.submenuElement?lr(this,iv,tk).call(this):lr(this,ik,KF).call(this))};iv=new WeakSet;tk=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",qr(this,zr)),this.submenuElement.addEventListener("addmenuitem",qr(this,zr)),this.submenuElement.addEventListener("removemenuitem",qr(this,zr)),qr(this,zr).call(this)};ik=new WeakSet;KF=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",qr(this,zr)),this.submenuElement.removeEventListener("addmenuitem",qr(this,zr)),this.submenuElement.removeEventListener("removemenuitem",qr(this,zr)),qr(this,zr).call(this)};zr=new WeakMap;Dc=new WeakSet;Ef=function(t){const{key:e}=t;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",lr(this,Dc,Ef));return}this.handleClick(t)};ES=new WeakSet;GF=function(t){const{metaKey:e,altKey:i,key:n}=t;if(e||i||!this.keysUsed.includes(n)){this.removeEventListener("keyup",lr(this,Dc,Ef));return}this.addEventListener("keyup",lr(this,Dc,Ef),{once:!0})};vg=new WeakSet;TS=function(){var t;const e=(t=qr(this,Sh))==null?void 0:t.radioGroupItems;if(!e)return;let i=e.filter(n=>n.getAttribute("aria-checked")==="true").pop();i||(i=e[0]);for(const n of e)n.setAttribute("aria-checked","false");i==null||i.setAttribute("aria-checked","true")};so.shadowRootOptions={mode:"open"};so.getTemplateHTML=Wse;so.getSuffixSlotInnerHTML=jse;function pd(t){return t.type==="radio"||t.type==="checkbox"}function bS(t,e){if(!t)return null;const{host:i}=t.getRootNode();return!e&&i?bS(t,i):e!=null&&e.items?e:bS(e,e==null?void 0:e.parentNode)}D.customElements.get("media-chrome-menu-item")||D.customElements.define("media-chrome-menu-item",so);function Yse(t){return`
    ${Gn.getTemplateHTML(t)}
    <style>
      :host {
        --_menu-bg: rgb(20 20 30 / .8);
        background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
        min-width: var(--media-settings-menu-min-width, 170px);
        border-radius: 2px 2px 0 0;
        overflow: hidden;
      }

      @-moz-document url-prefix() {
        :host{
          --_menu-bg: rgb(20 20 30);
        }
      }

      :host([role="menu"]) {
        
        justify-content: end;
      }

      slot:not([name]) {
        justify-content: var(--media-settings-menu-justify-content);
        flex-direction: var(--media-settings-menu-flex-direction, column);
        overflow: visible;
      }

      #container.has-expanded {
        --media-settings-menu-item-opacity: 0;
      }
    </style>
  `}class WF extends Gn{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Qi(this).querySelector("media-settings-menu-button")}}WF.getTemplateHTML=Yse;D.customElements.get("media-settings-menu")||D.customElements.define("media-settings-menu",WF);function qse(t){return`
    ${so.getTemplateHTML.call(this,t)}
    <style>
      slot:not([name="submenu"]) {
        opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
      }

      :host([aria-expanded="true"]:hover) {
        background: transparent;
      }
    </style>
  `}function zse(t){return`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `}class Ty extends so{}Ty.shadowRootOptions={mode:"open"};Ty.getTemplateHTML=qse;Ty.getSuffixSlotInnerHTML=zse;D.customElements.get("media-settings-menu-item")||D.customElements.define("media-settings-menu-item",Ty);class Gc extends ui{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=oy(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new qx({relatedTarget:this}))}}D.customElements.get("media-chrome-menu-button")||D.customElements.define("media-chrome-menu-button",Gc);function Qse(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">
      <svg aria-hidden="true" viewBox="0 0 24 24">
        <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
      </svg>
    </slot>
  `}function Xse(){return se("Settings")}class nk extends Gc{static get observedAttributes(){return[...super.observedAttributes,"target"]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",se("settings"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Qi(this).querySelector("media-settings-menu")}}nk.getSlotTemplateHTML=Qse;nk.getTooltipContentHTML=Xse;D.customElements.get("media-settings-menu-button")||D.customElements.define("media-settings-menu-button",nk);var rk=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},jF=(t,e,i)=>(rk(t,e,"read from private field"),i?i.call(t):e.get(t)),jm=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},SS=(t,e,i,n)=>(rk(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Ym=(t,e,i)=>(rk(t,e,"access private method"),i),Gd,nv,yg,_S,Eg,AS;class Zse extends Gn{constructor(){super(...arguments),jm(this,yg),jm(this,Eg),jm(this,Gd,[]),jm(this,nv,void 0)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_AUDIO_TRACK_LIST,k.MEDIA_AUDIO_TRACK_ENABLED,k.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_AUDIO_TRACK_ENABLED&&i!==n?this.value=n:e===k.MEDIA_AUDIO_TRACK_LIST&&i!==n&&(SS(this,Gd,Mie(n??"")),Ym(this,yg,_S).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Ym(this,Eg,AS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Ym(this,Eg,AS))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=Qi(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return jF(this,Gd)}set mediaAudioTrackList(e){SS(this,Gd,e),Ym(this,yg,_S).call(this)}get mediaAudioTrackEnabled(){var e;return(e=at(this,k.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){ot(this,k.MEDIA_AUDIO_TRACK_ENABLED,e)}}Gd=new WeakMap;nv=new WeakMap;yg=new WeakSet;_S=function(){if(jF(this,nv)===JSON.stringify(this.mediaAudioTrackList))return;SS(this,nv,JSON.stringify(this.mediaAudioTrackList));const t=this.mediaAudioTrackList;this.defaultSlot.textContent="",t.sort((e,i)=>e.id.localeCompare(i.id,void 0,{numeric:!0}));for(const e of t){const i=this.formatMenuItemText(e.label,e),n=Cc({type:"radio",text:i,value:`${e.id}`,checked:e.enabled});n.prepend(rl(this,"checked-indicator")),this.defaultSlot.append(n)}};Eg=new WeakSet;AS=function(){if(this.value==null)return;const t=new D.CustomEvent(ee.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};D.customElements.get("media-audio-track-menu")||D.customElements.define("media-audio-track-menu",Zse);const Jse=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`;function eae(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${Jse}</slot>
  `}function tae(){return se("Audio")}const oD=t=>{const e=se("Audio");t.setAttribute("aria-label",e)};class sk extends Gc{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_AUDIO_TRACK_ENABLED,k.MEDIA_AUDIO_TRACK_UNAVAILABLE]}connectedCallback(){super.connectedCallback(),oD(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_LANG&&oD(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Qi(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=at(this,k.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){ot(this,k.MEDIA_AUDIO_TRACK_ENABLED,e)}}sk.getSlotTemplateHTML=eae;sk.getTooltipContentHTML=tae;D.customElements.get("media-audio-track-menu-button")||D.customElements.define("media-audio-track-menu-button",sk);var ak=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},iae=(t,e,i)=>(ak(t,e,"read from private field"),i?i.call(t):e.get(t)),lT=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},nae=(t,e,i,n)=>(ak(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),qm=(t,e,i)=>(ak(t,e,"access private method"),i),rv,Tg,xS,bg,kS;const rae=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`;function sae(t){return`
    ${Gn.getTemplateHTML(t)}
    <slot name="captions-indicator" hidden>${rae}</slot>
  `}class YF extends Gn{constructor(){super(...arguments),lT(this,Tg),lT(this,bg),lT(this,rv,void 0)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_SUBTITLES_LIST,k.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_SUBTITLES_LIST&&i!==n?qm(this,Tg,xS).call(this):e===k.MEDIA_SUBTITLES_SHOWING&&i!==n&&(this.value=n||"",qm(this,Tg,xS).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",qm(this,bg,kS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",qm(this,bg,kS))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Qi(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return lD(this,k.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){uD(this,k.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return lD(this,k.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){uD(this,k.MEDIA_SUBTITLES_SHOWING,e)}}rv=new WeakMap;Tg=new WeakSet;xS=function(){var t;const e=iae(this,rv)!==JSON.stringify(this.mediaSubtitlesList),i=this.value!==this.getAttribute(k.MEDIA_SUBTITLES_SHOWING);if(!e&&!i)return;nae(this,rv,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const n=!this.value,r=Cc({type:"radio",text:this.formatMenuItemText(se("Off")),value:"off",checked:n});r.prepend(rl(this,"checked-indicator")),this.defaultSlot.append(r);const s=this.mediaSubtitlesList;for(const a of s){const o=Cc({type:"radio",text:this.formatMenuItemText(a.label,a),value:Mb(a),checked:this.value==Mb(a)});o.prepend(rl(this,"checked-indicator")),((t=a.kind)!=null?t:"subs")==="captions"&&o.append(rl(this,"captions-indicator")),this.defaultSlot.append(o)}};bg=new WeakSet;kS=function(){const t=this.mediaSubtitlesShowing,e=this.getAttribute(k.MEDIA_SUBTITLES_SHOWING),i=this.value!==e;if(t!=null&&t.length&&i&&this.dispatchEvent(new D.CustomEvent(ee.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:t})),!this.value||!i)return;const n=new D.CustomEvent(ee.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};YF.getTemplateHTML=sae;const lD=(t,e)=>{const i=t.getAttribute(e);return i?hy(i):[]},uD=(t,e,i)=>{if(!(i!=null&&i.length)){t.removeAttribute(e);return}const n=df(i);t.getAttribute(e)!==n&&t.setAttribute(e,n)};D.customElements.get("media-captions-menu")||D.customElements.define("media-captions-menu",YF);const aae=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,oae=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`;function lae(){return`
    <style>
      :host([data-captions-enabled="true"]) slot[name=off] {
        display: none !important;
      }

      
      :host(:not([data-captions-enabled="true"])) slot[name=on] {
        display: none !important;
      }

      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>

    <slot name="icon">
      <slot name="on">${aae}</slot>
      <slot name="off">${oae}</slot>
    </slot>
  `}function uae(){return se("Captions")}const cD=t=>{t.setAttribute("data-captions-enabled",C4(t).toString())},dD=t=>{t.setAttribute("aria-label",se("closed captions"))};class ok extends Gc{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_SUBTITLES_LIST,k.MEDIA_SUBTITLES_SHOWING,k.MEDIA_LANG]}connectedCallback(){super.connectedCallback(),dD(this),cD(this)}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_SUBTITLES_SHOWING?cD(this):e===k.MEDIA_LANG&&dD(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Qi(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return hD(this,k.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){fD(this,k.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return hD(this,k.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){fD(this,k.MEDIA_SUBTITLES_SHOWING,e)}}ok.getSlotTemplateHTML=lae;ok.getTooltipContentHTML=uae;const hD=(t,e)=>{const i=t.getAttribute(e);return i?hy(i):[]},fD=(t,e,i)=>{if(!(i!=null&&i.length)){t.removeAttribute(e);return}const n=df(i);t.getAttribute(e)!==n&&t.setAttribute(e,n)};D.customElements.get("media-captions-menu-button")||D.customElements.define("media-captions-menu-button",ok);var qF=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},cu=(t,e,i)=>(qF(t,e,"read from private field"),i?i.call(t):e.get(t)),uT=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},Vl=(t,e,i)=>(qF(t,e,"access private method"),i),ha,du,Wd,Sg,IS;const cT={RATES:"rates"};class cae extends Gn{constructor(){super(),uT(this,du),uT(this,Sg),uT(this,ha,new gx(this,cT.RATES,{defaultValue:cF})),Vl(this,du,Wd).call(this)}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PLAYBACK_RATE,cT.RATES]}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_PLAYBACK_RATE&&i!=n?(this.value=n,Vl(this,du,Wd).call(this)):e===cT.RATES&&i!=n&&(cu(this,ha).value=n,Vl(this,du,Wd).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Vl(this,Sg,IS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Vl(this,Sg,IS))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Qi(this).querySelector("media-playback-rate-menu-button")}get rates(){return cu(this,ha)}set rates(e){e?Array.isArray(e)?cu(this,ha).value=e.join(" "):typeof e=="string"&&(cu(this,ha).value=e):cu(this,ha).value="",Vl(this,du,Wd).call(this)}get mediaPlaybackRate(){return st(this,k.MEDIA_PLAYBACK_RATE,Mu)}set mediaPlaybackRate(e){Ct(this,k.MEDIA_PLAYBACK_RATE,e)}}ha=new WeakMap;du=new WeakSet;Wd=function(){this.defaultSlot.textContent="";const t=this.mediaPlaybackRate,e=new Set(Array.from(cu(this,ha)).map(n=>Number(n)));t>0&&!e.has(t)&&e.add(t);const i=Array.from(e).sort((n,r)=>n-r);for(const n of i){const r=Cc({type:"radio",text:this.formatMenuItemText(`${n}x`,n),value:n.toString(),checked:t===n});r.prepend(rl(this,"checked-indicator")),this.defaultSlot.append(r)}};Sg=new WeakSet;IS=function(){if(!this.value)return;const t=new D.CustomEvent(ee.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};D.customElements.get("media-playback-rate-menu")||D.customElements.define("media-playback-rate-menu",cae);const _g=1;function dae(t){return`
    <style>
      :host {
        min-width: 5ch;
        padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
      }
      
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${t.mediaplaybackrate||_g}x</slot>
  `}function hae(){return se("Playback rate")}class lk extends Gc{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_PLAYBACK_RATE]}constructor(){var e;super(),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${(e=this.mediaPlaybackRate)!=null?e:_g}x`}attributeChangedCallback(e,i,n){if(super.attributeChangedCallback(e,i,n),e===k.MEDIA_PLAYBACK_RATE){const r=n?+n:Number.NaN,s=Number.isNaN(r)?_g:r;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",se("Playback rate {playbackRate}",{playbackRate:s}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Qi(this).querySelector("media-playback-rate-menu")}get mediaPlaybackRate(){return st(this,k.MEDIA_PLAYBACK_RATE,_g)}set mediaPlaybackRate(e){Ct(this,k.MEDIA_PLAYBACK_RATE,e)}}lk.getSlotTemplateHTML=dae;lk.getTooltipContentHTML=hae;D.customElements.get("media-playback-rate-menu-button")||D.customElements.define("media-playback-rate-menu-button",lk);var uk=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},jd=(t,e,i)=>(uk(t,e,"read from private field"),i?i.call(t):e.get(t)),zm=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},mD=(t,e,i,n)=>(uk(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Hl=(t,e,i)=>(uk(t,e,"access private method"),i),Yd,Nu,hu,qd,Ag,LS;class fae extends Gn{constructor(){super(...arguments),zm(this,hu),zm(this,Ag),zm(this,Yd,[]),zm(this,Nu,{})}static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_RENDITION_LIST,k.MEDIA_RENDITION_SELECTED,k.MEDIA_RENDITION_UNAVAILABLE,k.MEDIA_HEIGHT]}static formatMenuItemText(e,i){return super.formatMenuItemText(e,i)}static formatRendition(e,{showBitrate:i=!1}={}){const n=`${Math.min(e.width,e.height)}p`;if(i&&e.bitrate){const r=e.bitrate/1e6,s=`${r.toFixed(r<1?1:0)} Mbps`;return`${n} (${s})`}return this.formatMenuItemText(n,e)}static compareRendition(e,i){var n,r;return i.height===e.height?((n=i.bitrate)!=null?n:0)-((r=e.bitrate)!=null?r:0):i.height-e.height}attributeChangedCallback(e,i,n){super.attributeChangedCallback(e,i,n),e===k.MEDIA_RENDITION_SELECTED&&i!==n?(this.value=n??"auto",Hl(this,hu,qd).call(this)):e===k.MEDIA_RENDITION_LIST&&i!==n?(mD(this,Yd,Cie(n)),Hl(this,hu,qd).call(this)):e===k.MEDIA_HEIGHT&&i!==n&&Hl(this,hu,qd).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",Hl(this,Ag,LS))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",Hl(this,Ag,LS))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Qi(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return jd(this,Yd)}set mediaRenditionList(e){mD(this,Yd,e),Hl(this,hu,qd).call(this)}get mediaRenditionSelected(){return at(this,k.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){ot(this,k.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return st(this,k.MEDIA_HEIGHT)}set mediaHeight(e){Ct(this,k.MEDIA_HEIGHT,e)}compareRendition(e,i){return this.constructor.compareRendition(e,i)}formatMenuItemText(e,i){return this.constructor.formatMenuItemText(e,i)}formatRendition(e,i){return this.constructor.formatRendition(e,i)}showRenditionBitrate(e){return this.mediaRenditionList.some(i=>i!==e&&i.height===e.height&&i.bitrate!==e.bitrate)}}Yd=new WeakMap;Nu=new WeakMap;hu=new WeakSet;qd=function(){if(jd(this,Nu).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&jd(this,Nu).mediaHeight===this.mediaHeight)return;jd(this,Nu).mediaRenditionList=JSON.stringify(this.mediaRenditionList),jd(this,Nu).mediaHeight=this.mediaHeight;const t=this.mediaRenditionList.sort(this.compareRendition.bind(this)),e=t.find(a=>a.id===this.mediaRenditionSelected);for(const a of t)a.selected=a===e;this.defaultSlot.textContent="";const i=!this.mediaRenditionSelected;for(const a of t){const o=this.formatRendition(a,{showBitrate:this.showRenditionBitrate(a)}),l=Cc({type:"radio",text:o,value:`${a.id}`,checked:a.selected&&!i});l.prepend(rl(this,"checked-indicator")),this.defaultSlot.append(l)}const n=e&&this.showRenditionBitrate(e),r=i?e?this.formatMenuItemText(`${se("Auto")}  ${this.formatRendition(e,{showBitrate:n})}`,e):this.formatMenuItemText(`${se("Auto")} (${this.mediaHeight}p)`):this.formatMenuItemText(se("Auto")),s=Cc({type:"radio",text:r,value:"auto",checked:i});s.dataset.description=r,s.prepend(rl(this,"checked-indicator")),this.defaultSlot.append(s)};Ag=new WeakSet;LS=function(){if(this.value==null)return;const t=new D.CustomEvent(ee.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(t)};D.customElements.get("media-rendition-menu")||D.customElements.define("media-rendition-menu",fae);const mae=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`;function pae(){return`
    <style>
      :host([aria-expanded="true"]) slot[name=tooltip] {
        display: none;
      }
    </style>
    <slot name="icon">${mae}</slot>
  `}function gae(){return se("Quality")}class ck extends Gc{static get observedAttributes(){return[...super.observedAttributes,k.MEDIA_RENDITION_SELECTED,k.MEDIA_RENDITION_UNAVAILABLE,k.MEDIA_HEIGHT]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",se("quality"))}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Qi(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return at(this,k.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){ot(this,k.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return st(this,k.MEDIA_HEIGHT)}set mediaHeight(e){Ct(this,k.MEDIA_HEIGHT,e)}}ck.getSlotTemplateHTML=pae;ck.getTooltipContentHTML=gae;D.customElements.get("media-rendition-menu-button")||D.customElements.define("media-rendition-menu-button",ck);var dk=(t,e,i)=>{if(!e.has(t))throw TypeError("Cannot "+i)},Nr=(t,e,i)=>(dk(t,e,"read from private field"),i?i.call(t):e.get(t)),Sr=(t,e,i)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,i)},zF=(t,e,i,n)=>(dk(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),wn=(t,e,i)=>(dk(t,e,"access private method"),i),Pc,Tf,by,Do,$u,hk,QF,xg,RS,kg,wS,XF,sv,av,Ig;function vae(t){return`
      ${Gn.getTemplateHTML(t)}
      <style>
        :host {
          --_menu-bg: rgb(20 20 30 / .8);
          background: var(--media-settings-menu-background,
            var(--media-menu-background,
              var(--media-control-background,
                var(--media-secondary-color, var(--_menu-bg)))));
          min-width: var(--media-settings-menu-min-width, 170px);
          border-radius: 2px;
          overflow: hidden;
        }
      </style>
    `}class ZF extends Gn{constructor(){super(),Sr(this,Tf),Sr(this,Do),Sr(this,hk),Sr(this,xg),Sr(this,wS),Sr(this,Pc,!1),Sr(this,kg,e=>{const i=e.target,n=(i==null?void 0:i.nodeName)==="VIDEO",r=wn(this,xg,RS).call(this,i);(n||r)&&(Nr(this,Pc)?wn(this,Do,$u).call(this):wn(this,wS,XF).call(this,e))}),Sr(this,sv,e=>{const i=e.target,n=this.contains(i),r=e.button===2,s=(i==null?void 0:i.nodeName)==="VIDEO",a=wn(this,xg,RS).call(this,i);n||r&&(s||a)||wn(this,Do,$u).call(this)}),Sr(this,av,e=>{e.key==="Escape"&&wn(this,Do,$u).call(this)}),Sr(this,Ig,e=>{var i,n;const r=e.target;if((i=r.matches)!=null&&i.call(r,'button[invoke="copy"]')){const s=(n=r.closest("media-context-menu-item"))==null?void 0:n.querySelector('input[slot="copy"]');s&&navigator.clipboard.writeText(s.value)}wn(this,Do,$u).call(this)}),this.setAttribute("noautohide",""),wn(this,Tf,by).call(this)}connectedCallback(){super.connectedCallback(),Qi(this).addEventListener("contextmenu",Nr(this,kg)),this.addEventListener("click",Nr(this,Ig))}disconnectedCallback(){super.disconnectedCallback(),Qi(this).removeEventListener("contextmenu",Nr(this,kg)),this.removeEventListener("click",Nr(this,Ig)),document.removeEventListener("mousedown",Nr(this,sv)),document.removeEventListener("keydown",Nr(this,av))}}Pc=new WeakMap;Tf=new WeakSet;by=function(){this.hidden=!Nr(this,Pc)};Do=new WeakSet;$u=function(){zF(this,Pc,!1),wn(this,Tf,by).call(this)};hk=new WeakSet;QF=function(){document.querySelectorAll("media-context-menu").forEach(e=>{var i;e!==this&&wn(i=e,Do,$u).call(i)})};xg=new WeakSet;RS=function(t){return t?t.hasAttribute("slot")&&t.getAttribute("slot")==="media"?!0:t.nodeName.includes("-")&&t.tagName.includes("-")?t.hasAttribute("src")||t.hasAttribute("poster")||t.hasAttribute("preload")||t.hasAttribute("playsinline"):!1:!1};kg=new WeakMap;wS=new WeakSet;XF=function(t){t.preventDefault(),wn(this,hk,QF).call(this),zF(this,Pc,!0),this.style.position="fixed",this.style.left=`${t.clientX}px`,this.style.top=`${t.clientY}px`,wn(this,Tf,by).call(this),document.addEventListener("mousedown",Nr(this,sv),{once:!0}),document.addEventListener("keydown",Nr(this,av),{once:!0})};sv=new WeakMap;av=new WeakMap;Ig=new WeakMap;ZF.getTemplateHTML=vae;D.customElements.get("media-context-menu")||D.customElements.define("media-context-menu",ZF);function yae(t){return`
    ${so.getTemplateHTML.call(this,t)}
    <style>
        ::slotted(*) {
            color: var(--media-text-color, white);
            text-decoration: none;
            border: none;
            background: none;
            cursor: pointer;
            padding: 0;
            min-height: var(--media-control-height, 24px);
        }
    </style>
  `}class fk extends so{}fk.shadowRootOptions={mode:"open"};fk.getTemplateHTML=yae;D.customElements.get("media-context-menu-item")||D.customElements.define("media-context-menu-item",fk);var JF=t=>{throw TypeError(t)},mk=(t,e,i)=>e.has(t)||JF("Cannot "+i),Ke=(t,e,i)=>(mk(t,e,"read from private field"),i?i.call(t):e.get(t)),sr=(t,e,i)=>e.has(t)?JF("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),is=(t,e,i,n)=>(mk(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),Ht=(t,e,i)=>(mk(t,e,"access private method"),i),Sy=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends Sy{}globalThis.DocumentFragment=t}var pk=class extends Sy{},Eae=class extends Sy{},Tae={get(t){},define(t,e,i){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(pk)}},Lg,bae=class{constructor(e,i={}){sr(this,Lg),is(this,Lg,i==null?void 0:i.detail)}get detail(){return Ke(this,Lg)}initCustomEvent(){}};Lg=new WeakMap;function Sae(t,e){return new pk}var e5={document:{createElement:Sae},DocumentFragment,customElements:Tae,CustomEvent:bae,EventTarget:Sy,HTMLElement:pk,HTMLVideoElement:Eae},t5=typeof window>"u"||typeof globalThis.customElements>"u",Kr=t5?e5:globalThis,ov=t5?e5.document:globalThis.document;function _ae(t){let e="";return Object.entries(t).forEach(([i,n])=>{n!=null&&(e+=`${CS(i)}: ${n}; `)}),e?e.trim():void 0}function CS(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function i5(t){return t.replace(/[-_]([a-z])/g,(e,i)=>i.toUpperCase())}function an(t){if(t==null)return;let e=+t;return Number.isNaN(e)?void 0:e}function n5(t){let e=Aae(t).toString();return e?"?"+e:""}function Aae(t){let e={};for(let i in t)t[i]!=null&&(e[i]=t[i]);return new URLSearchParams(e)}var r5=(t,e)=>!t||!e?!1:t.contains(e)?!0:r5(t,e.getRootNode().host),s5="mux.com",xae=()=>{try{return"3.9.0"}catch{}return"UNKNOWN"},kae=xae(),a5=()=>kae,Iae=(t,{token:e,customDomain:i=s5,thumbnailTime:n,programTime:r}={})=>{var s;let a=e==null?n:void 0,{aud:o}=(s=Xu(e))!=null?s:{};if(!(e&&o!=="t"))return`https://image.${i}/${t}/thumbnail.webp${n5({token:e,time:a,program_time:r})}`},Lae=(t,{token:e,customDomain:i=s5,programStartTime:n,programEndTime:r}={})=>{var s;let{aud:a}=(s=Xu(e))!=null?s:{};if(!(e&&a!=="s"))return`https://image.${i}/${t}/storyboard.vtt${n5({token:e,format:"webp",program_start_time:n,program_end_time:r})}`},gk=t=>{if(t){if([He.LIVE,He.ON_DEMAND].includes(t))return t;if(t!=null&&t.includes("live"))return He.LIVE}},Rae={crossorigin:"crossOrigin",playsinline:"playsInline"};function wae(t){var e;return(e=Rae[t])!=null?e:i5(t)}var fu,mu,Hi,Cae=class{constructor(e,i){sr(this,fu),sr(this,mu),sr(this,Hi,[]),is(this,fu,e),is(this,mu,i)}[Symbol.iterator](){return Ke(this,Hi).values()}get length(){return Ke(this,Hi).length}get value(){var e;return(e=Ke(this,Hi).join(" "))!=null?e:""}set value(e){var i;e!==this.value&&(is(this,Hi,[]),this.add(...(i=e==null?void 0:e.split(" "))!=null?i:[]))}toString(){return this.value}item(e){return Ke(this,Hi)[e]}values(){return Ke(this,Hi).values()}keys(){return Ke(this,Hi).keys()}forEach(e){Ke(this,Hi).forEach(e)}add(...e){var i,n;e.forEach(r=>{this.contains(r)||Ke(this,Hi).push(r)}),!(this.value===""&&!((i=Ke(this,fu))!=null&&i.hasAttribute(`${Ke(this,mu)}`)))&&((n=Ke(this,fu))==null||n.setAttribute(`${Ke(this,mu)}`,`${this.value}`))}remove(...e){var i;e.forEach(n=>{Ke(this,Hi).splice(Ke(this,Hi).indexOf(n),1)}),(i=Ke(this,fu))==null||i.setAttribute(`${Ke(this,mu)}`,`${this.value}`)}contains(e){return Ke(this,Hi).includes(e)}toggle(e,i){return typeof i<"u"?i?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,i){this.remove(e),this.add(i)}};fu=new WeakMap,mu=new WeakMap,Hi=new WeakMap;var o5=`[mux-player ${a5()}]`;function Ts(...t){console.warn(o5,...t)}function On(...t){console.error(o5,...t)}function l5(t){var e;let i=(e=t.message)!=null?e:"";t.context&&(i+=` ${t.context}`),t.file&&(i+=` ${ue("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${t.file}`),Ts(i)}var Ai={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Lo={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},pD=Object.freeze({length:0,start(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(t){let e=t>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),Dae=Object.values(Ai).filter(t=>Ai.PLAYSINLINE!==t),Pae=Object.values(Lo),Oae=[...Dae,...Pae],Mae=class extends Kr.HTMLElement{static get observedAttributes(){return Oae}constructor(){super()}attributeChangedCallback(t,e,i){var n,r;switch(t){case Lo.MUTED:{this.media&&(this.media.muted=i!=null,this.media.defaultMuted=i!=null);return}case Lo.VOLUME:{let s=(n=an(i))!=null?n:1;this.media&&(this.media.volume=s);return}case Lo.PLAYBACKRATE:{let s=(r=an(i))!=null?r:1;this.media&&(this.media.playbackRate=s,this.media.defaultPlaybackRate=s);return}}}play(){var t,e;return(e=(t=this.media)==null?void 0:t.play())!=null?e:Promise.reject()}pause(){var t;(t=this.media)==null||t.pause()}load(){var t;(t=this.media)==null||t.load()}get media(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var t,e;return(e=(t=this.media)==null?void 0:t.paused)!=null?e:!0}get duration(){var t,e;return(e=(t=this.media)==null?void 0:t.duration)!=null?e:NaN}get ended(){var t,e;return(e=(t=this.media)==null?void 0:t.ended)!=null?e:!1}get buffered(){var t,e;return(e=(t=this.media)==null?void 0:t.buffered)!=null?e:pD}get seekable(){var t,e;return(e=(t=this.media)==null?void 0:t.seekable)!=null?e:pD}get readyState(){var t,e;return(e=(t=this.media)==null?void 0:t.readyState)!=null?e:0}get videoWidth(){var t,e;return(e=(t=this.media)==null?void 0:t.videoWidth)!=null?e:0}get videoHeight(){var t,e;return(e=(t=this.media)==null?void 0:t.videoHeight)!=null?e:0}get currentSrc(){var t,e;return(e=(t=this.media)==null?void 0:t.currentSrc)!=null?e:""}get currentTime(){var t,e;return(e=(t=this.media)==null?void 0:t.currentTime)!=null?e:0}set currentTime(t){this.media&&(this.media.currentTime=Number(t))}get volume(){var t,e;return(e=(t=this.media)==null?void 0:t.volume)!=null?e:1}set volume(t){this.media&&(this.media.volume=Number(t))}get playbackRate(){var t,e;return(e=(t=this.media)==null?void 0:t.playbackRate)!=null?e:1}set playbackRate(t){this.media&&(this.media.playbackRate=Number(t))}get defaultPlaybackRate(){var t;return(t=an(this.getAttribute(Lo.PLAYBACKRATE)))!=null?t:1}set defaultPlaybackRate(t){t!=null?this.setAttribute(Lo.PLAYBACKRATE,`${t}`):this.removeAttribute(Lo.PLAYBACKRATE)}get crossOrigin(){return gd(this,Ai.CROSSORIGIN)}set crossOrigin(t){this.setAttribute(Ai.CROSSORIGIN,`${t}`)}get autoplay(){return gd(this,Ai.AUTOPLAY)!=null}set autoplay(t){t?this.setAttribute(Ai.AUTOPLAY,typeof t=="string"?t:""):this.removeAttribute(Ai.AUTOPLAY)}get loop(){return gd(this,Ai.LOOP)!=null}set loop(t){t?this.setAttribute(Ai.LOOP,""):this.removeAttribute(Ai.LOOP)}get muted(){var t,e;return(e=(t=this.media)==null?void 0:t.muted)!=null?e:!1}set muted(t){this.media&&(this.media.muted=!!t)}get defaultMuted(){return gd(this,Ai.MUTED)!=null}set defaultMuted(t){t?this.setAttribute(Ai.MUTED,""):this.removeAttribute(Ai.MUTED)}get playsInline(){return gd(this,Ai.PLAYSINLINE)!=null}set playsInline(t){On("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(t){["","none","metadata","auto"].includes(t)?this.setAttribute(Ai.PRELOAD,t):this.removeAttribute(Ai.PRELOAD)}};function gd(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var gD=Mae,Nae=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  line-height: 0;
  width: 100%;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  display: inline-block;
  line-height: 0;
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,vd=new WeakMap,$ae=class u5{constructor(e,i){this.element=e,this.type=i,this.element.addEventListener(this.type,this);let n=vd.get(this.element);n&&n.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let i=vd.get(this.element);i&&i.delete(this.type)}}static for(e){vd.has(e.element)||vd.set(e.element,new Map);let i=e.attributeName.slice(2),n=vd.get(e.element);return n&&n.has(i)?n.get(i):new u5(e.element,i)}};function Fae(t,e){return t instanceof hr&&t.attributeName.startsWith("on")?($ae.for(t).set(e),t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),!0):!1}function Uae(t,e){return e instanceof c5&&t instanceof Kc?(e.renderInto(t),!0):!1}function Bae(t,e){return e instanceof DocumentFragment&&t instanceof Kc?(e.childNodes.length&&t.replace(...e.childNodes),!0):!1}function Vae(t,e){if(t instanceof hr){let i=t.attributeNamespace,n=t.element.getAttributeNS(i,t.attributeName);return String(e)!==n&&(t.value=String(e)),!0}return t.value=String(e),!0}function Hae(t,e){if(t instanceof hr&&e instanceof Element){let i=t.element;return i[t.attributeName]!==e&&(t.element.removeAttributeNS(t.attributeNamespace,t.attributeName),i[t.attributeName]=e),!0}return!1}function Kae(t,e){if(typeof e=="boolean"&&t instanceof hr){let i=t.attributeNamespace,n=t.element.hasAttributeNS(i,t.attributeName);return e!==n&&(t.booleanValue=e),!0}return!1}function Gae(t,e){return e===!1&&t instanceof Kc?(t.replace(""),!0):!1}function Wae(t,e){Hae(t,e)||Kae(t,e)||Fae(t,e)||Gae(t,e)||Uae(t,e)||Bae(t,e)||Vae(t,e)}var dT=new Map,vD=new WeakMap,yD=new WeakMap,c5=class{constructor(e,i,n){this.strings=e,this.values=i,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(dT.has(this.stringsKey))return dT.get(this.stringsKey);{let e=ov.createElement("template"),i=this.strings.length-1;return e.innerHTML=this.strings.reduce((n,r,s)=>n+r+(s<i?`{{ ${s} }}`:""),""),dT.set(this.stringsKey,e),e}}renderInto(e){var i;let n=this.template;if(vD.get(e)!==n){vD.set(e,n);let s=new yy(n,this.values,this.processor);yD.set(e,s),e instanceof Kc?e.replace(...s.children):e.appendChild(s);return}let r=yD.get(e);(i=r==null?void 0:r.update)==null||i.call(r,this.values)}},jae={processCallback(t,e,i){var n;if(i){for(let[r,s]of e)if(r in i){let a=(n=i[r])!=null?n:"";Wae(s,a)}}}};function Rg(t,...e){return new c5(t,e,jae)}function Yae(t,e){t.renderInto(e)}var qae=t=>{let{tokens:e}=t;return e.drm?":host(:not([cast-receiver])) { --_cast-button-drm-display: none; }":""},zae=t=>Rg`
  <style>
    ${qae(t)}
    ${Nae}
  </style>
  ${Jae(t)}
`,Qae=t=>{let e=t.hotKeys?`${t.hotKeys}`:"";return gk(t.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},Xae={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",THUMB:"thumb",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",MENU:"menu",MENU_ITEM:"menu-item",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},Zae=Object.values(Xae).join(", "),Jae=t=>{var e,i,n,r,s,a,o,l,u,c,d,h,f,m,p,y,g,v,E,T,_,x,A,I,L,b,R,P,w,$,B,U,V,C,K,z,H;return Rg`
  <media-theme
    template="${t.themeTemplate||!1}"
    defaultstreamtype="${(e=t.defaultStreamType)!=null?e:!1}"
    hotkeys="${Qae(t)||!1}"
    nohotkeys="${t.noHotKeys||!t.hasSrc||!1}"
    noautoseektolive="${!!((i=t.streamType)!=null&&i.includes(He.LIVE))&&t.targetLiveWindow!==0}"
    novolumepref="${t.novolumepref||!1}"
    nomutedpref="${t.nomutedpref||!1}"
    disabled="${!t.hasSrc||t.isDialogOpen}"
    audio="${(n=t.audio)!=null?n:!1}"
    style="${(r=_ae({"--media-primary-color":t.primaryColor,"--media-secondary-color":t.secondaryColor,"--media-accent-color":t.accentColor}))!=null?r:!1}"
    defaultsubtitles="${!t.defaultHiddenCaptions}"
    forwardseekoffset="${(s=t.forwardSeekOffset)!=null?s:!1}"
    backwardseekoffset="${(a=t.backwardSeekOffset)!=null?a:!1}"
    playbackrates="${(o=t.playbackRates)!=null?o:!1}"
    defaultshowremainingtime="${(l=t.defaultShowRemainingTime)!=null?l:!1}"
    defaultduration="${(u=t.defaultDuration)!=null?u:!1}"
    hideduration="${(c=t.hideDuration)!=null?c:!1}"
    title="${(d=t.title)!=null?d:!1}"
    videotitle="${(h=t.videoTitle)!=null?h:!1}"
    proudlydisplaymuxbadge="${(f=t.proudlyDisplayMuxBadge)!=null?f:!1}"
    exportparts="${Zae}"
    onclose="${t.onCloseErrorDialog}"
    onfocusin="${t.onFocusInErrorDialog}"
  >
    <mux-video
      slot="media"
      inert="${(m=t.noHotKeys)!=null?m:!1}"
      target-live-window="${(p=t.targetLiveWindow)!=null?p:!1}"
      stream-type="${(y=gk(t.streamType))!=null?y:!1}"
      crossorigin="${(g=t.crossOrigin)!=null?g:""}"
      playsinline
      autoplay="${(v=t.autoplay)!=null?v:!1}"
      muted="${(E=t.muted)!=null?E:!1}"
      loop="${(T=t.loop)!=null?T:!1}"
      preload="${(_=t.preload)!=null?_:!1}"
      debug="${(x=t.debug)!=null?x:!1}"
      prefer-cmcd="${(A=t.preferCmcd)!=null?A:!1}"
      disable-tracking="${(I=t.disableTracking)!=null?I:!1}"
      disable-cookies="${(L=t.disableCookies)!=null?L:!1}"
      prefer-playback="${(b=t.preferPlayback)!=null?b:!1}"
      start-time="${t.startTime!=null?t.startTime:!1}"
      beacon-collection-domain="${(R=t.beaconCollectionDomain)!=null?R:!1}"
      player-init-time="${(P=t.playerInitTime)!=null?P:!1}"
      player-software-name="${(w=t.playerSoftwareName)!=null?w:!1}"
      player-software-version="${($=t.playerSoftwareVersion)!=null?$:!1}"
      env-key="${(B=t.envKey)!=null?B:!1}"
      custom-domain="${(U=t.customDomain)!=null?U:!1}"
      src="${t.src?t.src:t.playbackId?fb(t):!1}"
      cast-src="${t.src?t.src:t.playbackId?fb(t):!1}"
      cast-receiver="${(V=t.castReceiver)!=null?V:!1}"
      drm-token="${(K=(C=t.tokens)==null?void 0:C.drm)!=null?K:!1}"
      exportparts="video"
      disable-pseudo-ended="${(z=t.disablePseudoEnded)!=null?z:!1}"
    >
      ${t.storyboard?Rg`<track label="thumbnails" default kind="metadata" src="${t.storyboard}" />`:Rg``}
      <slot></slot>
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${t.poster?t.poster:!1}"
        placeholdersrc="${(H=t.placeholder)!=null?H:!1}"
      ></media-poster-image>
    </slot>
  </media-theme>
`},d5=t=>t.charAt(0).toUpperCase()+t.slice(1),eoe=(t,e=!1)=>{var i,n;if(t.muxCode){let r=d5((i=t.errorCategory)!=null?i:"video"),s=ty((n=t.errorCategory)!=null?n:nt.VIDEO);if(t.muxCode===de.NETWORK_OFFLINE)return ue("Your device appears to be offline",e);if(t.muxCode===de.NETWORK_TOKEN_EXPIRED)return ue("{category} URL has expired",e).format({category:r});if([de.NETWORK_TOKEN_SUB_MISMATCH,de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING,de.NETWORK_TOKEN_MALFORMED].includes(t.muxCode))return ue("{category} URL is formatted incorrectly",e).format({category:r});if(t.muxCode===de.NETWORK_TOKEN_MISSING)return ue("Invalid {categoryName} URL",e).format({categoryName:s});if(t.muxCode===de.NETWORK_NOT_FOUND)return ue("{category} does not exist",e).format({category:r});if(t.muxCode===de.NETWORK_NOT_READY){let a=t.streamType==="live"?"Live stream":"Video";return ue("{mediaType} is not currently available",e).format({mediaType:a})}}if(t.code){if(t.code===ie.MEDIA_ERR_NETWORK)return ue("Network Error",e);if(t.code===ie.MEDIA_ERR_DECODE)return ue("Media Error",e);if(t.code===ie.MEDIA_ERR_SRC_NOT_SUPPORTED)return ue("Source Not Supported",e)}return ue("Error",e)},toe=(t,e=!1)=>{var i,n;if(t.muxCode){let r=d5((i=t.errorCategory)!=null?i:"video"),s=ty((n=t.errorCategory)!=null?n:nt.VIDEO);return t.muxCode===de.NETWORK_OFFLINE?ue("Check your internet connection and try reloading this video.",e):t.muxCode===de.NETWORK_TOKEN_EXPIRED?ue("The videos secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:s}):t.muxCode===de.NETWORK_TOKEN_SUB_MISMATCH?ue("The videos playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:s}):t.muxCode===de.NETWORK_TOKEN_MALFORMED?ue("{category} URL is formatted incorrectly",e).format({category:r}):[de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode)?ue("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:s}):[de.NETWORK_TOKEN_MISSING,de.NETWORK_INVALID_URL].includes(t.muxCode)?ue("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:s}):t.muxCode===de.NETWORK_NOT_FOUND?"":t.message}return t.code&&(t.code===ie.MEDIA_ERR_NETWORK||t.code===ie.MEDIA_ERR_DECODE||(t.code,ie.MEDIA_ERR_SRC_NOT_SUPPORTED)),t.message},ioe=(t,e=!1)=>{let i=eoe(t,e).toString(),n=toe(t,e).toString();return{title:i,message:n}},noe=t=>{if(t.muxCode){if(t.muxCode===de.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(t.muxCode===de.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([de.NETWORK_TOKEN_AUD_MISMATCH,de.NETWORK_TOKEN_AUD_MISSING].includes(t.muxCode))return"403-incorrect-aud-value.md";if(t.muxCode===de.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(t.muxCode===de.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(t.muxCode===de.NETWORK_NOT_FOUND)return"404-not-found.md";if(t.muxCode===de.NETWORK_NOT_READY)return"412-not-playable.md"}if(t.code){if(t.code===ie.MEDIA_ERR_NETWORK)return"";if(t.code===ie.MEDIA_ERR_DECODE)return"media-decode-error.md";if(t.code===ie.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},ED=(t,e)=>{let i=noe(t);return{message:t.message,context:t.context,file:i}},roe=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    media-rendition-menu {
      min-width: 140px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps:
        hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%, hsl(0 0% 0% / 0.104) 22.5%,
        hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%, hsl(0 0% 0% / 0.45) 47.1%,
        hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%, hsl(0 0% 0% / 0.825) 71%,
        hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%, hsl(0 0% 0%) 100%;
    }

    :host([title]) media-control-bar[slot='top-chrome']::before,
    :host([videotitle]) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-error-dialog:not([mediaerrorcode]) {
      opacity: 0;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }

    [part='mux-badge'] {
      position: absolute;
      bottom: 10px;
      right: 10px;
      z-index: 2;
      opacity: 0.6;
      transition:
        opacity 0.2s ease-in-out,
        bottom 0.2s ease-in-out;
    }

    [part='mux-badge']:hover {
      opacity: 1;
    }

    [part='mux-badge'] a {
      font-size: 14px;
      font-family: var(--_font-family);
      color: var(--_primary-color);
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    [part='mux-badge'] .mux-badge-text {
      transition: opacity 0.5s ease-in-out;
      opacity: 0;
    }

    [part='mux-badge'] .mux-badge-logo {
      width: 40px;
      height: auto;
      display: inline-block;
    }

    [part='mux-badge'] .mux-badge-logo svg {
      width: 100%;
      height: 100%;
      fill: white;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'],
    media-controller:not([userinactive]) [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      transition: bottom 0.1s ease-in-out;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      transition: bottom 0.2s ease-in-out 0.62s;
    }

    media-controller:not([userinactive]) [part='mux-badge'] .mux-badge-text,
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] .mux-badge-text {
      opacity: 1;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] .mux-badge-text {
      opacity: 0;
    }

    media-controller[userinactive]:not([mediapaused]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive]):not([mediahasplayed]) [part='mux-badge'] {
      bottom: 10px;
    }

    media-controller:not([userinactive])[mediahasplayed] [part='mux-badge'],
    media-controller[mediahasplayed][mediapaused] [part='mux-badge'] {
      bottom: calc(28px + var(--media-control-height, 0px) + var(--media-control-padding, 0px) * 2);
    }
  </style>

  <template partial="TitleDisplay">
    <template if="videotitle">
      <template if="videotitle != true">
        <media-text-display part="top title display" class="title-display">{{videotitle}}</media-text-display>
      </template>
    </template>
    <template if="!videotitle">
      <template if="title">
        <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
      </template>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}" exportparts="thumb">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            opacity: 0;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <template partial="MuxBadge">
    <div part="mux-badge">
      <a href="https://www.mux.com/player" target="_blank">
        <span class="mux-badge-text">Powered by</span>
        <div class="mux-badge-logo">
          <svg
            viewBox="0 0 1600 500"
            style="fill-rule: evenodd; clip-rule: evenodd; stroke-linejoin: round; stroke-miterlimit: 2"
          >
            <g>
              <path
                d="M994.287,93.486c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m0,-93.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,68.943 -56.09,125.033 -125.032,125.033c-68.942,-0 -125.03,-56.09 -125.03,-125.033l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486c-34.509,-0 -62.484,27.976 -62.484,62.486l0,187.511c0,137.853 112.149,250.003 249.999,250.003c137.851,-0 250.001,-112.15 250.001,-250.003l0,-187.511c0,-34.51 -27.976,-62.486 -62.485,-62.486"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M1537.51,468.511c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m-275.883,-218.509l-143.33,143.329c-24.402,24.402 -24.402,63.966 0,88.368c24.402,24.402 63.967,24.402 88.369,-0l143.33,-143.329l143.328,143.329c24.402,24.4 63.967,24.402 88.369,-0c24.403,-24.402 24.403,-63.966 0.001,-88.368l-143.33,-143.329l0.001,-0.004l143.329,-143.329c24.402,-24.402 24.402,-63.965 0,-88.367c-24.402,-24.402 -63.967,-24.402 -88.369,-0l-143.329,143.328l-143.329,-143.328c-24.402,-24.401 -63.967,-24.402 -88.369,-0c-24.402,24.402 -24.402,63.965 0,88.367l143.329,143.329l0,0.004Z"
                style="fill-rule: nonzero"
              ></path>
              <path
                d="M437.511,468.521c-17.121,-0 -31,-13.879 -31,-31c0,-17.121 13.879,-31 31,-31c17.121,-0 31,13.879 31,31c0,17.121 -13.879,31 -31,31m23.915,-463.762c-23.348,-9.672 -50.226,-4.327 -68.096,13.544l-143.331,143.329l-143.33,-143.329c-17.871,-17.871 -44.747,-23.216 -68.096,-13.544c-23.349,9.671 -38.574,32.455 -38.574,57.729l0,375.026c0,34.51 27.977,62.486 62.487,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-224.173l80.843,80.844c24.404,24.402 63.965,24.402 88.369,-0l80.843,-80.844l0,224.173c0,34.51 27.976,62.486 62.486,62.486c34.51,-0 62.486,-27.976 62.486,-62.486l0,-375.026c0,-25.274 -15.224,-48.058 -38.573,-57.729"
                style="fill-rule: nonzero"
              ></path>
            </g>
          </svg>
        </div>
      </a>
    </div>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <media-error-dialog slot="dialog" noautohide></media-error-dialog>
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Mux Badge -->
      <template if="proudlydisplaymuxbadge"> {{>MuxBadge}} </template>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,DS=ov.createElement("template");"innerHTML"in DS&&(DS.innerHTML=roe);var TD,bD,h5=class extends Ey{};h5.template=(bD=(TD=DS.content)==null?void 0:TD.children)==null?void 0:bD[0];Kr.customElements.get("media-theme-gerwig")||Kr.customElements.define("media-theme-gerwig",h5);var soe="gerwig",ms={SRC:"src",POSTER:"poster"},Q={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",FULLSCREEN_ELEMENT:"fullscreen-element",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",VIDEO_TITLE:"video-title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",NO_MUTED_PREF:"no-muted-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips",PROUDLY_DISPLAY_MUX_BADGE:"proudly-display-mux-badge",DISABLE_PSEUDO_ENDED:"disable-pseudo-ended"},PS=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","videotitle","novolumepref","nomutedpref","proudlydisplaymuxbadge"];function aoe(t,e){var i,n;return{src:!t.playbackId&&t.src,playbackId:t.playbackId,hasSrc:!!t.playbackId||!!t.src||!!t.currentSrc,poster:t.poster,storyboard:t.storyboard,storyboardSrc:t.getAttribute(Q.STORYBOARD_SRC),fullscreenElement:t.getAttribute(Q.FULLSCREEN_ELEMENT),placeholder:t.getAttribute("placeholder"),themeTemplate:loe(t),thumbnailTime:!t.tokens.thumbnail&&t.thumbnailTime,autoplay:t.autoplay,crossOrigin:t.crossOrigin,loop:t.loop,noHotKeys:t.hasAttribute(Q.NOHOTKEYS),hotKeys:t.getAttribute(Q.HOTKEYS),muted:t.muted,paused:t.paused,preload:t.preload,envKey:t.envKey,preferCmcd:t.preferCmcd,debug:t.debug,disableTracking:t.disableTracking,disableCookies:t.disableCookies,tokens:t.tokens,beaconCollectionDomain:t.beaconCollectionDomain,maxResolution:t.maxResolution,minResolution:t.minResolution,programStartTime:t.programStartTime,programEndTime:t.programEndTime,assetStartTime:t.assetStartTime,assetEndTime:t.assetEndTime,renditionOrder:t.renditionOrder,metadata:t.metadata,playerInitTime:t.playerInitTime,playerSoftwareName:t.playerSoftwareName,playerSoftwareVersion:t.playerSoftwareVersion,startTime:t.startTime,preferPlayback:t.preferPlayback,audio:t.audio,defaultStreamType:t.defaultStreamType,targetLiveWindow:t.getAttribute(N.TARGET_LIVE_WINDOW),streamType:gk(t.getAttribute(N.STREAM_TYPE)),primaryColor:t.getAttribute(Q.PRIMARY_COLOR),secondaryColor:t.getAttribute(Q.SECONDARY_COLOR),accentColor:t.getAttribute(Q.ACCENT_COLOR),forwardSeekOffset:t.forwardSeekOffset,backwardSeekOffset:t.backwardSeekOffset,defaultHiddenCaptions:t.defaultHiddenCaptions,defaultDuration:t.defaultDuration,defaultShowRemainingTime:t.defaultShowRemainingTime,hideDuration:uoe(t),playbackRates:t.getAttribute(Q.PLAYBACK_RATES),customDomain:(i=t.getAttribute(N.CUSTOM_DOMAIN))!=null?i:void 0,title:t.getAttribute(Q.TITLE),videoTitle:(n=t.getAttribute(Q.VIDEO_TITLE))!=null?n:t.getAttribute(Q.TITLE),novolumepref:t.hasAttribute(Q.NO_VOLUME_PREF),nomutedpref:t.hasAttribute(Q.NO_MUTED_PREF),proudlyDisplayMuxBadge:t.hasAttribute(Q.PROUDLY_DISPLAY_MUX_BADGE),castReceiver:t.castReceiver,disablePseudoEnded:t.hasAttribute(Q.DISABLE_PSEUDO_ENDED),...e,extraSourceParams:t.extraSourceParams}}var ooe=rF.formatErrorMessage;rF.formatErrorMessage=t=>{var e,i;if(t instanceof ie){let n=ioe(t,!1);return`
      ${n!=null&&n.title?`<h3>${n.title}</h3>`:""}
      ${n!=null&&n.message||n!=null&&n.linkUrl?`<p>
        ${n==null?void 0:n.message}
        ${n!=null&&n.linkUrl?`<a
              href="${n.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(e=n.linkText)!=null?e:""} ${ue("(opens in a new window)")}"
              >${(i=n.linkText)!=null?i:n.linkUrl}</a
            >`:""}
      </p>`:""}
    `}return ooe(t)};function loe(t){var e,i;let n=t.theme;if(n){let r=(i=(e=t.getRootNode())==null?void 0:e.getElementById)==null?void 0:i.call(e,n);if(r&&r instanceof HTMLTemplateElement)return r;n.startsWith("media-theme-")||(n=`media-theme-${n}`);let s=Kr.customElements.get(n);if(s!=null&&s.template)return s.template}}function uoe(t){var e;let i=(e=t.mediaController)==null?void 0:e.querySelector("media-time-display");return i&&getComputedStyle(i).getPropertyValue("--media-duration-display-display").trim()==="none"}function SD(t){let e=t.videoTitle?{video_title:t.videoTitle}:{};return t.getAttributeNames().filter(i=>i.startsWith("metadata-")).reduce((i,n)=>{let r=t.getAttribute(n);return r!==null&&(i[n.replace(/^metadata-/,"").replace(/-/g,"_")]=r),i},e)}var coe=Object.values(N),doe=Object.values(ms),hoe=Object.values(Q),_D=a5(),AD="mux-player",xD={isDialogOpen:!1},foe={redundant_streams:!0},wg,Cg,Dg,Ro,Pg,sc,Lt,oa,f5,OS,wo,kD,ID,LD,RD,moe=class extends gD{constructor(){super(),sr(this,Lt),sr(this,wg),sr(this,Cg,!1),sr(this,Dg,{}),sr(this,Ro,!0),sr(this,Pg,new Cae(this,"hotkeys")),sr(this,sc,{...xD,onCloseErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&Ht(this,Lt,OS).call(this,{isDialogOpen:!1})},onFocusInErrorDialog:t=>{var e;((e=t.composedPath()[0])==null?void 0:e.localName)==="media-error-dialog"&&(r5(this,ov.activeElement)||t.preventDefault())}}),is(this,wg,ix()),this.attachShadow({mode:"open"}),Ht(this,Lt,f5).call(this),this.isConnected&&Ht(this,Lt,oa).call(this)}static get NAME(){return AD}static get VERSION(){return _D}static get observedAttributes(){var t;return[...(t=gD.observedAttributes)!=null?t:[],...doe,...coe,...hoe]}get mediaTheme(){var t;return(t=this.shadowRoot)==null?void 0:t.querySelector("media-theme")}get mediaController(){var t,e;return(e=(t=this.mediaTheme)==null?void 0:t.shadowRoot)==null?void 0:e.querySelector("media-controller")}connectedCallback(){let t=this.media;t&&(t.metadata=SD(this))}attributeChangedCallback(t,e,i){switch(Ht(this,Lt,oa).call(this),super.attributeChangedCallback(t,e,i),t){case Q.HOTKEYS:Ke(this,Pg).value=i;break;case Q.THUMBNAIL_TIME:{i!=null&&this.tokens.thumbnail&&Ts(ue("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time.").toString());break}case Q.THUMBNAIL_TOKEN:{if(i){let n=Xu(i);if(n){let{aud:r}=n,s=ph.THUMBNAIL;r!==s&&Ts(ue("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:s,tokenNamePrefix:"thumbnail"}))}}break}case Q.STORYBOARD_TOKEN:{if(i){let n=Xu(i);if(n){let{aud:r}=n,s=ph.STORYBOARD;r!==s&&Ts(ue("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:s,tokenNamePrefix:"storyboard"}))}}break}case Q.DRM_TOKEN:{if(i){let n=Xu(i);if(n){let{aud:r}=n,s=ph.DRM;r!==s&&Ts(ue("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:r,expectedAud:s,tokenNamePrefix:"drm"}))}}break}case N.PLAYBACK_ID:{i!=null&&i.includes("?token")&&On(ue("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:i}));break}case N.STREAM_TYPE:{i&&![He.LIVE,He.ON_DEMAND,He.UNKNOWN].includes(i)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=i.includes("dvr")?Number.POSITIVE_INFINITY:0:l5({file:"invalid-stream-type.md",message:ue("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):i===He.LIVE?this.getAttribute(Q.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN;break}case Q.FULLSCREEN_ELEMENT:{if(i!=null||i!==e){let n=ov.getElementById(i),r=n==null?void 0:n.querySelector("mux-player");this.mediaController&&n&&r&&(this.mediaController.fullscreenElement=n)}break}}[N.PLAYBACK_ID,ms.SRC,Q.PLAYBACK_TOKEN].includes(t)&&e!==i&&is(this,sc,{...Ke(this,sc),...xD}),Ht(this,Lt,wo).call(this,{[wae(t)]:i})}async requestFullscreen(t){var e;if(!(!this.mediaController||this.mediaController.hasAttribute(k.MEDIA_IS_FULLSCREEN)))return(e=this.mediaController)==null||e.dispatchEvent(new Kr.CustomEvent(ee.MEDIA_ENTER_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((i,n)=>{var r;(r=this.mediaController)==null||r.addEventListener(Vs.MEDIA_IS_FULLSCREEN,()=>i(),{once:!0})})}async exitFullscreen(){var t;if(!(!this.mediaController||!this.mediaController.hasAttribute(k.MEDIA_IS_FULLSCREEN)))return(t=this.mediaController)==null||t.dispatchEvent(new Kr.CustomEvent(ee.MEDIA_EXIT_FULLSCREEN_REQUEST,{composed:!0,bubbles:!0})),new Promise((e,i)=>{var n;(n=this.mediaController)==null||n.addEventListener(Vs.MEDIA_IS_FULLSCREEN,()=>e(),{once:!0})})}get preferCmcd(){var t;return(t=this.getAttribute(N.PREFER_CMCD))!=null?t:void 0}set preferCmcd(t){t!==this.preferCmcd&&(t?M0.includes(t)?this.setAttribute(N.PREFER_CMCD,t):Ts(`Invalid value for preferCmcd. Must be one of ${M0.join()}`):this.removeAttribute(N.PREFER_CMCD))}get hasPlayed(){var t,e;return(e=(t=this.mediaController)==null?void 0:t.hasAttribute(k.MEDIA_HAS_PLAYED))!=null?e:!1}get inLiveWindow(){var t;return(t=this.mediaController)==null?void 0:t.hasAttribute(k.MEDIA_TIME_IS_LIVE)}get _hls(){var t;return(t=this.media)==null?void 0:t._hls}get mux(){var t;return(t=this.media)==null?void 0:t.mux}get theme(){var t;return(t=this.getAttribute(Q.THEME))!=null?t:soe}set theme(t){this.setAttribute(Q.THEME,`${t}`)}get themeProps(){let t=this.mediaTheme;if(!t)return;let e={};for(let i of t.getAttributeNames()){if(PS.includes(i))continue;let n=t.getAttribute(i);e[i5(i)]=n===""?!0:n}return e}set themeProps(t){var e,i;Ht(this,Lt,oa).call(this);let n={...this.themeProps,...t};for(let r in n){if(PS.includes(r))continue;let s=t==null?void 0:t[r];typeof s=="boolean"||s==null?(e=this.mediaTheme)==null||e.toggleAttribute(CS(r),!!s):(i=this.mediaTheme)==null||i.setAttribute(CS(r),s)}}get playbackId(){var t;return(t=this.getAttribute(N.PLAYBACK_ID))!=null?t:void 0}set playbackId(t){t?this.setAttribute(N.PLAYBACK_ID,t):this.removeAttribute(N.PLAYBACK_ID)}get src(){var t,e;return this.playbackId?(t=mo(this,ms.SRC))!=null?t:void 0:(e=this.getAttribute(ms.SRC))!=null?e:void 0}set src(t){t?this.setAttribute(ms.SRC,t):this.removeAttribute(ms.SRC)}get poster(){var t;let e=this.getAttribute(ms.POSTER);if(e!=null)return e;let{tokens:i}=this;if(i.playback&&!i.thumbnail){Ts("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return Iae(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(t=this.thumbnailTime)!=null?t:this.startTime,programTime:this.programStartTime,token:i.thumbnail})}set poster(t){t||t===""?this.setAttribute(ms.POSTER,t):this.removeAttribute(ms.POSTER)}get storyboardSrc(){var t;return(t=this.getAttribute(Q.STORYBOARD_SRC))!=null?t:void 0}set storyboardSrc(t){t?this.setAttribute(Q.STORYBOARD_SRC,t):this.removeAttribute(Q.STORYBOARD_SRC)}get storyboard(){let{tokens:t}=this;if(this.storyboardSrc&&!t.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[He.LIVE,He.UNKNOWN].includes(this.streamType)||t.playback&&!t.storyboard))return Lae(this.playbackId,{customDomain:this.customDomain,token:t.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(Q.AUDIO)}set audio(t){if(!t){this.removeAttribute(Q.AUDIO);return}this.setAttribute(Q.AUDIO,"")}get hotkeys(){return Ke(this,Pg)}get nohotkeys(){return this.hasAttribute(Q.NOHOTKEYS)}set nohotkeys(t){if(!t){this.removeAttribute(Q.NOHOTKEYS);return}this.setAttribute(Q.NOHOTKEYS,"")}get thumbnailTime(){return an(this.getAttribute(Q.THUMBNAIL_TIME))}set thumbnailTime(t){this.setAttribute(Q.THUMBNAIL_TIME,`${t}`)}get videoTitle(){var t,e;return(e=(t=this.getAttribute(Q.VIDEO_TITLE))!=null?t:this.getAttribute(Q.TITLE))!=null?e:""}set videoTitle(t){t!==this.videoTitle&&(t?this.setAttribute(Q.VIDEO_TITLE,t):this.removeAttribute(Q.VIDEO_TITLE))}get placeholder(){var t;return(t=mo(this,Q.PLACEHOLDER))!=null?t:""}set placeholder(t){this.setAttribute(Q.PLACEHOLDER,`${t}`)}get primaryColor(){var t,e;let i=this.getAttribute(Q.PRIMARY_COLOR);if(i!=null||this.mediaTheme&&(i=(e=(t=Kr.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_primary-color"))==null?void 0:e.trim(),i))return i}set primaryColor(t){this.setAttribute(Q.PRIMARY_COLOR,`${t}`)}get secondaryColor(){var t,e;let i=this.getAttribute(Q.SECONDARY_COLOR);if(i!=null||this.mediaTheme&&(i=(e=(t=Kr.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_secondary-color"))==null?void 0:e.trim(),i))return i}set secondaryColor(t){this.setAttribute(Q.SECONDARY_COLOR,`${t}`)}get accentColor(){var t,e;let i=this.getAttribute(Q.ACCENT_COLOR);if(i!=null||this.mediaTheme&&(i=(e=(t=Kr.getComputedStyle(this.mediaTheme))==null?void 0:t.getPropertyValue("--_accent-color"))==null?void 0:e.trim(),i))return i}set accentColor(t){this.setAttribute(Q.ACCENT_COLOR,`${t}`)}get defaultShowRemainingTime(){return this.hasAttribute(Q.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(t){t?this.setAttribute(Q.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(Q.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(Q.PLAYBACK_RATES))return this.getAttribute(Q.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(t=>Number(t)).filter(t=>!Number.isNaN(t)).sort((t,e)=>t-e)}set playbackRates(t){if(!t){this.removeAttribute(Q.PLAYBACK_RATES);return}this.setAttribute(Q.PLAYBACK_RATES,t.join(" "))}get forwardSeekOffset(){var t;return(t=an(this.getAttribute(Q.FORWARD_SEEK_OFFSET)))!=null?t:10}set forwardSeekOffset(t){this.setAttribute(Q.FORWARD_SEEK_OFFSET,`${t}`)}get backwardSeekOffset(){var t;return(t=an(this.getAttribute(Q.BACKWARD_SEEK_OFFSET)))!=null?t:10}set backwardSeekOffset(t){this.setAttribute(Q.BACKWARD_SEEK_OFFSET,`${t}`)}get defaultHiddenCaptions(){return this.hasAttribute(Q.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(t){t?this.setAttribute(Q.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(Q.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return an(this.getAttribute(Q.DEFAULT_DURATION))}set defaultDuration(t){t==null?this.removeAttribute(Q.DEFAULT_DURATION):this.setAttribute(Q.DEFAULT_DURATION,`${t}`)}get playerInitTime(){return this.hasAttribute(N.PLAYER_INIT_TIME)?an(this.getAttribute(N.PLAYER_INIT_TIME)):Ke(this,wg)}set playerInitTime(t){t!=this.playerInitTime&&(t==null?this.removeAttribute(N.PLAYER_INIT_TIME):this.setAttribute(N.PLAYER_INIT_TIME,`${+t}`))}get playerSoftwareName(){var t;return(t=this.getAttribute(N.PLAYER_SOFTWARE_NAME))!=null?t:AD}get playerSoftwareVersion(){var t;return(t=this.getAttribute(N.PLAYER_SOFTWARE_VERSION))!=null?t:_D}get beaconCollectionDomain(){var t;return(t=this.getAttribute(N.BEACON_COLLECTION_DOMAIN))!=null?t:void 0}set beaconCollectionDomain(t){t!==this.beaconCollectionDomain&&(t?this.setAttribute(N.BEACON_COLLECTION_DOMAIN,t):this.removeAttribute(N.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var t;return(t=this.getAttribute(N.MAX_RESOLUTION))!=null?t:void 0}set maxResolution(t){t!==this.maxResolution&&(t?this.setAttribute(N.MAX_RESOLUTION,t):this.removeAttribute(N.MAX_RESOLUTION))}get minResolution(){var t;return(t=this.getAttribute(N.MIN_RESOLUTION))!=null?t:void 0}set minResolution(t){t!==this.minResolution&&(t?this.setAttribute(N.MIN_RESOLUTION,t):this.removeAttribute(N.MIN_RESOLUTION))}get renditionOrder(){var t;return(t=this.getAttribute(N.RENDITION_ORDER))!=null?t:void 0}set renditionOrder(t){t!==this.renditionOrder&&(t?this.setAttribute(N.RENDITION_ORDER,t):this.removeAttribute(N.RENDITION_ORDER))}get programStartTime(){return an(this.getAttribute(N.PROGRAM_START_TIME))}set programStartTime(t){t==null?this.removeAttribute(N.PROGRAM_START_TIME):this.setAttribute(N.PROGRAM_START_TIME,`${t}`)}get programEndTime(){return an(this.getAttribute(N.PROGRAM_END_TIME))}set programEndTime(t){t==null?this.removeAttribute(N.PROGRAM_END_TIME):this.setAttribute(N.PROGRAM_END_TIME,`${t}`)}get assetStartTime(){return an(this.getAttribute(N.ASSET_START_TIME))}set assetStartTime(t){t==null?this.removeAttribute(N.ASSET_START_TIME):this.setAttribute(N.ASSET_START_TIME,`${t}`)}get assetEndTime(){return an(this.getAttribute(N.ASSET_END_TIME))}set assetEndTime(t){t==null?this.removeAttribute(N.ASSET_END_TIME):this.setAttribute(N.ASSET_END_TIME,`${t}`)}get extraSourceParams(){return this.hasAttribute(Q.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(Q.EXTRA_SOURCE_PARAMS)).entries()].reduce((t,[e,i])=>(t[e]=i,t),{}):foe}set extraSourceParams(t){t==null?this.removeAttribute(Q.EXTRA_SOURCE_PARAMS):this.setAttribute(Q.EXTRA_SOURCE_PARAMS,new URLSearchParams(t).toString())}get customDomain(){var t;return(t=this.getAttribute(N.CUSTOM_DOMAIN))!=null?t:void 0}set customDomain(t){t!==this.customDomain&&(t?this.setAttribute(N.CUSTOM_DOMAIN,t):this.removeAttribute(N.CUSTOM_DOMAIN))}get envKey(){var t;return(t=mo(this,N.ENV_KEY))!=null?t:void 0}set envKey(t){this.setAttribute(N.ENV_KEY,`${t}`)}get noVolumePref(){return this.hasAttribute(Q.NO_VOLUME_PREF)}set noVolumePref(t){t?this.setAttribute(Q.NO_VOLUME_PREF,""):this.removeAttribute(Q.NO_VOLUME_PREF)}get noMutedPref(){return this.hasAttribute(Q.NO_MUTED_PREF)}set noMutedPref(t){t?this.setAttribute(Q.NO_MUTED_PREF,""):this.removeAttribute(Q.NO_MUTED_PREF)}get debug(){return mo(this,N.DEBUG)!=null}set debug(t){t?this.setAttribute(N.DEBUG,""):this.removeAttribute(N.DEBUG)}get disableTracking(){return mo(this,N.DISABLE_TRACKING)!=null}set disableTracking(t){this.toggleAttribute(N.DISABLE_TRACKING,!!t)}get disableCookies(){return mo(this,N.DISABLE_COOKIES)!=null}set disableCookies(t){t?this.setAttribute(N.DISABLE_COOKIES,""):this.removeAttribute(N.DISABLE_COOKIES)}get streamType(){var t,e,i;return(i=(e=this.getAttribute(N.STREAM_TYPE))!=null?e:(t=this.media)==null?void 0:t.streamType)!=null?i:He.UNKNOWN}set streamType(t){this.setAttribute(N.STREAM_TYPE,`${t}`)}get defaultStreamType(){var t,e,i;return(i=(e=this.getAttribute(Q.DEFAULT_STREAM_TYPE))!=null?e:(t=this.mediaController)==null?void 0:t.getAttribute(Q.DEFAULT_STREAM_TYPE))!=null?i:He.ON_DEMAND}set defaultStreamType(t){t?this.setAttribute(Q.DEFAULT_STREAM_TYPE,t):this.removeAttribute(Q.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var t,e;return this.hasAttribute(Q.TARGET_LIVE_WINDOW)?+this.getAttribute(Q.TARGET_LIVE_WINDOW):(e=(t=this.media)==null?void 0:t.targetLiveWindow)!=null?e:Number.NaN}set targetLiveWindow(t){t==this.targetLiveWindow||Number.isNaN(t)&&Number.isNaN(this.targetLiveWindow)||(t==null?this.removeAttribute(Q.TARGET_LIVE_WINDOW):this.setAttribute(Q.TARGET_LIVE_WINDOW,`${+t}`))}get liveEdgeStart(){var t;return(t=this.media)==null?void 0:t.liveEdgeStart}get startTime(){return an(mo(this,N.START_TIME))}set startTime(t){this.setAttribute(N.START_TIME,`${t}`)}get preferPlayback(){let t=this.getAttribute(N.PREFER_PLAYBACK);if(t===Yr.MSE||t===Yr.NATIVE)return t}set preferPlayback(t){t!==this.preferPlayback&&(t===Yr.MSE||t===Yr.NATIVE?this.setAttribute(N.PREFER_PLAYBACK,t):this.removeAttribute(N.PREFER_PLAYBACK))}get metadata(){var t;return(t=this.media)==null?void 0:t.metadata}set metadata(t){if(Ht(this,Lt,oa).call(this),!this.media){On("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={...SD(this),...t}}get _hlsConfig(){var t;return(t=this.media)==null?void 0:t._hlsConfig}set _hlsConfig(t){if(Ht(this,Lt,oa).call(this),!this.media){On("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=t}async addCuePoints(t){var e;if(Ht(this,Lt,oa).call(this),!this.media){On("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(e=this.media)==null?void 0:e.addCuePoints(t)}get activeCuePoint(){var t;return(t=this.media)==null?void 0:t.activeCuePoint}get cuePoints(){var t,e;return(e=(t=this.media)==null?void 0:t.cuePoints)!=null?e:[]}addChapters(t){var e;if(Ht(this,Lt,oa).call(this),!this.media){On("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(e=this.media)==null?void 0:e.addChapters(t)}get activeChapter(){var t;return(t=this.media)==null?void 0:t.activeChapter}get chapters(){var t,e;return(e=(t=this.media)==null?void 0:t.chapters)!=null?e:[]}getStartDate(){var t;return(t=this.media)==null?void 0:t.getStartDate()}get currentPdt(){var t;return(t=this.media)==null?void 0:t.currentPdt}get tokens(){let t=this.getAttribute(Q.PLAYBACK_TOKEN),e=this.getAttribute(Q.DRM_TOKEN),i=this.getAttribute(Q.THUMBNAIL_TOKEN),n=this.getAttribute(Q.STORYBOARD_TOKEN);return{...Ke(this,Dg),...t!=null?{playback:t}:{},...e!=null?{drm:e}:{},...i!=null?{thumbnail:i}:{},...n!=null?{storyboard:n}:{}}}set tokens(t){is(this,Dg,t??{})}get playbackToken(){var t;return(t=this.getAttribute(Q.PLAYBACK_TOKEN))!=null?t:void 0}set playbackToken(t){this.setAttribute(Q.PLAYBACK_TOKEN,`${t}`)}get drmToken(){var t;return(t=this.getAttribute(Q.DRM_TOKEN))!=null?t:void 0}set drmToken(t){this.setAttribute(Q.DRM_TOKEN,`${t}`)}get thumbnailToken(){var t;return(t=this.getAttribute(Q.THUMBNAIL_TOKEN))!=null?t:void 0}set thumbnailToken(t){this.setAttribute(Q.THUMBNAIL_TOKEN,`${t}`)}get storyboardToken(){var t;return(t=this.getAttribute(Q.STORYBOARD_TOKEN))!=null?t:void 0}set storyboardToken(t){this.setAttribute(Q.STORYBOARD_TOKEN,`${t}`)}addTextTrack(t,e,i,n){var r;let s=(r=this.media)==null?void 0:r.nativeEl;if(s)return ZA(s,t,e,i,n)}removeTextTrack(t){var e;let i=(e=this.media)==null?void 0:e.nativeEl;if(i)return Wee(i,t)}get textTracks(){var t;return(t=this.media)==null?void 0:t.textTracks}get castReceiver(){var t;return(t=this.getAttribute(Q.CAST_RECEIVER))!=null?t:void 0}set castReceiver(t){t!==this.castReceiver&&(t?this.setAttribute(Q.CAST_RECEIVER,t):this.removeAttribute(Q.CAST_RECEIVER))}get castCustomData(){var t;return(t=this.media)==null?void 0:t.castCustomData}set castCustomData(t){if(!this.media){On("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=t}get noTooltips(){return this.hasAttribute(Q.NO_TOOLTIPS)}set noTooltips(t){if(!t){this.removeAttribute(Q.NO_TOOLTIPS);return}this.setAttribute(Q.NO_TOOLTIPS,"")}get proudlyDisplayMuxBadge(){return this.hasAttribute(Q.PROUDLY_DISPLAY_MUX_BADGE)}set proudlyDisplayMuxBadge(t){t?this.setAttribute(Q.PROUDLY_DISPLAY_MUX_BADGE,""):this.removeAttribute(Q.PROUDLY_DISPLAY_MUX_BADGE)}};wg=new WeakMap,Cg=new WeakMap,Dg=new WeakMap,Ro=new WeakMap,Pg=new WeakMap,sc=new WeakMap,Lt=new WeakSet,oa=function(){var t,e,i,n;if(!Ke(this,Cg)){is(this,Cg,!0),Ht(this,Lt,wo).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Kr.HTMLElement))throw""}catch{On("<media-theme> failed to upgrade!")}try{customElements.upgrade(this.media)}catch{On("underlying media element failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof One))throw""}catch{On("<media-controller> failed to upgrade!")}Ht(this,Lt,kD).call(this),Ht(this,Lt,ID).call(this),Ht(this,Lt,LD).call(this),is(this,Ro,(e=(t=this.mediaController)==null?void 0:t.hasAttribute(ce.USER_INACTIVE))!=null?e:!0),Ht(this,Lt,RD).call(this),(i=this.media)==null||i.addEventListener("streamtypechange",()=>Ht(this,Lt,wo).call(this)),(n=this.media)==null||n.addEventListener("loadstart",()=>Ht(this,Lt,wo).call(this))}},f5=function(){var t,e;try{(t=window==null?void 0:window.CSS)==null||t.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window==null?void 0:window.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},OS=function(t){Object.assign(Ke(this,sc),t),Ht(this,Lt,wo).call(this)},wo=function(t={}){Yae(zae(aoe(this,{...Ke(this,sc),...t})),this.shadowRoot)},kD=function(){let t=e=>{var i,n;if(!(e!=null&&e.startsWith("theme-")))return;let r=e.replace(/^theme-/,"");if(PS.includes(r))return;let s=this.getAttribute(e);s!=null?(i=this.mediaTheme)==null||i.setAttribute(r,s):(n=this.mediaTheme)==null||n.removeAttribute(r)};new MutationObserver(e=>{for(let{attributeName:i}of e)t(i)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(t)},ID=function(){let t=e=>{var i;let n=(i=this.media)==null?void 0:i.error;if(!(n instanceof ie)){let{message:s,code:a}=n??{};n=new ie(s,a)}if(!(n!=null&&n.fatal)){Ts(n),n.data&&Ts(`${n.name} data:`,n.data);return}let r=ED(n);r.message&&l5(r),On(n),n.data&&On(`${n.name} data:`,n.data),Ht(this,Lt,OS).call(this,{isDialogOpen:!0})};this.addEventListener("error",t),this.media&&(this.media.errorTranslator=(e={})=>{var i,n,r;if(!(((i=this.media)==null?void 0:i.error)instanceof ie))return e;let s=ED((n=this.media)==null?void 0:n.error);return{player_error_code:(r=this.media)==null?void 0:r.error.code,player_error_message:s.message?String(s.message):e.player_error_message,player_error_context:s.context?String(s.context):e.player_error_context}})},LD=function(){var t,e,i,n;let r=()=>Ht(this,Lt,wo).call(this);(e=(t=this.media)==null?void 0:t.textTracks)==null||e.addEventListener("addtrack",r),(n=(i=this.media)==null?void 0:i.textTracks)==null||n.addEventListener("removetrack",r)},RD=function(){var t,e;if(!/Firefox/i.test(navigator.userAgent))return;let i,n=new WeakMap,r=()=>this.streamType===He.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,s=(l,u,c=!1)=>{r()||Array.from(l&&l.activeCues||[]).forEach(d=>{if(!(!d.snapToLines||d.line<-5||d.line>=0&&d.line<10))if(!u||this.paused){let h=d.text.split(`
`).length,f=-3;this.streamType===He.LIVE&&(f=-2);let m=f-h;if(d.line===m&&!c)return;n.has(d)||n.set(d,d.line),d.line=m}else setTimeout(()=>{d.line=n.get(d)||"auto"},500)})},a=()=>{var l,u;s(i,(u=(l=this.mediaController)==null?void 0:l.hasAttribute(ce.USER_INACTIVE))!=null?u:!1)},o=()=>{var l,u;let c=Array.from(((u=(l=this.mediaController)==null?void 0:l.media)==null?void 0:u.textTracks)||[]).filter(d=>["subtitles","captions"].includes(d.kind)&&d.mode==="showing")[0];c!==i&&(i==null||i.removeEventListener("cuechange",a)),i=c,i==null||i.addEventListener("cuechange",a),s(i,Ke(this,Ro))};o(),(t=this.textTracks)==null||t.addEventListener("change",o),(e=this.textTracks)==null||e.addEventListener("addtrack",o),this.addEventListener("userinactivechange",()=>{var l,u;let c=(u=(l=this.mediaController)==null?void 0:l.hasAttribute(ce.USER_INACTIVE))!=null?u:!0;Ke(this,Ro)!==c&&(is(this,Ro,c),s(i,Ke(this,Ro)))})};function mo(t,e){return t.media?t.media.getAttribute(e):t.getAttribute(e)}var wD=moe,m5=t=>{throw TypeError(t)},p5=(t,e,i)=>e.has(t)||m5("Cannot "+i),poe=(t,e,i)=>(p5(t,e,"read from private field"),i?i.call(t):e.get(t)),goe=(t,e,i)=>e.has(t)?m5("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,i),voe=(t,e,i,n)=>(p5(t,e,"write to private field"),n?n.call(t,i):e.set(t,i),i),_y=class{addEventListener(){}removeEventListener(){}dispatchEvent(t){return!0}};if(typeof DocumentFragment>"u"){class t extends _y{}globalThis.DocumentFragment=t}var vk=class extends _y{},yoe=class extends _y{},Eoe={get(t){},define(t,e,i){},getName(t){return null},upgrade(t){},whenDefined(t){return Promise.resolve(vk)}},Og,Toe=class{constructor(t,e={}){goe(this,Og),voe(this,Og,e==null?void 0:e.detail)}get detail(){return poe(this,Og)}initCustomEvent(){}};Og=new WeakMap;function boe(t,e){return new vk}var Soe={document:{createElement:boe},DocumentFragment,customElements:Eoe,CustomEvent:Toe,EventTarget:_y,HTMLElement:vk,HTMLVideoElement:yoe},_oe=typeof window>"u"||typeof globalThis.customElements>"u",hT=_oe?Soe:globalThis;hT.customElements.get("mux-player")||(hT.customElements.define("mux-player",wD),hT.MuxPlayerElement=wD);var g5=parseInt(ai.version)>=19,CD={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},Aoe=t=>t==null,xoe=(t,e)=>Aoe(e)?!1:t in e,koe=t=>t.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),Ioe=(t,e)=>{if(!(!g5&&typeof e=="boolean"&&!e)){if(xoe(t,CD))return CD[t];if(typeof e<"u")return/[A-Z]/.test(t)?koe(t):t}},Loe=(t,e)=>!g5&&typeof t=="boolean"?"":t,Roe=(t={})=>{let{ref:e,...i}=t;return Object.entries(i).reduce((n,[r,s])=>{let a=Ioe(r,s);if(!a)return n;let o=Loe(s);return n[a]=o,n},{})};function DD(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function woe(...t){return e=>{let i=!1,n=t.map(r=>{let s=DD(r,e);return!i&&typeof s=="function"&&(i=!0),s});if(i)return()=>{for(let r=0;r<n.length;r++){let s=n[r];typeof s=="function"?s():DD(t[r],null)}}}}function Coe(...t){return G.useCallback(woe(...t),t)}var Doe=Object.prototype.hasOwnProperty,Poe=(t,e)=>{if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(Array.isArray(t))return!Array.isArray(e)||t.length!==e.length?!1:t.some((r,s)=>e[s]===r);let i=Object.keys(t),n=Object.keys(e);if(i.length!==n.length)return!1;for(let r=0;r<i.length;r++)if(!Doe.call(e,i[r])||!Object.is(t[i[r]],e[i[r]]))return!1;return!0},v5=(t,e,i)=>!Poe(e,t[i]),Ooe=(t,e,i)=>{t[i]=e},Moe=(t,e,i,n=Ooe,r=v5)=>G.useEffect(()=>{let s=i==null?void 0:i.current;s&&r(s,e,t)&&n(s,e,t)},[i==null?void 0:i.current,e]),_r=Moe,Noe=()=>{try{return"3.9.0"}catch{}return"UNKNOWN"},$oe=Noe(),Foe=()=>$oe,lt=(t,e,i)=>G.useEffect(()=>{let n=e==null?void 0:e.current;if(!n||!i)return;let r=t,s=i;return n.addEventListener(r,s),()=>{n.removeEventListener(r,s)}},[e==null?void 0:e.current,i,t]),Uoe=ai.forwardRef(({children:t,...e},i)=>ai.createElement("mux-player",{suppressHydrationWarning:!0,...Roe(e),ref:i},t)),Boe=(t,e)=>{let{onAbort:i,onCanPlay:n,onCanPlayThrough:r,onEmptied:s,onLoadStart:a,onLoadedData:o,onLoadedMetadata:l,onProgress:u,onDurationChange:c,onVolumeChange:d,onRateChange:h,onResize:f,onWaiting:m,onPlay:p,onPlaying:y,onTimeUpdate:g,onPause:v,onSeeking:E,onSeeked:T,onStalled:_,onSuspend:x,onEnded:A,onError:I,onCuePointChange:L,onChapterChange:b,metadata:R,tokens:P,paused:w,playbackId:$,playbackRates:B,currentTime:U,themeProps:V,extraSourceParams:C,castCustomData:K,_hlsConfig:z,...H}=e;return _r("tokens",P,t),_r("playbackId",$,t),_r("playbackRates",B,t),_r("metadata",R,t),_r("extraSourceParams",C,t),_r("_hlsConfig",z,t),_r("themeProps",V,t),_r("castCustomData",K,t),_r("paused",w,t,(Y,oe)=>{oe!=null&&(oe?Y.pause():Y.play())},(Y,oe,pe)=>Y.hasAttribute("autoplay")&&!Y.hasPlayed?!1:v5(Y,oe,pe)),_r("currentTime",U,t,(Y,oe)=>{oe!=null&&(Y.currentTime=oe)}),lt("abort",t,i),lt("canplay",t,n),lt("canplaythrough",t,r),lt("emptied",t,s),lt("loadstart",t,a),lt("loadeddata",t,o),lt("loadedmetadata",t,l),lt("progress",t,u),lt("durationchange",t,c),lt("volumechange",t,d),lt("ratechange",t,h),lt("resize",t,f),lt("waiting",t,m),lt("play",t,p),lt("playing",t,y),lt("timeupdate",t,g),lt("pause",t,v),lt("seeking",t,E),lt("seeked",t,T),lt("stalled",t,_),lt("suspend",t,x),lt("ended",t,A),lt("error",t,I),lt("cuepointchange",t,L),lt("chapterchange",t,b),[H]},Voe=Foe(),Hoe="mux-player-react",Koe=ai.forwardRef((t,e)=>{var i;let n=G.useRef(null),r=Coe(n,e),[s]=Boe(n,t),[a]=G.useState((i=t.playerInitTime)!=null?i:ix());return ai.createElement(Uoe,{ref:r,defaultHiddenCaptions:t.defaultHiddenCaptions,playerSoftwareName:Hoe,playerSoftwareVersion:Voe,playerInitTime:a,...s})}),Goe=Koe;const Woe=()=>{const{t}=vl(),e=G.useRef(null),[i,n]=G.useState(!0),r=()=>{const s=e.current;s&&(s.volume=.8,s.muted=!1,s.play(),n(!1))};return q.jsxs(Qv,{sectionName:"music",children:[q.jsx("h2",{className:"section__title",children:t("music.title")}),q.jsx("br",{}),q.jsxs("div",{className:"video-viewport",children:[i&&q.jsx("button",{className:"unmute-overlay",onClick:r,children:"Click to play "}),q.jsx(Goe,{ref:e,playbackId:"THOaoITPqwRE01eluqYK5O02B79601myxS02JQA5S00CqNxo",streamType:"on-demand",autoPlay:!1,muted:!1,loop:!0,playsInline:!0})]})]})};function joe(t){return Nf({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M8.2 275.4c0-8.6 3.4-17.401 10-24.001 13.2-13.2 34.8-13.2 48 0l451.8 451.8 445.2-445.2c13.2-13.2 34.8-13.2 48 0s13.2 34.8 0 48L542 775.399c-13.2 13.2-34.8 13.2-48 0l-475.8-475.8c-6.8-6.8-10-15.4-10-24.199z"},child:[]}]})(t)}function Yoe(t){return Nf({tag:"svg",attr:{viewBox:"0 0 1024 1024"},child:[{tag:"path",attr:{d:"M8.2 751.4c0 8.6 3.4 17.401 10 24.001 13.2 13.2 34.8 13.2 48 0l451.8-451.8 445.2 445.2c13.2 13.2 34.8 13.2 48 0s13.2-34.8 0-48L542 251.401c-13.2-13.2-34.8-13.2-48 0l-475.8 475.8c-6.8 6.8-10 15.4-10 24.2z"},child:[]}]})(t)}const y5=({gigs:t,emptyText:e="Inga gigs fr tillfllet"})=>{const{t:i}=vl(),n=e??i("live.empty");return!t||t.length===0?q.jsx("div",{className:"live__empty",children:n}):q.jsx("ul",{className:"live__list",children:t.map((r,s)=>q.jsxs("li",{className:"live__item",children:[q.jsx("span",{className:"live__date",children:r.date}),q.jsx("span",{className:"live__venue",children:r.venue})]},s))})},qoe={collapsed:{height:0,opacity:0},open:{height:"auto",opacity:1}},zoe=({gigs:t,title:e="Tidigare spelningar",defaultOpen:i=!1})=>{const[n,r]=G.useState(i);return t.length?q.jsxs("div",{className:"past-gigs",children:[q.jsxs("button",{type:"button",className:"past-gigs__toggle",onClick:()=>r(s=>!s),children:[q.jsx("span",{children:e}),n?q.jsx(Yoe,{}):q.jsx(joe,{})]}),q.jsx(cA,{initial:!1,children:n&&q.jsx(Wh.div,{className:"past-gigs__content",initial:"collapsed",animate:"open",exit:"collapsed",variants:qoe,transition:{duration:.25,ease:"easeInOut"},children:q.jsx(y5,{gigs:t})},"content")})]}):null},Qoe=[{date:"2025-10-11",city:"Kalmar",venue:"Oktoberfest p Stens"},{date:"2025-10-11",city:"Kalmar",venue:"Waldorfskolan"},{date:"2025-09",city:"Malm",venue:"Sallys i Folkets Park"},{date:"2025-05",city:"Malm",venue:"Sallys i Folkets Park"},{date:"2025",city:"Malm",venue:"Pizzeria Special"},{date:"2025",city:"Malm",venue:"Brogatan"},{date:"2024-09",city:"Malm",venue:"NGBG Festival"},{date:"2024-06-24",city:"land",venue:"land Roots"},{date:"2024-06-23",city:"Kalmar",venue:"Sderport"},{date:"2024-05-25",city:"Malm",venue:"Pizzeria Special"},{date:"2024-05-03",city:"Malm",venue:"Sallys Caf"},{date:"2024",city:"Malm",venue:"Mssingshornet med Weekend Cowboys"},{date:"2024",city:"Malm",venue:"Sdragarn  100-rsjubileum"},{date:"2024",city:"Malm",venue:"Bl Bten  40-rsfest (privat)"},{date:"2024",city:"Malm",venue:"Examensfest"},{date:"2024",city:"Malm",venue:"Folkl & DunkaDunka"},{date:"2024",city:"Malm",venue:"Pizzeria Special"}];function Xoe(){const t={display:"inline-flex",alignItems:"center",justifyContent:"center",marginRight:"1rem",transition:"transform 0.2s ease"};return q.jsxs("div",{className:"allinks",children:[q.jsx("a",{href:"https://www.instagram.com/totesband/",target:"_blank",rel:"noopener noreferrer",title:"Flj oss p Instagram",style:t,className:"hover:scale-110",children:q.jsx(rY,{color:"#E4405F"})}),q.jsx("a",{href:"https://www.youtube.com/@OfficiallyTotes",target:"_blank",rel:"noopener noreferrer",title:"Prenumerera p YouTube",style:t,className:"hover:scale-110",children:q.jsx(sY,{color:"#FF0000"})})]})}const E5=()=>{const{t}=vl();return q.jsxs("div",{className:"bookus",children:[q.jsx("p",{className:"bookus__text",children:t("live.bookUs")}),q.jsxs("p",{className:"bookus__mail",children:[q.jsx("a",{href:"mailto:ittakestotes@gmail.com",children:"ittakestotes@gmail.com"}),q.jsx("br",{})," ",t("common.orSocials")]}),q.jsx(Xoe,{})]})},fT=[],Zoe=({isMobile:t})=>{const{t:e}=vl();return q.jsxs(Qv,{sectionName:"live",children:[q.jsx("h2",{className:"section__title",children:e("live.title")}),!t&&q.jsx("img",{src:yN,alt:"Band",className:"live__image live__image--desktop"}),q.jsxs("div",{className:"live__content",children:[fT&&fT.length>0?q.jsx(y5,{gigs:fT}):q.jsxs("div",{className:"live__empty",children:[q.jsx("h4",{children:e("live.empty")}),q.jsx("p",{children:e("live.moreSoon")})]}),!t&&q.jsx("hr",{className:"live__divider"}),q.jsx(zoe,{gigs:Qoe,title:e("pastGigs.title")}),!t&&q.jsx("hr",{className:"live__divider"}),t&&q.jsx("img",{src:vN,alt:"Band",className:"live__image live__image--mobile"}),q.jsx(E5,{})]})]})},PD="/assets/totesorig-CTgXwh-K.jpg",Joe=({isMobile:t})=>{const{t:e}=vl();return q.jsxs(Qv,{sectionName:"about",children:[q.jsx("h2",{className:"section__title",children:e("info.title")}),q.jsxs("div",{className:"container flex__col flex__col--mobile-row",children:[q.jsxs("div",{className:"about__presstext",children:[q.jsx("p",{children:e("info.p1")}),q.jsx("div",{className:"about__presstext--long",children:q.jsx("p",{children:e("info.p2")})}),q.jsx(E5,{})]}),!t&&q.jsx("img",{src:PD,alt:"Band",className:""})]}),t&&q.jsx("img",{src:PD,alt:"Band",className:""})]})},ele=()=>{const t=QB("(max-width: 767px)"),[e,i]=G.useState(!t);return q.jsxs(q.Fragment,{children:[q.jsx(d1,{children:q.jsx("title",{children:"Totes"})}),q.jsx(uY,{isOpen:e,setIsOpen:n=>i(n),isMobile:t}),q.jsxs("main",{children:[q.jsx(dY,{isMobile:t,isMenuOpen:e}),q.jsx(Woe,{}),q.jsx(Zoe,{isMobile:t}),q.jsx(Joe,{isMobile:t})]})]})};/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lv(){return lv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},lv.apply(this,arguments)}var Ko;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ko||(Ko={}));const OD="popstate";function tle(t){t===void 0&&(t={});function e(n,r){let{pathname:s,search:a,hash:o}=n.location;return MS("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(n,r){return typeof r=="string"?r:b5(r)}return nle(e,i,null,t)}function T5(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ile(){return Math.random().toString(36).substr(2,8)}function MD(t,e){return{usr:t.state,key:t.key,idx:e}}function MS(t,e,i,n){return i===void 0&&(i=null),lv({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?S5(e):e,{state:i,key:e&&e.key||n||ile()})}function b5(t){let{pathname:e="/",search:i="",hash:n=""}=t;return i&&i!=="?"&&(e+=i.charAt(0)==="?"?i:"?"+i),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function S5(t){let e={};if(t){let i=t.indexOf("#");i>=0&&(e.hash=t.substr(i),t=t.substr(0,i));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function nle(t,e,i,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,o=Ko.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(lv({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function d(){o=Ko.Pop;let y=c(),g=y==null?null:y-u;u=y,l&&l({action:o,location:p.location,delta:g})}function h(y,g){o=Ko.Push;let v=MS(p.location,y,g);i&&i(v,y),u=c()+1;let E=MD(v,u),T=p.createHref(v);try{a.pushState(E,"",T)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(T)}s&&l&&l({action:o,location:p.location,delta:1})}function f(y,g){o=Ko.Replace;let v=MS(p.location,y,g);i&&i(v,y),u=c();let E=MD(v,u),T=p.createHref(v);a.replaceState(E,"",T),s&&l&&l({action:o,location:p.location,delta:0})}function m(y){let g=r.location.origin!=="null"?r.location.origin:r.location.href,v=typeof y=="string"?y:b5(y);return v=v.replace(/ $/,"%20"),T5(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let p={get action(){return o},get location(){return t(r,a)},listen(y){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(OD,d),l=y,()=>{r.removeEventListener(OD,d),l=null}},createHref(y){return e(r,y)},createURL:m,encodeLocation(y){let g=m(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:f,go(y){return a.go(y)}};return p}var ND;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ND||(ND={}));function rle(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let i=e.endsWith("/")?e.length-1:e.length,n=t.charAt(i);return n&&n!=="/"?null:t.slice(i)||"/"}const _5=["post","put","patch","delete"];new Set(_5);const sle=["get",..._5];new Set(sle);/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function NS(){return NS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},NS.apply(this,arguments)}const ale=G.createContext(null),A5=G.createContext(null);function ole(){return G.useContext(A5)!=null}function lle(t){let{basename:e="/",children:i=null,location:n,navigationType:r=Ko.Pop,navigator:s,static:a=!1,future:o}=t;ole()&&T5(!1);let l=e.replace(/^\/*/,"/"),u=G.useMemo(()=>({basename:l,navigator:s,static:a,future:NS({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=S5(n));let{pathname:c="/",search:d="",hash:h="",state:f=null,key:m="default"}=n,p=G.useMemo(()=>{let y=rle(c,l);return y==null?null:{location:{pathname:y,search:d,hash:h,state:f,key:m},navigationType:r}},[l,c,d,h,f,m,r]);return p==null?null:G.createElement(ale.Provider,{value:u},G.createElement(A5.Provider,{children:i,value:p}))}new Promise(()=>{});/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ule="6";try{window.__reactRouterVersion=ule}catch{}const cle="startTransition",$D=mT[cle];function dle(t){let{basename:e,children:i,future:n,window:r}=t,s=G.useRef();s.current==null&&(s.current=tle({window:r,v5Compat:!0}));let a=s.current,[o,l]=G.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=G.useCallback(d=>{u&&$D?$D(()=>l(d)):l(d)},[l,u]);return G.useLayoutEffect(()=>a.listen(c),[a,c]),G.createElement(lle,{basename:e,children:i,location:o.location,navigationType:o.action,navigator:a,future:n})}var FD;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(FD||(FD={}));var UD;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(UD||(UD={}));const hle={en:{translation:{nav:{music:"Music",live:"Live",about:"About"},music:{title:"Music"},live:{title:"Live",empty:"No gigs right now",moreSoon:"More dates coming soon  follow us on socials.",bookUs:"Want to book us?"},pastGigs:{title:"Past shows"},info:{title:"About",p1:"With strong melodies and swinging rhythms, Malm trio Totes playfully yet confidently move between rock, funk, blues and jazz.",p2:"The band consists of Svante Berg, Hannes Linnr and Gabriel Fager Ferrari. Since 2023, theyve been performing catchy pop songs with one shared goal: spread joy and get people dancing. With tasteful guitar, rumbling bass and drums at just the right tempo, Totes also serve up beautiful harmonies and a scoop of sexy saxophone."},common:{orSocials:" or DM us on socials!"},lang:{change:"Change language",english:"English",swedish:"Svenska"}}},sv:{translation:{nav:{music:"Musik",live:"Live",about:"Om"},music:{title:"Musik"},live:{title:"Live",empty:"Inga gigs fr tillfllet",moreSoon:"Fler datum slpps lpande  flj oss i sociala kanaler.",bookUs:"Vill du boka oss?"},pastGigs:{title:"Tidigare spelningar"},info:{title:"Om",p1:"Med starka melodier och svngiga rytmer rr sig Malm-trion Totes lekfullt men sjlvskert mellan rock, funk, blues och jazz.",p2:"Bandet bestr av Svante Berg, Hannes Linnr och Gabriel Fager Ferrari, som sedan 2023 har spelat sina medryckande popltar med ett gemensamt ml: att sprida gldje och uppmuntra till dans. Med stilsker gitarr, mullrande bas och trummor med precis rtt tempo, bjuder Totes ven p vacker stmsng och en skopa sexig saxofon."},common:{orSocials:" eller skriv p ngon socialmedia!"},lang:{change:"Byt sprk",english:"English",swedish:"Svenska"}}}};Fi.use(Cj).init({resources:hle,lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}});pT.createRoot(document.getElementById("root")).render(q.jsx(dle,{children:q.jsx(ele,{})}));
